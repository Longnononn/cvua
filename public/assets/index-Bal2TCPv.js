function tE(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function Zw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gh={exports:{}},el={},mh={exports:{}},at={};var Ey;function rE(){if(Ey)return at;Ey=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(A){return A===null||typeof A!="object"?null:(A=v&&A[v]||A["@@iterator"],typeof A=="function"?A:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function E(A,J,Ne){this.props=A,this.context=J,this.refs=_,this.updater=Ne||x}E.prototype.isReactComponent={},E.prototype.setState=function(A,J){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,J,"setState")},E.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function C(){}C.prototype=E.prototype;function T(A,J,Ne){this.props=A,this.context=J,this.refs=_,this.updater=Ne||x}var O=T.prototype=new C;O.constructor=T,S(O,E.prototype),O.isPureReactComponent=!0;var R=Array.isArray,F=Object.prototype.hasOwnProperty,B={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function X(A,J,Ne){var ye,$e={},We=null,Ke=null;if(J!=null)for(ye in J.ref!==void 0&&(Ke=J.ref),J.key!==void 0&&(We=""+J.key),J)F.call(J,ye)&&!M.hasOwnProperty(ye)&&($e[ye]=J[ye]);var Xe=arguments.length-2;if(Xe===1)$e.children=Ne;else if(1<Xe){for(var Be=Array(Xe),Nt=0;Nt<Xe;Nt++)Be[Nt]=arguments[Nt+2];$e.children=Be}if(A&&A.defaultProps)for(ye in Xe=A.defaultProps,Xe)$e[ye]===void 0&&($e[ye]=Xe[ye]);return{$$typeof:t,type:A,key:We,ref:Ke,props:$e,_owner:B.current}}function V(A,J){return{$$typeof:t,type:A.type,key:J,ref:A.ref,props:A.props,_owner:A._owner}}function W(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function te(A){var J={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(Ne){return J[Ne]})}var Y=/\/+/g;function re(A,J){return typeof A=="object"&&A!==null&&A.key!=null?te(""+A.key):J.toString(36)}function Z(A,J,Ne,ye,$e){var We=typeof A;(We==="undefined"||We==="boolean")&&(A=null);var Ke=!1;if(A===null)Ke=!0;else switch(We){case"string":case"number":Ke=!0;break;case"object":switch(A.$$typeof){case t:case e:Ke=!0}}if(Ke)return Ke=A,$e=$e(Ke),A=ye===""?"."+re(Ke,0):ye,R($e)?(Ne="",A!=null&&(Ne=A.replace(Y,"$&/")+"/"),Z($e,J,Ne,"",function(Nt){return Nt})):$e!=null&&(W($e)&&($e=V($e,Ne+(!$e.key||Ke&&Ke.key===$e.key?"":(""+$e.key).replace(Y,"$&/")+"/")+A)),J.push($e)),1;if(Ke=0,ye=ye===""?".":ye+":",R(A))for(var Xe=0;Xe<A.length;Xe++){We=A[Xe];var Be=ye+re(We,Xe);Ke+=Z(We,J,Ne,Be,$e)}else if(Be=y(A),typeof Be=="function")for(A=Be.call(A),Xe=0;!(We=A.next()).done;)We=We.value,Be=ye+re(We,Xe++),Ke+=Z(We,J,Ne,Be,$e);else if(We==="object")throw J=String(A),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Ke}function Te(A,J,Ne){if(A==null)return A;var ye=[],$e=0;return Z(A,ye,"","",function(We){return J.call(Ne,We,$e++)}),ye}function de(A){if(A._status===-1){var J=A._result;J=J(),J.then(function(Ne){(A._status===0||A._status===-1)&&(A._status=1,A._result=Ne)},function(Ne){(A._status===0||A._status===-1)&&(A._status=2,A._result=Ne)}),A._status===-1&&(A._status=0,A._result=J)}if(A._status===1)return A._result.default;throw A._result}var ke={current:null},H={transition:null},le={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:H,ReactCurrentOwner:B};function ce(){throw Error("act(...) is not supported in production builds of React.")}return at.Children={map:Te,forEach:function(A,J,Ne){Te(A,function(){J.apply(this,arguments)},Ne)},count:function(A){var J=0;return Te(A,function(){J++}),J},toArray:function(A){return Te(A,function(J){return J})||[]},only:function(A){if(!W(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},at.Component=E,at.Fragment=r,at.Profiler=i,at.PureComponent=T,at.StrictMode=n,at.Suspense=d,at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,at.act=ce,at.cloneElement=function(A,J,Ne){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var ye=S({},A.props),$e=A.key,We=A.ref,Ke=A._owner;if(J!=null){if(J.ref!==void 0&&(We=J.ref,Ke=B.current),J.key!==void 0&&($e=""+J.key),A.type&&A.type.defaultProps)var Xe=A.type.defaultProps;for(Be in J)F.call(J,Be)&&!M.hasOwnProperty(Be)&&(ye[Be]=J[Be]===void 0&&Xe!==void 0?Xe[Be]:J[Be])}var Be=arguments.length-2;if(Be===1)ye.children=Ne;else if(1<Be){Xe=Array(Be);for(var Nt=0;Nt<Be;Nt++)Xe[Nt]=arguments[Nt+2];ye.children=Xe}return{$$typeof:t,type:A.type,key:$e,ref:We,props:ye,_owner:Ke}},at.createContext=function(A){return A={$$typeof:l,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:a,_context:A},A.Consumer=A},at.createElement=X,at.createFactory=function(A){var J=X.bind(null,A);return J.type=A,J},at.createRef=function(){return{current:null}},at.forwardRef=function(A){return{$$typeof:u,render:A}},at.isValidElement=W,at.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:de}},at.memo=function(A,J){return{$$typeof:h,type:A,compare:J===void 0?null:J}},at.startTransition=function(A){var J=H.transition;H.transition={};try{A()}finally{H.transition=J}},at.unstable_act=ce,at.useCallback=function(A,J){return ke.current.useCallback(A,J)},at.useContext=function(A){return ke.current.useContext(A)},at.useDebugValue=function(){},at.useDeferredValue=function(A){return ke.current.useDeferredValue(A)},at.useEffect=function(A,J){return ke.current.useEffect(A,J)},at.useId=function(){return ke.current.useId()},at.useImperativeHandle=function(A,J,Ne){return ke.current.useImperativeHandle(A,J,Ne)},at.useInsertionEffect=function(A,J){return ke.current.useInsertionEffect(A,J)},at.useLayoutEffect=function(A,J){return ke.current.useLayoutEffect(A,J)},at.useMemo=function(A,J){return ke.current.useMemo(A,J)},at.useReducer=function(A,J,Ne){return ke.current.useReducer(A,J,Ne)},at.useRef=function(A){return ke.current.useRef(A)},at.useState=function(A){return ke.current.useState(A)},at.useSyncExternalStore=function(A,J,Ne){return ke.current.useSyncExternalStore(A,J,Ne)},at.useTransition=function(){return ke.current.useTransition()},at.version="18.3.1",at}var Ty;function nd(){return Ty||(Ty=1,mh.exports=rE()),mh.exports}var Cy;function nE(){if(Cy)return el;Cy=1;var t=nd(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,h){var g,v={},y=null,x=null;h!==void 0&&(y=""+h),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(g in d)n.call(d,g)&&!a.hasOwnProperty(g)&&(v[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:u,key:y,ref:x,props:v,_owner:i.current}}return el.Fragment=r,el.jsx=l,el.jsxs=l,el}var Oy;function sE(){return Oy||(Oy=1,gh.exports=nE()),gh.exports}var p=sE(),su={},vh={exports:{}},cn={},yh={exports:{}},wh={};var Py;function iE(){return Py||(Py=1,(function(t){function e(H,le){var ce=H.length;H.push(le);e:for(;0<ce;){var A=ce-1>>>1,J=H[A];if(0<i(J,le))H[A]=le,H[ce]=J,ce=A;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var le=H[0],ce=H.pop();if(ce!==le){H[0]=ce;e:for(var A=0,J=H.length,Ne=J>>>1;A<Ne;){var ye=2*(A+1)-1,$e=H[ye],We=ye+1,Ke=H[We];if(0>i($e,ce))We<J&&0>i(Ke,$e)?(H[A]=Ke,H[We]=ce,A=We):(H[A]=$e,H[ye]=ce,A=ye);else if(We<J&&0>i(Ke,ce))H[A]=Ke,H[We]=ce,A=We;else break e}}return le}function i(H,le){var ce=H.sortIndex-le.sortIndex;return ce!==0?ce:H.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],h=[],g=1,v=null,y=3,x=!1,S=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(H){for(var le=r(h);le!==null;){if(le.callback===null)n(h);else if(le.startTime<=H)n(h),le.sortIndex=le.expirationTime,e(d,le);else break;le=r(h)}}function R(H){if(_=!1,O(H),!S)if(r(d)!==null)S=!0,de(F);else{var le=r(h);le!==null&&ke(R,le.startTime-H)}}function F(H,le){S=!1,_&&(_=!1,C(X),X=-1),x=!0;var ce=y;try{for(O(le),v=r(d);v!==null&&(!(v.expirationTime>le)||H&&!te());){var A=v.callback;if(typeof A=="function"){v.callback=null,y=v.priorityLevel;var J=A(v.expirationTime<=le);le=t.unstable_now(),typeof J=="function"?v.callback=J:v===r(d)&&n(d),O(le)}else n(d);v=r(d)}if(v!==null)var Ne=!0;else{var ye=r(h);ye!==null&&ke(R,ye.startTime-le),Ne=!1}return Ne}finally{v=null,y=ce,x=!1}}var B=!1,M=null,X=-1,V=5,W=-1;function te(){return!(t.unstable_now()-W<V)}function Y(){if(M!==null){var H=t.unstable_now();W=H;var le=!0;try{le=M(!0,H)}finally{le?re():(B=!1,M=null)}}else B=!1}var re;if(typeof T=="function")re=function(){T(Y)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,Te=Z.port2;Z.port1.onmessage=Y,re=function(){Te.postMessage(null)}}else re=function(){E(Y,0)};function de(H){M=H,B||(B=!0,re())}function ke(H,le){X=E(function(){H(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){S||x||(S=!0,de(F))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var le=3;break;default:le=y}var ce=y;y=le;try{return H()}finally{y=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,le){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ce=y;y=H;try{return le()}finally{y=ce}},t.unstable_scheduleCallback=function(H,le,ce){var A=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?A+ce:A):ce=A,H){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ce+J,H={id:g++,callback:le,priorityLevel:H,startTime:ce,expirationTime:J,sortIndex:-1},ce>A?(H.sortIndex=ce,e(h,H),r(d)===null&&H===r(h)&&(_?(C(X),X=-1):_=!0,ke(R,ce-A))):(H.sortIndex=J,e(d,H),S||x||(S=!0,de(F))),H},t.unstable_shouldYield=te,t.unstable_wrapCallback=function(H){var le=y;return function(){var ce=y;y=le;try{return H.apply(this,arguments)}finally{y=ce}}}})(wh)),wh}var Ny;function oE(){return Ny||(Ny=1,yh.exports=iE()),yh.exports}var jy;function aE(){if(jy)return cn;jy=1;var t=nd(),e=oE();function r(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)n.add(o[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function y(s){return d.call(v,s)?!0:d.call(g,s)?!1:h.test(s)?v[s]=!0:(g[s]=!0,!1)}function x(s,o,c,f){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,o,c,f){if(o===null||typeof o>"u"||x(s,o,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function _(s,o,c,f,m,w,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=s,this.type=o,this.sanitizeURL=w,this.removeEmptyString=k}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new _(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];E[o]=new _(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new _(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new _(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new _(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new _(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new _(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new _(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new _(s,5,!1,s.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function T(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(C,T);E[o]=new _(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(C,T);E[o]=new _(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(C,T);E[o]=new _(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new _(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new _(s,1,!1,s.toLowerCase(),null,!0,!0)});function O(s,o,c,f){var m=E.hasOwnProperty(o)?E[o]:null;(m!==null?m.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,c,m,f)&&(c=null),f||m===null?y(o)&&(c===null?s.removeAttribute(o):s.setAttribute(o,""+c)):m.mustUseProperty?s[m.propertyName]=c===null?m.type===3?!1:"":c:(o=m.attributeName,f=m.attributeNamespace,c===null?s.removeAttribute(o):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,f?s.setAttributeNS(f,o,c):s.setAttribute(o,c))))}var R=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),B=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),te=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),H=Symbol.iterator;function le(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var ce=Object.assign,A;function J(s){if(A===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);A=o&&o[1]||""}return`
`+A+s}var Ne=!1;function ye(s,o){if(!s||Ne)return"";Ne=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(q){var f=q}Reflect.construct(s,[],o)}else{try{o.call()}catch(q){f=q}s.call(o.prototype)}else{try{throw Error()}catch(q){f=q}s()}}catch(q){if(q&&f&&typeof q.stack=="string"){for(var m=q.stack.split(`
`),w=f.stack.split(`
`),k=m.length-1,P=w.length-1;1<=k&&0<=P&&m[k]!==w[P];)P--;for(;1<=k&&0<=P;k--,P--)if(m[k]!==w[P]){if(k!==1||P!==1)do if(k--,P--,0>P||m[k]!==w[P]){var j=`
`+m[k].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=k&&0<=P);break}}}finally{Ne=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?J(s):""}function $e(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=ye(s.type,!1),s;case 11:return s=ye(s.type.render,!1),s;case 1:return s=ye(s.type,!0),s;default:return""}}function We(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case B:return"Portal";case V:return"Profiler";case X:return"StrictMode";case re:return"Suspense";case Z:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case te:return(s.displayName||"Context")+".Consumer";case W:return(s._context.displayName||"Context")+".Provider";case Y:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Te:return o=s.displayName||null,o!==null?o:We(s.type)||"Memo";case de:o=s._payload,s=s._init;try{return We(s(o))}catch{}}return null}function Ke(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(o);case 8:return o===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Xe(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Be(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Nt(s){var o=Be(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,w=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(k){f=""+k,w.call(this,k)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Tr(s){s._valueTracker||(s._valueTracker=Nt(s))}function Zr(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return s&&(f=Be(s)?s.checked?"true":"false":s.value),s=f,s!==c?(o.setValue(s),!0):!1}function Ft(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function sr(s,o){var c=o.checked;return ce({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function ht(s,o){var c=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;c=Xe(o.value!=null?o.value:c),s._wrapperState={initialChecked:f,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Jr(s,o){o=o.checked,o!=null&&O(s,"checked",o,!1)}function Xr(s,o){Jr(s,o);var c=Xe(o.value),f=o.type;if(c!=null)f==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?un(s,o.type,c):o.hasOwnProperty("defaultValue")&&un(s,o.type,Xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Tn(s,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,c||o===s.value||(s.value=o),s.defaultValue=o}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function un(s,o,c){(o!=="number"||Ft(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var en=Array.isArray;function pe(s,o,c,f){if(s=s.options,o){o={};for(var m=0;m<c.length;m++)o["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=o.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&f&&(s[c].defaultSelected=!0)}else{for(c=""+Xe(c),o=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function N(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(r(91));return ce({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function $(s,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(r(92));if(en(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),c=o}s._wrapperState={initialValue:Xe(c)}}function Q(s,o){var c=Xe(o.value),f=Xe(o.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),o.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),f!=null&&(s.defaultValue=""+f)}function we(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function me(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ae(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?me(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var xe,Ze=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,f,m){MSApp.execUnsafeLocalFunction(function(){return s(o,c,f,m)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(xe=xe||document.createElement("div"),xe.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=xe.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function mt(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Un=["Webkit","ms","Moz","O"];Object.keys(xt).forEach(function(s){Un.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),xt[o]=xt[s]})});function Cn(s,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||xt.hasOwnProperty(s)&&xt[s]?(""+o).trim():o+"px"}function tn(s,o){s=s.style;for(var c in o)if(o.hasOwnProperty(c)){var f=c.indexOf("--")===0,m=Cn(c,o[c],f);c==="float"&&(c="cssFloat"),f?s.setProperty(c,m):s[c]=m}}var yr=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wr(s,o){if(o){if(yr[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(r(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(r(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(r(61))}if(o.style!=null&&typeof o.style!="object")throw Error(r(62))}}function rn(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cr=null;function vt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var qr=null,dn=null,Me=null;function Pt(s){if(s=Fa(s)){if(typeof qr!="function")throw Error(r(280));var o=s.stateNode;o&&(o=wc(o),qr(s.stateNode,s.type,o))}}function Ct(s){dn?Me?Me.push(s):Me=[s]:dn=s}function Kt(){if(dn){var s=dn,o=Me;if(Me=dn=null,Pt(s),o)for(s=0;s<o.length;s++)Pt(o[s])}}function ir(s,o){return s(o)}function Jt(){}var jt=!1;function z(s,o,c){if(jt)return s(o,c);jt=!0;try{return ir(s,o,c)}finally{jt=!1,(dn!==null||Me!==null)&&(Jt(),Kt())}}function or(s,o){var c=s.stateNode;if(c===null)return null;var f=wc(c);if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var yt=!1;if(u)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){yt=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{yt=!1}function he(s,o,c,f,m,w,k,P,j){var q=Array.prototype.slice.call(arguments,3);try{o.apply(c,q)}catch(ie){this.onError(ie)}}var Xt=!1,_t=null,oe=!1,ee=null,Se={onError:function(s){Xt=!0,_t=s}};function ze(s,o,c,f,m,w,k,P,j){Xt=!1,_t=null,he.apply(Se,arguments)}function ot(s,o,c,f,m,w,k,P,j){if(ze.apply(this,arguments),Xt){if(Xt){var q=_t;Xt=!1,_t=null}else throw Error(r(198));oe||(oe=!0,ee=q)}}function ve(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function Rt(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Gt(s){if(ve(s)!==s)throw Error(r(188))}function Or(s){var o=s.alternate;if(!o){if(o=ve(s),o===null)throw Error(r(188));return o!==s?null:s}for(var c=s,f=o;;){var m=c.return;if(m===null)break;var w=m.alternate;if(w===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===c)return Gt(m),s;if(w===f)return Gt(m),o;w=w.sibling}throw Error(r(188))}if(c.return!==f.return)c=m,f=w;else{for(var k=!1,P=m.child;P;){if(P===c){k=!0,c=m,f=w;break}if(P===f){k=!0,f=m,c=w;break}P=P.sibling}if(!k){for(P=w.child;P;){if(P===c){k=!0,c=w,f=m;break}if(P===f){k=!0,f=w,c=m;break}P=P.sibling}if(!k)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:o}function Ut(s){return s=Or(s),s!==null?Bn(s):null}function Bn(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Bn(s);if(o!==null)return o;s=s.sibling}return null}var Ri=e.unstable_scheduleCallback,Pr=e.unstable_cancelCallback,zn=e.unstable_shouldYield,rc=e.unstable_requestPaint,Bt=e.unstable_now,Ad=e.unstable_getCurrentPriorityLevel,ba=e.unstable_ImmediatePriority,xa=e.unstable_UserBlockingPriority,Hs=e.unstable_NormalPriority,Id=e.unstable_LowPriority,nc=e.unstable_IdlePriority,Ai=null,On=null;function Nr(s){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Ai,s,void 0,(s.current.flags&128)===128)}catch{}}var D=Math.clz32?Math.clz32:Le,K=Math.log,G=Math.LN2;function Le(s){return s>>>=0,s===0?32:31-(K(s)/G|0)|0}var De=64,dt=4194304;function fn(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ks(s,o){var c=s.pendingLanes;if(c===0)return 0;var f=0,m=s.suspendedLanes,w=s.pingedLanes,k=c&268435455;if(k!==0){var P=k&~m;P!==0?f=fn(P):(w&=k,w!==0&&(f=fn(w)))}else k=c&~m,k!==0?f=fn(k):w!==0&&(f=fn(w));if(f===0)return 0;if(o!==0&&o!==f&&(o&m)===0&&(m=f&-f,w=o&-o,m>=w||m===16&&(w&4194240)!==0))return o;if((f&4)!==0&&(f|=c&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)c=31-D(o),m=1<<c,f|=s[c],o&=~m;return f}function bS(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xS(s,o){for(var c=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,w=s.pendingLanes;0<w;){var k=31-D(w),P=1<<k,j=m[k];j===-1?((P&c)===0||(P&f)!==0)&&(m[k]=bS(P,o)):j<=o&&(s.expiredLanes|=P),w&=~P}}function Dd(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function rm(){var s=De;return De<<=1,(De&4194240)===0&&(De=64),s}function Ld(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function _a(s,o,c){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-D(o),s[o]=c}function _S(s,o){var c=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-D(c),w=1<<m;o[m]=0,f[m]=-1,s[m]=-1,c&=~w}}function Md(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var f=31-D(c),m=1<<f;m&o|s[f]&o&&(s[f]|=o),c&=~m}}var kt=0;function nm(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var sm,$d,im,om,am,Fd=!1,sc=[],Ks=null,Gs=null,Qs=null,Sa=new Map,ka=new Map,Ys=[],SS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lm(s,o){switch(s){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Sa.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(o.pointerId)}}function Ea(s,o,c,f,m,w){return s===null||s.nativeEvent!==w?(s={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:w,targetContainers:[m]},o!==null&&(o=Fa(o),o!==null&&$d(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function kS(s,o,c,f,m){switch(o){case"focusin":return Ks=Ea(Ks,s,o,c,f,m),!0;case"dragenter":return Gs=Ea(Gs,s,o,c,f,m),!0;case"mouseover":return Qs=Ea(Qs,s,o,c,f,m),!0;case"pointerover":var w=m.pointerId;return Sa.set(w,Ea(Sa.get(w)||null,s,o,c,f,m)),!0;case"gotpointercapture":return w=m.pointerId,ka.set(w,Ea(ka.get(w)||null,s,o,c,f,m)),!0}return!1}function cm(s){var o=Ii(s.target);if(o!==null){var c=ve(o);if(c!==null){if(o=c.tag,o===13){if(o=Rt(c),o!==null){s.blockedOn=o,am(s.priority,function(){im(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ic(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=Bd(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);Cr=f,c.target.dispatchEvent(f),Cr=null}else return o=Fa(c),o!==null&&$d(o),s.blockedOn=c,!1;o.shift()}return!0}function um(s,o,c){ic(s)&&c.delete(o)}function ES(){Fd=!1,Ks!==null&&ic(Ks)&&(Ks=null),Gs!==null&&ic(Gs)&&(Gs=null),Qs!==null&&ic(Qs)&&(Qs=null),Sa.forEach(um),ka.forEach(um)}function Ta(s,o){s.blockedOn===o&&(s.blockedOn=null,Fd||(Fd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ES)))}function Ca(s){function o(m){return Ta(m,s)}if(0<sc.length){Ta(sc[0],s);for(var c=1;c<sc.length;c++){var f=sc[c];f.blockedOn===s&&(f.blockedOn=null)}}for(Ks!==null&&Ta(Ks,s),Gs!==null&&Ta(Gs,s),Qs!==null&&Ta(Qs,s),Sa.forEach(o),ka.forEach(o),c=0;c<Ys.length;c++)f=Ys[c],f.blockedOn===s&&(f.blockedOn=null);for(;0<Ys.length&&(c=Ys[0],c.blockedOn===null);)cm(c),c.blockedOn===null&&Ys.shift()}var vo=R.ReactCurrentBatchConfig,oc=!0;function TS(s,o,c,f){var m=kt,w=vo.transition;vo.transition=null;try{kt=1,Ud(s,o,c,f)}finally{kt=m,vo.transition=w}}function CS(s,o,c,f){var m=kt,w=vo.transition;vo.transition=null;try{kt=4,Ud(s,o,c,f)}finally{kt=m,vo.transition=w}}function Ud(s,o,c,f){if(oc){var m=Bd(s,o,c,f);if(m===null)sf(s,o,f,ac,c),lm(s,f);else if(kS(m,s,o,c,f))f.stopPropagation();else if(lm(s,f),o&4&&-1<SS.indexOf(s)){for(;m!==null;){var w=Fa(m);if(w!==null&&sm(w),w=Bd(s,o,c,f),w===null&&sf(s,o,f,ac,c),w===m)break;m=w}m!==null&&f.stopPropagation()}else sf(s,o,f,null,c)}}var ac=null;function Bd(s,o,c,f){if(ac=null,s=vt(f),s=Ii(s),s!==null)if(o=ve(s),o===null)s=null;else if(c=o.tag,c===13){if(s=Rt(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return ac=s,null}function dm(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ad()){case ba:return 1;case xa:return 4;case Hs:case Id:return 16;case nc:return 536870912;default:return 16}default:return 16}}var Zs=null,zd=null,lc=null;function fm(){if(lc)return lc;var s,o=zd,c=o.length,f,m="value"in Zs?Zs.value:Zs.textContent,w=m.length;for(s=0;s<c&&o[s]===m[s];s++);var k=c-s;for(f=1;f<=k&&o[c-f]===m[w-f];f++);return lc=m.slice(s,1<f?1-f:void 0)}function cc(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function uc(){return!0}function hm(){return!1}function hn(s){function o(c,f,m,w,k){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=w,this.target=k,this.currentTarget=null;for(var P in s)s.hasOwnProperty(P)&&(c=s[P],this[P]=c?c(w):w[P]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?uc:hm,this.isPropagationStopped=hm,this}return ce(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=uc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=uc)},persist:function(){},isPersistent:uc}),o}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vd=hn(yo),Oa=ce({},yo,{view:0,detail:0}),OS=hn(Oa),qd,Wd,Pa,dc=ce({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Pa&&(Pa&&s.type==="mousemove"?(qd=s.screenX-Pa.screenX,Wd=s.screenY-Pa.screenY):Wd=qd=0,Pa=s),qd)},movementY:function(s){return"movementY"in s?s.movementY:Wd}}),pm=hn(dc),PS=ce({},dc,{dataTransfer:0}),NS=hn(PS),jS=ce({},Oa,{relatedTarget:0}),Hd=hn(jS),RS=ce({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),AS=hn(RS),IS=ce({},yo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),DS=hn(IS),LS=ce({},yo,{data:0}),gm=hn(LS),MS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$S={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function US(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=FS[s])?!!o[s]:!1}function Kd(){return US}var BS=ce({},Oa,{key:function(s){if(s.key){var o=MS[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=cc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?$S[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kd,charCode:function(s){return s.type==="keypress"?cc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?cc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),zS=hn(BS),VS=ce({},dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mm=hn(VS),qS=ce({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kd}),WS=hn(qS),HS=ce({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),KS=hn(HS),GS=ce({},dc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),QS=hn(GS),YS=[9,13,27,32],Gd=u&&"CompositionEvent"in window,Na=null;u&&"documentMode"in document&&(Na=document.documentMode);var ZS=u&&"TextEvent"in window&&!Na,vm=u&&(!Gd||Na&&8<Na&&11>=Na),ym=" ",wm=!1;function bm(s,o){switch(s){case"keyup":return YS.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var wo=!1;function JS(s,o){switch(s){case"compositionend":return xm(o);case"keypress":return o.which!==32?null:(wm=!0,ym);case"textInput":return s=o.data,s===ym&&wm?null:s;default:return null}}function XS(s,o){if(wo)return s==="compositionend"||!Gd&&bm(s,o)?(s=fm(),lc=zd=Zs=null,wo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return vm&&o.locale!=="ko"?null:o.data;default:return null}}var ek={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _m(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!ek[s.type]:o==="textarea"}function Sm(s,o,c,f){Ct(f),o=mc(o,"onChange"),0<o.length&&(c=new Vd("onChange","change",null,c,f),s.push({event:c,listeners:o}))}var ja=null,Ra=null;function tk(s){Bm(s,0)}function fc(s){var o=ko(s);if(Zr(o))return s}function rk(s,o){if(s==="change")return o}var km=!1;if(u){var Qd;if(u){var Yd="oninput"in document;if(!Yd){var Em=document.createElement("div");Em.setAttribute("oninput","return;"),Yd=typeof Em.oninput=="function"}Qd=Yd}else Qd=!1;km=Qd&&(!document.documentMode||9<document.documentMode)}function Tm(){ja&&(ja.detachEvent("onpropertychange",Cm),Ra=ja=null)}function Cm(s){if(s.propertyName==="value"&&fc(Ra)){var o=[];Sm(o,Ra,s,vt(s)),z(tk,o)}}function nk(s,o,c){s==="focusin"?(Tm(),ja=o,Ra=c,ja.attachEvent("onpropertychange",Cm)):s==="focusout"&&Tm()}function sk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return fc(Ra)}function ik(s,o){if(s==="click")return fc(o)}function ok(s,o){if(s==="input"||s==="change")return fc(o)}function ak(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Vn=typeof Object.is=="function"?Object.is:ak;function Aa(s,o){if(Vn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!d.call(o,m)||!Vn(s[m],o[m]))return!1}return!0}function Om(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Pm(s,o){var c=Om(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=o&&f>=o)return{node:c,offset:o-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Om(c)}}function Nm(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Nm(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function jm(){for(var s=window,o=Ft();o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)s=o.contentWindow;else break;o=Ft(s.document)}return o}function Zd(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function lk(s){var o=jm(),c=s.focusedElem,f=s.selectionRange;if(o!==c&&c&&c.ownerDocument&&Nm(c.ownerDocument.documentElement,c)){if(f!==null&&Zd(c)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(s,c.value.length);else if(s=(o=c.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=c.textContent.length,w=Math.min(f.start,m);f=f.end===void 0?w:Math.min(f.end,m),!s.extend&&w>f&&(m=f,f=w,w=m),m=Pm(c,w);var k=Pm(c,f);m&&k&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==k.node||s.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),w>f?(s.addRange(o),s.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),s.addRange(o)))}}for(o=[],s=c;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)s=o[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var ck=u&&"documentMode"in document&&11>=document.documentMode,bo=null,Jd=null,Ia=null,Xd=!1;function Rm(s,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Xd||bo==null||bo!==Ft(f)||(f=bo,"selectionStart"in f&&Zd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ia&&Aa(Ia,f)||(Ia=f,f=mc(Jd,"onSelect"),0<f.length&&(o=new Vd("onSelect","select",null,o,c),s.push({event:o,listeners:f}),o.target=bo)))}function hc(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var xo={animationend:hc("Animation","AnimationEnd"),animationiteration:hc("Animation","AnimationIteration"),animationstart:hc("Animation","AnimationStart"),transitionend:hc("Transition","TransitionEnd")},ef={},Am={};u&&(Am=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function pc(s){if(ef[s])return ef[s];if(!xo[s])return s;var o=xo[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in Am)return ef[s]=o[c];return s}var Im=pc("animationend"),Dm=pc("animationiteration"),Lm=pc("animationstart"),Mm=pc("transitionend"),$m=new Map,Fm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(s,o){$m.set(s,o),a(o,[s])}for(var tf=0;tf<Fm.length;tf++){var rf=Fm[tf],uk=rf.toLowerCase(),dk=rf[0].toUpperCase()+rf.slice(1);Js(uk,"on"+dk)}Js(Im,"onAnimationEnd"),Js(Dm,"onAnimationIteration"),Js(Lm,"onAnimationStart"),Js("dblclick","onDoubleClick"),Js("focusin","onFocus"),Js("focusout","onBlur"),Js(Mm,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Da));function Um(s,o,c){var f=s.type||"unknown-event";s.currentTarget=c,ot(f,o,void 0,s),s.currentTarget=null}function Bm(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],m=f.event;f=f.listeners;e:{var w=void 0;if(o)for(var k=f.length-1;0<=k;k--){var P=f[k],j=P.instance,q=P.currentTarget;if(P=P.listener,j!==w&&m.isPropagationStopped())break e;Um(m,P,q),w=j}else for(k=0;k<f.length;k++){if(P=f[k],j=P.instance,q=P.currentTarget,P=P.listener,j!==w&&m.isPropagationStopped())break e;Um(m,P,q),w=j}}}if(oe)throw s=ee,oe=!1,ee=null,s}function Dt(s,o){var c=o[df];c===void 0&&(c=o[df]=new Set);var f=s+"__bubble";c.has(f)||(zm(o,s,2,!1),c.add(f))}function nf(s,o,c){var f=0;o&&(f|=4),zm(c,s,f,o)}var gc="_reactListening"+Math.random().toString(36).slice(2);function La(s){if(!s[gc]){s[gc]=!0,n.forEach(function(c){c!=="selectionchange"&&(fk.has(c)||nf(c,!1,s),nf(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[gc]||(o[gc]=!0,nf("selectionchange",!1,o))}}function zm(s,o,c,f){switch(dm(o)){case 1:var m=TS;break;case 4:m=CS;break;default:m=Ud}c=m.bind(null,o,c,s),m=void 0,!yt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(o,c,{capture:!0,passive:m}):s.addEventListener(o,c,!0):m!==void 0?s.addEventListener(o,c,{passive:m}):s.addEventListener(o,c,!1)}function sf(s,o,c,f,m){var w=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var P=f.stateNode.containerInfo;if(P===m||P.nodeType===8&&P.parentNode===m)break;if(k===4)for(k=f.return;k!==null;){var j=k.tag;if((j===3||j===4)&&(j=k.stateNode.containerInfo,j===m||j.nodeType===8&&j.parentNode===m))return;k=k.return}for(;P!==null;){if(k=Ii(P),k===null)return;if(j=k.tag,j===5||j===6){f=w=k;continue e}P=P.parentNode}}f=f.return}z(function(){var q=w,ie=vt(c),ue=[];e:{var ne=$m.get(s);if(ne!==void 0){var Ee=Vd,Pe=s;switch(s){case"keypress":if(cc(c)===0)break e;case"keydown":case"keyup":Ee=zS;break;case"focusin":Pe="focus",Ee=Hd;break;case"focusout":Pe="blur",Ee=Hd;break;case"beforeblur":case"afterblur":Ee=Hd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=NS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=WS;break;case Im:case Dm:case Lm:Ee=AS;break;case Mm:Ee=KS;break;case"scroll":Ee=OS;break;case"wheel":Ee=QS;break;case"copy":case"cut":case"paste":Ee=DS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=mm}var je=(o&4)!==0,er=!je&&s==="scroll",L=je?ne!==null?ne+"Capture":null:ne;je=[];for(var I=q,U;I!==null;){U=I;var ge=U.stateNode;if(U.tag===5&&ge!==null&&(U=ge,L!==null&&(ge=or(I,L),ge!=null&&je.push(Ma(I,ge,U)))),er)break;I=I.return}0<je.length&&(ne=new Ee(ne,Pe,null,c,ie),ue.push({event:ne,listeners:je}))}}if((o&7)===0){e:{if(ne=s==="mouseover"||s==="pointerover",Ee=s==="mouseout"||s==="pointerout",ne&&c!==Cr&&(Pe=c.relatedTarget||c.fromElement)&&(Ii(Pe)||Pe[Es]))break e;if((Ee||ne)&&(ne=ie.window===ie?ie:(ne=ie.ownerDocument)?ne.defaultView||ne.parentWindow:window,Ee?(Pe=c.relatedTarget||c.toElement,Ee=q,Pe=Pe?Ii(Pe):null,Pe!==null&&(er=ve(Pe),Pe!==er||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(Ee=null,Pe=q),Ee!==Pe)){if(je=pm,ge="onMouseLeave",L="onMouseEnter",I="mouse",(s==="pointerout"||s==="pointerover")&&(je=mm,ge="onPointerLeave",L="onPointerEnter",I="pointer"),er=Ee==null?ne:ko(Ee),U=Pe==null?ne:ko(Pe),ne=new je(ge,I+"leave",Ee,c,ie),ne.target=er,ne.relatedTarget=U,ge=null,Ii(ie)===q&&(je=new je(L,I+"enter",Pe,c,ie),je.target=U,je.relatedTarget=er,ge=je),er=ge,Ee&&Pe)t:{for(je=Ee,L=Pe,I=0,U=je;U;U=_o(U))I++;for(U=0,ge=L;ge;ge=_o(ge))U++;for(;0<I-U;)je=_o(je),I--;for(;0<U-I;)L=_o(L),U--;for(;I--;){if(je===L||L!==null&&je===L.alternate)break t;je=_o(je),L=_o(L)}je=null}else je=null;Ee!==null&&Vm(ue,ne,Ee,je,!1),Pe!==null&&er!==null&&Vm(ue,er,Pe,je,!0)}}e:{if(ne=q?ko(q):window,Ee=ne.nodeName&&ne.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&ne.type==="file")var Re=rk;else if(_m(ne))if(km)Re=ok;else{Re=sk;var Fe=nk}else(Ee=ne.nodeName)&&Ee.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Re=ik);if(Re&&(Re=Re(s,q))){Sm(ue,Re,c,ie);break e}Fe&&Fe(s,ne,q),s==="focusout"&&(Fe=ne._wrapperState)&&Fe.controlled&&ne.type==="number"&&un(ne,"number",ne.value)}switch(Fe=q?ko(q):window,s){case"focusin":(_m(Fe)||Fe.contentEditable==="true")&&(bo=Fe,Jd=q,Ia=null);break;case"focusout":Ia=Jd=bo=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,Rm(ue,c,ie);break;case"selectionchange":if(ck)break;case"keydown":case"keyup":Rm(ue,c,ie)}var Ue;if(Gd)e:{switch(s){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else wo?bm(s,c)&&(Ye="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ye="onCompositionStart");Ye&&(vm&&c.locale!=="ko"&&(wo||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&wo&&(Ue=fm()):(Zs=ie,zd="value"in Zs?Zs.value:Zs.textContent,wo=!0)),Fe=mc(q,Ye),0<Fe.length&&(Ye=new gm(Ye,s,null,c,ie),ue.push({event:Ye,listeners:Fe}),Ue?Ye.data=Ue:(Ue=xm(c),Ue!==null&&(Ye.data=Ue)))),(Ue=ZS?JS(s,c):XS(s,c))&&(q=mc(q,"onBeforeInput"),0<q.length&&(ie=new gm("onBeforeInput","beforeinput",null,c,ie),ue.push({event:ie,listeners:q}),ie.data=Ue))}Bm(ue,o)})}function Ma(s,o,c){return{instance:s,listener:o,currentTarget:c}}function mc(s,o){for(var c=o+"Capture",f=[];s!==null;){var m=s,w=m.stateNode;m.tag===5&&w!==null&&(m=w,w=or(s,c),w!=null&&f.unshift(Ma(s,w,m)),w=or(s,o),w!=null&&f.push(Ma(s,w,m))),s=s.return}return f}function _o(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Vm(s,o,c,f,m){for(var w=o._reactName,k=[];c!==null&&c!==f;){var P=c,j=P.alternate,q=P.stateNode;if(j!==null&&j===f)break;P.tag===5&&q!==null&&(P=q,m?(j=or(c,w),j!=null&&k.unshift(Ma(c,j,P))):m||(j=or(c,w),j!=null&&k.push(Ma(c,j,P)))),c=c.return}k.length!==0&&s.push({event:o,listeners:k})}var hk=/\r\n?/g,pk=/\u0000|\uFFFD/g;function qm(s){return(typeof s=="string"?s:""+s).replace(hk,`
`).replace(pk,"")}function vc(s,o,c){if(o=qm(o),qm(s)!==o&&c)throw Error(r(425))}function yc(){}var of=null,af=null;function lf(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var cf=typeof setTimeout=="function"?setTimeout:void 0,gk=typeof clearTimeout=="function"?clearTimeout:void 0,Wm=typeof Promise=="function"?Promise:void 0,mk=typeof queueMicrotask=="function"?queueMicrotask:typeof Wm<"u"?function(s){return Wm.resolve(null).then(s).catch(vk)}:cf;function vk(s){setTimeout(function(){throw s})}function uf(s,o){var c=o,f=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){s.removeChild(m),Ca(o);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);Ca(o)}function Xs(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Hm(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return s;o--}else c==="/$"&&o++}s=s.previousSibling}return null}var So=Math.random().toString(36).slice(2),cs="__reactFiber$"+So,$a="__reactProps$"+So,Es="__reactContainer$"+So,df="__reactEvents$"+So,yk="__reactListeners$"+So,wk="__reactHandles$"+So;function Ii(s){var o=s[cs];if(o)return o;for(var c=s.parentNode;c;){if(o=c[Es]||c[cs]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=Hm(s);s!==null;){if(c=s[cs])return c;s=Hm(s)}return o}s=c,c=s.parentNode}return null}function Fa(s){return s=s[cs]||s[Es],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ko(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(r(33))}function wc(s){return s[$a]||null}var ff=[],Eo=-1;function ei(s){return{current:s}}function Lt(s){0>Eo||(s.current=ff[Eo],ff[Eo]=null,Eo--)}function At(s,o){Eo++,ff[Eo]=s.current,s.current=o}var ti={},$r=ei(ti),nn=ei(!1),Di=ti;function To(s,o){var c=s.type.contextTypes;if(!c)return ti;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var m={},w;for(w in c)m[w]=o[w];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function sn(s){return s=s.childContextTypes,s!=null}function bc(){Lt(nn),Lt($r)}function Km(s,o,c){if($r.current!==ti)throw Error(r(168));At($r,o),At(nn,c)}function Gm(s,o,c){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var m in f)if(!(m in o))throw Error(r(108,Ke(s)||"Unknown",m));return ce({},c,f)}function xc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ti,Di=$r.current,At($r,s),At(nn,nn.current),!0}function Qm(s,o,c){var f=s.stateNode;if(!f)throw Error(r(169));c?(s=Gm(s,o,Di),f.__reactInternalMemoizedMergedChildContext=s,Lt(nn),Lt($r),At($r,s)):Lt(nn),At(nn,c)}var Ts=null,_c=!1,hf=!1;function Ym(s){Ts===null?Ts=[s]:Ts.push(s)}function bk(s){_c=!0,Ym(s)}function ri(){if(!hf&&Ts!==null){hf=!0;var s=0,o=kt;try{var c=Ts;for(kt=1;s<c.length;s++){var f=c[s];do f=f(!0);while(f!==null)}Ts=null,_c=!1}catch(m){throw Ts!==null&&(Ts=Ts.slice(s+1)),Ri(ba,ri),m}finally{kt=o,hf=!1}}return null}var Co=[],Oo=0,Sc=null,kc=0,Pn=[],Nn=0,Li=null,Cs=1,Os="";function Mi(s,o){Co[Oo++]=kc,Co[Oo++]=Sc,Sc=s,kc=o}function Zm(s,o,c){Pn[Nn++]=Cs,Pn[Nn++]=Os,Pn[Nn++]=Li,Li=s;var f=Cs;s=Os;var m=32-D(f)-1;f&=~(1<<m),c+=1;var w=32-D(o)+m;if(30<w){var k=m-m%5;w=(f&(1<<k)-1).toString(32),f>>=k,m-=k,Cs=1<<32-D(o)+m|c<<m|f,Os=w+s}else Cs=1<<w|c<<m|f,Os=s}function pf(s){s.return!==null&&(Mi(s,1),Zm(s,1,0))}function gf(s){for(;s===Sc;)Sc=Co[--Oo],Co[Oo]=null,kc=Co[--Oo],Co[Oo]=null;for(;s===Li;)Li=Pn[--Nn],Pn[Nn]=null,Os=Pn[--Nn],Pn[Nn]=null,Cs=Pn[--Nn],Pn[Nn]=null}var pn=null,gn=null,$t=!1,qn=null;function Jm(s,o){var c=In(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=s,o=s.deletions,o===null?(s.deletions=[c],s.flags|=16):o.push(c)}function Xm(s,o){switch(s.tag){case 5:var c=s.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,pn=s,gn=Xs(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,pn=s,gn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=Li!==null?{id:Cs,overflow:Os}:null,s.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=In(18,null,null,0),c.stateNode=o,c.return=s,s.child=c,pn=s,gn=null,!0):!1;default:return!1}}function mf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function vf(s){if($t){var o=gn;if(o){var c=o;if(!Xm(s,o)){if(mf(s))throw Error(r(418));o=Xs(c.nextSibling);var f=pn;o&&Xm(s,o)?Jm(f,c):(s.flags=s.flags&-4097|2,$t=!1,pn=s)}}else{if(mf(s))throw Error(r(418));s.flags=s.flags&-4097|2,$t=!1,pn=s}}}function ev(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;pn=s}function Ec(s){if(s!==pn)return!1;if(!$t)return ev(s),$t=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!lf(s.type,s.memoizedProps)),o&&(o=gn)){if(mf(s))throw tv(),Error(r(418));for(;o;)Jm(s,o),o=Xs(o.nextSibling)}if(ev(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(o===0){gn=Xs(s.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}s=s.nextSibling}gn=null}}else gn=pn?Xs(s.stateNode.nextSibling):null;return!0}function tv(){for(var s=gn;s;)s=Xs(s.nextSibling)}function Po(){gn=pn=null,$t=!1}function yf(s){qn===null?qn=[s]:qn.push(s)}var xk=R.ReactCurrentBatchConfig;function Ua(s,o,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(r(309));var f=c.stateNode}if(!f)throw Error(r(147,s));var m=f,w=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(k){var P=m.refs;k===null?delete P[w]:P[w]=k},o._stringRef=w,o)}if(typeof s!="string")throw Error(r(284));if(!c._owner)throw Error(r(290,s))}return s}function Tc(s,o){throw s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function rv(s){var o=s._init;return o(s._payload)}function nv(s){function o(L,I){if(s){var U=L.deletions;U===null?(L.deletions=[I],L.flags|=16):U.push(I)}}function c(L,I){if(!s)return null;for(;I!==null;)o(L,I),I=I.sibling;return null}function f(L,I){for(L=new Map;I!==null;)I.key!==null?L.set(I.key,I):L.set(I.index,I),I=I.sibling;return L}function m(L,I){return L=ui(L,I),L.index=0,L.sibling=null,L}function w(L,I,U){return L.index=U,s?(U=L.alternate,U!==null?(U=U.index,U<I?(L.flags|=2,I):U):(L.flags|=2,I)):(L.flags|=1048576,I)}function k(L){return s&&L.alternate===null&&(L.flags|=2),L}function P(L,I,U,ge){return I===null||I.tag!==6?(I=ch(U,L.mode,ge),I.return=L,I):(I=m(I,U),I.return=L,I)}function j(L,I,U,ge){var Re=U.type;return Re===M?ie(L,I,U.props.children,ge,U.key):I!==null&&(I.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===de&&rv(Re)===I.type)?(ge=m(I,U.props),ge.ref=Ua(L,I,U),ge.return=L,ge):(ge=Yc(U.type,U.key,U.props,null,L.mode,ge),ge.ref=Ua(L,I,U),ge.return=L,ge)}function q(L,I,U,ge){return I===null||I.tag!==4||I.stateNode.containerInfo!==U.containerInfo||I.stateNode.implementation!==U.implementation?(I=uh(U,L.mode,ge),I.return=L,I):(I=m(I,U.children||[]),I.return=L,I)}function ie(L,I,U,ge,Re){return I===null||I.tag!==7?(I=Wi(U,L.mode,ge,Re),I.return=L,I):(I=m(I,U),I.return=L,I)}function ue(L,I,U){if(typeof I=="string"&&I!==""||typeof I=="number")return I=ch(""+I,L.mode,U),I.return=L,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case F:return U=Yc(I.type,I.key,I.props,null,L.mode,U),U.ref=Ua(L,null,I),U.return=L,U;case B:return I=uh(I,L.mode,U),I.return=L,I;case de:var ge=I._init;return ue(L,ge(I._payload),U)}if(en(I)||le(I))return I=Wi(I,L.mode,U,null),I.return=L,I;Tc(L,I)}return null}function ne(L,I,U,ge){var Re=I!==null?I.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return Re!==null?null:P(L,I,""+U,ge);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case F:return U.key===Re?j(L,I,U,ge):null;case B:return U.key===Re?q(L,I,U,ge):null;case de:return Re=U._init,ne(L,I,Re(U._payload),ge)}if(en(U)||le(U))return Re!==null?null:ie(L,I,U,ge,null);Tc(L,U)}return null}function Ee(L,I,U,ge,Re){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return L=L.get(U)||null,P(I,L,""+ge,Re);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case F:return L=L.get(ge.key===null?U:ge.key)||null,j(I,L,ge,Re);case B:return L=L.get(ge.key===null?U:ge.key)||null,q(I,L,ge,Re);case de:var Fe=ge._init;return Ee(L,I,U,Fe(ge._payload),Re)}if(en(ge)||le(ge))return L=L.get(U)||null,ie(I,L,ge,Re,null);Tc(I,ge)}return null}function Pe(L,I,U,ge){for(var Re=null,Fe=null,Ue=I,Ye=I=0,_r=null;Ue!==null&&Ye<U.length;Ye++){Ue.index>Ye?(_r=Ue,Ue=null):_r=Ue.sibling;var wt=ne(L,Ue,U[Ye],ge);if(wt===null){Ue===null&&(Ue=_r);break}s&&Ue&&wt.alternate===null&&o(L,Ue),I=w(wt,I,Ye),Fe===null?Re=wt:Fe.sibling=wt,Fe=wt,Ue=_r}if(Ye===U.length)return c(L,Ue),$t&&Mi(L,Ye),Re;if(Ue===null){for(;Ye<U.length;Ye++)Ue=ue(L,U[Ye],ge),Ue!==null&&(I=w(Ue,I,Ye),Fe===null?Re=Ue:Fe.sibling=Ue,Fe=Ue);return $t&&Mi(L,Ye),Re}for(Ue=f(L,Ue);Ye<U.length;Ye++)_r=Ee(Ue,L,Ye,U[Ye],ge),_r!==null&&(s&&_r.alternate!==null&&Ue.delete(_r.key===null?Ye:_r.key),I=w(_r,I,Ye),Fe===null?Re=_r:Fe.sibling=_r,Fe=_r);return s&&Ue.forEach(function(di){return o(L,di)}),$t&&Mi(L,Ye),Re}function je(L,I,U,ge){var Re=le(U);if(typeof Re!="function")throw Error(r(150));if(U=Re.call(U),U==null)throw Error(r(151));for(var Fe=Re=null,Ue=I,Ye=I=0,_r=null,wt=U.next();Ue!==null&&!wt.done;Ye++,wt=U.next()){Ue.index>Ye?(_r=Ue,Ue=null):_r=Ue.sibling;var di=ne(L,Ue,wt.value,ge);if(di===null){Ue===null&&(Ue=_r);break}s&&Ue&&di.alternate===null&&o(L,Ue),I=w(di,I,Ye),Fe===null?Re=di:Fe.sibling=di,Fe=di,Ue=_r}if(wt.done)return c(L,Ue),$t&&Mi(L,Ye),Re;if(Ue===null){for(;!wt.done;Ye++,wt=U.next())wt=ue(L,wt.value,ge),wt!==null&&(I=w(wt,I,Ye),Fe===null?Re=wt:Fe.sibling=wt,Fe=wt);return $t&&Mi(L,Ye),Re}for(Ue=f(L,Ue);!wt.done;Ye++,wt=U.next())wt=Ee(Ue,L,Ye,wt.value,ge),wt!==null&&(s&&wt.alternate!==null&&Ue.delete(wt.key===null?Ye:wt.key),I=w(wt,I,Ye),Fe===null?Re=wt:Fe.sibling=wt,Fe=wt);return s&&Ue.forEach(function(eE){return o(L,eE)}),$t&&Mi(L,Ye),Re}function er(L,I,U,ge){if(typeof U=="object"&&U!==null&&U.type===M&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case F:e:{for(var Re=U.key,Fe=I;Fe!==null;){if(Fe.key===Re){if(Re=U.type,Re===M){if(Fe.tag===7){c(L,Fe.sibling),I=m(Fe,U.props.children),I.return=L,L=I;break e}}else if(Fe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===de&&rv(Re)===Fe.type){c(L,Fe.sibling),I=m(Fe,U.props),I.ref=Ua(L,Fe,U),I.return=L,L=I;break e}c(L,Fe);break}else o(L,Fe);Fe=Fe.sibling}U.type===M?(I=Wi(U.props.children,L.mode,ge,U.key),I.return=L,L=I):(ge=Yc(U.type,U.key,U.props,null,L.mode,ge),ge.ref=Ua(L,I,U),ge.return=L,L=ge)}return k(L);case B:e:{for(Fe=U.key;I!==null;){if(I.key===Fe)if(I.tag===4&&I.stateNode.containerInfo===U.containerInfo&&I.stateNode.implementation===U.implementation){c(L,I.sibling),I=m(I,U.children||[]),I.return=L,L=I;break e}else{c(L,I);break}else o(L,I);I=I.sibling}I=uh(U,L.mode,ge),I.return=L,L=I}return k(L);case de:return Fe=U._init,er(L,I,Fe(U._payload),ge)}if(en(U))return Pe(L,I,U,ge);if(le(U))return je(L,I,U,ge);Tc(L,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,I!==null&&I.tag===6?(c(L,I.sibling),I=m(I,U),I.return=L,L=I):(c(L,I),I=ch(U,L.mode,ge),I.return=L,L=I),k(L)):c(L,I)}return er}var No=nv(!0),sv=nv(!1),Cc=ei(null),Oc=null,jo=null,wf=null;function bf(){wf=jo=Oc=null}function xf(s){var o=Cc.current;Lt(Cc),s._currentValue=o}function _f(s,o,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===c)break;s=s.return}}function Ro(s,o){Oc=s,wf=jo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(on=!0),s.firstContext=null)}function jn(s){var o=s._currentValue;if(wf!==s)if(s={context:s,memoizedValue:o,next:null},jo===null){if(Oc===null)throw Error(r(308));jo=s,Oc.dependencies={lanes:0,firstContext:s}}else jo=jo.next=s;return o}var $i=null;function Sf(s){$i===null?$i=[s]:$i.push(s)}function iv(s,o,c,f){var m=o.interleaved;return m===null?(c.next=c,Sf(o)):(c.next=m.next,m.next=c),o.interleaved=c,Ps(s,f)}function Ps(s,o){s.lanes|=o;var c=s.alternate;for(c!==null&&(c.lanes|=o),c=s,s=s.return;s!==null;)s.childLanes|=o,c=s.alternate,c!==null&&(c.childLanes|=o),c=s,s=s.return;return c.tag===3?c.stateNode:null}var ni=!1;function kf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ov(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ns(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function si(s,o,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(pt&2)!==0){var m=f.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),f.pending=o,Ps(s,c)}return m=f.interleaved,m===null?(o.next=o,Sf(f)):(o.next=m.next,m.next=o),f.interleaved=o,Ps(s,c)}function Pc(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,Md(s,c)}}function av(s,o){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?m=w=k:w=w.next=k,c=c.next}while(c!==null);w===null?m=w=o:w=w.next=o}else m=w=o;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:f.shared,effects:f.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}function Nc(s,o,c,f){var m=s.updateQueue;ni=!1;var w=m.firstBaseUpdate,k=m.lastBaseUpdate,P=m.shared.pending;if(P!==null){m.shared.pending=null;var j=P,q=j.next;j.next=null,k===null?w=q:k.next=q,k=j;var ie=s.alternate;ie!==null&&(ie=ie.updateQueue,P=ie.lastBaseUpdate,P!==k&&(P===null?ie.firstBaseUpdate=q:P.next=q,ie.lastBaseUpdate=j))}if(w!==null){var ue=m.baseState;k=0,ie=q=j=null,P=w;do{var ne=P.lane,Ee=P.eventTime;if((f&ne)===ne){ie!==null&&(ie=ie.next={eventTime:Ee,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var Pe=s,je=P;switch(ne=o,Ee=c,je.tag){case 1:if(Pe=je.payload,typeof Pe=="function"){ue=Pe.call(Ee,ue,ne);break e}ue=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=je.payload,ne=typeof Pe=="function"?Pe.call(Ee,ue,ne):Pe,ne==null)break e;ue=ce({},ue,ne);break e;case 2:ni=!0}}P.callback!==null&&P.lane!==0&&(s.flags|=64,ne=m.effects,ne===null?m.effects=[P]:ne.push(P))}else Ee={eventTime:Ee,lane:ne,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ie===null?(q=ie=Ee,j=ue):ie=ie.next=Ee,k|=ne;if(P=P.next,P===null){if(P=m.shared.pending,P===null)break;ne=P,P=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);if(ie===null&&(j=ue),m.baseState=j,m.firstBaseUpdate=q,m.lastBaseUpdate=ie,o=m.shared.interleaved,o!==null){m=o;do k|=m.lane,m=m.next;while(m!==o)}else w===null&&(m.shared.lanes=0);Bi|=k,s.lanes=k,s.memoizedState=ue}}function lv(s,o,c){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],m=f.callback;if(m!==null){if(f.callback=null,f=c,typeof m!="function")throw Error(r(191,m));m.call(f)}}}var Ba={},us=ei(Ba),za=ei(Ba),Va=ei(Ba);function Fi(s){if(s===Ba)throw Error(r(174));return s}function Ef(s,o){switch(At(Va,o),At(za,s),At(us,Ba),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ae(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=ae(o,s)}Lt(us),At(us,o)}function Ao(){Lt(us),Lt(za),Lt(Va)}function cv(s){Fi(Va.current);var o=Fi(us.current),c=ae(o,s.type);o!==c&&(At(za,s),At(us,c))}function Tf(s){za.current===s&&(Lt(us),Lt(za))}var zt=ei(0);function jc(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Cf=[];function Of(){for(var s=0;s<Cf.length;s++)Cf[s]._workInProgressVersionPrimary=null;Cf.length=0}var Rc=R.ReactCurrentDispatcher,Pf=R.ReactCurrentBatchConfig,Ui=0,Vt=null,dr=null,br=null,Ac=!1,qa=!1,Wa=0,_k=0;function Fr(){throw Error(r(321))}function Nf(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!Vn(s[c],o[c]))return!1;return!0}function jf(s,o,c,f,m,w){if(Ui=w,Vt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Rc.current=s===null||s.memoizedState===null?Tk:Ck,s=c(f,m),qa){w=0;do{if(qa=!1,Wa=0,25<=w)throw Error(r(301));w+=1,br=dr=null,o.updateQueue=null,Rc.current=Ok,s=c(f,m)}while(qa)}if(Rc.current=Lc,o=dr!==null&&dr.next!==null,Ui=0,br=dr=Vt=null,Ac=!1,o)throw Error(r(300));return s}function Rf(){var s=Wa!==0;return Wa=0,s}function ds(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Vt.memoizedState=br=s:br=br.next=s,br}function Rn(){if(dr===null){var s=Vt.alternate;s=s!==null?s.memoizedState:null}else s=dr.next;var o=br===null?Vt.memoizedState:br.next;if(o!==null)br=o,dr=s;else{if(s===null)throw Error(r(310));dr=s,s={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},br===null?Vt.memoizedState=br=s:br=br.next=s}return br}function Ha(s,o){return typeof o=="function"?o(s):o}function Af(s){var o=Rn(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var f=dr,m=f.baseQueue,w=c.pending;if(w!==null){if(m!==null){var k=m.next;m.next=w.next,w.next=k}f.baseQueue=m=w,c.pending=null}if(m!==null){w=m.next,f=f.baseState;var P=k=null,j=null,q=w;do{var ie=q.lane;if((Ui&ie)===ie)j!==null&&(j=j.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),f=q.hasEagerState?q.eagerState:s(f,q.action);else{var ue={lane:ie,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};j===null?(P=j=ue,k=f):j=j.next=ue,Vt.lanes|=ie,Bi|=ie}q=q.next}while(q!==null&&q!==w);j===null?k=f:j.next=P,Vn(f,o.memoizedState)||(on=!0),o.memoizedState=f,o.baseState=k,o.baseQueue=j,c.lastRenderedState=f}if(s=c.interleaved,s!==null){m=s;do w=m.lane,Vt.lanes|=w,Bi|=w,m=m.next;while(m!==s)}else m===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function If(s){var o=Rn(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var f=c.dispatch,m=c.pending,w=o.memoizedState;if(m!==null){c.pending=null;var k=m=m.next;do w=s(w,k.action),k=k.next;while(k!==m);Vn(w,o.memoizedState)||(on=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),c.lastRenderedState=w}return[w,f]}function uv(){}function dv(s,o){var c=Vt,f=Rn(),m=o(),w=!Vn(f.memoizedState,m);if(w&&(f.memoizedState=m,on=!0),f=f.queue,Df(pv.bind(null,c,f,s),[s]),f.getSnapshot!==o||w||br!==null&&br.memoizedState.tag&1){if(c.flags|=2048,Ka(9,hv.bind(null,c,f,m,o),void 0,null),xr===null)throw Error(r(349));(Ui&30)!==0||fv(c,o,m)}return m}function fv(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=Vt.updateQueue,o===null?(o={lastEffect:null,stores:null},Vt.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function hv(s,o,c,f){o.value=c,o.getSnapshot=f,gv(o)&&mv(s)}function pv(s,o,c){return c(function(){gv(o)&&mv(s)})}function gv(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!Vn(s,c)}catch{return!0}}function mv(s){var o=Ps(s,1);o!==null&&Gn(o,s,1,-1)}function vv(s){var o=ds();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:s},o.queue=s,s=s.dispatch=Ek.bind(null,Vt,s),[o.memoizedState,s]}function Ka(s,o,c,f){return s={tag:s,create:o,destroy:c,deps:f,next:null},o=Vt.updateQueue,o===null?(o={lastEffect:null,stores:null},Vt.updateQueue=o,o.lastEffect=s.next=s):(c=o.lastEffect,c===null?o.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,o.lastEffect=s)),s}function yv(){return Rn().memoizedState}function Ic(s,o,c,f){var m=ds();Vt.flags|=s,m.memoizedState=Ka(1|o,c,void 0,f===void 0?null:f)}function Dc(s,o,c,f){var m=Rn();f=f===void 0?null:f;var w=void 0;if(dr!==null){var k=dr.memoizedState;if(w=k.destroy,f!==null&&Nf(f,k.deps)){m.memoizedState=Ka(o,c,w,f);return}}Vt.flags|=s,m.memoizedState=Ka(1|o,c,w,f)}function wv(s,o){return Ic(8390656,8,s,o)}function Df(s,o){return Dc(2048,8,s,o)}function bv(s,o){return Dc(4,2,s,o)}function xv(s,o){return Dc(4,4,s,o)}function _v(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Sv(s,o,c){return c=c!=null?c.concat([s]):null,Dc(4,4,_v.bind(null,o,s),c)}function Lf(){}function kv(s,o){var c=Rn();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Nf(o,f[1])?f[0]:(c.memoizedState=[s,o],s)}function Ev(s,o){var c=Rn();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Nf(o,f[1])?f[0]:(s=s(),c.memoizedState=[s,o],s)}function Tv(s,o,c){return(Ui&21)===0?(s.baseState&&(s.baseState=!1,on=!0),s.memoizedState=c):(Vn(c,o)||(c=rm(),Vt.lanes|=c,Bi|=c,s.baseState=!0),o)}function Sk(s,o){var c=kt;kt=c!==0&&4>c?c:4,s(!0);var f=Pf.transition;Pf.transition={};try{s(!1),o()}finally{kt=c,Pf.transition=f}}function Cv(){return Rn().memoizedState}function kk(s,o,c){var f=li(s);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Ov(s))Pv(o,c);else if(c=iv(s,o,c,f),c!==null){var m=Hr();Gn(c,s,f,m),Nv(c,o,f)}}function Ek(s,o,c){var f=li(s),m={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ov(s))Pv(o,m);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var k=o.lastRenderedState,P=w(k,c);if(m.hasEagerState=!0,m.eagerState=P,Vn(P,k)){var j=o.interleaved;j===null?(m.next=m,Sf(o)):(m.next=j.next,j.next=m),o.interleaved=m;return}}catch{}c=iv(s,o,m,f),c!==null&&(m=Hr(),Gn(c,s,f,m),Nv(c,o,f))}}function Ov(s){var o=s.alternate;return s===Vt||o!==null&&o===Vt}function Pv(s,o){qa=Ac=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function Nv(s,o,c){if((c&4194240)!==0){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,Md(s,c)}}var Lc={readContext:jn,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},Tk={readContext:jn,useCallback:function(s,o){return ds().memoizedState=[s,o===void 0?null:o],s},useContext:jn,useEffect:wv,useImperativeHandle:function(s,o,c){return c=c!=null?c.concat([s]):null,Ic(4194308,4,_v.bind(null,o,s),c)},useLayoutEffect:function(s,o){return Ic(4194308,4,s,o)},useInsertionEffect:function(s,o){return Ic(4,2,s,o)},useMemo:function(s,o){var c=ds();return o=o===void 0?null:o,s=s(),c.memoizedState=[s,o],s},useReducer:function(s,o,c){var f=ds();return o=c!==void 0?c(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=kk.bind(null,Vt,s),[f.memoizedState,s]},useRef:function(s){var o=ds();return s={current:s},o.memoizedState=s},useState:vv,useDebugValue:Lf,useDeferredValue:function(s){return ds().memoizedState=s},useTransition:function(){var s=vv(!1),o=s[0];return s=Sk.bind(null,s[1]),ds().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,c){var f=Vt,m=ds();if($t){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),xr===null)throw Error(r(349));(Ui&30)!==0||fv(f,o,c)}m.memoizedState=c;var w={value:c,getSnapshot:o};return m.queue=w,wv(pv.bind(null,f,w,s),[s]),f.flags|=2048,Ka(9,hv.bind(null,f,w,c,o),void 0,null),c},useId:function(){var s=ds(),o=xr.identifierPrefix;if($t){var c=Os,f=Cs;c=(f&~(1<<32-D(f)-1)).toString(32)+c,o=":"+o+"R"+c,c=Wa++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=_k++,o=":"+o+"r"+c.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Ck={readContext:jn,useCallback:kv,useContext:jn,useEffect:Df,useImperativeHandle:Sv,useInsertionEffect:bv,useLayoutEffect:xv,useMemo:Ev,useReducer:Af,useRef:yv,useState:function(){return Af(Ha)},useDebugValue:Lf,useDeferredValue:function(s){var o=Rn();return Tv(o,dr.memoizedState,s)},useTransition:function(){var s=Af(Ha)[0],o=Rn().memoizedState;return[s,o]},useMutableSource:uv,useSyncExternalStore:dv,useId:Cv,unstable_isNewReconciler:!1},Ok={readContext:jn,useCallback:kv,useContext:jn,useEffect:Df,useImperativeHandle:Sv,useInsertionEffect:bv,useLayoutEffect:xv,useMemo:Ev,useReducer:If,useRef:yv,useState:function(){return If(Ha)},useDebugValue:Lf,useDeferredValue:function(s){var o=Rn();return dr===null?o.memoizedState=s:Tv(o,dr.memoizedState,s)},useTransition:function(){var s=If(Ha)[0],o=Rn().memoizedState;return[s,o]},useMutableSource:uv,useSyncExternalStore:dv,useId:Cv,unstable_isNewReconciler:!1};function Wn(s,o){if(s&&s.defaultProps){o=ce({},o),s=s.defaultProps;for(var c in s)o[c]===void 0&&(o[c]=s[c]);return o}return o}function Mf(s,o,c,f){o=s.memoizedState,c=c(f,o),c=c==null?o:ce({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Mc={isMounted:function(s){return(s=s._reactInternals)?ve(s)===s:!1},enqueueSetState:function(s,o,c){s=s._reactInternals;var f=Hr(),m=li(s),w=Ns(f,m);w.payload=o,c!=null&&(w.callback=c),o=si(s,w,m),o!==null&&(Gn(o,s,m,f),Pc(o,s,m))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var f=Hr(),m=li(s),w=Ns(f,m);w.tag=1,w.payload=o,c!=null&&(w.callback=c),o=si(s,w,m),o!==null&&(Gn(o,s,m,f),Pc(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=Hr(),f=li(s),m=Ns(c,f);m.tag=2,o!=null&&(m.callback=o),o=si(s,m,f),o!==null&&(Gn(o,s,f,c),Pc(o,s,f))}};function jv(s,o,c,f,m,w,k){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,w,k):o.prototype&&o.prototype.isPureReactComponent?!Aa(c,f)||!Aa(m,w):!0}function Rv(s,o,c){var f=!1,m=ti,w=o.contextType;return typeof w=="object"&&w!==null?w=jn(w):(m=sn(o)?Di:$r.current,f=o.contextTypes,w=(f=f!=null)?To(s,m):ti),o=new o(c,w),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Mc,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=w),o}function Av(s,o,c,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==s&&Mc.enqueueReplaceState(o,o.state,null)}function $f(s,o,c,f){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs={},kf(s);var w=o.contextType;typeof w=="object"&&w!==null?m.context=jn(w):(w=sn(o)?Di:$r.current,m.context=To(s,w)),m.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Mf(s,o,w,c),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&Mc.enqueueReplaceState(m,m.state,null),Nc(s,c,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function Io(s,o){try{var c="",f=o;do c+=$e(f),f=f.return;while(f);var m=c}catch(w){m=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:o,stack:m,digest:null}}function Ff(s,o,c){return{value:s,source:null,stack:c??null,digest:o??null}}function Uf(s,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var Pk=typeof WeakMap=="function"?WeakMap:Map;function Iv(s,o,c){c=Ns(-1,c),c.tag=3,c.payload={element:null};var f=o.value;return c.callback=function(){qc||(qc=!0,th=f),Uf(s,o)},c}function Dv(s,o,c){c=Ns(-1,c),c.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;c.payload=function(){return f(m)},c.callback=function(){Uf(s,o)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Uf(s,o),typeof f!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),c}function Lv(s,o,c){var f=s.pingCache;if(f===null){f=s.pingCache=new Pk;var m=new Set;f.set(o,m)}else m=f.get(o),m===void 0&&(m=new Set,f.set(o,m));m.has(c)||(m.add(c),s=Vk.bind(null,s,o,c),o.then(s,s))}function Mv(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function $v(s,o,c,f,m){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Ns(-1,1),o.tag=2,si(c,o,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var Nk=R.ReactCurrentOwner,on=!1;function Wr(s,o,c,f){o.child=s===null?sv(o,null,c,f):No(o,s.child,c,f)}function Fv(s,o,c,f,m){c=c.render;var w=o.ref;return Ro(o,m),f=jf(s,o,c,f,w,m),c=Rf(),s!==null&&!on?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,js(s,o,m)):($t&&c&&pf(o),o.flags|=1,Wr(s,o,f,m),o.child)}function Uv(s,o,c,f,m){if(s===null){var w=c.type;return typeof w=="function"&&!lh(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=w,Bv(s,o,w,f,m)):(s=Yc(c.type,null,f,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(w=s.child,(s.lanes&m)===0){var k=w.memoizedProps;if(c=c.compare,c=c!==null?c:Aa,c(k,f)&&s.ref===o.ref)return js(s,o,m)}return o.flags|=1,s=ui(w,f),s.ref=o.ref,s.return=o,o.child=s}function Bv(s,o,c,f,m){if(s!==null){var w=s.memoizedProps;if(Aa(w,f)&&s.ref===o.ref)if(on=!1,o.pendingProps=f=w,(s.lanes&m)!==0)(s.flags&131072)!==0&&(on=!0);else return o.lanes=s.lanes,js(s,o,m)}return Bf(s,o,c,f,m)}function zv(s,o,c){var f=o.pendingProps,m=f.children,w=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Lo,mn),mn|=c;else{if((c&1073741824)===0)return s=w!==null?w.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,At(Lo,mn),mn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:c,At(Lo,mn),mn|=f}else w!==null?(f=w.baseLanes|c,o.memoizedState=null):f=c,At(Lo,mn),mn|=f;return Wr(s,o,m,c),o.child}function Vv(s,o){var c=o.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Bf(s,o,c,f,m){var w=sn(c)?Di:$r.current;return w=To(o,w),Ro(o,m),c=jf(s,o,c,f,w,m),f=Rf(),s!==null&&!on?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,js(s,o,m)):($t&&f&&pf(o),o.flags|=1,Wr(s,o,c,m),o.child)}function qv(s,o,c,f,m){if(sn(c)){var w=!0;xc(o)}else w=!1;if(Ro(o,m),o.stateNode===null)Fc(s,o),Rv(o,c,f),$f(o,c,f,m),f=!0;else if(s===null){var k=o.stateNode,P=o.memoizedProps;k.props=P;var j=k.context,q=c.contextType;typeof q=="object"&&q!==null?q=jn(q):(q=sn(c)?Di:$r.current,q=To(o,q));var ie=c.getDerivedStateFromProps,ue=typeof ie=="function"||typeof k.getSnapshotBeforeUpdate=="function";ue||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(P!==f||j!==q)&&Av(o,k,f,q),ni=!1;var ne=o.memoizedState;k.state=ne,Nc(o,f,k,m),j=o.memoizedState,P!==f||ne!==j||nn.current||ni?(typeof ie=="function"&&(Mf(o,c,ie,f),j=o.memoizedState),(P=ni||jv(o,c,P,f,ne,j,q))?(ue||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=j),k.props=f,k.state=j,k.context=q,f=P):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{k=o.stateNode,ov(s,o),P=o.memoizedProps,q=o.type===o.elementType?P:Wn(o.type,P),k.props=q,ue=o.pendingProps,ne=k.context,j=c.contextType,typeof j=="object"&&j!==null?j=jn(j):(j=sn(c)?Di:$r.current,j=To(o,j));var Ee=c.getDerivedStateFromProps;(ie=typeof Ee=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(P!==ue||ne!==j)&&Av(o,k,f,j),ni=!1,ne=o.memoizedState,k.state=ne,Nc(o,f,k,m);var Pe=o.memoizedState;P!==ue||ne!==Pe||nn.current||ni?(typeof Ee=="function"&&(Mf(o,c,Ee,f),Pe=o.memoizedState),(q=ni||jv(o,c,q,f,ne,Pe,j)||!1)?(ie||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,Pe,j),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,Pe,j)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||P===s.memoizedProps&&ne===s.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&ne===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Pe),k.props=f,k.state=Pe,k.context=j,f=q):(typeof k.componentDidUpdate!="function"||P===s.memoizedProps&&ne===s.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&ne===s.memoizedState||(o.flags|=1024),f=!1)}return zf(s,o,c,f,w,m)}function zf(s,o,c,f,m,w){Vv(s,o);var k=(o.flags&128)!==0;if(!f&&!k)return m&&Qm(o,c,!1),js(s,o,w);f=o.stateNode,Nk.current=o;var P=k&&typeof c.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&k?(o.child=No(o,s.child,null,w),o.child=No(o,null,P,w)):Wr(s,o,P,w),o.memoizedState=f.state,m&&Qm(o,c,!0),o.child}function Wv(s){var o=s.stateNode;o.pendingContext?Km(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Km(s,o.context,!1),Ef(s,o.containerInfo)}function Hv(s,o,c,f,m){return Po(),yf(m),o.flags|=256,Wr(s,o,c,f),o.child}var Vf={dehydrated:null,treeContext:null,retryLane:0};function qf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Kv(s,o,c){var f=o.pendingProps,m=zt.current,w=!1,k=(o.flags&128)!==0,P;if((P=k)||(P=s!==null&&s.memoizedState===null?!1:(m&2)!==0),P?(w=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),At(zt,m&1),s===null)return vf(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=f.children,s=f.fallback,w?(f=o.mode,w=o.child,k={mode:"hidden",children:k},(f&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=k):w=Zc(k,f,0,null),s=Wi(s,f,c,null),w.return=o,s.return=o,w.sibling=s,o.child=w,o.child.memoizedState=qf(c),o.memoizedState=Vf,s):Wf(o,k));if(m=s.memoizedState,m!==null&&(P=m.dehydrated,P!==null))return jk(s,o,k,f,P,m,c);if(w){w=f.fallback,k=o.mode,m=s.child,P=m.sibling;var j={mode:"hidden",children:f.children};return(k&1)===0&&o.child!==m?(f=o.child,f.childLanes=0,f.pendingProps=j,o.deletions=null):(f=ui(m,j),f.subtreeFlags=m.subtreeFlags&14680064),P!==null?w=ui(P,w):(w=Wi(w,k,c,null),w.flags|=2),w.return=o,f.return=o,f.sibling=w,o.child=f,f=w,w=o.child,k=s.child.memoizedState,k=k===null?qf(c):{baseLanes:k.baseLanes|c,cachePool:null,transitions:k.transitions},w.memoizedState=k,w.childLanes=s.childLanes&~c,o.memoizedState=Vf,f}return w=s.child,s=w.sibling,f=ui(w,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=c),f.return=o,f.sibling=null,s!==null&&(c=o.deletions,c===null?(o.deletions=[s],o.flags|=16):c.push(s)),o.child=f,o.memoizedState=null,f}function Wf(s,o){return o=Zc({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function $c(s,o,c,f){return f!==null&&yf(f),No(o,s.child,null,c),s=Wf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function jk(s,o,c,f,m,w,k){if(c)return o.flags&256?(o.flags&=-257,f=Ff(Error(r(422))),$c(s,o,k,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(w=f.fallback,m=o.mode,f=Zc({mode:"visible",children:f.children},m,0,null),w=Wi(w,m,k,null),w.flags|=2,f.return=o,w.return=o,f.sibling=w,o.child=f,(o.mode&1)!==0&&No(o,s.child,null,k),o.child.memoizedState=qf(k),o.memoizedState=Vf,w);if((o.mode&1)===0)return $c(s,o,k,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var P=f.dgst;return f=P,w=Error(r(419)),f=Ff(w,f,void 0),$c(s,o,k,f)}if(P=(k&s.childLanes)!==0,on||P){if(f=xr,f!==null){switch(k&-k){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|k))!==0?0:m,m!==0&&m!==w.retryLane&&(w.retryLane=m,Ps(s,m),Gn(f,s,m,-1))}return ah(),f=Ff(Error(r(421))),$c(s,o,k,f)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=qk.bind(null,s),m._reactRetry=o,null):(s=w.treeContext,gn=Xs(m.nextSibling),pn=o,$t=!0,qn=null,s!==null&&(Pn[Nn++]=Cs,Pn[Nn++]=Os,Pn[Nn++]=Li,Cs=s.id,Os=s.overflow,Li=o),o=Wf(o,f.children),o.flags|=4096,o)}function Gv(s,o,c){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),_f(s.return,o,c)}function Hf(s,o,c,f,m){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=c,w.tailMode=m)}function Qv(s,o,c){var f=o.pendingProps,m=f.revealOrder,w=f.tail;if(Wr(s,o,f.children,c),f=zt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Gv(s,c,o);else if(s.tag===19)Gv(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(At(zt,f),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(c=o.child,m=null;c!==null;)s=c.alternate,s!==null&&jc(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=o.child,o.child=null):(m=c.sibling,c.sibling=null),Hf(o,!1,m,c,w);break;case"backwards":for(c=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&jc(s)===null){o.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}Hf(o,!0,c,null,w);break;case"together":Hf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Fc(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function js(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),Bi|=o.lanes,(c&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,c=ui(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=ui(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function Rk(s,o,c){switch(o.tag){case 3:Wv(o),Po();break;case 5:cv(o);break;case 1:sn(o.type)&&xc(o);break;case 4:Ef(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,m=o.memoizedProps.value;At(Cc,f._currentValue),f._currentValue=m;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(At(zt,zt.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?Kv(s,o,c):(At(zt,zt.current&1),s=js(s,o,c),s!==null?s.sibling:null);At(zt,zt.current&1);break;case 19:if(f=(c&o.childLanes)!==0,(s.flags&128)!==0){if(f)return Qv(s,o,c);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),At(zt,zt.current),f)break;return null;case 22:case 23:return o.lanes=0,zv(s,o,c)}return js(s,o,c)}var Yv,Kf,Zv,Jv;Yv=function(s,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Kf=function(){},Zv=function(s,o,c,f){var m=s.memoizedProps;if(m!==f){s=o.stateNode,Fi(us.current);var w=null;switch(c){case"input":m=sr(s,m),f=sr(s,f),w=[];break;case"select":m=ce({},m,{value:void 0}),f=ce({},f,{value:void 0}),w=[];break;case"textarea":m=N(s,m),f=N(s,f),w=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=yc)}wr(c,f);var k;c=null;for(q in m)if(!f.hasOwnProperty(q)&&m.hasOwnProperty(q)&&m[q]!=null)if(q==="style"){var P=m[q];for(k in P)P.hasOwnProperty(k)&&(c||(c={}),c[k]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(i.hasOwnProperty(q)?w||(w=[]):(w=w||[]).push(q,null));for(q in f){var j=f[q];if(P=m?.[q],f.hasOwnProperty(q)&&j!==P&&(j!=null||P!=null))if(q==="style")if(P){for(k in P)!P.hasOwnProperty(k)||j&&j.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in j)j.hasOwnProperty(k)&&P[k]!==j[k]&&(c||(c={}),c[k]=j[k])}else c||(w||(w=[]),w.push(q,c)),c=j;else q==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,P=P?P.__html:void 0,j!=null&&P!==j&&(w=w||[]).push(q,j)):q==="children"?typeof j!="string"&&typeof j!="number"||(w=w||[]).push(q,""+j):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(i.hasOwnProperty(q)?(j!=null&&q==="onScroll"&&Dt("scroll",s),w||P===j||(w=[])):(w=w||[]).push(q,j))}c&&(w=w||[]).push("style",c);var q=w;(o.updateQueue=q)&&(o.flags|=4)}},Jv=function(s,o,c,f){c!==f&&(o.flags|=4)};function Ga(s,o){if(!$t)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Ur(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(o)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=c,o}function Ak(s,o,c){var f=o.pendingProps;switch(gf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(o),null;case 1:return sn(o.type)&&bc(),Ur(o),null;case 3:return f=o.stateNode,Ao(),Lt(nn),Lt($r),Of(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Ec(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,qn!==null&&(sh(qn),qn=null))),Kf(s,o),Ur(o),null;case 5:Tf(o);var m=Fi(Va.current);if(c=o.type,s!==null&&o.stateNode!=null)Zv(s,o,c,f,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Ur(o),null}if(s=Fi(us.current),Ec(o)){f=o.stateNode,c=o.type;var w=o.memoizedProps;switch(f[cs]=o,f[$a]=w,s=(o.mode&1)!==0,c){case"dialog":Dt("cancel",f),Dt("close",f);break;case"iframe":case"object":case"embed":Dt("load",f);break;case"video":case"audio":for(m=0;m<Da.length;m++)Dt(Da[m],f);break;case"source":Dt("error",f);break;case"img":case"image":case"link":Dt("error",f),Dt("load",f);break;case"details":Dt("toggle",f);break;case"input":ht(f,w),Dt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},Dt("invalid",f);break;case"textarea":$(f,w),Dt("invalid",f)}wr(c,w),m=null;for(var k in w)if(w.hasOwnProperty(k)){var P=w[k];k==="children"?typeof P=="string"?f.textContent!==P&&(w.suppressHydrationWarning!==!0&&vc(f.textContent,P,s),m=["children",P]):typeof P=="number"&&f.textContent!==""+P&&(w.suppressHydrationWarning!==!0&&vc(f.textContent,P,s),m=["children",""+P]):i.hasOwnProperty(k)&&P!=null&&k==="onScroll"&&Dt("scroll",f)}switch(c){case"input":Tr(f),Tn(f,w,!0);break;case"textarea":Tr(f),we(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=yc)}f=m,o.updateQueue=f,f!==null&&(o.flags|=4)}else{k=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=me(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=k.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=k.createElement(c,{is:f.is}):(s=k.createElement(c),c==="select"&&(k=s,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):s=k.createElementNS(s,c),s[cs]=o,s[$a]=f,Yv(s,o,!1,!1),o.stateNode=s;e:{switch(k=rn(c,f),c){case"dialog":Dt("cancel",s),Dt("close",s),m=f;break;case"iframe":case"object":case"embed":Dt("load",s),m=f;break;case"video":case"audio":for(m=0;m<Da.length;m++)Dt(Da[m],s);m=f;break;case"source":Dt("error",s),m=f;break;case"img":case"image":case"link":Dt("error",s),Dt("load",s),m=f;break;case"details":Dt("toggle",s),m=f;break;case"input":ht(s,f),m=sr(s,f),Dt("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=ce({},f,{value:void 0}),Dt("invalid",s);break;case"textarea":$(s,f),m=N(s,f),Dt("invalid",s);break;default:m=f}wr(c,m),P=m;for(w in P)if(P.hasOwnProperty(w)){var j=P[w];w==="style"?tn(s,j):w==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Ze(s,j)):w==="children"?typeof j=="string"?(c!=="textarea"||j!=="")&&mt(s,j):typeof j=="number"&&mt(s,""+j):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?j!=null&&w==="onScroll"&&Dt("scroll",s):j!=null&&O(s,w,j,k))}switch(c){case"input":Tr(s),Tn(s,f,!1);break;case"textarea":Tr(s),we(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Xe(f.value));break;case"select":s.multiple=!!f.multiple,w=f.value,w!=null?pe(s,!!f.multiple,w,!1):f.defaultValue!=null&&pe(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=yc)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ur(o),null;case 6:if(s&&o.stateNode!=null)Jv(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(c=Fi(Va.current),Fi(us.current),Ec(o)){if(f=o.stateNode,c=o.memoizedProps,f[cs]=o,(w=f.nodeValue!==c)&&(s=pn,s!==null))switch(s.tag){case 3:vc(f.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&vc(f.nodeValue,c,(s.mode&1)!==0)}w&&(o.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[cs]=o,o.stateNode=f}return Ur(o),null;case 13:if(Lt(zt),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if($t&&gn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)tv(),Po(),o.flags|=98560,w=!1;else if(w=Ec(o),f!==null&&f.dehydrated!==null){if(s===null){if(!w)throw Error(r(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[cs]=o}else Po(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ur(o),w=!1}else qn!==null&&(sh(qn),qn=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(zt.current&1)!==0?fr===0&&(fr=3):ah())),o.updateQueue!==null&&(o.flags|=4),Ur(o),null);case 4:return Ao(),Kf(s,o),s===null&&La(o.stateNode.containerInfo),Ur(o),null;case 10:return xf(o.type._context),Ur(o),null;case 17:return sn(o.type)&&bc(),Ur(o),null;case 19:if(Lt(zt),w=o.memoizedState,w===null)return Ur(o),null;if(f=(o.flags&128)!==0,k=w.rendering,k===null)if(f)Ga(w,!1);else{if(fr!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(k=jc(s),k!==null){for(o.flags|=128,Ga(w,!1),f=k.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=c,c=o.child;c!==null;)w=c,s=f,w.flags&=14680066,k=w.alternate,k===null?(w.childLanes=0,w.lanes=s,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=k.childLanes,w.lanes=k.lanes,w.child=k.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=k.memoizedProps,w.memoizedState=k.memoizedState,w.updateQueue=k.updateQueue,w.type=k.type,s=k.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return At(zt,zt.current&1|2),o.child}s=s.sibling}w.tail!==null&&Bt()>Mo&&(o.flags|=128,f=!0,Ga(w,!1),o.lanes=4194304)}else{if(!f)if(s=jc(k),s!==null){if(o.flags|=128,f=!0,c=s.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),Ga(w,!0),w.tail===null&&w.tailMode==="hidden"&&!k.alternate&&!$t)return Ur(o),null}else 2*Bt()-w.renderingStartTime>Mo&&c!==1073741824&&(o.flags|=128,f=!0,Ga(w,!1),o.lanes=4194304);w.isBackwards?(k.sibling=o.child,o.child=k):(c=w.last,c!==null?c.sibling=k:o.child=k,w.last=k)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=Bt(),o.sibling=null,c=zt.current,At(zt,f?c&1|2:c&1),o):(Ur(o),null);case 22:case 23:return oh(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(mn&1073741824)!==0&&(Ur(o),o.subtreeFlags&6&&(o.flags|=8192)):Ur(o),null;case 24:return null;case 25:return null}throw Error(r(156,o.tag))}function Ik(s,o){switch(gf(o),o.tag){case 1:return sn(o.type)&&bc(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Ao(),Lt(nn),Lt($r),Of(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return Tf(o),null;case 13:if(Lt(zt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Po()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Lt(zt),null;case 4:return Ao(),null;case 10:return xf(o.type._context),null;case 22:case 23:return oh(),null;case 24:return null;default:return null}}var Uc=!1,Br=!1,Dk=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Do(s,o){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Qt(s,o,f)}else c.current=null}function Gf(s,o,c){try{c()}catch(f){Qt(s,o,f)}}var Xv=!1;function Lk(s,o){if(of=oc,s=jm(),Zd(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var k=0,P=-1,j=-1,q=0,ie=0,ue=s,ne=null;t:for(;;){for(var Ee;ue!==c||m!==0&&ue.nodeType!==3||(P=k+m),ue!==w||f!==0&&ue.nodeType!==3||(j=k+f),ue.nodeType===3&&(k+=ue.nodeValue.length),(Ee=ue.firstChild)!==null;)ne=ue,ue=Ee;for(;;){if(ue===s)break t;if(ne===c&&++q===m&&(P=k),ne===w&&++ie===f&&(j=k),(Ee=ue.nextSibling)!==null)break;ue=ne,ne=ue.parentNode}ue=Ee}c=P===-1||j===-1?null:{start:P,end:j}}else c=null}c=c||{start:0,end:0}}else c=null;for(af={focusedElem:s,selectionRange:c},oc=!1,Oe=o;Oe!==null;)if(o=Oe,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Oe=s;else for(;Oe!==null;){o=Oe;try{var Pe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var je=Pe.memoizedProps,er=Pe.memoizedState,L=o.stateNode,I=L.getSnapshotBeforeUpdate(o.elementType===o.type?je:Wn(o.type,je),er);L.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var U=o.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ge){Qt(o,o.return,ge)}if(s=o.sibling,s!==null){s.return=o.return,Oe=s;break}Oe=o.return}return Pe=Xv,Xv=!1,Pe}function Qa(s,o,c){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var w=m.destroy;m.destroy=void 0,w!==void 0&&Gf(o,c,w)}m=m.next}while(m!==f)}}function Bc(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&s)===s){var f=c.create;c.destroy=f()}c=c.next}while(c!==o)}}function Qf(s){var o=s.ref;if(o!==null){var c=s.stateNode;s.tag,s=c,typeof o=="function"?o(s):o.current=s}}function ey(s){var o=s.alternate;o!==null&&(s.alternate=null,ey(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[cs],delete o[$a],delete o[df],delete o[yk],delete o[wk])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function ty(s){return s.tag===5||s.tag===3||s.tag===4}function ry(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ty(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Yf(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(s,o):c.insertBefore(s,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(s,c)):(o=c,o.appendChild(s)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=yc));else if(f!==4&&(s=s.child,s!==null))for(Yf(s,o,c),s=s.sibling;s!==null;)Yf(s,o,c),s=s.sibling}function Zf(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(Zf(s,o,c),s=s.sibling;s!==null;)Zf(s,o,c),s=s.sibling}var jr=null,Hn=!1;function ii(s,o,c){for(c=c.child;c!==null;)ny(s,o,c),c=c.sibling}function ny(s,o,c){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Ai,c)}catch{}switch(c.tag){case 5:Br||Do(c,o);case 6:var f=jr,m=Hn;jr=null,ii(s,o,c),jr=f,Hn=m,jr!==null&&(Hn?(s=jr,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):jr.removeChild(c.stateNode));break;case 18:jr!==null&&(Hn?(s=jr,c=c.stateNode,s.nodeType===8?uf(s.parentNode,c):s.nodeType===1&&uf(s,c),Ca(s)):uf(jr,c.stateNode));break;case 4:f=jr,m=Hn,jr=c.stateNode.containerInfo,Hn=!0,ii(s,o,c),jr=f,Hn=m;break;case 0:case 11:case 14:case 15:if(!Br&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var w=m,k=w.destroy;w=w.tag,k!==void 0&&((w&2)!==0||(w&4)!==0)&&Gf(c,o,k),m=m.next}while(m!==f)}ii(s,o,c);break;case 1:if(!Br&&(Do(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(P){Qt(c,o,P)}ii(s,o,c);break;case 21:ii(s,o,c);break;case 22:c.mode&1?(Br=(f=Br)||c.memoizedState!==null,ii(s,o,c),Br=f):ii(s,o,c);break;default:ii(s,o,c)}}function sy(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new Dk),o.forEach(function(f){var m=Wk.bind(null,s,f);c.has(f)||(c.add(f),f.then(m,m))})}}function Kn(s,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];try{var w=s,k=o,P=k;e:for(;P!==null;){switch(P.tag){case 5:jr=P.stateNode,Hn=!1;break e;case 3:jr=P.stateNode.containerInfo,Hn=!0;break e;case 4:jr=P.stateNode.containerInfo,Hn=!0;break e}P=P.return}if(jr===null)throw Error(r(160));ny(w,k,m),jr=null,Hn=!1;var j=m.alternate;j!==null&&(j.return=null),m.return=null}catch(q){Qt(m,o,q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)iy(o,s),o=o.sibling}function iy(s,o){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Kn(o,s),fs(s),f&4){try{Qa(3,s,s.return),Bc(3,s)}catch(je){Qt(s,s.return,je)}try{Qa(5,s,s.return)}catch(je){Qt(s,s.return,je)}}break;case 1:Kn(o,s),fs(s),f&512&&c!==null&&Do(c,c.return);break;case 5:if(Kn(o,s),fs(s),f&512&&c!==null&&Do(c,c.return),s.flags&32){var m=s.stateNode;try{mt(m,"")}catch(je){Qt(s,s.return,je)}}if(f&4&&(m=s.stateNode,m!=null)){var w=s.memoizedProps,k=c!==null?c.memoizedProps:w,P=s.type,j=s.updateQueue;if(s.updateQueue=null,j!==null)try{P==="input"&&w.type==="radio"&&w.name!=null&&Jr(m,w),rn(P,k);var q=rn(P,w);for(k=0;k<j.length;k+=2){var ie=j[k],ue=j[k+1];ie==="style"?tn(m,ue):ie==="dangerouslySetInnerHTML"?Ze(m,ue):ie==="children"?mt(m,ue):O(m,ie,ue,q)}switch(P){case"input":Xr(m,w);break;case"textarea":Q(m,w);break;case"select":var ne=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!w.multiple;var Ee=w.value;Ee!=null?pe(m,!!w.multiple,Ee,!1):ne!==!!w.multiple&&(w.defaultValue!=null?pe(m,!!w.multiple,w.defaultValue,!0):pe(m,!!w.multiple,w.multiple?[]:"",!1))}m[$a]=w}catch(je){Qt(s,s.return,je)}}break;case 6:if(Kn(o,s),fs(s),f&4){if(s.stateNode===null)throw Error(r(162));m=s.stateNode,w=s.memoizedProps;try{m.nodeValue=w}catch(je){Qt(s,s.return,je)}}break;case 3:if(Kn(o,s),fs(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ca(o.containerInfo)}catch(je){Qt(s,s.return,je)}break;case 4:Kn(o,s),fs(s);break;case 13:Kn(o,s),fs(s),m=s.child,m.flags&8192&&(w=m.memoizedState!==null,m.stateNode.isHidden=w,!w||m.alternate!==null&&m.alternate.memoizedState!==null||(eh=Bt())),f&4&&sy(s);break;case 22:if(ie=c!==null&&c.memoizedState!==null,s.mode&1?(Br=(q=Br)||ie,Kn(o,s),Br=q):Kn(o,s),fs(s),f&8192){if(q=s.memoizedState!==null,(s.stateNode.isHidden=q)&&!ie&&(s.mode&1)!==0)for(Oe=s,ie=s.child;ie!==null;){for(ue=Oe=ie;Oe!==null;){switch(ne=Oe,Ee=ne.child,ne.tag){case 0:case 11:case 14:case 15:Qa(4,ne,ne.return);break;case 1:Do(ne,ne.return);var Pe=ne.stateNode;if(typeof Pe.componentWillUnmount=="function"){f=ne,c=ne.return;try{o=f,Pe.props=o.memoizedProps,Pe.state=o.memoizedState,Pe.componentWillUnmount()}catch(je){Qt(f,c,je)}}break;case 5:Do(ne,ne.return);break;case 22:if(ne.memoizedState!==null){ly(ue);continue}}Ee!==null?(Ee.return=ne,Oe=Ee):ly(ue)}ie=ie.sibling}e:for(ie=null,ue=s;;){if(ue.tag===5){if(ie===null){ie=ue;try{m=ue.stateNode,q?(w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(P=ue.stateNode,j=ue.memoizedProps.style,k=j!=null&&j.hasOwnProperty("display")?j.display:null,P.style.display=Cn("display",k))}catch(je){Qt(s,s.return,je)}}}else if(ue.tag===6){if(ie===null)try{ue.stateNode.nodeValue=q?"":ue.memoizedProps}catch(je){Qt(s,s.return,je)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===s)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===s)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===s)break e;ie===ue&&(ie=null),ue=ue.return}ie===ue&&(ie=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Kn(o,s),fs(s),f&4&&sy(s);break;case 21:break;default:Kn(o,s),fs(s)}}function fs(s){var o=s.flags;if(o&2){try{e:{for(var c=s.return;c!==null;){if(ty(c)){var f=c;break e}c=c.return}throw Error(r(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(mt(m,""),f.flags&=-33);var w=ry(s);Zf(s,w,m);break;case 3:case 4:var k=f.stateNode.containerInfo,P=ry(s);Yf(s,P,k);break;default:throw Error(r(161))}}catch(j){Qt(s,s.return,j)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Mk(s,o,c){Oe=s,oy(s)}function oy(s,o,c){for(var f=(s.mode&1)!==0;Oe!==null;){var m=Oe,w=m.child;if(m.tag===22&&f){var k=m.memoizedState!==null||Uc;if(!k){var P=m.alternate,j=P!==null&&P.memoizedState!==null||Br;P=Uc;var q=Br;if(Uc=k,(Br=j)&&!q)for(Oe=m;Oe!==null;)k=Oe,j=k.child,k.tag===22&&k.memoizedState!==null?cy(m):j!==null?(j.return=k,Oe=j):cy(m);for(;w!==null;)Oe=w,oy(w),w=w.sibling;Oe=m,Uc=P,Br=q}ay(s)}else(m.subtreeFlags&8772)!==0&&w!==null?(w.return=m,Oe=w):ay(s)}}function ay(s){for(;Oe!==null;){var o=Oe;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Br||Bc(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Br)if(c===null)f.componentDidMount();else{var m=o.elementType===o.type?c.memoizedProps:Wn(o.type,c.memoizedProps);f.componentDidUpdate(m,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&lv(o,w,f);break;case 3:var k=o.updateQueue;if(k!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}lv(o,k,c)}break;case 5:var P=o.stateNode;if(c===null&&o.flags&4){c=P;var j=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&c.focus();break;case"img":j.src&&(c.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var q=o.alternate;if(q!==null){var ie=q.memoizedState;if(ie!==null){var ue=ie.dehydrated;ue!==null&&Ca(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Br||o.flags&512&&Qf(o)}catch(ne){Qt(o,o.return,ne)}}if(o===s){Oe=null;break}if(c=o.sibling,c!==null){c.return=o.return,Oe=c;break}Oe=o.return}}function ly(s){for(;Oe!==null;){var o=Oe;if(o===s){Oe=null;break}var c=o.sibling;if(c!==null){c.return=o.return,Oe=c;break}Oe=o.return}}function cy(s){for(;Oe!==null;){var o=Oe;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Bc(4,o)}catch(j){Qt(o,c,j)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var m=o.return;try{f.componentDidMount()}catch(j){Qt(o,m,j)}}var w=o.return;try{Qf(o)}catch(j){Qt(o,w,j)}break;case 5:var k=o.return;try{Qf(o)}catch(j){Qt(o,k,j)}}}catch(j){Qt(o,o.return,j)}if(o===s){Oe=null;break}var P=o.sibling;if(P!==null){P.return=o.return,Oe=P;break}Oe=o.return}}var $k=Math.ceil,zc=R.ReactCurrentDispatcher,Jf=R.ReactCurrentOwner,An=R.ReactCurrentBatchConfig,pt=0,xr=null,lr=null,Rr=0,mn=0,Lo=ei(0),fr=0,Ya=null,Bi=0,Vc=0,Xf=0,Za=null,an=null,eh=0,Mo=1/0,Rs=null,qc=!1,th=null,oi=null,Wc=!1,ai=null,Hc=0,Ja=0,rh=null,Kc=-1,Gc=0;function Hr(){return(pt&6)!==0?Bt():Kc!==-1?Kc:Kc=Bt()}function li(s){return(s.mode&1)===0?1:(pt&2)!==0&&Rr!==0?Rr&-Rr:xk.transition!==null?(Gc===0&&(Gc=rm()),Gc):(s=kt,s!==0||(s=window.event,s=s===void 0?16:dm(s.type)),s)}function Gn(s,o,c,f){if(50<Ja)throw Ja=0,rh=null,Error(r(185));_a(s,c,f),((pt&2)===0||s!==xr)&&(s===xr&&((pt&2)===0&&(Vc|=c),fr===4&&ci(s,Rr)),ln(s,f),c===1&&pt===0&&(o.mode&1)===0&&(Mo=Bt()+500,_c&&ri()))}function ln(s,o){var c=s.callbackNode;xS(s,o);var f=ks(s,s===xr?Rr:0);if(f===0)c!==null&&Pr(c),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(c!=null&&Pr(c),o===1)s.tag===0?bk(dy.bind(null,s)):Ym(dy.bind(null,s)),mk(function(){(pt&6)===0&&ri()}),c=null;else{switch(nm(f)){case 1:c=ba;break;case 4:c=xa;break;case 16:c=Hs;break;case 536870912:c=nc;break;default:c=Hs}c=wy(c,uy.bind(null,s))}s.callbackPriority=o,s.callbackNode=c}}function uy(s,o){if(Kc=-1,Gc=0,(pt&6)!==0)throw Error(r(327));var c=s.callbackNode;if($o()&&s.callbackNode!==c)return null;var f=ks(s,s===xr?Rr:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||o)o=Qc(s,f);else{o=f;var m=pt;pt|=2;var w=hy();(xr!==s||Rr!==o)&&(Rs=null,Mo=Bt()+500,Vi(s,o));do try{Bk();break}catch(P){fy(s,P)}while(!0);bf(),zc.current=w,pt=m,lr!==null?o=0:(xr=null,Rr=0,o=fr)}if(o!==0){if(o===2&&(m=Dd(s),m!==0&&(f=m,o=nh(s,m))),o===1)throw c=Ya,Vi(s,0),ci(s,f),ln(s,Bt()),c;if(o===6)ci(s,f);else{if(m=s.current.alternate,(f&30)===0&&!Fk(m)&&(o=Qc(s,f),o===2&&(w=Dd(s),w!==0&&(f=w,o=nh(s,w))),o===1))throw c=Ya,Vi(s,0),ci(s,f),ln(s,Bt()),c;switch(s.finishedWork=m,s.finishedLanes=f,o){case 0:case 1:throw Error(r(345));case 2:qi(s,an,Rs);break;case 3:if(ci(s,f),(f&130023424)===f&&(o=eh+500-Bt(),10<o)){if(ks(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){Hr(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=cf(qi.bind(null,s,an,Rs),o);break}qi(s,an,Rs);break;case 4:if(ci(s,f),(f&4194240)===f)break;for(o=s.eventTimes,m=-1;0<f;){var k=31-D(f);w=1<<k,k=o[k],k>m&&(m=k),f&=~w}if(f=m,f=Bt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*$k(f/1960))-f,10<f){s.timeoutHandle=cf(qi.bind(null,s,an,Rs),f);break}qi(s,an,Rs);break;case 5:qi(s,an,Rs);break;default:throw Error(r(329))}}}return ln(s,Bt()),s.callbackNode===c?uy.bind(null,s):null}function nh(s,o){var c=Za;return s.current.memoizedState.isDehydrated&&(Vi(s,o).flags|=256),s=Qc(s,o),s!==2&&(o=an,an=c,o!==null&&sh(o)),s}function sh(s){an===null?an=s:an.push.apply(an,s)}function Fk(s){for(var o=s;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var m=c[f],w=m.getSnapshot;m=m.value;try{if(!Vn(w(),m))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ci(s,o){for(o&=~Xf,o&=~Vc,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var c=31-D(o),f=1<<c;s[c]=-1,o&=~f}}function dy(s){if((pt&6)!==0)throw Error(r(327));$o();var o=ks(s,0);if((o&1)===0)return ln(s,Bt()),null;var c=Qc(s,o);if(s.tag!==0&&c===2){var f=Dd(s);f!==0&&(o=f,c=nh(s,f))}if(c===1)throw c=Ya,Vi(s,0),ci(s,o),ln(s,Bt()),c;if(c===6)throw Error(r(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,qi(s,an,Rs),ln(s,Bt()),null}function ih(s,o){var c=pt;pt|=1;try{return s(o)}finally{pt=c,pt===0&&(Mo=Bt()+500,_c&&ri())}}function zi(s){ai!==null&&ai.tag===0&&(pt&6)===0&&$o();var o=pt;pt|=1;var c=An.transition,f=kt;try{if(An.transition=null,kt=1,s)return s()}finally{kt=f,An.transition=c,pt=o,(pt&6)===0&&ri()}}function oh(){mn=Lo.current,Lt(Lo)}function Vi(s,o){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,gk(c)),lr!==null)for(c=lr.return;c!==null;){var f=c;switch(gf(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&bc();break;case 3:Ao(),Lt(nn),Lt($r),Of();break;case 5:Tf(f);break;case 4:Ao();break;case 13:Lt(zt);break;case 19:Lt(zt);break;case 10:xf(f.type._context);break;case 22:case 23:oh()}c=c.return}if(xr=s,lr=s=ui(s.current,null),Rr=mn=o,fr=0,Ya=null,Xf=Vc=Bi=0,an=Za=null,$i!==null){for(o=0;o<$i.length;o++)if(c=$i[o],f=c.interleaved,f!==null){c.interleaved=null;var m=f.next,w=c.pending;if(w!==null){var k=w.next;w.next=m,f.next=k}c.pending=f}$i=null}return s}function fy(s,o){do{var c=lr;try{if(bf(),Rc.current=Lc,Ac){for(var f=Vt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}Ac=!1}if(Ui=0,br=dr=Vt=null,qa=!1,Wa=0,Jf.current=null,c===null||c.return===null){fr=1,Ya=o,lr=null;break}e:{var w=s,k=c.return,P=c,j=o;if(o=Rr,P.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var q=j,ie=P,ue=ie.tag;if((ie.mode&1)===0&&(ue===0||ue===11||ue===15)){var ne=ie.alternate;ne?(ie.updateQueue=ne.updateQueue,ie.memoizedState=ne.memoizedState,ie.lanes=ne.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var Ee=Mv(k);if(Ee!==null){Ee.flags&=-257,$v(Ee,k,P,w,o),Ee.mode&1&&Lv(w,q,o),o=Ee,j=q;var Pe=o.updateQueue;if(Pe===null){var je=new Set;je.add(j),o.updateQueue=je}else Pe.add(j);break e}else{if((o&1)===0){Lv(w,q,o),ah();break e}j=Error(r(426))}}else if($t&&P.mode&1){var er=Mv(k);if(er!==null){(er.flags&65536)===0&&(er.flags|=256),$v(er,k,P,w,o),yf(Io(j,P));break e}}w=j=Io(j,P),fr!==4&&(fr=2),Za===null?Za=[w]:Za.push(w),w=k;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var L=Iv(w,j,o);av(w,L);break e;case 1:P=j;var I=w.type,U=w.stateNode;if((w.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(oi===null||!oi.has(U)))){w.flags|=65536,o&=-o,w.lanes|=o;var ge=Dv(w,P,o);av(w,ge);break e}}w=w.return}while(w!==null)}gy(c)}catch(Re){o=Re,lr===c&&c!==null&&(lr=c=c.return);continue}break}while(!0)}function hy(){var s=zc.current;return zc.current=Lc,s===null?Lc:s}function ah(){(fr===0||fr===3||fr===2)&&(fr=4),xr===null||(Bi&268435455)===0&&(Vc&268435455)===0||ci(xr,Rr)}function Qc(s,o){var c=pt;pt|=2;var f=hy();(xr!==s||Rr!==o)&&(Rs=null,Vi(s,o));do try{Uk();break}catch(m){fy(s,m)}while(!0);if(bf(),pt=c,zc.current=f,lr!==null)throw Error(r(261));return xr=null,Rr=0,fr}function Uk(){for(;lr!==null;)py(lr)}function Bk(){for(;lr!==null&&!zn();)py(lr)}function py(s){var o=yy(s.alternate,s,mn);s.memoizedProps=s.pendingProps,o===null?gy(s):lr=o,Jf.current=null}function gy(s){var o=s;do{var c=o.alternate;if(s=o.return,(o.flags&32768)===0){if(c=Ak(c,o,mn),c!==null){lr=c;return}}else{if(c=Ik(c,o),c!==null){c.flags&=32767,lr=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{fr=6,lr=null;return}}if(o=o.sibling,o!==null){lr=o;return}lr=o=s}while(o!==null);fr===0&&(fr=5)}function qi(s,o,c){var f=kt,m=An.transition;try{An.transition=null,kt=1,zk(s,o,c,f)}finally{An.transition=m,kt=f}return null}function zk(s,o,c,f){do $o();while(ai!==null);if((pt&6)!==0)throw Error(r(327));c=s.finishedWork;var m=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0;var w=c.lanes|c.childLanes;if(_S(s,w),s===xr&&(lr=xr=null,Rr=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Wc||(Wc=!0,wy(Hs,function(){return $o(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=An.transition,An.transition=null;var k=kt;kt=1;var P=pt;pt|=4,Jf.current=null,Lk(s,c),iy(c,s),lk(af),oc=!!of,af=of=null,s.current=c,Mk(c),rc(),pt=P,kt=k,An.transition=w}else s.current=c;if(Wc&&(Wc=!1,ai=s,Hc=m),w=s.pendingLanes,w===0&&(oi=null),Nr(c.stateNode),ln(s,Bt()),o!==null)for(f=s.onRecoverableError,c=0;c<o.length;c++)m=o[c],f(m.value,{componentStack:m.stack,digest:m.digest});if(qc)throw qc=!1,s=th,th=null,s;return(Hc&1)!==0&&s.tag!==0&&$o(),w=s.pendingLanes,(w&1)!==0?s===rh?Ja++:(Ja=0,rh=s):Ja=0,ri(),null}function $o(){if(ai!==null){var s=nm(Hc),o=An.transition,c=kt;try{if(An.transition=null,kt=16>s?16:s,ai===null)var f=!1;else{if(s=ai,ai=null,Hc=0,(pt&6)!==0)throw Error(r(331));var m=pt;for(pt|=4,Oe=s.current;Oe!==null;){var w=Oe,k=w.child;if((Oe.flags&16)!==0){var P=w.deletions;if(P!==null){for(var j=0;j<P.length;j++){var q=P[j];for(Oe=q;Oe!==null;){var ie=Oe;switch(ie.tag){case 0:case 11:case 15:Qa(8,ie,w)}var ue=ie.child;if(ue!==null)ue.return=ie,Oe=ue;else for(;Oe!==null;){ie=Oe;var ne=ie.sibling,Ee=ie.return;if(ey(ie),ie===q){Oe=null;break}if(ne!==null){ne.return=Ee,Oe=ne;break}Oe=Ee}}}var Pe=w.alternate;if(Pe!==null){var je=Pe.child;if(je!==null){Pe.child=null;do{var er=je.sibling;je.sibling=null,je=er}while(je!==null)}}Oe=w}}if((w.subtreeFlags&2064)!==0&&k!==null)k.return=w,Oe=k;else e:for(;Oe!==null;){if(w=Oe,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Qa(9,w,w.return)}var L=w.sibling;if(L!==null){L.return=w.return,Oe=L;break e}Oe=w.return}}var I=s.current;for(Oe=I;Oe!==null;){k=Oe;var U=k.child;if((k.subtreeFlags&2064)!==0&&U!==null)U.return=k,Oe=U;else e:for(k=I;Oe!==null;){if(P=Oe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Bc(9,P)}}catch(Re){Qt(P,P.return,Re)}if(P===k){Oe=null;break e}var ge=P.sibling;if(ge!==null){ge.return=P.return,Oe=ge;break e}Oe=P.return}}if(pt=m,ri(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Ai,s)}catch{}f=!0}return f}finally{kt=c,An.transition=o}}return!1}function my(s,o,c){o=Io(c,o),o=Iv(s,o,1),s=si(s,o,1),o=Hr(),s!==null&&(_a(s,1,o),ln(s,o))}function Qt(s,o,c){if(s.tag===3)my(s,s,c);else for(;o!==null;){if(o.tag===3){my(o,s,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(oi===null||!oi.has(f))){s=Io(c,s),s=Dv(o,s,1),o=si(o,s,1),s=Hr(),o!==null&&(_a(o,1,s),ln(o,s));break}}o=o.return}}function Vk(s,o,c){var f=s.pingCache;f!==null&&f.delete(o),o=Hr(),s.pingedLanes|=s.suspendedLanes&c,xr===s&&(Rr&c)===c&&(fr===4||fr===3&&(Rr&130023424)===Rr&&500>Bt()-eh?Vi(s,0):Xf|=c),ln(s,o)}function vy(s,o){o===0&&((s.mode&1)===0?o=1:(o=dt,dt<<=1,(dt&130023424)===0&&(dt=4194304)));var c=Hr();s=Ps(s,o),s!==null&&(_a(s,o,c),ln(s,c))}function qk(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),vy(s,c)}function Wk(s,o){var c=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(o),vy(s,c)}var yy;yy=function(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps||nn.current)on=!0;else{if((s.lanes&c)===0&&(o.flags&128)===0)return on=!1,Rk(s,o,c);on=(s.flags&131072)!==0}else on=!1,$t&&(o.flags&1048576)!==0&&Zm(o,kc,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Fc(s,o),s=o.pendingProps;var m=To(o,$r.current);Ro(o,c),m=jf(null,o,f,s,m,c);var w=Rf();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,sn(f)?(w=!0,xc(o)):w=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,kf(o),m.updater=Mc,o.stateNode=m,m._reactInternals=o,$f(o,f,s,c),o=zf(null,o,f,!0,w,c)):(o.tag=0,$t&&w&&pf(o),Wr(null,o,m,c),o=o.child),o;case 16:f=o.elementType;e:{switch(Fc(s,o),s=o.pendingProps,m=f._init,f=m(f._payload),o.type=f,m=o.tag=Kk(f),s=Wn(f,s),m){case 0:o=Bf(null,o,f,s,c);break e;case 1:o=qv(null,o,f,s,c);break e;case 11:o=Fv(null,o,f,s,c);break e;case 14:o=Uv(null,o,f,Wn(f.type,s),c);break e}throw Error(r(306,f,""))}return o;case 0:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Wn(f,m),Bf(s,o,f,m,c);case 1:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Wn(f,m),qv(s,o,f,m,c);case 3:e:{if(Wv(o),s===null)throw Error(r(387));f=o.pendingProps,w=o.memoizedState,m=w.element,ov(s,o),Nc(o,f,null,c);var k=o.memoizedState;if(f=k.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){m=Io(Error(r(423)),o),o=Hv(s,o,f,c,m);break e}else if(f!==m){m=Io(Error(r(424)),o),o=Hv(s,o,f,c,m);break e}else for(gn=Xs(o.stateNode.containerInfo.firstChild),pn=o,$t=!0,qn=null,c=sv(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Po(),f===m){o=js(s,o,c);break e}Wr(s,o,f,c)}o=o.child}return o;case 5:return cv(o),s===null&&vf(o),f=o.type,m=o.pendingProps,w=s!==null?s.memoizedProps:null,k=m.children,lf(f,m)?k=null:w!==null&&lf(f,w)&&(o.flags|=32),Vv(s,o),Wr(s,o,k,c),o.child;case 6:return s===null&&vf(o),null;case 13:return Kv(s,o,c);case 4:return Ef(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=No(o,null,f,c):Wr(s,o,f,c),o.child;case 11:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Wn(f,m),Fv(s,o,f,m,c);case 7:return Wr(s,o,o.pendingProps,c),o.child;case 8:return Wr(s,o,o.pendingProps.children,c),o.child;case 12:return Wr(s,o,o.pendingProps.children,c),o.child;case 10:e:{if(f=o.type._context,m=o.pendingProps,w=o.memoizedProps,k=m.value,At(Cc,f._currentValue),f._currentValue=k,w!==null)if(Vn(w.value,k)){if(w.children===m.children&&!nn.current){o=js(s,o,c);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var P=w.dependencies;if(P!==null){k=w.child;for(var j=P.firstContext;j!==null;){if(j.context===f){if(w.tag===1){j=Ns(-1,c&-c),j.tag=2;var q=w.updateQueue;if(q!==null){q=q.shared;var ie=q.pending;ie===null?j.next=j:(j.next=ie.next,ie.next=j),q.pending=j}}w.lanes|=c,j=w.alternate,j!==null&&(j.lanes|=c),_f(w.return,c,o),P.lanes|=c;break}j=j.next}}else if(w.tag===10)k=w.type===o.type?null:w.child;else if(w.tag===18){if(k=w.return,k===null)throw Error(r(341));k.lanes|=c,P=k.alternate,P!==null&&(P.lanes|=c),_f(k,c,o),k=w.sibling}else k=w.child;if(k!==null)k.return=w;else for(k=w;k!==null;){if(k===o){k=null;break}if(w=k.sibling,w!==null){w.return=k.return,k=w;break}k=k.return}w=k}Wr(s,o,m.children,c),o=o.child}return o;case 9:return m=o.type,f=o.pendingProps.children,Ro(o,c),m=jn(m),f=f(m),o.flags|=1,Wr(s,o,f,c),o.child;case 14:return f=o.type,m=Wn(f,o.pendingProps),m=Wn(f.type,m),Uv(s,o,f,m,c);case 15:return Bv(s,o,o.type,o.pendingProps,c);case 17:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Wn(f,m),Fc(s,o),o.tag=1,sn(f)?(s=!0,xc(o)):s=!1,Ro(o,c),Rv(o,f,m),$f(o,f,m,c),zf(null,o,f,!0,s,c);case 19:return Qv(s,o,c);case 22:return zv(s,o,c)}throw Error(r(156,o.tag))};function wy(s,o){return Ri(s,o)}function Hk(s,o,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(s,o,c,f){return new Hk(s,o,c,f)}function lh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Kk(s){if(typeof s=="function")return lh(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Y)return 11;if(s===Te)return 14}return 2}function ui(s,o){var c=s.alternate;return c===null?(c=In(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Yc(s,o,c,f,m,w){var k=2;if(f=s,typeof s=="function")lh(s)&&(k=1);else if(typeof s=="string")k=5;else e:switch(s){case M:return Wi(c.children,m,w,o);case X:k=8,m|=8;break;case V:return s=In(12,c,o,m|2),s.elementType=V,s.lanes=w,s;case re:return s=In(13,c,o,m),s.elementType=re,s.lanes=w,s;case Z:return s=In(19,c,o,m),s.elementType=Z,s.lanes=w,s;case ke:return Zc(c,m,w,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:k=10;break e;case te:k=9;break e;case Y:k=11;break e;case Te:k=14;break e;case de:k=16,f=null;break e}throw Error(r(130,s==null?s:typeof s,""))}return o=In(k,c,o,m),o.elementType=s,o.type=f,o.lanes=w,o}function Wi(s,o,c,f){return s=In(7,s,f,o),s.lanes=c,s}function Zc(s,o,c,f){return s=In(22,s,f,o),s.elementType=ke,s.lanes=c,s.stateNode={isHidden:!1},s}function ch(s,o,c){return s=In(6,s,null,o),s.lanes=c,s}function uh(s,o,c){return o=In(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function Gk(s,o,c,f,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ld(0),this.expirationTimes=Ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ld(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function dh(s,o,c,f,m,w,k,P,j){return s=new Gk(s,o,c,P,j),o===1?(o=1,w===!0&&(o|=8)):o=0,w=In(3,null,null,o),s.current=w,w.stateNode=s,w.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},kf(w),s}function Qk(s,o,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:f==null?null:""+f,children:s,containerInfo:o,implementation:c}}function by(s){if(!s)return ti;s=s._reactInternals;e:{if(ve(s)!==s||s.tag!==1)throw Error(r(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(sn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(r(171))}if(s.tag===1){var c=s.type;if(sn(c))return Gm(s,c,o)}return o}function xy(s,o,c,f,m,w,k,P,j){return s=dh(c,f,!0,s,m,w,k,P,j),s.context=by(null),c=s.current,f=Hr(),m=li(c),w=Ns(f,m),w.callback=o??null,si(c,w,m),s.current.lanes=m,_a(s,m,f),ln(s,f),s}function Jc(s,o,c,f){var m=o.current,w=Hr(),k=li(m);return c=by(c),o.context===null?o.context=c:o.pendingContext=c,o=Ns(w,k),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=si(m,o,k),s!==null&&(Gn(s,m,k,w),Pc(s,m,k)),k}function Xc(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function _y(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function fh(s,o){_y(s,o),(s=s.alternate)&&_y(s,o)}function Yk(){return null}var Sy=typeof reportError=="function"?reportError:function(s){console.error(s)};function hh(s){this._internalRoot=s}eu.prototype.render=hh.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));Jc(s,o,null,null)},eu.prototype.unmount=hh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;zi(function(){Jc(null,s,null,null)}),o[Es]=null}};function eu(s){this._internalRoot=s}eu.prototype.unstable_scheduleHydration=function(s){if(s){var o=om();s={blockedOn:null,target:s,priority:o};for(var c=0;c<Ys.length&&o!==0&&o<Ys[c].priority;c++);Ys.splice(c,0,s),c===0&&cm(s)}};function ph(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function tu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function ky(){}function Zk(s,o,c,f,m){if(m){if(typeof f=="function"){var w=f;f=function(){var q=Xc(k);w.call(q)}}var k=xy(o,f,s,0,null,!1,!1,"",ky);return s._reactRootContainer=k,s[Es]=k.current,La(s.nodeType===8?s.parentNode:s),zi(),k}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var P=f;f=function(){var q=Xc(j);P.call(q)}}var j=dh(s,0,!1,null,null,!1,!1,"",ky);return s._reactRootContainer=j,s[Es]=j.current,La(s.nodeType===8?s.parentNode:s),zi(function(){Jc(o,j,c,f)}),j}function ru(s,o,c,f,m){var w=c._reactRootContainer;if(w){var k=w;if(typeof m=="function"){var P=m;m=function(){var j=Xc(k);P.call(j)}}Jc(o,k,s,m)}else k=Zk(c,o,s,m,f);return Xc(k)}sm=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var c=fn(o.pendingLanes);c!==0&&(Md(o,c|1),ln(o,Bt()),(pt&6)===0&&(Mo=Bt()+500,ri()))}break;case 13:zi(function(){var f=Ps(s,1);if(f!==null){var m=Hr();Gn(f,s,1,m)}}),fh(s,1)}},$d=function(s){if(s.tag===13){var o=Ps(s,134217728);if(o!==null){var c=Hr();Gn(o,s,134217728,c)}fh(s,134217728)}},im=function(s){if(s.tag===13){var o=li(s),c=Ps(s,o);if(c!==null){var f=Hr();Gn(c,s,o,f)}fh(s,o)}},om=function(){return kt},am=function(s,o){var c=kt;try{return kt=s,o()}finally{kt=c}},qr=function(s,o,c){switch(o){case"input":if(Xr(s,c),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==s&&f.form===s.form){var m=wc(f);if(!m)throw Error(r(90));Zr(f),Xr(f,m)}}}break;case"textarea":Q(s,c);break;case"select":o=c.value,o!=null&&pe(s,!!c.multiple,o,!1)}},ir=ih,Jt=zi;var Jk={usingClientEntryPoint:!1,Events:[Fa,ko,wc,Ct,Kt,ih]},Xa={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xk={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Ut(s),s===null?null:s.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||Yk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{Ai=nu.inject(Xk),On=nu}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jk,cn.createPortal=function(s,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ph(o))throw Error(r(200));return Qk(s,o,null,c)},cn.createRoot=function(s,o){if(!ph(s))throw Error(r(299));var c=!1,f="",m=Sy;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=dh(s,1,!1,null,null,c,!1,f,m),s[Es]=o.current,La(s.nodeType===8?s.parentNode:s),new hh(o)},cn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=Ut(o),s=s===null?null:s.stateNode,s},cn.flushSync=function(s){return zi(s)},cn.hydrate=function(s,o,c){if(!tu(o))throw Error(r(200));return ru(null,s,o,!0,c)},cn.hydrateRoot=function(s,o,c){if(!ph(s))throw Error(r(405));var f=c!=null&&c.hydratedSources||null,m=!1,w="",k=Sy;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),o=xy(o,null,s,1,c??null,m,!1,w,k),s[Es]=o.current,La(s),f)for(s=0;s<f.length;s++)c=f[s],m=c._getVersion,m=m(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,m]:o.mutableSourceEagerHydrationData.push(c,m);return new eu(o)},cn.render=function(s,o,c){if(!tu(o))throw Error(r(200));return ru(null,s,o,!1,c)},cn.unmountComponentAtNode=function(s){if(!tu(s))throw Error(r(40));return s._reactRootContainer?(zi(function(){ru(null,null,s,!1,function(){s._reactRootContainer=null,s[Es]=null})}),!0):!1},cn.unstable_batchedUpdates=ih,cn.unstable_renderSubtreeIntoContainer=function(s,o,c,f){if(!tu(c))throw Error(r(200));if(s==null||s._reactInternals===void 0)throw Error(r(38));return ru(s,o,c,!1,f)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var Ry;function Jw(){if(Ry)return vh.exports;Ry=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vh.exports=aE(),vh.exports}var Ay;function lE(){if(Ay)return su;Ay=1;var t=Jw();return su.createRoot=t.createRoot,su.hydrateRoot=t.hydrateRoot,su}var cE=lE();function uE(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,i,a,l=[],u="",d=t.split("/");for(d[0]||d.shift();i=d.shift();)r=i[0],r==="*"?(l.push(r),u+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=i.indexOf("?",1),a=i.indexOf(".",1),l.push(i.substring(1,~n?n:~a?a:i.length)),u+=~n&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(u+=(~n?"?":"")+"\\"+i.substring(a))):u+="/"+i;return{keys:l,pattern:new RegExp("^"+u+(e?"(?=$|/)":"/?$"),"i")}}var b=nd();const tt=Zw(b),Xw=tE({__proto__:null,default:tt},[b]);var bh={exports:{}},xh={};var Iy;function dE(){if(Iy)return xh;Iy=1;var t=nd();function e(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function u(v,y){var x=y(),S=n({inst:{value:x,getSnapshot:y}}),_=S[0].inst,E=S[1];return a(function(){_.value=x,_.getSnapshot=y,d(_)&&E({inst:_})},[v,x,y]),i(function(){return d(_)&&E({inst:_}),v(function(){d(_)&&E({inst:_})})},[v]),l(x),x}function d(v){var y=v.getSnapshot;v=v.value;try{var x=y();return!r(v,x)}catch{return!0}}function h(v,y){return y()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return xh.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,xh}var Dy;function fE(){return Dy||(Dy=1,bh.exports=dE()),bh.exports}var hE=fE();const pE=Xw.useInsertionEffect,gE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eb=gE?b.useLayoutEffect:b.useEffect,mE=pE||eb,ng=t=>{const e=b.useRef([t,(...r)=>e[0](...r)]).current;return mE(()=>{e[0]=t}),e[1]},vE="popstate",sg="pushState",ig="replaceState",yE="hashchange",Ly=[vE,sg,ig,yE],wE=t=>{for(const e of Ly)addEventListener(e,t);return()=>{for(const e of Ly)removeEventListener(e,t)}},tb=(t,e)=>hE.useSyncExternalStore(wE,t,e),bE=()=>location.search,xE=({ssrSearch:t=""}={})=>tb(bE,()=>t),My=()=>location.pathname,_E=({ssrPath:t}={})=>tb(My,t?()=>t:My),SE=(t,{replace:e=!1,state:r=null}={})=>history[e?ig:sg](r,"",t),kE=(t={})=>[_E(t),SE],$y=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[$y]>"u"){for(const t of[sg,ig]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,$y,{value:!0})}const EE=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",rb=(t="")=>t==="/"?"":t,TE=(t,e)=>t[0]==="~"?t.slice(1):rb(e)+t,CE=(t="",e)=>EE(Fy(rb(t)),Fy(e)),Fy=t=>{try{return decodeURI(t)}catch{return t}},nb={hook:kE,searchHook:xE,parser:uE,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},sb=b.createContext(nb),Yl=()=>b.useContext(sb),ib={},ob=b.createContext(ib),ab=()=>b.useContext(ob),sd=t=>{const[e,r]=t.hook(t);return[CE(t.base,e),ng((n,i)=>r(TE(n,t.base),i))]},po=()=>sd(Yl()),lb=(t,e,r,n)=>{const{pattern:i,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",n),l=i.exec(r)||[],[u,...d]=l;return u!==void 0?[!0,(()=>{const h=a!==!1?Object.fromEntries(a.map((v,y)=>[v,d[y]])):l.groups;let g={...d};return h&&Object.assign(g,h),g})(),...n?[u]:[]]:[!1,null]},OE=({children:t,...e})=>{const r=Yl(),n=e.hook?nb:r;let i=n;const[a,l]=e.ssrPath?.split("?")??[];l&&(e.ssrSearch=l,e.ssrPath=a),e.hrefs=e.hrefs??e.hook?.hrefs;let u=b.useRef({}),d=u.current,h=d;for(let g in n){const v=g==="base"?n[g]+(e[g]||""):e[g]||n[g];d===h&&v!==h[g]&&(u.current=h={...h}),h[g]=v,v!==n[g]&&(i=h)}return b.createElement(sb.Provider,{value:i,children:t})},Uy=({children:t,component:e},r)=>e?b.createElement(e,{params:r}):typeof t=="function"?t(r):t,PE=t=>{let e=b.useRef(ib),r=e.current;for(const n in t)t[n]!==r[n]&&(r=t);return Object.keys(t).length===0&&(r=t),e.current=r},Fo=({path:t,nest:e,match:r,...n})=>{const i=Yl(),[a]=sd(i),[l,u,d]=r??lb(i.parser,t,a,e),h=PE({...ab(),...u});if(!l)return null;const g=d?b.createElement(OE,{base:d},Uy(n,h)):Uy(n,h);return b.createElement(ob.Provider,{value:h,children:g})},Uo=b.forwardRef((t,e)=>{const r=Yl(),[n,i]=sd(r),{to:a="",href:l=a,onClick:u,asChild:d,children:h,className:g,replace:v,state:y,...x}=t,S=ng(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(u?.(E),E.defaultPrevented||(E.preventDefault(),i(l,t)))}),_=r.hrefs(l[0]==="~"?l.slice(1):r.base+l,r);return d&&b.isValidElement(h)?b.cloneElement(h,{onClick:S,href:_}):b.createElement("a",{...x,onClick:S,href:_,className:g?.call?g(n===l):g,children:h,ref:e})}),cb=t=>Array.isArray(t)?t.flatMap(e=>cb(e&&e.type===b.Fragment?e.props.children:e)):[t],NE=({children:t,location:e})=>{const r=Yl(),[n]=sd(r);for(const i of cb(t)){let a=0;if(b.isValidElement(i)&&(a=lb(r.parser,i.props.path,e||n,i.props.nest))[0])return b.cloneElement(i,{match:a})}return null},ub=t=>{const{to:e,href:r=e}=t,[,n]=po(),i=ng(()=>n(e||r,t));return eb(()=>{i()},[]),null};var ma=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},so=typeof window>"u"||"Deno"in globalThis;function Ln(){}function jE(t,e){return typeof t=="function"?t(e):t}function ip(t){return typeof t=="number"&&t>=0&&t!==1/0}function db(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ra(t,e){return typeof t=="function"?t(e):t}function es(t,e){return typeof t=="function"?t(e):t}function By(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:l,stale:u}=t;if(l){if(n){if(e.queryHash!==og(l,e.options))return!1}else if(!kl(e.queryKey,l))return!1}if(r!=="all"){const d=e.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||i&&i!==e.state.fetchStatus||a&&!a(e))}function zy(t,e){const{exact:r,status:n,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(io(e.options.mutationKey)!==io(a))return!1}else if(!kl(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function og(t,e){return(e?.queryKeyHashFn||io)(t)}function io(t){return JSON.stringify(t,(e,r)=>op(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function kl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!kl(t[r],e[r])):!1}function fb(t,e){if(t===e)return t;const r=Vy(t)&&Vy(e);if(r||op(t)&&op(e)){const n=r?t:Object.keys(t),i=n.length,a=r?e:Object.keys(e),l=a.length,u=r?[]:{};let d=0;for(let h=0;h<l;h++){const g=r?h:a[h];(!r&&n.includes(g)||r)&&t[g]===void 0&&e[g]===void 0?(u[g]=void 0,d++):(u[g]=fb(t[g],e[g]),u[g]===t[g]&&t[g]!==void 0&&d++)}return i===l&&d===i?t:u}return e}function Ou(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Vy(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function op(t){if(!qy(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!qy(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function qy(t){return Object.prototype.toString.call(t)==="[object Object]"}function RE(t){return new Promise(e=>{setTimeout(e,t)})}function ap(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?fb(t,e):e}function AE(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function IE(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var ag=Symbol();function hb(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===ag?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var DE=class extends ma{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!so&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},lg=new DE,LE=class extends ma{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!so&&window.addEventListener){const e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},Pu=new LE;function lp(){let t,e;const r=new Promise((i,a)=>{t=i,e=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}function ME(t){return Math.min(1e3*2**t,3e4)}function pb(t){return(t??"online")==="online"?Pu.isOnline():!0}var gb=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function _h(t){return t instanceof gb}function mb(t){let e=!1,r=0,n=!1,i;const a=lp(),l=_=>{n||(y(new gb(_)),t.abort?.())},u=()=>{e=!0},d=()=>{e=!1},h=()=>lg.isFocused()&&(t.networkMode==="always"||Pu.isOnline())&&t.canRun(),g=()=>pb(t.networkMode)&&t.canRun(),v=_=>{n||(n=!0,t.onSuccess?.(_),i?.(),a.resolve(_))},y=_=>{n||(n=!0,t.onError?.(_),i?.(),a.reject(_))},x=()=>new Promise(_=>{i=E=>{(n||h())&&_(E)},t.onPause?.()}).then(()=>{i=void 0,n||t.onContinue?.()}),S=()=>{if(n)return;let _;const E=r===0?t.initialPromise:void 0;try{_=E??t.fn()}catch(C){_=Promise.reject(C)}Promise.resolve(_).then(v).catch(C=>{if(n)return;const T=t.retry??(so?0:3),O=t.retryDelay??ME,R=typeof O=="function"?O(r,C):O,F=T===!0||typeof T=="number"&&r<T||typeof T=="function"&&T(r,C);if(e||!F){y(C);return}r++,t.onFail?.(r,C),RE(R).then(()=>h()?void 0:x()).then(()=>{e?y(C):S()})})};return{promise:a,cancel:l,continue:()=>(i?.(),a),cancelRetry:u,continueRetry:d,canStart:g,start:()=>(g()?S():x().then(S),a)}}function $E(){let t=[],e=0,r=u=>{u()},n=u=>{u()},i=u=>setTimeout(u,0);const a=u=>{e?t.push(u):i(()=>{r(u)})},l=()=>{const u=t;t=[],u.length&&i(()=>{n(()=>{u.forEach(d=>{r(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||l()}return d},batchCalls:u=>(...d)=>{a(()=>{u(...d)})},schedule:a,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{i=u}}}var mr=$E(),vb=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ip(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(so?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},FE=class extends vb{#e;#t;#n;#r;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=UE(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const r=ap(this.state.data,t,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),r}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(Ln).catch(Ln):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>es(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ag||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!db(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#i?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(d=>d.options.queryFn);u&&this.setOptions(u.options)}const r=new AbortController,n=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#i=!0,r.signal)})},i=()=>{const u=hb(this.options,e),d={queryKey:this.queryKey,meta:this.meta};return n(d),this.#i=!1,this.options.persister?this.options.persister(u,d,this):u(d)},a={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};n(a),this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta});const l=u=>{_h(u)&&u.silent||this.#s({type:"error",error:u}),_h(u)||(this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this)),this.scheduleGc()};return this.#r=mb({initialPromise:e?.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:u=>{if(u===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(d){l(d);return}this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),this.scheduleGc()},onError:l,onFail:(u,d)=>{this.#s({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#r.start()}#s(t){const e=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...yb(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return _h(n)&&n.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=e(this.state),mr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function yb(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function UE(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var BE=class extends ma{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,r){const n=e.queryKey,i=e.queryHash??og(n,e);let a=this.get(i);return a||(a=new FE({cache:this,queryKey:n,queryHash:i,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){mr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(r=>By(e,r))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(r=>By(t,r)):e}notify(t){mr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){mr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){mr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},zE=class extends vb{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||wb(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=mb({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(n,i)=>{this.#r({type:"failed",failureCount:n,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",r=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:r}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:r})}const n=await this.#n.start();return await this.#t.config.onSuccess?.(n,t,this.state.context,this),await this.options.onSuccess?.(n,t,this.state.context),await this.#t.config.onSettled?.(n,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(n,null,t,this.state.context),this.#r({type:"success",data:n}),n}catch(n){try{throw await this.#t.config.onError?.(n,t,this.state.context,this),await this.options.onError?.(n,t,this.state.context),await this.#t.config.onSettled?.(void 0,n,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,n,t,this.state.context),n}finally{this.#r({type:"error",error:n})}}finally{this.#t.runNext(this)}}#r(t){const e=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),mr.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function wb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var VE=class extends ma{constructor(t={}){super(),this.config=t,this.#e=new Map,this.#t=Date.now()}#e;#t;build(t,e,r){const n=new zE({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(e),state:r});return this.add(n),n}add(t){const e=iu(t),r=this.#e.get(e)??[];r.push(t),this.#e.set(e,r),this.notify({type:"added",mutation:t})}remove(t){const e=iu(t);if(this.#e.has(e)){const r=this.#e.get(e)?.filter(n=>n!==t);r&&(r.length===0?this.#e.delete(e):this.#e.set(e,r))}this.notify({type:"removed",mutation:t})}canRun(t){const e=this.#e.get(iu(t))?.find(r=>r.state.status==="pending");return!e||e===t}runNext(t){return this.#e.get(iu(t))?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve()}clear(){mr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#e.values()].flat()}find(t){const e={exact:!0,...t};return this.getAll().find(r=>zy(e,r))}findAll(t={}){return this.getAll().filter(e=>zy(t,e))}notify(t){mr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return mr.batch(()=>Promise.all(t.map(e=>e.continue().catch(Ln))))}};function iu(t){return t.options.scope?.id??String(t.mutationId)}function Wy(t){return{onFetch:(e,r)=>{const n=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let g=!1;const v=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=hb(e.options,e.fetchOptions),x=async(S,_,E)=>{if(g)return Promise.reject();if(_==null&&S.pages.length)return Promise.resolve(S);const C={queryKey:e.queryKey,pageParam:_,direction:E?"backward":"forward",meta:e.options.meta};v(C);const T=await y(C),{maxPages:O}=e.options,R=E?IE:AE;return{pages:R(S.pages,T,O),pageParams:R(S.pageParams,_,O)}};if(i&&a.length){const S=i==="backward",_=S?qE:Hy,E={pages:a,pageParams:l},C=_(n,E);u=await x(E,C,S)}else{const S=t??a.length;do{const _=d===0?l[0]??n.initialPageParam:Hy(n,u);if(d>0&&_==null)break;u=await x(u,_),d++}while(d<S)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r):e.fetchFn=h}}}function Hy(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function qE(t,{pages:e,pageParams:r}){return e.length>0?t.getPreviousPageParam?.(e[0],e,r[0],r):void 0}var WE=class{#e;#t;#n;#r;#o;#i;#s;#a;constructor(t={}){this.#e=t.queryCache||new BE,this.#t=t.mutationCache||new VE,this.#n=t.defaultOptions||{},this.#r=new Map,this.#o=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#s=lg.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Pu.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=this.#e.build(this,r);return t.revalidateIfStale&&n.isStaleByTime(ra(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(n.queryHash)?.state.data,l=jE(e,a);if(l!==void 0)return this.#e.build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,e,r){return mr.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;mr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=this.#e,n={type:"active",...t};return mr.batch(()=>(r.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=mr.batch(()=>this.#e.findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(Ln).catch(Ln)}invalidateQueries(t={},e={}){return mr.batch(()=>{if(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:e?.cancelRefetch??!0},n=mr.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(Ln)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Ln)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=this.#e.build(this,e);return r.isStaleByTime(ra(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ln).catch(Ln)}fetchInfiniteQuery(t){return t.behavior=Wy(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ln).catch(Ln)}ensureInfiniteQueryData(t){return t.behavior=Wy(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Pu.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(io(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()];let r={};return e.forEach(n=>{kl(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){this.#o.set(io(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#o.values()];let r={};return e.forEach(n=>{kl(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=og(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===ag&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},HE=class extends ma{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#s=lp(),this.options.experimental_prefetchInRender||this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#o;#i;#s;#a;#g;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Ky(this.#t,this.options)?this.#d():this.updateResult(),this.#w())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return cp(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return cp(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#x(),this.#t.removeObserver(this)}setOptions(t,e){const r=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof es(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),r._defaulted&&!Ou(this.options,r)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&Gy(this.#t,n,this.options,r)&&this.#d(),this.updateResult(e),i&&(this.#t!==n||es(this.options.enabled,this.#t)!==es(r.enabled,this.#t)||ra(this.options.staleTime,this.#t)!==ra(r.staleTime,this.#t))&&this.#m();const a=this.#v();i&&(this.#t!==n||es(this.options.enabled,this.#t)!==es(r.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),r=this.createResult(e,t);return GE(this,r)&&(this.#r=r,this.#i=this.options,this.#o=this.#t.state),r}getCurrentResult(){return this.#r}trackResult(t,e){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),e?.(n),t[n])})}),r}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),r=this.#e.getQueryCache().build(this.#e,e);return r.fetch().then(()=>this.createResult(r,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Ln)),e}#m(){this.#b();const t=ra(this.options.staleTime,this.#t);if(so||this.#r.isStale||!ip(t))return;const r=db(this.#r.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#x(),this.#l=t,!(so||es(this.options.enabled,this.#t)===!1||!ip(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||lg.isFocused())&&this.#d()},this.#l))}#w(){this.#m(),this.#y(this.#v())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#x(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const r=this.#t,n=this.options,i=this.#r,a=this.#o,l=this.#i,d=t!==r?t.state:this.#n,{state:h}=t;let g={...h},v=!1,y;if(e._optimisticResults){const M=this.hasListeners(),X=!M&&Ky(t,e),V=M&&Gy(t,r,e,n);(X||V)&&(g={...g,...yb(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:x,errorUpdatedAt:S,status:_}=g;if(e.select&&g.data!==void 0)if(i&&g.data===a?.data&&e.select===this.#g)y=this.#f;else try{this.#g=e.select,y=e.select(g.data),y=ap(i?.data,y,e),this.#f=y,this.#a=null}catch(M){this.#a=M}else y=g.data;if(e.placeholderData!==void 0&&y===void 0&&_==="pending"){let M;if(i?.isPlaceholderData&&e.placeholderData===l?.placeholderData)M=i.data;else if(M=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,e.select&&M!==void 0)try{M=e.select(M),this.#a=null}catch(X){this.#a=X}M!==void 0&&(_="success",y=ap(i?.data,M,e),v=!0)}this.#a&&(x=this.#a,y=this.#f,S=Date.now(),_="error");const E=g.fetchStatus==="fetching",C=_==="pending",T=_==="error",O=C&&E,R=y!==void 0,B={status:_,fetchStatus:g.fetchStatus,isPending:C,isSuccess:_==="success",isError:T,isInitialLoading:O,isLoading:O,data:y,dataUpdatedAt:g.dataUpdatedAt,error:x,errorUpdatedAt:S,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>d.dataUpdateCount||g.errorUpdateCount>d.errorUpdateCount,isFetching:E,isRefetching:E&&!C,isLoadingError:T&&!R,isPaused:g.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:T&&R,isStale:cg(t,e),refetch:this.refetch,promise:this.#s};if(this.options.experimental_prefetchInRender){const M=W=>{B.status==="error"?W.reject(B.error):B.data!==void 0&&W.resolve(B.data)},X=()=>{const W=this.#s=B.promise=lp();M(W)},V=this.#s;switch(V.status){case"pending":t.queryHash===r.queryHash&&M(V);break;case"fulfilled":(B.status==="error"||B.data!==V.value)&&X();break;case"rejected":(B.status!=="error"||B.error!==V.reason)&&X();break}}return B}updateResult(t){const e=this.#r,r=this.createResult(this.#t,this.options);if(this.#o=this.#t.state,this.#i=this.options,this.#o.data!==void 0&&(this.#h=this.#t),Ou(r,e))return;this.#r=r;const n={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!this.#p.size)return!0;const u=new Set(l??this.#p);return this.options.throwOnError&&u.add("error"),Object.keys(this.#r).some(d=>{const h=d;return this.#r[h]!==e[h]&&u.has(h)})};t?.listeners!==!1&&i()&&(n.listeners=!0),this.#S({...n,...t})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#w()}#S(t){mr.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function KE(t,e){return es(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Ky(t,e){return KE(t,e)||t.state.data!==void 0&&cp(t,e,e.refetchOnMount)}function cp(t,e,r){if(es(e.enabled,t)!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&cg(t,e)}return!1}function Gy(t,e,r,n){return(t!==e||es(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&cg(t,r)}function cg(t,e){return es(e.enabled,t)!==!1&&t.isStaleByTime(ra(e.staleTime,t))}function GE(t,e){return!Ou(t.getCurrentResult(),e)}var QE=class extends ma{#e;#t=void 0;#n;#r;constructor(e,r){super(),this.#e=e,this.setOptions(r),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const r=this.options;this.options=this.#e.defaultMutationOptions(e),Ou(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),r?.mutationKey&&this.options.mutationKey&&io(r.mutationKey)!==io(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#o(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#o(),this.#i()}mutate(e,r){return this.#r=r,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#o(){const e=this.#n?.state??wb();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#i(e){mr.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,r,n),this.#r.onSettled?.(e.data,null,r,n)):e?.type==="error"&&(this.#r.onError?.(e.error,r,n),this.#r.onSettled?.(void 0,e.error,r,n))}this.listeners.forEach(r=>{r(this.#t)})})}},bb=b.createContext(void 0),id=t=>{const e=b.useContext(bb);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},YE=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(bb.Provider,{value:t,children:e})),xb=b.createContext(!1),ZE=()=>b.useContext(xb);xb.Provider;function JE(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var XE=b.createContext(JE()),eT=()=>b.useContext(XE);function _b(t,e){return typeof t=="function"?t(...e):!!t}function up(){}var tT=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},rT=t=>{b.useEffect(()=>{t.clearReset()},[t])},nT=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&_b(r,[t.error,n]),sT=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},iT=(t,e)=>t.isLoading&&t.isFetching&&!e,oT=(t,e)=>t?.suspense&&e.isPending,Qy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function aT(t,e,r){const n=id(),i=ZE(),a=eT(),l=n.defaultQueryOptions(t);n.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=i?"isRestoring":"optimistic",sT(l),tT(l,a),rT(a);const u=!n.getQueryCache().get(l.queryHash),[d]=b.useState(()=>new e(n,l)),h=d.getOptimisticResult(l);if(b.useSyncExternalStore(b.useCallback(g=>{const v=i?up:d.subscribe(mr.batchCalls(g));return d.updateResult(),v},[d,i]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),b.useEffect(()=>{d.setOptions(l,{listeners:!1})},[l,d]),oT(l,h))throw Qy(l,d,a);if(nT({result:h,errorResetBoundary:a,throwOnError:l.throwOnError,query:n.getQueryCache().get(l.queryHash)}))throw h.error;return n.getDefaultOptions().queries?._experimental_afterQuery?.(l,h),l.experimental_prefetchInRender&&!so&&iT(h,i)&&(u?Qy(l,d,a):n.getQueryCache().get(l.queryHash)?.promise)?.catch(up).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?h:d.trackResult(h)}function Nu(t,e){return aT(t,HE)}function Sh(t,e){const r=id(),[n]=b.useState(()=>new QE(r,t));b.useEffect(()=>{n.setOptions(t)},[n,t]);const i=b.useSyncExternalStore(b.useCallback(l=>n.subscribe(mr.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=b.useCallback((l,u)=>{n.mutate(l,u).catch(up)},[n]);if(i.error&&_b(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const lT={},cT="auth_token";function uT(t){const e=t.trim();return e?/^https?:\/\//i.test(e)?e.replace(/\/+$/g,""):/^\/\//.test(e)?`https:${e.replace(/\/+$/g,"")}`:e.startsWith("/")?e.replace(/\/+$/g,""):`https://${e.replace(/\/+$/g,"")}`:""}function dT(){const t=lT?.VITE_API_BASE_URL,e=t?uT(t):"";return e||""}const Qr=dT();function fT(){try{return localStorage.getItem(cT)}catch{return null}}function Sb(t){const e=fT();return e?{...t,Authorization:`Bearer ${e}`}:t}async function kb(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function hT(t,e,r){const n=await fetch(Qr+e,{method:t,headers:Sb(r?{"Content-Type":"application/json"}:{}),body:r?JSON.stringify(r):void 0});return await kb(n),n}const pT=({on401:t})=>async({queryKey:e})=>{const r=await fetch(Qr+e.join("/"),{headers:Sb({})});return await kb(r),await r.json()},gT=new WE({defaultOptions:{queries:{queryFn:pT({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),mT=1,vT=1e6;let kh=0;function yT(){return kh=(kh+1)%Number.MAX_SAFE_INTEGER,kh.toString()}const Eh=new Map,Yy=t=>{if(Eh.has(t))return;const e=setTimeout(()=>{Eh.delete(t),vl({type:"REMOVE_TOAST",toastId:t})},vT);Eh.set(t,e)},wT=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,mT)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Yy(r):t.toasts.forEach(n=>{Yy(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},bu=[];let xu={toasts:[]};function vl(t){xu=wT(xu,t),bu.forEach(e=>{e(xu)})}function bT({...t}){const e=yT(),r=i=>vl({type:"UPDATE_TOAST",toast:{...i,id:e}}),n=()=>vl({type:"DISMISS_TOAST",toastId:e});return vl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||n()}}}),{id:e,dismiss:n,update:r}}function go(){const[t,e]=b.useState(xu);return b.useEffect(()=>(bu.push(e),()=>{const r=bu.indexOf(e);r>-1&&bu.splice(r,1)}),[t]),{...t,toast:bT,dismiss:r=>vl({type:"DISMISS_TOAST",toastId:r})}}var od=Jw();const xT=Zw(od);function ut(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t?.(i),r===!1||!i.defaultPrevented)return e?.(i)}}function Zy(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Eb(...t){return e=>{let r=!1;const n=t.map(i=>{const a=Zy(i,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():Zy(t[i],null)}}}}function kr(...t){return b.useCallback(Eb(...t),t)}function Ni(t,e=[]){let r=[];function n(a,l){const u=b.createContext(l),d=r.length;r=[...r,l];const h=v=>{const{scope:y,children:x,...S}=v,_=y?.[t]?.[d]||u,E=b.useMemo(()=>S,Object.values(S));return p.jsx(_.Provider,{value:E,children:x})};h.displayName=a+"Provider";function g(v,y){const x=y?.[t]?.[d]||u,S=b.useContext(x);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[h,g]}const i=()=>{const a=r.map(l=>b.createContext(l));return function(u){const d=u?.[t]||a;return b.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return i.scopeName=t,[n,_T(i,...e)]}function _T(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=n.reduce((u,{useScope:d,scopeName:h})=>{const v=d(a)[`__scope${h}`];return{...u,...v}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return r.scopeName=e.scopeName,r}function ju(t){const e=ST(t),r=b.forwardRef((n,i)=>{const{children:a,...l}=n,u=b.Children.toArray(a),d=u.find(ET);if(d){const h=d.props.children,g=u.map(v=>v===d?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:v);return p.jsx(e,{...l,ref:i,children:b.isValidElement(h)?b.cloneElement(h,void 0,g):null})}return p.jsx(e,{...l,ref:i,children:a})});return r.displayName=`${t}.Slot`,r}var Tb=ju("Slot");function ST(t){const e=b.forwardRef((r,n)=>{const{children:i,...a}=r;if(b.isValidElement(i)){const l=CT(i),u=TT(a,i.props);return i.type!==b.Fragment&&(u.ref=n?Eb(n,l):l),b.cloneElement(i,u)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Cb=Symbol("radix.slottable");function kT(t){const e=({children:r})=>p.jsx(p.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=Cb,e}function ET(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Cb}function TT(t,e){const r={...e};for(const n in e){const i=t[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...u)=>{a(...u),i(...u)}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}function CT(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Ob(t){const e=t+"CollectionProvider",[r,n]=Ni(e),[i,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),l=_=>{const{scope:E,children:C}=_,T=tt.useRef(null),O=tt.useRef(new Map).current;return p.jsx(i,{scope:E,itemMap:O,collectionRef:T,children:C})};l.displayName=e;const u=t+"CollectionSlot",d=ju(u),h=tt.forwardRef((_,E)=>{const{scope:C,children:T}=_,O=a(u,C),R=kr(E,O.collectionRef);return p.jsx(d,{ref:R,children:T})});h.displayName=u;const g=t+"CollectionItemSlot",v="data-radix-collection-item",y=ju(g),x=tt.forwardRef((_,E)=>{const{scope:C,children:T,...O}=_,R=tt.useRef(null),F=kr(E,R),B=a(g,C);return tt.useEffect(()=>(B.itemMap.set(R,{ref:R,...O}),()=>{B.itemMap.delete(R)})),p.jsx(y,{[v]:"",ref:F,children:T})});x.displayName=g;function S(_){const E=a(t+"CollectionConsumer",_);return tt.useCallback(()=>{const T=E.collectionRef.current;if(!T)return[];const O=Array.from(T.querySelectorAll(`[${v}]`));return Array.from(E.itemMap.values()).sort((B,M)=>O.indexOf(B.ref.current)-O.indexOf(M.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:l,Slot:h,ItemSlot:x},S,n]}var OT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Tt=OT.reduce((t,e)=>{const r=ju(`Primitive.${e}`),n=b.forwardRef((i,a)=>{const{asChild:l,...u}=i,d=l?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(d,{...u,ref:a})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Pb(t,e){t&&od.flushSync(()=>t.dispatchEvent(e))}function vr(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...r)=>e.current?.(...r),[])}function PT(t,e=globalThis?.document){const r=vr(t);b.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var NT="DismissableLayer",dp="dismissableLayer.update",jT="dismissableLayer.pointerDownOutside",RT="dismissableLayer.focusOutside",Jy,Nb=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ug=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:u,...d}=t,h=b.useContext(Nb),[g,v]=b.useState(null),y=g?.ownerDocument??globalThis?.document,[,x]=b.useState({}),S=kr(e,M=>v(M)),_=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=_.indexOf(E),T=g?_.indexOf(g):-1,O=h.layersWithOutsidePointerEventsDisabled.size>0,R=T>=C,F=IT(M=>{const X=M.target,V=[...h.branches].some(W=>W.contains(X));!R||V||(i?.(M),l?.(M),M.defaultPrevented||u?.())},y),B=DT(M=>{const X=M.target;[...h.branches].some(W=>W.contains(X))||(a?.(M),l?.(M),M.defaultPrevented||u?.())},y);return PT(M=>{T===h.layers.size-1&&(n?.(M),!M.defaultPrevented&&u&&(M.preventDefault(),u()))},y),b.useEffect(()=>{if(g)return r&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Jy=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(g)),h.layers.add(g),Xy(),()=>{r&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Jy)}},[g,y,r,h]),b.useEffect(()=>()=>{g&&(h.layers.delete(g),h.layersWithOutsidePointerEventsDisabled.delete(g),Xy())},[g,h]),b.useEffect(()=>{const M=()=>x({});return document.addEventListener(dp,M),()=>document.removeEventListener(dp,M)},[]),p.jsx(Tt.div,{...d,ref:S,style:{pointerEvents:O?R?"auto":"none":void 0,...t.style},onFocusCapture:ut(t.onFocusCapture,B.onFocusCapture),onBlurCapture:ut(t.onBlurCapture,B.onBlurCapture),onPointerDownCapture:ut(t.onPointerDownCapture,F.onPointerDownCapture)})});ug.displayName=NT;var AT="DismissableLayerBranch",jb=b.forwardRef((t,e)=>{const r=b.useContext(Nb),n=b.useRef(null),i=kr(e,n);return b.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),p.jsx(Tt.div,{...t,ref:i})});jb.displayName=AT;function IT(t,e=globalThis?.document){const r=vr(t),n=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const a=u=>{if(u.target&&!n.current){let d=function(){Rb(jT,r,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function DT(t,e=globalThis?.document){const r=vr(t),n=b.useRef(!1);return b.useEffect(()=>{const i=a=>{a.target&&!n.current&&Rb(RT,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Xy(){const t=new CustomEvent(dp);document.dispatchEvent(t)}function Rb(t,e,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?Pb(i,a):i.dispatchEvent(a)}var LT=ug,MT=jb,$n=globalThis?.document?b.useLayoutEffect:()=>{},$T="Portal",Ab=b.forwardRef((t,e)=>{const{container:r,...n}=t,[i,a]=b.useState(!1);$n(()=>a(!0),[]);const l=r||i&&globalThis?.document?.body;return l?xT.createPortal(p.jsx(Tt.div,{...n,ref:e}),l):null});Ab.displayName=$T;function FT(t,e){return b.useReducer((r,n)=>e[r][n]??r,t)}var ji=t=>{const{present:e,children:r}=t,n=UT(e),i=typeof r=="function"?r({present:n.isPresent}):b.Children.only(r),a=kr(n.ref,BT(i));return typeof r=="function"||n.isPresent?b.cloneElement(i,{ref:a}):null};ji.displayName="Presence";function UT(t){const[e,r]=b.useState(),n=b.useRef({}),i=b.useRef(t),a=b.useRef("none"),l=t?"mounted":"unmounted",[u,d]=FT(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const h=ou(n.current);a.current=u==="mounted"?h:"none"},[u]),$n(()=>{const h=n.current,g=i.current;if(g!==t){const y=a.current,x=ou(h);t?d("MOUNT"):x==="none"||h?.display==="none"?d("UNMOUNT"):d(g&&y!==x?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),$n(()=>{if(e){let h;const g=e.ownerDocument.defaultView??window,v=x=>{const _=ou(n.current).includes(x.animationName);if(x.target===e&&_&&(d("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},y=x=>{x.target===e&&(a.current=ou(n.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(h),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:b.useCallback(h=>{h&&(n.current=getComputedStyle(h)),r(h)},[])}}function ou(t){return t?.animationName||"none"}function BT(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function dg({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,i]=zT({defaultProp:e,onChange:r}),a=t!==void 0,l=a?t:n,u=vr(r),d=b.useCallback(h=>{if(a){const v=typeof h=="function"?h(t):h;v!==t&&u(v)}else i(h)},[a,t,i,u]);return[l,d]}function zT({defaultProp:t,onChange:e}){const r=b.useState(t),[n]=r,i=b.useRef(n),a=vr(e);return b.useEffect(()=>{i.current!==n&&(a(n),i.current=n)},[n,i,a]),r}var VT="VisuallyHidden",ad=b.forwardRef((t,e)=>p.jsx(Tt.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));ad.displayName=VT;var qT=ad,fg="ToastProvider",[hg,WT,HT]=Ob("Toast"),[Ib]=Ni("Toast",[HT]),[KT,ld]=Ib(fg),Db=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:l}=t,[u,d]=b.useState(null),[h,g]=b.useState(0),v=b.useRef(!1),y=b.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${fg}\`. Expected non-empty \`string\`.`),p.jsx(hg.Provider,{scope:e,children:p.jsx(KT,{scope:e,label:r,duration:n,swipeDirection:i,swipeThreshold:a,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:b.useCallback(()=>g(x=>x+1),[]),onToastRemove:b.useCallback(()=>g(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:y,children:l})})};Db.displayName=fg;var Lb="ToastViewport",GT=["F8"],fp="toast.viewportPause",hp="toast.viewportResume",Mb=b.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=GT,label:i="Notifications ({hotkey})",...a}=t,l=ld(Lb,r),u=WT(r),d=b.useRef(null),h=b.useRef(null),g=b.useRef(null),v=b.useRef(null),y=kr(e,v,l.onViewportChange),x=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=l.toastCount>0;b.useEffect(()=>{const E=C=>{n.length!==0&&n.every(O=>C[O]||C.code===O)&&v.current?.focus()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[n]),b.useEffect(()=>{const E=d.current,C=v.current;if(S&&E&&C){const T=()=>{if(!l.isClosePausedRef.current){const B=new CustomEvent(fp);C.dispatchEvent(B),l.isClosePausedRef.current=!0}},O=()=>{if(l.isClosePausedRef.current){const B=new CustomEvent(hp);C.dispatchEvent(B),l.isClosePausedRef.current=!1}},R=B=>{!E.contains(B.relatedTarget)&&O()},F=()=>{E.contains(document.activeElement)||O()};return E.addEventListener("focusin",T),E.addEventListener("focusout",R),E.addEventListener("pointermove",T),E.addEventListener("pointerleave",F),window.addEventListener("blur",T),window.addEventListener("focus",O),()=>{E.removeEventListener("focusin",T),E.removeEventListener("focusout",R),E.removeEventListener("pointermove",T),E.removeEventListener("pointerleave",F),window.removeEventListener("blur",T),window.removeEventListener("focus",O)}}},[S,l.isClosePausedRef]);const _=b.useCallback(({tabbingDirection:E})=>{const T=u().map(O=>{const R=O.ref.current,F=[R,...aC(R)];return E==="forwards"?F:F.reverse()});return(E==="forwards"?T.reverse():T).flat()},[u]);return b.useEffect(()=>{const E=v.current;if(E){const C=T=>{const O=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!O){const F=document.activeElement,B=T.shiftKey;if(T.target===E&&B){h.current?.focus();return}const V=_({tabbingDirection:B?"backwards":"forwards"}),W=V.findIndex(te=>te===F);Th(V.slice(W+1))?T.preventDefault():B?h.current?.focus():g.current?.focus()}};return E.addEventListener("keydown",C),()=>E.removeEventListener("keydown",C)}},[u,_]),p.jsxs(MT,{ref:d,role:"region","aria-label":i.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&p.jsx(pp,{ref:h,onFocusFromOutsideViewport:()=>{const E=_({tabbingDirection:"forwards"});Th(E)}}),p.jsx(hg.Slot,{scope:r,children:p.jsx(Tt.ol,{tabIndex:-1,...a,ref:y})}),S&&p.jsx(pp,{ref:g,onFocusFromOutsideViewport:()=>{const E=_({tabbingDirection:"backwards"});Th(E)}})]})});Mb.displayName=Lb;var $b="ToastFocusProxy",pp=b.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=t,a=ld($b,r);return p.jsx(ad,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:l=>{const u=l.relatedTarget;!a.viewport?.contains(u)&&n()}})});pp.displayName=$b;var cd="Toast",QT="toast.swipeStart",YT="toast.swipeMove",ZT="toast.swipeCancel",JT="toast.swipeEnd",Fb=b.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:a,...l}=t,[u=!0,d]=dg({prop:n,defaultProp:i,onChange:a});return p.jsx(ji,{present:r||u,children:p.jsx(tC,{open:u,...l,ref:e,onClose:()=>d(!1),onPause:vr(t.onPause),onResume:vr(t.onResume),onSwipeStart:ut(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ut(t.onSwipeMove,h=>{const{x:g,y:v}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:ut(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ut(t.onSwipeEnd,h=>{const{x:g,y:v}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),d(!1)})})})});Fb.displayName=cd;var[XT,eC]=Ib(cd,{onClose(){}}),tC=b.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:a,onClose:l,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:y,onSwipeEnd:x,...S}=t,_=ld(cd,r),[E,C]=b.useState(null),T=kr(e,Z=>C(Z)),O=b.useRef(null),R=b.useRef(null),F=i||_.duration,B=b.useRef(0),M=b.useRef(F),X=b.useRef(0),{onToastAdd:V,onToastRemove:W}=_,te=vr(()=>{E?.contains(document.activeElement)&&_.viewport?.focus(),l()}),Y=b.useCallback(Z=>{!Z||Z===1/0||(window.clearTimeout(X.current),B.current=new Date().getTime(),X.current=window.setTimeout(te,Z))},[te]);b.useEffect(()=>{const Z=_.viewport;if(Z){const Te=()=>{Y(M.current),h?.()},de=()=>{const ke=new Date().getTime()-B.current;M.current=M.current-ke,window.clearTimeout(X.current),d?.()};return Z.addEventListener(fp,de),Z.addEventListener(hp,Te),()=>{Z.removeEventListener(fp,de),Z.removeEventListener(hp,Te)}}},[_.viewport,F,d,h,Y]),b.useEffect(()=>{a&&!_.isClosePausedRef.current&&Y(F)},[a,F,_.isClosePausedRef,Y]),b.useEffect(()=>(V(),()=>W()),[V,W]);const re=b.useMemo(()=>E?Hb(E):null,[E]);return _.viewport?p.jsxs(p.Fragment,{children:[re&&p.jsx(rC,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:re}),p.jsx(XT,{scope:r,onClose:te,children:od.createPortal(p.jsx(hg.ItemSlot,{scope:r,children:p.jsx(LT,{asChild:!0,onEscapeKeyDown:ut(u,()=>{_.isFocusedToastEscapeKeyDownRef.current||te(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Tt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":_.swipeDirection,...S,ref:T,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ut(t.onKeyDown,Z=>{Z.key==="Escape"&&(u?.(Z.nativeEvent),Z.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,te()))}),onPointerDown:ut(t.onPointerDown,Z=>{Z.button===0&&(O.current={x:Z.clientX,y:Z.clientY})}),onPointerMove:ut(t.onPointerMove,Z=>{if(!O.current)return;const Te=Z.clientX-O.current.x,de=Z.clientY-O.current.y,ke=!!R.current,H=["left","right"].includes(_.swipeDirection),le=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,ce=H?le(0,Te):0,A=H?0:le(0,de),J=Z.pointerType==="touch"?10:2,Ne={x:ce,y:A},ye={originalEvent:Z,delta:Ne};ke?(R.current=Ne,au(YT,v,ye,{discrete:!1})):e0(Ne,_.swipeDirection,J)?(R.current=Ne,au(QT,g,ye,{discrete:!1}),Z.target.setPointerCapture(Z.pointerId)):(Math.abs(Te)>J||Math.abs(de)>J)&&(O.current=null)}),onPointerUp:ut(t.onPointerUp,Z=>{const Te=R.current,de=Z.target;if(de.hasPointerCapture(Z.pointerId)&&de.releasePointerCapture(Z.pointerId),R.current=null,O.current=null,Te){const ke=Z.currentTarget,H={originalEvent:Z,delta:Te};e0(Te,_.swipeDirection,_.swipeThreshold)?au(JT,x,H,{discrete:!0}):au(ZT,y,H,{discrete:!0}),ke.addEventListener("click",le=>le.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),rC=t=>{const{__scopeToast:e,children:r,...n}=t,i=ld(cd,e),[a,l]=b.useState(!1),[u,d]=b.useState(!1);return iC(()=>l(!0)),b.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:p.jsx(Ab,{asChild:!0,children:p.jsx(ad,{...n,children:a&&p.jsxs(p.Fragment,{children:[i.label," ",r]})})})},nC="ToastTitle",Ub=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return p.jsx(Tt.div,{...n,ref:e})});Ub.displayName=nC;var sC="ToastDescription",Bb=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return p.jsx(Tt.div,{...n,ref:e})});Bb.displayName=sC;var zb="ToastAction",Vb=b.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?p.jsx(Wb,{altText:r,asChild:!0,children:p.jsx(pg,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${zb}\`. Expected non-empty \`string\`.`),null)});Vb.displayName=zb;var qb="ToastClose",pg=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,i=eC(qb,r);return p.jsx(Wb,{asChild:!0,children:p.jsx(Tt.button,{type:"button",...n,ref:e,onClick:ut(t.onClick,i.onClose)})})});pg.displayName=qb;var Wb=b.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...i}=t;return p.jsx(Tt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:e})});function Hb(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),oC(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const l=n.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...Hb(n))}}),e}function au(t,e,r,{discrete:n}){const i=r.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?Pb(i,a):i.dispatchEvent(a)}var e0=(t,e,r=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),a=n>i;return e==="left"||e==="right"?a&&n>r:!a&&i>r};function iC(t=()=>{}){const e=vr(t);$n(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function oC(t){return t.nodeType===t.ELEMENT_NODE}function aC(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Th(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var lC=Db,Kb=Mb,Gb=Fb,Qb=Ub,Yb=Bb,Zb=Vb,Jb=pg;function Xb(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=Xb(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ex(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=Xb(t))&&(n&&(n+=" "),n+=e);return n}const t0=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,r0=ex,gg=(t,e)=>r=>{var n;if(e?.variants==null)return r0(t,r?.class,r?.className);const{variants:i,defaultVariants:a}=e,l=Object.keys(i).map(h=>{const g=r?.[h],v=a?.[h];if(g===null)return null;const y=t0(g)||t0(v);return i[h][y]}),u=r&&Object.entries(r).reduce((h,g)=>{let[v,y]=g;return y===void 0||(h[v]=y),h},{}),d=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,g)=>{let{class:v,className:y,...x}=g;return Object.entries(x).every(S=>{let[_,E]=S;return Array.isArray(E)?E.includes({...a,...u}[_]):{...a,...u}[_]===E})?[...h,v,y]:h},[]);return r0(t,l,d,r?.class,r?.className)};const cC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tx=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");var uC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dC=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:l,...u},d)=>b.createElement("svg",{ref:d,...uC,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:tx("lucide",i),...u},[...l.map(([h,g])=>b.createElement(h,g)),...Array.isArray(a)?a:[a]]));const Ot=(t,e)=>{const r=b.forwardRef(({className:n,...i},a)=>b.createElement(dC,{ref:a,iconNode:e,className:tx(`lucide-${cC(t)}`,n),...i}));return r.displayName=`${t}`,r};const fC=Ot("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const ul=Ot("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const hC=Ot("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const pC=Ot("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const n0=Ot("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const ud=Ot("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);const gC=Ot("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);const mC=Ot("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const rx=Ot("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const _u=Ot("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const gp=Ot("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const vC=Ot("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const yC=Ot("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const wC=Ot("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const bC=Ot("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const xC=Ot("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const nx=Ot("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const s0=Ot("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const _C=Ot("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const sx=Ot("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);const dd=Ot("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const i0=Ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const ix=Ot("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const SC=Ot("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);const kC=Ot("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);const EC=Ot("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const TC=Ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const CC=Ot("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),mg="-",OC=t=>{const e=NC(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const u=l.split(mg);return u[0]===""&&u.length!==1&&u.shift(),ox(u,e)||PC(l)},getConflictingClassGroupIds:(l,u)=>{const d=r[l]||[];return u&&n[l]?[...d,...n[l]]:d}}},ox=(t,e)=>{if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?ox(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(mg);return e.validators.find(({validator:l})=>l(a))?.classGroupId},o0=/^\[(.+)\]$/,PC=t=>{if(o0.test(t)){const e=o0.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},NC=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return RC(Object.entries(t.classGroups),r).forEach(([a,l])=>{mp(l,n,a,e)}),n},mp=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:a0(e,i);a.classGroupId=r;return}if(typeof i=="function"){if(jC(i)){mp(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,l])=>{mp(l,a0(e,a),r,n)})})},a0=(t,e)=>{let r=t;return e.split(mg).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},jC=t=>t.isThemeGetter,RC=(t,e)=>e?t.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([l,u])=>[e+l,u])):a);return[r,i]}):t,AC=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(a,l)=>{r.set(a,l),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let l=r.get(a);if(l!==void 0)return l;if((l=n.get(a))!==void 0)return i(a,l),l},set(a,l){r.has(a)?r.set(a,l):i(a,l)}}},ax="!",IC=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],a=e.length,l=u=>{const d=[];let h=0,g=0,v;for(let E=0;E<u.length;E++){let C=u[E];if(h===0){if(C===i&&(n||u.slice(E,E+a)===e)){d.push(u.slice(g,E)),g=E+a;continue}if(C==="/"){v=E;continue}}C==="["?h++:C==="]"&&h--}const y=d.length===0?u:u.substring(g),x=y.startsWith(ax),S=x?y.substring(1):y,_=v&&v>g?v-g:void 0;return{modifiers:d,hasImportantModifier:x,baseClassName:S,maybePostfixModifierPosition:_}};return r?u=>r({className:u,parseClassName:l}):l},DC=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},LC=t=>({cache:AC(t.cacheSize),parseClassName:IC(t),...OC(t)}),MC=/\s+/,$C=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,a=[],l=t.trim().split(MC);let u="";for(let d=l.length-1;d>=0;d-=1){const h=l[d],{modifiers:g,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:x}=r(h);let S=!!x,_=n(S?y.substring(0,x):y);if(!_){if(!S){u=h+(u.length>0?" "+u:u);continue}if(_=n(y),!_){u=h+(u.length>0?" "+u:u);continue}S=!1}const E=DC(g).join(":"),C=v?E+ax:E,T=C+_;if(a.includes(T))continue;a.push(T);const O=i(_,S);for(let R=0;R<O.length;++R){const F=O[R];a.push(C+F)}u=h+(u.length>0?" "+u:u)}return u};function FC(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=lx(e))&&(n&&(n+=" "),n+=r);return n}const lx=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=lx(t[n]))&&(r&&(r+=" "),r+=e);return r};function UC(t,...e){let r,n,i,a=l;function l(d){const h=e.reduce((g,v)=>v(g),t());return r=LC(h),n=r.cache.get,i=r.cache.set,a=u,u(d)}function u(d){const h=n(d);if(h)return h;const g=$C(d,r);return i(d,g),g}return function(){return a(FC.apply(null,arguments))}}const Mt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},cx=/^\[(?:([a-z-]+):)?(.+)\]$/i,BC=/^\d+\/\d+$/,zC=new Set(["px","full","screen"]),VC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,WC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,HC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,KC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,As=t=>na(t)||zC.has(t)||BC.test(t),fi=t=>va(t,"length",t2),na=t=>!!t&&!Number.isNaN(Number(t)),Ch=t=>va(t,"number",na),tl=t=>!!t&&Number.isInteger(Number(t)),GC=t=>t.endsWith("%")&&na(t.slice(0,-1)),nt=t=>cx.test(t),hi=t=>VC.test(t),QC=new Set(["length","size","percentage"]),YC=t=>va(t,QC,ux),ZC=t=>va(t,"position",ux),JC=new Set(["image","url"]),XC=t=>va(t,JC,n2),e2=t=>va(t,"",r2),rl=()=>!0,va=(t,e,r)=>{const n=cx.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},t2=t=>qC.test(t)&&!WC.test(t),ux=()=>!1,r2=t=>HC.test(t),n2=t=>KC.test(t),s2=()=>{const t=Mt("colors"),e=Mt("spacing"),r=Mt("blur"),n=Mt("brightness"),i=Mt("borderColor"),a=Mt("borderRadius"),l=Mt("borderSpacing"),u=Mt("borderWidth"),d=Mt("contrast"),h=Mt("grayscale"),g=Mt("hueRotate"),v=Mt("invert"),y=Mt("gap"),x=Mt("gradientColorStops"),S=Mt("gradientColorStopPositions"),_=Mt("inset"),E=Mt("margin"),C=Mt("opacity"),T=Mt("padding"),O=Mt("saturate"),R=Mt("scale"),F=Mt("sepia"),B=Mt("skew"),M=Mt("space"),X=Mt("translate"),V=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],te=()=>["auto",nt,e],Y=()=>[nt,e],re=()=>["",As,fi],Z=()=>["auto",na,nt],Te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],de=()=>["solid","dashed","dotted","double","none"],ke=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],le=()=>["","0",nt],ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>[na,nt];return{cacheSize:500,separator:":",theme:{colors:[rl],spacing:[As,fi],blur:["none","",hi,nt],brightness:A(),borderColor:[t],borderRadius:["none","","full",hi,nt],borderSpacing:Y(),borderWidth:re(),contrast:A(),grayscale:le(),hueRotate:A(),invert:le(),gap:Y(),gradientColorStops:[t],gradientColorStopPositions:[GC,fi],inset:te(),margin:te(),opacity:A(),padding:Y(),saturate:A(),scale:A(),sepia:le(),skew:A(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",nt]}],container:["container"],columns:[{columns:[hi]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Te(),nt]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tl,nt]}],basis:[{basis:te()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nt]}],grow:[{grow:le()}],shrink:[{shrink:le()}],order:[{order:["first","last","none",tl,nt]}],"grid-cols":[{"grid-cols":[rl]}],"col-start-end":[{col:["auto",{span:["full",tl,nt]},nt]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[rl]}],"row-start-end":[{row:["auto",{span:[tl,nt]},nt]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nt]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",nt,e]}],"min-w":[{"min-w":[nt,e,"min","max","fit"]}],"max-w":[{"max-w":[nt,e,"none","full","min","max","fit","prose",{screen:[hi]},hi]}],h:[{h:[nt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[nt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",hi,fi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ch]}],"font-family":[{font:[rl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nt]}],"line-clamp":[{"line-clamp":["none",na,Ch]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",As,nt]}],"list-image":[{"list-image":["none",nt]}],"list-style-type":[{list:["none","disc","decimal",nt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",As,fi]}],"underline-offset":[{"underline-offset":["auto",As,nt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Te(),ZC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",YC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},XC]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...de(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:de()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...de()]}],"outline-offset":[{"outline-offset":[As,nt]}],"outline-w":[{outline:[As,fi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[As,fi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",hi,e2]}],"shadow-color":[{shadow:[rl]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...ke(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ke()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",hi,nt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[v]}],saturate:[{saturate:[O]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[O]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nt]}],duration:[{duration:A()}],ease:[{ease:["linear","in","out","in-out",nt]}],delay:[{delay:A()}],animate:[{animate:["none","spin","ping","pulse","bounce",nt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[tl,nt]}],"translate-x":[{"translate-x":[X]}],"translate-y":[{"translate-y":[X]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[As,fi,Ch]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},i2=UC(s2);function ct(...t){return i2(ex(t))}const o2=lC,dx=b.forwardRef(({className:t,...e},r)=>p.jsx(Kb,{ref:r,className:ct("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));dx.displayName=Kb.displayName;const a2=gg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fx=b.forwardRef(({className:t,variant:e,...r},n)=>p.jsx(Gb,{ref:n,className:ct(a2({variant:e}),t),...r}));fx.displayName=Gb.displayName;const l2=b.forwardRef(({className:t,...e},r)=>p.jsx(Zb,{ref:r,className:ct("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));l2.displayName=Zb.displayName;const hx=b.forwardRef(({className:t,...e},r)=>p.jsx(Jb,{ref:r,className:ct("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(TC,{className:"h-4 w-4"})}));hx.displayName=Jb.displayName;const px=b.forwardRef(({className:t,...e},r)=>p.jsx(Qb,{ref:r,className:ct("text-sm font-semibold",t),...e}));px.displayName=Qb.displayName;const gx=b.forwardRef(({className:t,...e},r)=>p.jsx(Yb,{ref:r,className:ct("text-sm opacity-90",t),...e}));gx.displayName=Yb.displayName;function c2(){const{toasts:t}=go();return p.jsxs(o2,{children:[t.map(function({id:e,title:r,description:n,action:i,...a}){return p.jsxs(fx,{...a,children:[p.jsxs("div",{className:"grid gap-1",children:[r&&p.jsx(px,{children:r}),n&&p.jsx(gx,{children:n})]}),i,p.jsx(hx,{})]},e)}),p.jsx(dx,{})]})}var u2=Xw[" useId ".trim().toString()]||(()=>{}),d2=0;function mx(t){const[e,r]=b.useState(u2());return $n(()=>{r(n=>n??String(d2++))},[t]),e?`radix-${e}`:""}const f2=["top","right","bottom","left"],Si=Math.min,bn=Math.max,Ru=Math.round,lu=Math.floor,vs=t=>({x:t,y:t}),h2={left:"right",right:"left",bottom:"top",top:"bottom"},p2={start:"end",end:"start"};function vp(t,e,r){return bn(t,Si(e,r))}function Bs(t,e){return typeof t=="function"?t(e):t}function zs(t){return t.split("-")[0]}function ya(t){return t.split("-")[1]}function vg(t){return t==="x"?"y":"x"}function yg(t){return t==="y"?"height":"width"}function ki(t){return["top","bottom"].includes(zs(t))?"y":"x"}function wg(t){return vg(ki(t))}function g2(t,e,r){r===void 0&&(r=!1);const n=ya(t),i=wg(t),a=yg(i);let l=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=Au(l)),[l,Au(l)]}function m2(t){const e=Au(t);return[yp(t),e,yp(e)]}function yp(t){return t.replace(/start|end/g,e=>p2[e])}function v2(t,e,r){const n=["left","right"],i=["right","left"],a=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return r?e?i:n:e?n:i;case"left":case"right":return e?a:l;default:return[]}}function y2(t,e,r,n){const i=ya(t);let a=v2(zs(t),r==="start",n);return i&&(a=a.map(l=>l+"-"+i),e&&(a=a.concat(a.map(yp)))),a}function Au(t){return t.replace(/left|right|bottom|top/g,e=>h2[e])}function w2(t){return{top:0,right:0,bottom:0,left:0,...t}}function vx(t){return typeof t!="number"?w2(t):{top:t,right:t,bottom:t,left:t}}function Iu(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function l0(t,e,r){let{reference:n,floating:i}=t;const a=ki(e),l=wg(e),u=yg(l),d=zs(e),h=a==="y",g=n.x+n.width/2-i.width/2,v=n.y+n.height/2-i.height/2,y=n[u]/2-i[u]/2;let x;switch(d){case"top":x={x:g,y:n.y-i.height};break;case"bottom":x={x:g,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:v};break;case"left":x={x:n.x-i.width,y:v};break;default:x={x:n.x,y:n.y}}switch(ya(e)){case"start":x[l]-=y*(r&&h?-1:1);break;case"end":x[l]+=y*(r&&h?-1:1);break}return x}const b2=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:l}=r,u=a.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:g,y:v}=l0(h,n,d),y=n,x={},S=0;for(let _=0;_<u.length;_++){const{name:E,fn:C}=u[_],{x:T,y:O,data:R,reset:F}=await C({x:g,y:v,initialPlacement:n,placement:y,strategy:i,middlewareData:x,rects:h,platform:l,elements:{reference:t,floating:e}});g=T??g,v=O??v,x={...x,[E]:{...x[E],...R}},F&&S<=50&&(S++,typeof F=="object"&&(F.placement&&(y=F.placement),F.rects&&(h=F.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):F.rects),{x:g,y:v}=l0(h,y,d)),_=-1)}return{x:g,y:v,placement:y,strategy:i,middlewareData:x}};async function El(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:l,elements:u,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:y=!1,padding:x=0}=Bs(e,t),S=vx(x),E=u[y?v==="floating"?"reference":"floating":v],C=Iu(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(E)))==null||r?E:E.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:h,rootBoundary:g,strategy:d})),T=v==="floating"?{x:n,y:i,width:l.floating.width,height:l.floating.height}:l.reference,O=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),R=await(a.isElement==null?void 0:a.isElement(O))?await(a.getScale==null?void 0:a.getScale(O))||{x:1,y:1}:{x:1,y:1},F=Iu(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:T,offsetParent:O,strategy:d}):T);return{top:(C.top-F.top+S.top)/R.y,bottom:(F.bottom-C.bottom+S.bottom)/R.y,left:(C.left-F.left+S.left)/R.x,right:(F.right-C.right+S.right)/R.x}}const x2=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:a,platform:l,elements:u,middlewareData:d}=e,{element:h,padding:g=0}=Bs(t,e)||{};if(h==null)return{};const v=vx(g),y={x:r,y:n},x=wg(i),S=yg(x),_=await l.getDimensions(h),E=x==="y",C=E?"top":"left",T=E?"bottom":"right",O=E?"clientHeight":"clientWidth",R=a.reference[S]+a.reference[x]-y[x]-a.floating[S],F=y[x]-a.reference[x],B=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let M=B?B[O]:0;(!M||!await(l.isElement==null?void 0:l.isElement(B)))&&(M=u.floating[O]||a.floating[S]);const X=R/2-F/2,V=M/2-_[S]/2-1,W=Si(v[C],V),te=Si(v[T],V),Y=W,re=M-_[S]-te,Z=M/2-_[S]/2+X,Te=vp(Y,Z,re),de=!d.arrow&&ya(i)!=null&&Z!==Te&&a.reference[S]/2-(Z<Y?W:te)-_[S]/2<0,ke=de?Z<Y?Z-Y:Z-re:0;return{[x]:y[x]+ke,data:{[x]:Te,centerOffset:Z-Te-ke,...de&&{alignmentOffset:ke}},reset:de}}}),_2=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:a,rects:l,initialPlacement:u,platform:d,elements:h}=e,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:y,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:_=!0,...E}=Bs(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const C=zs(i),T=ki(u),O=zs(u)===u,R=await(d.isRTL==null?void 0:d.isRTL(h.floating)),F=y||(O||!_?[Au(u)]:m2(u)),B=S!=="none";!y&&B&&F.push(...y2(u,_,S,R));const M=[u,...F],X=await El(e,E),V=[];let W=((n=a.flip)==null?void 0:n.overflows)||[];if(g&&V.push(X[C]),v){const Z=g2(i,l,R);V.push(X[Z[0]],X[Z[1]])}if(W=[...W,{placement:i,overflows:V}],!V.every(Z=>Z<=0)){var te,Y;const Z=(((te=a.flip)==null?void 0:te.index)||0)+1,Te=M[Z];if(Te)return{data:{index:Z,overflows:W},reset:{placement:Te}};let de=(Y=W.filter(ke=>ke.overflows[0]<=0).sort((ke,H)=>ke.overflows[1]-H.overflows[1])[0])==null?void 0:Y.placement;if(!de)switch(x){case"bestFit":{var re;const ke=(re=W.filter(H=>{if(B){const le=ki(H.placement);return le===T||le==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(le=>le>0).reduce((le,ce)=>le+ce,0)]).sort((H,le)=>H[1]-le[1])[0])==null?void 0:re[0];ke&&(de=ke);break}case"initialPlacement":de=u;break}if(i!==de)return{reset:{placement:de}}}return{}}}};function c0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function u0(t){return f2.some(e=>t[e]>=0)}const S2=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=Bs(t,e);switch(n){case"referenceHidden":{const a=await El(e,{...i,elementContext:"reference"}),l=c0(a,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:u0(l)}}}case"escaped":{const a=await El(e,{...i,altBoundary:!0}),l=c0(a,r.floating);return{data:{escapedOffsets:l,escaped:u0(l)}}}default:return{}}}}};async function k2(t,e){const{placement:r,platform:n,elements:i}=t,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),l=zs(r),u=ya(r),d=ki(r)==="y",h=["left","top"].includes(l)?-1:1,g=a&&d?-1:1,v=Bs(e,t);let{mainAxis:y,crossAxis:x,alignmentAxis:S}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof S=="number"&&(x=u==="end"?S*-1:S),d?{x:x*g,y:y*h}:{x:y*h,y:x*g}}const E2=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:a,placement:l,middlewareData:u}=e,d=await k2(e,t);return l===((r=u.offset)==null?void 0:r.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:l}}}}},T2=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:u={fn:E=>{let{x:C,y:T}=E;return{x:C,y:T}}},...d}=Bs(t,e),h={x:r,y:n},g=await El(e,d),v=ki(zs(i)),y=vg(v);let x=h[y],S=h[v];if(a){const E=y==="y"?"top":"left",C=y==="y"?"bottom":"right",T=x+g[E],O=x-g[C];x=vp(T,x,O)}if(l){const E=v==="y"?"top":"left",C=v==="y"?"bottom":"right",T=S+g[E],O=S-g[C];S=vp(T,S,O)}const _=u.fn({...e,[y]:x,[v]:S});return{..._,data:{x:_.x-r,y:_.y-n,enabled:{[y]:a,[v]:l}}}}}},C2=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:a,middlewareData:l}=e,{offset:u=0,mainAxis:d=!0,crossAxis:h=!0}=Bs(t,e),g={x:r,y:n},v=ki(i),y=vg(v);let x=g[y],S=g[v];const _=Bs(u,e),E=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(d){const O=y==="y"?"height":"width",R=a.reference[y]-a.floating[O]+E.mainAxis,F=a.reference[y]+a.reference[O]-E.mainAxis;x<R?x=R:x>F&&(x=F)}if(h){var C,T;const O=y==="y"?"width":"height",R=["top","left"].includes(zs(i)),F=a.reference[v]-a.floating[O]+(R&&((C=l.offset)==null?void 0:C[v])||0)+(R?0:E.crossAxis),B=a.reference[v]+a.reference[O]+(R?0:((T=l.offset)==null?void 0:T[v])||0)-(R?E.crossAxis:0);S<F?S=F:S>B&&(S=B)}return{[y]:x,[v]:S}}}},O2=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:a,platform:l,elements:u}=e,{apply:d=()=>{},...h}=Bs(t,e),g=await El(e,h),v=zs(i),y=ya(i),x=ki(i)==="y",{width:S,height:_}=a.floating;let E,C;v==="top"||v==="bottom"?(E=v,C=y===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(C=v,E=y==="end"?"top":"bottom");const T=_-g.top-g.bottom,O=S-g.left-g.right,R=Si(_-g[E],T),F=Si(S-g[C],O),B=!e.middlewareData.shift;let M=R,X=F;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(X=O),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(M=T),B&&!y){const W=bn(g.left,0),te=bn(g.right,0),Y=bn(g.top,0),re=bn(g.bottom,0);x?X=S-2*(W!==0||te!==0?W+te:bn(g.left,g.right)):M=_-2*(Y!==0||re!==0?Y+re:bn(g.top,g.bottom))}await d({...e,availableWidth:X,availableHeight:M});const V=await l.getDimensions(u.floating);return S!==V.width||_!==V.height?{reset:{rects:!0}}:{}}}};function fd(){return typeof window<"u"}function wa(t){return yx(t)?(t.nodeName||"").toLowerCase():"#document"}function kn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _s(t){var e;return(e=(yx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function yx(t){return fd()?t instanceof Node||t instanceof kn(t).Node:!1}function is(t){return fd()?t instanceof Element||t instanceof kn(t).Element:!1}function ws(t){return fd()?t instanceof HTMLElement||t instanceof kn(t).HTMLElement:!1}function d0(t){return!fd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof kn(t).ShadowRoot}function Zl(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=os(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(i)}function P2(t){return["table","td","th"].includes(wa(t))}function hd(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function bg(t){const e=xg(),r=is(t)?os(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function N2(t){let e=Ei(t);for(;ws(e)&&!ca(e);){if(bg(e))return e;if(hd(e))return null;e=Ei(e)}return null}function xg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ca(t){return["html","body","#document"].includes(wa(t))}function os(t){return kn(t).getComputedStyle(t)}function pd(t){return is(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ei(t){if(wa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||d0(t)&&t.host||_s(t);return d0(e)?e.host:e}function wx(t){const e=Ei(t);return ca(e)?t.ownerDocument?t.ownerDocument.body:t.body:ws(e)&&Zl(e)?e:wx(e)}function Tl(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=wx(t),a=i===((n=t.ownerDocument)==null?void 0:n.body),l=kn(i);if(a){const u=wp(l);return e.concat(l,l.visualViewport||[],Zl(i)?i:[],u&&r?Tl(u):[])}return e.concat(i,Tl(i,[],r))}function wp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function bx(t){const e=os(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=ws(t),a=i?t.offsetWidth:r,l=i?t.offsetHeight:n,u=Ru(r)!==a||Ru(n)!==l;return u&&(r=a,n=l),{width:r,height:n,$:u}}function _g(t){return is(t)?t:t.contextElement}function sa(t){const e=_g(t);if(!ws(e))return vs(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:a}=bx(e);let l=(a?Ru(r.width):r.width)/n,u=(a?Ru(r.height):r.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const j2=vs(0);function xx(t){const e=kn(t);return!xg()||!e.visualViewport?j2:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function R2(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==kn(t)?!1:e}function oo(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),a=_g(t);let l=vs(1);e&&(n?is(n)&&(l=sa(n)):l=sa(t));const u=R2(a,r,n)?xx(a):vs(0);let d=(i.left+u.x)/l.x,h=(i.top+u.y)/l.y,g=i.width/l.x,v=i.height/l.y;if(a){const y=kn(a),x=n&&is(n)?kn(n):n;let S=y,_=wp(S);for(;_&&n&&x!==S;){const E=sa(_),C=_.getBoundingClientRect(),T=os(_),O=C.left+(_.clientLeft+parseFloat(T.paddingLeft))*E.x,R=C.top+(_.clientTop+parseFloat(T.paddingTop))*E.y;d*=E.x,h*=E.y,g*=E.x,v*=E.y,d+=O,h+=R,S=kn(_),_=wp(S)}}return Iu({width:g,height:v,x:d,y:h})}function Sg(t,e){const r=pd(t).scrollLeft;return e?e.left+r:oo(_s(t)).left+r}function _x(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-(r?0:Sg(t,n)),a=n.top+e.scrollTop;return{x:i,y:a}}function A2(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const a=i==="fixed",l=_s(n),u=e?hd(e.floating):!1;if(n===l||u&&a)return r;let d={scrollLeft:0,scrollTop:0},h=vs(1);const g=vs(0),v=ws(n);if((v||!v&&!a)&&((wa(n)!=="body"||Zl(l))&&(d=pd(n)),ws(n))){const x=oo(n);h=sa(n),g.x=x.x+n.clientLeft,g.y=x.y+n.clientTop}const y=l&&!v&&!a?_x(l,d,!0):vs(0);return{width:r.width*h.x,height:r.height*h.y,x:r.x*h.x-d.scrollLeft*h.x+g.x+y.x,y:r.y*h.y-d.scrollTop*h.y+g.y+y.y}}function I2(t){return Array.from(t.getClientRects())}function D2(t){const e=_s(t),r=pd(t),n=t.ownerDocument.body,i=bn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=bn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let l=-r.scrollLeft+Sg(t);const u=-r.scrollTop;return os(n).direction==="rtl"&&(l+=bn(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:l,y:u}}function L2(t,e){const r=kn(t),n=_s(t),i=r.visualViewport;let a=n.clientWidth,l=n.clientHeight,u=0,d=0;if(i){a=i.width,l=i.height;const h=xg();(!h||h&&e==="fixed")&&(u=i.offsetLeft,d=i.offsetTop)}return{width:a,height:l,x:u,y:d}}function M2(t,e){const r=oo(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,a=ws(t)?sa(t):vs(1),l=t.clientWidth*a.x,u=t.clientHeight*a.y,d=i*a.x,h=n*a.y;return{width:l,height:u,x:d,y:h}}function f0(t,e,r){let n;if(e==="viewport")n=L2(t,r);else if(e==="document")n=D2(_s(t));else if(is(e))n=M2(e,r);else{const i=xx(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Iu(n)}function Sx(t,e){const r=Ei(t);return r===e||!is(r)||ca(r)?!1:os(r).position==="fixed"||Sx(r,e)}function $2(t,e){const r=e.get(t);if(r)return r;let n=Tl(t,[],!1).filter(u=>is(u)&&wa(u)!=="body"),i=null;const a=os(t).position==="fixed";let l=a?Ei(t):t;for(;is(l)&&!ca(l);){const u=os(l),d=bg(l);!d&&u.position==="fixed"&&(i=null),(a?!d&&!i:!d&&u.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Zl(l)&&!d&&Sx(t,l))?n=n.filter(g=>g!==l):i=u,l=Ei(l)}return e.set(t,n),n}function F2(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const l=[...r==="clippingAncestors"?hd(e)?[]:$2(e,this._c):[].concat(r),n],u=l[0],d=l.reduce((h,g)=>{const v=f0(e,g,i);return h.top=bn(v.top,h.top),h.right=Si(v.right,h.right),h.bottom=Si(v.bottom,h.bottom),h.left=bn(v.left,h.left),h},f0(e,u,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function U2(t){const{width:e,height:r}=bx(t);return{width:e,height:r}}function B2(t,e,r){const n=ws(e),i=_s(e),a=r==="fixed",l=oo(t,!0,a,e);let u={scrollLeft:0,scrollTop:0};const d=vs(0);if(n||!n&&!a)if((wa(e)!=="body"||Zl(i))&&(u=pd(e)),n){const y=oo(e,!0,a,e);d.x=y.x+e.clientLeft,d.y=y.y+e.clientTop}else i&&(d.x=Sg(i));const h=i&&!n&&!a?_x(i,u):vs(0),g=l.left+u.scrollLeft-d.x-h.x,v=l.top+u.scrollTop-d.y-h.y;return{x:g,y:v,width:l.width,height:l.height}}function Oh(t){return os(t).position==="static"}function h0(t,e){if(!ws(t)||os(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return _s(t)===r&&(r=r.ownerDocument.body),r}function kx(t,e){const r=kn(t);if(hd(t))return r;if(!ws(t)){let i=Ei(t);for(;i&&!ca(i);){if(is(i)&&!Oh(i))return i;i=Ei(i)}return r}let n=h0(t,e);for(;n&&P2(n)&&Oh(n);)n=h0(n,e);return n&&ca(n)&&Oh(n)&&!bg(n)?r:n||N2(t)||r}const z2=async function(t){const e=this.getOffsetParent||kx,r=this.getDimensions,n=await r(t.floating);return{reference:B2(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function V2(t){return os(t).direction==="rtl"}const q2={convertOffsetParentRelativeRectToViewportRelativeRect:A2,getDocumentElement:_s,getClippingRect:F2,getOffsetParent:kx,getElementRects:z2,getClientRects:I2,getDimensions:U2,getScale:sa,isElement:is,isRTL:V2};function Ex(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function W2(t,e){let r=null,n;const i=_s(t);function a(){var u;clearTimeout(n),(u=r)==null||u.disconnect(),r=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),a();const h=t.getBoundingClientRect(),{left:g,top:v,width:y,height:x}=h;if(u||e(),!y||!x)return;const S=lu(v),_=lu(i.clientWidth-(g+y)),E=lu(i.clientHeight-(v+x)),C=lu(g),O={rootMargin:-S+"px "+-_+"px "+-E+"px "+-C+"px",threshold:bn(0,Si(1,d))||1};let R=!0;function F(B){const M=B[0].intersectionRatio;if(M!==d){if(!R)return l();M?l(!1,M):n=setTimeout(()=>{l(!1,1e-7)},1e3)}M===1&&!Ex(h,t.getBoundingClientRect())&&l(),R=!1}try{r=new IntersectionObserver(F,{...O,root:i.ownerDocument})}catch{r=new IntersectionObserver(F,O)}r.observe(t)}return l(!0),a}function H2(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,h=_g(t),g=i||a?[...h?Tl(h):[],...Tl(e)]:[];g.forEach(C=>{i&&C.addEventListener("scroll",r,{passive:!0}),a&&C.addEventListener("resize",r)});const v=h&&u?W2(h,r):null;let y=-1,x=null;l&&(x=new ResizeObserver(C=>{let[T]=C;T&&T.target===h&&x&&(x.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var O;(O=x)==null||O.observe(e)})),r()}),h&&!d&&x.observe(h),x.observe(e));let S,_=d?oo(t):null;d&&E();function E(){const C=oo(t);_&&!Ex(_,C)&&r(),_=C,S=requestAnimationFrame(E)}return r(),()=>{var C;g.forEach(T=>{i&&T.removeEventListener("scroll",r),a&&T.removeEventListener("resize",r)}),v?.(),(C=x)==null||C.disconnect(),x=null,d&&cancelAnimationFrame(S)}}const K2=E2,G2=T2,Q2=_2,Y2=O2,Z2=S2,p0=x2,J2=C2,X2=(t,e,r)=>{const n=new Map,i={platform:q2,...r},a={...i.platform,_c:n};return b2(t,e,{...i,platform:a})};var Su=typeof document<"u"?b.useLayoutEffect:b.useEffect;function Du(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Du(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&t.$$typeof)&&!Du(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function Tx(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function g0(t,e){const r=Tx(t);return Math.round(e*r)/r}function Ph(t){const e=b.useRef(t);return Su(()=>{e.current=t}),e}function eO(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:l}={},transform:u=!0,whileElementsMounted:d,open:h}=t,[g,v]=b.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[y,x]=b.useState(n);Du(y,n)||x(n);const[S,_]=b.useState(null),[E,C]=b.useState(null),T=b.useCallback(H=>{H!==B.current&&(B.current=H,_(H))},[]),O=b.useCallback(H=>{H!==M.current&&(M.current=H,C(H))},[]),R=a||S,F=l||E,B=b.useRef(null),M=b.useRef(null),X=b.useRef(g),V=d!=null,W=Ph(d),te=Ph(i),Y=Ph(h),re=b.useCallback(()=>{if(!B.current||!M.current)return;const H={placement:e,strategy:r,middleware:y};te.current&&(H.platform=te.current),X2(B.current,M.current,H).then(le=>{const ce={...le,isPositioned:Y.current!==!1};Z.current&&!Du(X.current,ce)&&(X.current=ce,od.flushSync(()=>{v(ce)}))})},[y,e,r,te,Y]);Su(()=>{h===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,v(H=>({...H,isPositioned:!1})))},[h]);const Z=b.useRef(!1);Su(()=>(Z.current=!0,()=>{Z.current=!1}),[]),Su(()=>{if(R&&(B.current=R),F&&(M.current=F),R&&F){if(W.current)return W.current(R,F,re);re()}},[R,F,re,W,V]);const Te=b.useMemo(()=>({reference:B,floating:M,setReference:T,setFloating:O}),[T,O]),de=b.useMemo(()=>({reference:R,floating:F}),[R,F]),ke=b.useMemo(()=>{const H={position:r,left:0,top:0};if(!de.floating)return H;const le=g0(de.floating,g.x),ce=g0(de.floating,g.y);return u?{...H,transform:"translate("+le+"px, "+ce+"px)",...Tx(de.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:le,top:ce}},[r,u,de.floating,g.x,g.y]);return b.useMemo(()=>({...g,update:re,refs:Te,elements:de,floatingStyles:ke}),[g,re,Te,de,ke])}const tO=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?p0({element:n.current,padding:i}).fn(r):{}:n?p0({element:n,padding:i}).fn(r):{}}}},rO=(t,e)=>({...K2(t),options:[t,e]}),nO=(t,e)=>({...G2(t),options:[t,e]}),sO=(t,e)=>({...J2(t),options:[t,e]}),iO=(t,e)=>({...Q2(t),options:[t,e]}),oO=(t,e)=>({...Y2(t),options:[t,e]}),aO=(t,e)=>({...Z2(t),options:[t,e]}),lO=(t,e)=>({...tO(t),options:[t,e]});var cO="Arrow",Cx=b.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...a}=t;return p.jsx(Tt.svg,{...a,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});Cx.displayName=cO;var uO=Cx;function dO(t){const[e,r]=b.useState(void 0);return $n(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,u;if("borderBoxSize"in a){const d=a.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,u=h.blockSize}else l=t.offsetWidth,u=t.offsetHeight;r({width:l,height:u})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Ox="Popper",[Px,Nx]=Ni(Ox),[$3,jx]=Px(Ox),Rx="PopperAnchor",Ax=b.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,a=jx(Rx,r),l=b.useRef(null),u=kr(e,l);return b.useEffect(()=>{a.onAnchorChange(n?.current||l.current)}),n?null:p.jsx(Tt.div,{...i,ref:u})});Ax.displayName=Rx;var kg="PopperContent",[fO,hO]=Px(kg),Ix=b.forwardRef((t,e)=>{const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:y=!1,updatePositionStrategy:x="optimized",onPlaced:S,..._}=t,E=jx(kg,r),[C,T]=b.useState(null),O=kr(e,Ke=>T(Ke)),[R,F]=b.useState(null),B=dO(R),M=B?.width??0,X=B?.height??0,V=n+(a!=="center"?"-"+a:""),W=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},te=Array.isArray(h)?h:[h],Y=te.length>0,re={padding:W,boundary:te.filter(gO),altBoundary:Y},{refs:Z,floatingStyles:Te,placement:de,isPositioned:ke,middlewareData:H}=eO({strategy:"fixed",placement:V,whileElementsMounted:(...Ke)=>H2(...Ke,{animationFrame:x==="always"}),elements:{reference:E.anchor},middleware:[rO({mainAxis:i+X,alignmentAxis:l}),d&&nO({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?sO():void 0,...re}),d&&iO({...re}),oO({...re,apply:({elements:Ke,rects:Xe,availableWidth:Be,availableHeight:Nt})=>{const{width:Tr,height:Zr}=Xe.reference,Ft=Ke.floating.style;Ft.setProperty("--radix-popper-available-width",`${Be}px`),Ft.setProperty("--radix-popper-available-height",`${Nt}px`),Ft.setProperty("--radix-popper-anchor-width",`${Tr}px`),Ft.setProperty("--radix-popper-anchor-height",`${Zr}px`)}}),R&&lO({element:R,padding:u}),mO({arrowWidth:M,arrowHeight:X}),y&&aO({strategy:"referenceHidden",...re})]}),[le,ce]=Mx(de),A=vr(S);$n(()=>{ke&&A?.()},[ke,A]);const J=H.arrow?.x,Ne=H.arrow?.y,ye=H.arrow?.centerOffset!==0,[$e,We]=b.useState();return $n(()=>{C&&We(window.getComputedStyle(C).zIndex)},[C]),p.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...Te,transform:ke?Te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$e,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(fO,{scope:r,placedSide:le,onArrowChange:F,arrowX:J,arrowY:Ne,shouldHideArrow:ye,children:p.jsx(Tt.div,{"data-side":le,"data-align":ce,..._,ref:O,style:{..._.style,animation:ke?void 0:"none"}})})})});Ix.displayName=kg;var Dx="PopperArrow",pO={top:"bottom",right:"left",bottom:"top",left:"right"},Lx=b.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,a=hO(Dx,n),l=pO[a.placedSide];return p.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:p.jsx(uO,{...i,ref:r,style:{...i.style,display:"block"}})})});Lx.displayName=Dx;function gO(t){return t!==null}var mO=t=>({name:"transformOrigin",options:t,fn(e){const{placement:r,rects:n,middlewareData:i}=e,l=i.arrow?.centerOffset!==0,u=l?0:t.arrowWidth,d=l?0:t.arrowHeight,[h,g]=Mx(r),v={start:"0%",center:"50%",end:"100%"}[g],y=(i.arrow?.x??0)+u/2,x=(i.arrow?.y??0)+d/2;let S="",_="";return h==="bottom"?(S=l?v:`${y}px`,_=`${-d}px`):h==="top"?(S=l?v:`${y}px`,_=`${n.floating.height+d}px`):h==="right"?(S=`${-d}px`,_=l?v:`${x}px`):h==="left"&&(S=`${n.floating.width+d}px`,_=l?v:`${x}px`),{data:{x:S,y:_}}}});function Mx(t){const[e,r="center"]=t.split("-");return[e,r]}var vO=Ax,yO=Ix,wO=Lx,[gd]=Ni("Tooltip",[Nx]),Eg=Nx(),$x="TooltipProvider",bO=700,m0="tooltip.open",[xO,Fx]=gd($x),Ux=t=>{const{__scopeTooltip:e,delayDuration:r=bO,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:a}=t,l=b.useRef(!0),u=b.useRef(!1),d=b.useRef(0);return b.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),p.jsx(xO,{scope:e,isOpenDelayedRef:l,delayDuration:r,onOpen:b.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:u,onPointerInTransitChange:b.useCallback(h=>{u.current=h},[]),disableHoverableContent:i,children:a})};Ux.displayName=$x;var Bx="Tooltip",[F3,md]=gd(Bx),bp="TooltipTrigger",_O=b.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=md(bp,r),a=Fx(bp,r),l=Eg(r),u=b.useRef(null),d=kr(e,u,i.onTriggerChange),h=b.useRef(!1),g=b.useRef(!1),v=b.useCallback(()=>h.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),p.jsx(vO,{asChild:!0,...l,children:p.jsx(Tt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:d,onPointerMove:ut(t.onPointerMove,y=>{y.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),g.current=!0)}),onPointerLeave:ut(t.onPointerLeave,()=>{i.onTriggerLeave(),g.current=!1}),onPointerDown:ut(t.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:ut(t.onFocus,()=>{h.current||i.onOpen()}),onBlur:ut(t.onBlur,i.onClose),onClick:ut(t.onClick,i.onClose)})})});_O.displayName=bp;var SO="TooltipPortal",[U3,kO]=gd(SO,{forceMount:void 0}),ua="TooltipContent",zx=b.forwardRef((t,e)=>{const r=kO(ua,t.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...a}=t,l=md(ua,t.__scopeTooltip);return p.jsx(ji,{present:n||l.open,children:l.disableHoverableContent?p.jsx(Vx,{side:i,...a,ref:e}):p.jsx(EO,{side:i,...a,ref:e})})}),EO=b.forwardRef((t,e)=>{const r=md(ua,t.__scopeTooltip),n=Fx(ua,t.__scopeTooltip),i=b.useRef(null),a=kr(e,i),[l,u]=b.useState(null),{trigger:d,onClose:h}=r,g=i.current,{onPointerInTransitChange:v}=n,y=b.useCallback(()=>{u(null),v(!1)},[v]),x=b.useCallback((S,_)=>{const E=S.currentTarget,C={x:S.clientX,y:S.clientY},T=NO(C,E.getBoundingClientRect()),O=jO(C,T),R=RO(_.getBoundingClientRect()),F=IO([...O,...R]);u(F),v(!0)},[v]);return b.useEffect(()=>()=>y(),[y]),b.useEffect(()=>{if(d&&g){const S=E=>x(E,g),_=E=>x(E,d);return d.addEventListener("pointerleave",S),g.addEventListener("pointerleave",_),()=>{d.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",_)}}},[d,g,x,y]),b.useEffect(()=>{if(l){const S=_=>{const E=_.target,C={x:_.clientX,y:_.clientY},T=d?.contains(E)||g?.contains(E),O=!AO(C,l);T?y():O&&(y(),h())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[d,g,l,h,y]),p.jsx(Vx,{...t,ref:a})}),[TO,CO]=gd(Bx,{isInside:!1}),OO=kT("TooltipContent"),Vx=b.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:l,...u}=t,d=md(ua,r),h=Eg(r),{onClose:g}=d;return b.useEffect(()=>(document.addEventListener(m0,g),()=>document.removeEventListener(m0,g)),[g]),b.useEffect(()=>{if(d.trigger){const v=y=>{y.target?.contains(d.trigger)&&g()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[d.trigger,g]),p.jsx(ug,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:v=>v.preventDefault(),onDismiss:g,children:p.jsxs(yO,{"data-state":d.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(OO,{children:n}),p.jsx(TO,{scope:r,isInside:!0,children:p.jsx(qT,{id:d.contentId,role:"tooltip",children:i||n})})]})})});zx.displayName=ua;var qx="TooltipArrow",PO=b.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=Eg(r);return CO(qx,r).isInside?null:p.jsx(wO,{...i,...n,ref:e})});PO.displayName=qx;function NO(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(r,n,i,a)){case a:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function jO(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function RO(t){const{top:e,right:r,bottom:n,left:i}=t;return[{x:i,y:e},{x:r,y:e},{x:r,y:n},{x:i,y:n}]}function AO(t,e){const{x:r,y:n}=t;let i=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const u=e[a].x,d=e[a].y,h=e[l].x,g=e[l].y;d>n!=g>n&&r<(h-u)*(n-d)/(g-d)+u&&(i=!i)}return i}function IO(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),DO(e)}function DO(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const a=e[e.length-1],l=e[e.length-2];if((a.x-l.x)*(i.y-l.y)>=(a.y-l.y)*(i.x-l.x))e.pop();else break}e.push(i)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;r.length>=2;){const a=r[r.length-1],l=r[r.length-2];if((a.x-l.x)*(i.y-l.y)>=(a.y-l.y)*(i.x-l.x))r.pop();else break}r.push(i)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var LO=Ux,Wx=zx;const MO=LO,$O=b.forwardRef(({className:t,sideOffset:e=4,...r},n)=>p.jsx(Wx,{ref:n,sideOffset:e,className:ct("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));$O.displayName=Wx.displayName;var ft;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const a={};for(const l of i)a[l]=l;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),l={};for(const u of a)l[u]=i[u];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.push(l);return a},t.find=(i,a)=>{for(const l of i)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(ft||(ft={}));var xp;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(xp||(xp={}));const Ce=ft.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ms=t=>{switch(typeof t){case"undefined":return Ce.undefined;case"string":return Ce.string;case"number":return isNaN(t)?Ce.nan:Ce.number;case"boolean":return Ce.boolean;case"function":return Ce.function;case"bigint":return Ce.bigint;case"symbol":return Ce.symbol;case"object":return Array.isArray(t)?Ce.array:t===null?Ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ce.promise:typeof Map<"u"&&t instanceof Map?Ce.map:typeof Set<"u"&&t instanceof Set?Ce.set:typeof Date<"u"&&t instanceof Date?Ce.date:Ce.object;default:return Ce.unknown}},fe=ft.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),FO=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class En extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)n._errors.push(r(l));else{let u=n,d=0;for(;d<l.path.length;){const h=l.path[d];d===l.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(r(l))):u[h]=u[h]||{_errors:[]},u=u[h],d++}}};return i(this),n}static assert(e){if(!(e instanceof En))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ft.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}En.create=t=>new En(t);const da=(t,e)=>{let r;switch(t.code){case fe.invalid_type:t.received===Ce.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case fe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ft.jsonStringifyReplacer)}`;break;case fe.unrecognized_keys:r=`Unrecognized key(s) in object: ${ft.joinValues(t.keys,", ")}`;break;case fe.invalid_union:r="Invalid input";break;case fe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ft.joinValues(t.options)}`;break;case fe.invalid_enum_value:r=`Invalid enum value. Expected ${ft.joinValues(t.options)}, received '${t.received}'`;break;case fe.invalid_arguments:r="Invalid function arguments";break;case fe.invalid_return_type:r="Invalid function return type";break;case fe.invalid_date:r="Invalid date";break;case fe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ft.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case fe.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case fe.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case fe.custom:r="Invalid input";break;case fe.invalid_intersection_types:r="Intersection results could not be merged";break;case fe.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case fe.not_finite:r="Number must be finite";break;default:r=e.defaultError,ft.assertNever(t)}return{message:r}};let Hx=da;function UO(t){Hx=t}function Lu(){return Hx}const Mu=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],l={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let u="";const d=n.filter(h=>!!h).slice().reverse();for(const h of d)u=h(l,{data:e,defaultError:u}).message;return{...i,path:a,message:u}},BO=[];function _e(t,e){const r=Lu(),n=Mu({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===da?void 0:da].filter(i=>!!i)});t.common.issues.push(n)}class Vr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return Qe;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r){const a=await i.key,l=await i.value;n.push({key:a,value:l})}return Vr.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:a,value:l}=i;if(a.status==="aborted"||l.status==="aborted")return Qe;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(n[a.value]=l.value)}return{status:e.value,value:n}}}const Qe=Object.freeze({status:"aborted"}),ea=t=>({status:"dirty",value:t}),Yr=t=>({status:"valid",value:t}),_p=t=>t.status==="aborted",Sp=t=>t.status==="dirty",ao=t=>t.status==="valid",Cl=t=>typeof Promise<"u"&&t instanceof Promise;function $u(t,e,r,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function Kx(t,e,r,n,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var Ae;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ae||(Ae={}));var dl,fl;class bs{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const v0=(t,e)=>{if(ao(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new En(t.common.issues);return this._error=r,this._error}}};function rt(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,u)=>{var d,h;const{message:g}=t;return l.code==="invalid_enum_value"?{message:g??u.defaultError}:typeof u.data>"u"?{message:(d=g??n)!==null&&d!==void 0?d:u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:(h=g??r)!==null&&h!==void 0?h:u.defaultError}},description:i}}class it{get description(){return this._def.description}_getType(e){return Ms(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ms(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Vr,ctx:{common:e.parent.common,data:e.data,parsedType:Ms(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Cl(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ms(e)},a=this._parseSync({data:e,path:i.path,parent:i});return v0(i,a)}"~validate"(e){var r,n;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ms(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:i});return ao(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((n=(r=a?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(a=>ao(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ms(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(Cl(i)?i:Promise.resolve(i));return v0(n,a)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const l=e(i),u=()=>a.addIssue({code:fe.custom,...n(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new as({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ys.create(this,this._def)}nullable(){return Pi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ss.create(this)}promise(){return ha.create(this,this._def)}or(e){return jl.create([this,e],this._def)}and(e){return Rl.create(this,e,this._def)}transform(e){return new as({...rt(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Ml({...rt(this._def),innerType:this,defaultValue:r,typeName:He.ZodDefault})}brand(){return new Tg({typeName:He.ZodBranded,type:this,...rt(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new $l({...rt(this._def),innerType:this,catchValue:r,typeName:He.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Jl.create(this,e)}readonly(){return Fl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zO=/^c[^\s-]{8,}$/i,VO=/^[0-9a-z]+$/,qO=/^[0-9A-HJKMNP-TV-Z]{26}$/i,WO=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,HO=/^[a-z0-9_-]{21}$/i,KO=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,GO=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,QO=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Nh;const ZO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,JO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,XO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,eP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tP=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rP=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Gx="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nP=new RegExp(`^${Gx}$`);function Qx(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function sP(t){return new RegExp(`^${Qx(t)}$`)}function Yx(t){let e=`${Gx}T${Qx(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function iP(t,e){return!!((e==="v4"||!e)&&ZO.test(t)||(e==="v6"||!e)&&XO.test(t))}function oP(t,e){if(!KO.test(t))return!1;try{const[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function aP(t,e){return!!((e==="v4"||!e)&&JO.test(t)||(e==="v6"||!e)&&eP.test(t))}class ns extends it{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ce.string){const a=this._getOrReturnCtx(e);return _e(a,{code:fe.invalid_type,expected:Ce.string,received:a.parsedType}),Qe}const n=new Vr;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),_e(i,{code:fe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),_e(i,{code:fe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(i=this._getOrReturnCtx(e,i),l?_e(i,{code:fe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&_e(i,{code:fe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")QO.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"email",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Nh||(Nh=new RegExp(YO,"u")),Nh.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"emoji",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")WO.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"uuid",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")HO.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"nanoid",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")zO.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"cuid",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")VO.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"cuid2",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")qO.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"ulid",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),_e(i,{validation:"url",code:fe.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"regex",code:fe.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),_e(i,{code:fe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),_e(i,{code:fe.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),_e(i,{code:fe.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?Yx(a).test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{code:fe.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?nP.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{code:fe.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?sP(a).test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{code:fe.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?GO.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"duration",code:fe.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?iP(e.data,a.version)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"ip",code:fe.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?oP(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"jwt",code:fe.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?aP(e.data,a.version)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"cidr",code:fe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?tP.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"base64",code:fe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?rP.test(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{validation:"base64url",code:fe.invalid_string,message:a.message}),n.dirty()):ft.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:fe.invalid_string,...Ae.errToObj(n)})}_addCheck(e){return new ns({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ae.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ae.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ae.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ae.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ae.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ae.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Ae.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Ae.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Ae.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ae.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Ae.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ae.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ae.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ae.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ae.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ae.errToObj(r)})}nonempty(e){return this.min(1,Ae.errToObj(e))}trim(){return new ns({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ns({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ns({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ns.create=t=>{var e;return new ns({checks:[],typeName:He.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...rt(t)})};function lP(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),l=parseInt(e.toFixed(i).replace(".",""));return a%l/Math.pow(10,i)}class Ti extends it{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ce.number){const a=this._getOrReturnCtx(e);return _e(a,{code:fe.invalid_type,expected:Ce.number,received:a.parsedType}),Qe}let n;const i=new Vr;for(const a of this._def.checks)a.kind==="int"?ft.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),_e(n,{code:fe.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),_e(n,{code:fe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),_e(n,{code:fe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?lP(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),_e(n,{code:fe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),_e(n,{code:fe.not_finite,message:a.message}),i.dirty()):ft.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ae.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ae.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ae.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ae.toString(r))}setLimit(e,r,n,i){return new Ti({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ae.toString(i)}]})}_addCheck(e){return new Ti({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ft.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Ti.create=t=>new Ti({checks:[],typeName:He.ZodNumber,coerce:t?.coerce||!1,...rt(t)});class Ci extends it{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ce.bigint)return this._getInvalidInput(e);let n;const i=new Vr;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),_e(n,{code:fe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),_e(n,{code:fe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),_e(n,{code:fe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):ft.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return _e(r,{code:fe.invalid_type,expected:Ce.bigint,received:r.parsedType}),Qe}gte(e,r){return this.setLimit("min",e,!0,Ae.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ae.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ae.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ae.toString(r))}setLimit(e,r,n,i){return new Ci({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ae.toString(i)}]})}_addCheck(e){return new Ci({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ci.create=t=>{var e;return new Ci({checks:[],typeName:He.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...rt(t)})};class Ol extends it{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ce.boolean){const n=this._getOrReturnCtx(e);return _e(n,{code:fe.invalid_type,expected:Ce.boolean,received:n.parsedType}),Qe}return Yr(e.data)}}Ol.create=t=>new Ol({typeName:He.ZodBoolean,coerce:t?.coerce||!1,...rt(t)});class lo extends it{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ce.date){const a=this._getOrReturnCtx(e);return _e(a,{code:fe.invalid_type,expected:Ce.date,received:a.parsedType}),Qe}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return _e(a,{code:fe.invalid_date}),Qe}const n=new Vr;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),_e(i,{code:fe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),_e(i,{code:fe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):ft.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new lo({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ae.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ae.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}lo.create=t=>new lo({checks:[],coerce:t?.coerce||!1,typeName:He.ZodDate,...rt(t)});class Fu extends it{_parse(e){if(this._getType(e)!==Ce.symbol){const n=this._getOrReturnCtx(e);return _e(n,{code:fe.invalid_type,expected:Ce.symbol,received:n.parsedType}),Qe}return Yr(e.data)}}Fu.create=t=>new Fu({typeName:He.ZodSymbol,...rt(t)});class Pl extends it{_parse(e){if(this._getType(e)!==Ce.undefined){const n=this._getOrReturnCtx(e);return _e(n,{code:fe.invalid_type,expected:Ce.undefined,received:n.parsedType}),Qe}return Yr(e.data)}}Pl.create=t=>new Pl({typeName:He.ZodUndefined,...rt(t)});class Nl extends it{_parse(e){if(this._getType(e)!==Ce.null){const n=this._getOrReturnCtx(e);return _e(n,{code:fe.invalid_type,expected:Ce.null,received:n.parsedType}),Qe}return Yr(e.data)}}Nl.create=t=>new Nl({typeName:He.ZodNull,...rt(t)});class fa extends it{constructor(){super(...arguments),this._any=!0}_parse(e){return Yr(e.data)}}fa.create=t=>new fa({typeName:He.ZodAny,...rt(t)});class to extends it{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Yr(e.data)}}to.create=t=>new to({typeName:He.ZodUnknown,...rt(t)});class Vs extends it{_parse(e){const r=this._getOrReturnCtx(e);return _e(r,{code:fe.invalid_type,expected:Ce.never,received:r.parsedType}),Qe}}Vs.create=t=>new Vs({typeName:He.ZodNever,...rt(t)});class Uu extends it{_parse(e){if(this._getType(e)!==Ce.undefined){const n=this._getOrReturnCtx(e);return _e(n,{code:fe.invalid_type,expected:Ce.void,received:n.parsedType}),Qe}return Yr(e.data)}}Uu.create=t=>new Uu({typeName:He.ZodVoid,...rt(t)});class ss extends it{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Ce.array)return _e(r,{code:fe.invalid_type,expected:Ce.array,received:r.parsedType}),Qe;if(i.exactLength!==null){const l=r.data.length>i.exactLength.value,u=r.data.length<i.exactLength.value;(l||u)&&(_e(r,{code:l?fe.too_big:fe.too_small,minimum:u?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(_e(r,{code:fe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(_e(r,{code:fe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((l,u)=>i.type._parseAsync(new bs(r,l,r.path,u)))).then(l=>Vr.mergeArray(n,l));const a=[...r.data].map((l,u)=>i.type._parseSync(new bs(r,l,r.path,u)));return Vr.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new ss({...this._def,minLength:{value:e,message:Ae.toString(r)}})}max(e,r){return new ss({...this._def,maxLength:{value:e,message:Ae.toString(r)}})}length(e,r){return new ss({...this._def,exactLength:{value:e,message:Ae.toString(r)}})}nonempty(e){return this.min(1,e)}}ss.create=(t,e)=>new ss({type:t,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...rt(e)});function Yo(t){if(t instanceof Ht){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=ys.create(Yo(n))}return new Ht({...t._def,shape:()=>e})}else return t instanceof ss?new ss({...t._def,type:Yo(t.element)}):t instanceof ys?ys.create(Yo(t.unwrap())):t instanceof Pi?Pi.create(Yo(t.unwrap())):t instanceof xs?xs.create(t.items.map(e=>Yo(e))):t}class Ht extends it{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=ft.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Ce.object){const h=this._getOrReturnCtx(e);return _e(h,{code:fe.invalid_type,expected:Ce.object,received:h.parsedType}),Qe}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof Vs&&this._def.unknownKeys==="strip"))for(const h in i.data)l.includes(h)||u.push(h);const d=[];for(const h of l){const g=a[h],v=i.data[h];d.push({key:{status:"valid",value:h},value:g._parse(new bs(i,v,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof Vs){const h=this._def.unknownKeys;if(h==="passthrough")for(const g of u)d.push({key:{status:"valid",value:g},value:{status:"valid",value:i.data[g]}});else if(h==="strict")u.length>0&&(_e(i,{code:fe.unrecognized_keys,keys:u}),n.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const g of u){const v=i.data[g];d.push({key:{status:"valid",value:g},value:h._parse(new bs(i,v,i.path,g)),alwaysSet:g in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const g of d){const v=await g.key,y=await g.value;h.push({key:v,value:y,alwaysSet:g.alwaysSet})}return h}).then(h=>Vr.mergeObjectSync(n,h)):Vr.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return Ae.errToObj,new Ht({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,l,u;const d=(l=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&l!==void 0?l:n.defaultError;return r.code==="unrecognized_keys"?{message:(u=Ae.errToObj(e).message)!==null&&u!==void 0?u:d}:{message:d}}}:{}})}strip(){return new Ht({...this._def,unknownKeys:"strip"})}passthrough(){return new Ht({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ht({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ht({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Ht({...this._def,catchall:e})}pick(e){const r={};return ft.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Ht({...this._def,shape:()=>r})}omit(e){const r={};return ft.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Ht({...this._def,shape:()=>r})}deepPartial(){return Yo(this)}partial(e){const r={};return ft.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new Ht({...this._def,shape:()=>r})}required(e){const r={};return ft.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof ys;)a=a._def.innerType;r[n]=a}}),new Ht({...this._def,shape:()=>r})}keyof(){return Zx(ft.objectKeys(this.shape))}}Ht.create=(t,e)=>new Ht({shape:()=>t,unknownKeys:"strip",catchall:Vs.create(),typeName:He.ZodObject,...rt(e)});Ht.strictCreate=(t,e)=>new Ht({shape:()=>t,unknownKeys:"strict",catchall:Vs.create(),typeName:He.ZodObject,...rt(e)});Ht.lazycreate=(t,e)=>new Ht({shape:t,unknownKeys:"strip",catchall:Vs.create(),typeName:He.ZodObject,...rt(e)});class jl extends it{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return r.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new En(u.ctx.common.issues));return _e(r,{code:fe.invalid_union,unionErrors:l}),Qe}if(r.common.async)return Promise.all(n.map(async a=>{const l={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(i);{let a;const l=[];for(const d of n){const h={...r,common:{...r.common,issues:[]},parent:null},g=d._parseSync({data:r.data,path:r.path,parent:h});if(g.status==="valid")return g;g.status==="dirty"&&!a&&(a={result:g,ctx:h}),h.common.issues.length&&l.push(h.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(d=>new En(d));return _e(r,{code:fe.invalid_union,unionErrors:u}),Qe}}get options(){return this._def.options}}jl.create=(t,e)=>new jl({options:t,typeName:He.ZodUnion,...rt(e)});const Ds=t=>t instanceof Il?Ds(t.schema):t instanceof as?Ds(t.innerType()):t instanceof Dl?[t.value]:t instanceof Oi?t.options:t instanceof Ll?ft.objectValues(t.enum):t instanceof Ml?Ds(t._def.innerType):t instanceof Pl?[void 0]:t instanceof Nl?[null]:t instanceof ys?[void 0,...Ds(t.unwrap())]:t instanceof Pi?[null,...Ds(t.unwrap())]:t instanceof Tg||t instanceof Fl?Ds(t.unwrap()):t instanceof $l?Ds(t._def.innerType):[];class vd extends it{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ce.object)return _e(r,{code:fe.invalid_type,expected:Ce.object,received:r.parsedType}),Qe;const n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(_e(r,{code:fe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Qe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const a of r){const l=Ds(a.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of l){if(i.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);i.set(u,a)}}return new vd({typeName:He.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...rt(n)})}}function kp(t,e){const r=Ms(t),n=Ms(e);if(t===e)return{valid:!0,data:t};if(r===Ce.object&&n===Ce.object){const i=ft.objectKeys(e),a=ft.objectKeys(t).filter(u=>i.indexOf(u)!==-1),l={...t,...e};for(const u of a){const d=kp(t[u],e[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(r===Ce.array&&n===Ce.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const l=t[a],u=e[a],d=kp(l,u);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return r===Ce.date&&n===Ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Rl extends it{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(a,l)=>{if(_p(a)||_p(l))return Qe;const u=kp(a.value,l.value);return u.valid?((Sp(a)||Sp(l))&&r.dirty(),{status:r.value,value:u.data}):(_e(n,{code:fe.invalid_intersection_types}),Qe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,l])=>i(a,l)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Rl.create=(t,e,r)=>new Rl({left:t,right:e,typeName:He.ZodIntersection,...rt(r)});class xs extends it{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ce.array)return _e(n,{code:fe.invalid_type,expected:Ce.array,received:n.parsedType}),Qe;if(n.data.length<this._def.items.length)return _e(n,{code:fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Qe;!this._def.rest&&n.data.length>this._def.items.length&&(_e(n,{code:fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((l,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new bs(n,l,n.path,u)):null}).filter(l=>!!l);return n.common.async?Promise.all(a).then(l=>Vr.mergeArray(r,l)):Vr.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new xs({...this._def,rest:e})}}xs.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xs({items:t,typeName:He.ZodTuple,rest:null,...rt(e)})};class Al extends it{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ce.object)return _e(n,{code:fe.invalid_type,expected:Ce.object,received:n.parsedType}),Qe;const i=[],a=this._def.keyType,l=this._def.valueType;for(const u in n.data)i.push({key:a._parse(new bs(n,u,n.path,u)),value:l._parse(new bs(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?Vr.mergeObjectAsync(r,i):Vr.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof it?new Al({keyType:e,valueType:r,typeName:He.ZodRecord,...rt(n)}):new Al({keyType:ns.create(),valueType:e,typeName:He.ZodRecord,...rt(r)})}}class Bu extends it{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ce.map)return _e(n,{code:fe.invalid_type,expected:Ce.map,received:n.parsedType}),Qe;const i=this._def.keyType,a=this._def.valueType,l=[...n.data.entries()].map(([u,d],h)=>({key:i._parse(new bs(n,u,n.path,[h,"key"])),value:a._parse(new bs(n,d,n.path,[h,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of l){const h=await d.key,g=await d.value;if(h.status==="aborted"||g.status==="aborted")return Qe;(h.status==="dirty"||g.status==="dirty")&&r.dirty(),u.set(h.value,g.value)}return{status:r.value,value:u}})}else{const u=new Map;for(const d of l){const h=d.key,g=d.value;if(h.status==="aborted"||g.status==="aborted")return Qe;(h.status==="dirty"||g.status==="dirty")&&r.dirty(),u.set(h.value,g.value)}return{status:r.value,value:u}}}}Bu.create=(t,e,r)=>new Bu({valueType:e,keyType:t,typeName:He.ZodMap,...rt(r)});class co extends it{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ce.set)return _e(n,{code:fe.invalid_type,expected:Ce.set,received:n.parsedType}),Qe;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(_e(n,{code:fe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(_e(n,{code:fe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function l(d){const h=new Set;for(const g of d){if(g.status==="aborted")return Qe;g.status==="dirty"&&r.dirty(),h.add(g.value)}return{status:r.value,value:h}}const u=[...n.data.values()].map((d,h)=>a._parse(new bs(n,d,n.path,h)));return n.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(e,r){return new co({...this._def,minSize:{value:e,message:Ae.toString(r)}})}max(e,r){return new co({...this._def,maxSize:{value:e,message:Ae.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}co.create=(t,e)=>new co({valueType:t,minSize:null,maxSize:null,typeName:He.ZodSet,...rt(e)});class ia extends it{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ce.function)return _e(r,{code:fe.invalid_type,expected:Ce.function,received:r.parsedType}),Qe;function n(u,d){return Mu({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Lu(),da].filter(h=>!!h),issueData:{code:fe.invalid_arguments,argumentsError:d}})}function i(u,d){return Mu({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Lu(),da].filter(h=>!!h),issueData:{code:fe.invalid_return_type,returnTypeError:d}})}const a={errorMap:r.common.contextualErrorMap},l=r.data;if(this._def.returns instanceof ha){const u=this;return Yr(async function(...d){const h=new En([]),g=await u._def.args.parseAsync(d,a).catch(x=>{throw h.addIssue(n(d,x)),h}),v=await Reflect.apply(l,this,g);return await u._def.returns._def.type.parseAsync(v,a).catch(x=>{throw h.addIssue(i(v,x)),h})})}else{const u=this;return Yr(function(...d){const h=u._def.args.safeParse(d,a);if(!h.success)throw new En([n(d,h.error)]);const g=Reflect.apply(l,this,h.data),v=u._def.returns.safeParse(g,a);if(!v.success)throw new En([i(g,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ia({...this._def,args:xs.create(e).rest(to.create())})}returns(e){return new ia({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new ia({args:e||xs.create([]).rest(to.create()),returns:r||to.create(),typeName:He.ZodFunction,...rt(n)})}}class Il extends it{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Il.create=(t,e)=>new Il({getter:t,typeName:He.ZodLazy,...rt(e)});class Dl extends it{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return _e(r,{received:r.data,code:fe.invalid_literal,expected:this._def.value}),Qe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Dl.create=(t,e)=>new Dl({value:t,typeName:He.ZodLiteral,...rt(e)});function Zx(t,e){return new Oi({values:t,typeName:He.ZodEnum,...rt(e)})}class Oi extends it{constructor(){super(...arguments),dl.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return _e(r,{expected:ft.joinValues(n),received:r.parsedType,code:fe.invalid_type}),Qe}if($u(this,dl)||Kx(this,dl,new Set(this._def.values)),!$u(this,dl).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return _e(r,{received:r.data,code:fe.invalid_enum_value,options:n}),Qe}return Yr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Oi.create(e,{...this._def,...r})}exclude(e,r=this._def){return Oi.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}dl=new WeakMap;Oi.create=Zx;class Ll extends it{constructor(){super(...arguments),fl.set(this,void 0)}_parse(e){const r=ft.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Ce.string&&n.parsedType!==Ce.number){const i=ft.objectValues(r);return _e(n,{expected:ft.joinValues(i),received:n.parsedType,code:fe.invalid_type}),Qe}if($u(this,fl)||Kx(this,fl,new Set(ft.getValidEnumValues(this._def.values))),!$u(this,fl).has(e.data)){const i=ft.objectValues(r);return _e(n,{received:n.data,code:fe.invalid_enum_value,options:i}),Qe}return Yr(e.data)}get enum(){return this._def.values}}fl=new WeakMap;Ll.create=(t,e)=>new Ll({values:t,typeName:He.ZodNativeEnum,...rt(e)});class ha extends it{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ce.promise&&r.common.async===!1)return _e(r,{code:fe.invalid_type,expected:Ce.promise,received:r.parsedType}),Qe;const n=r.parsedType===Ce.promise?r.data:Promise.resolve(r.data);return Yr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ha.create=(t,e)=>new ha({type:t,typeName:He.ZodPromise,...rt(e)});class as extends it{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:l=>{_e(n,l),l.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const l=i.transform(n.data,a);if(n.common.async)return Promise.resolve(l).then(async u=>{if(r.value==="aborted")return Qe;const d=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return d.status==="aborted"?Qe:d.status==="dirty"||r.value==="dirty"?ea(d.value):d});{if(r.value==="aborted")return Qe;const u=this._def.schema._parseSync({data:l,path:n.path,parent:n});return u.status==="aborted"?Qe:u.status==="dirty"||r.value==="dirty"?ea(u.value):u}}if(i.type==="refinement"){const l=u=>{const d=i.refinement(u,a);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?Qe:(u.status==="dirty"&&r.dirty(),l(u.value),{status:r.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?Qe:(u.status==="dirty"&&r.dirty(),l(u.value).then(()=>({status:r.value,value:u.value}))))}if(i.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ao(l))return l;const u=i.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>ao(l)?Promise.resolve(i.transform(l.value,a)).then(u=>({status:r.value,value:u})):l);ft.assertNever(i)}}as.create=(t,e,r)=>new as({schema:t,typeName:He.ZodEffects,effect:e,...rt(r)});as.createWithPreprocess=(t,e,r)=>new as({schema:e,effect:{type:"preprocess",transform:t},typeName:He.ZodEffects,...rt(r)});class ys extends it{_parse(e){return this._getType(e)===Ce.undefined?Yr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ys.create=(t,e)=>new ys({innerType:t,typeName:He.ZodOptional,...rt(e)});class Pi extends it{_parse(e){return this._getType(e)===Ce.null?Yr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pi.create=(t,e)=>new Pi({innerType:t,typeName:He.ZodNullable,...rt(e)});class Ml extends it{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Ce.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ml.create=(t,e)=>new Ml({innerType:t,typeName:He.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...rt(e)});class $l extends it{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Cl(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new En(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new En(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}$l.create=(t,e)=>new $l({innerType:t,typeName:He.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...rt(e)});class zu extends it{_parse(e){if(this._getType(e)!==Ce.nan){const n=this._getOrReturnCtx(e);return _e(n,{code:fe.invalid_type,expected:Ce.nan,received:n.parsedType}),Qe}return{status:"valid",value:e.data}}}zu.create=t=>new zu({typeName:He.ZodNaN,...rt(t)});const cP=Symbol("zod_brand");class Tg extends it{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Jl extends it{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Qe:a.status==="dirty"?(r.dirty(),ea(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Qe:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Jl({in:e,out:r,typeName:He.ZodPipeline})}}class Fl extends it{_parse(e){const r=this._def.innerType._parse(e),n=i=>(ao(i)&&(i.value=Object.freeze(i.value)),i);return Cl(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}Fl.create=(t,e)=>new Fl({innerType:t,typeName:He.ZodReadonly,...rt(e)});function y0(t,e){const r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function Jx(t,e={},r){return t?fa.create().superRefine((n,i)=>{var a,l;const u=t(n);if(u instanceof Promise)return u.then(d=>{var h,g;if(!d){const v=y0(e,n),y=(g=(h=v.fatal)!==null&&h!==void 0?h:r)!==null&&g!==void 0?g:!0;i.addIssue({code:"custom",...v,fatal:y})}});if(!u){const d=y0(e,n),h=(l=(a=d.fatal)!==null&&a!==void 0?a:r)!==null&&l!==void 0?l:!0;i.addIssue({code:"custom",...d,fatal:h})}}):fa.create()}const uP={object:Ht.lazycreate};var He;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(He||(He={}));const dP=(t,e={message:`Input not instance of ${t.name}`})=>Jx(r=>r instanceof t,e),Xx=ns.create,e_=Ti.create,fP=zu.create,hP=Ci.create,t_=Ol.create,pP=lo.create,gP=Fu.create,mP=Pl.create,vP=Nl.create,yP=fa.create,wP=to.create,bP=Vs.create,xP=Uu.create,_P=ss.create,SP=Ht.create,kP=Ht.strictCreate,EP=jl.create,TP=vd.create,CP=Rl.create,OP=xs.create,PP=Al.create,NP=Bu.create,jP=co.create,RP=ia.create,AP=Il.create,IP=Dl.create,DP=Oi.create,LP=Ll.create,MP=ha.create,w0=as.create,$P=ys.create,FP=Pi.create,UP=as.createWithPreprocess,BP=Jl.create,zP=()=>Xx().optional(),VP=()=>e_().optional(),qP=()=>t_().optional(),WP={string:(t=>ns.create({...t,coerce:!0})),number:(t=>Ti.create({...t,coerce:!0})),boolean:(t=>Ol.create({...t,coerce:!0})),bigint:(t=>Ci.create({...t,coerce:!0})),date:(t=>lo.create({...t,coerce:!0}))},HP=Qe;var bt=Object.freeze({__proto__:null,defaultErrorMap:da,setErrorMap:UO,getErrorMap:Lu,makeIssue:Mu,EMPTY_PATH:BO,addIssueToContext:_e,ParseStatus:Vr,INVALID:Qe,DIRTY:ea,OK:Yr,isAborted:_p,isDirty:Sp,isValid:ao,isAsync:Cl,get util(){return ft},get objectUtil(){return xp},ZodParsedType:Ce,getParsedType:Ms,ZodType:it,datetimeRegex:Yx,ZodString:ns,ZodNumber:Ti,ZodBigInt:Ci,ZodBoolean:Ol,ZodDate:lo,ZodSymbol:Fu,ZodUndefined:Pl,ZodNull:Nl,ZodAny:fa,ZodUnknown:to,ZodNever:Vs,ZodVoid:Uu,ZodArray:ss,ZodObject:Ht,ZodUnion:jl,ZodDiscriminatedUnion:vd,ZodIntersection:Rl,ZodTuple:xs,ZodRecord:Al,ZodMap:Bu,ZodSet:co,ZodFunction:ia,ZodLazy:Il,ZodLiteral:Dl,ZodEnum:Oi,ZodNativeEnum:Ll,ZodPromise:ha,ZodEffects:as,ZodTransformer:as,ZodOptional:ys,ZodNullable:Pi,ZodDefault:Ml,ZodCatch:$l,ZodNaN:zu,BRAND:cP,ZodBranded:Tg,ZodPipeline:Jl,ZodReadonly:Fl,custom:Jx,Schema:it,ZodSchema:it,late:uP,get ZodFirstPartyTypeKind(){return He},coerce:WP,any:yP,array:_P,bigint:hP,boolean:t_,date:pP,discriminatedUnion:TP,effect:w0,enum:DP,function:RP,instanceof:dP,intersection:CP,lazy:AP,literal:IP,map:NP,nan:fP,nativeEnum:LP,never:bP,null:vP,nullable:FP,number:e_,object:SP,oboolean:qP,onumber:VP,optional:$P,ostring:zP,pipeline:BP,preprocess:UP,promise:MP,record:PP,set:jP,strictObject:kP,string:Xx,symbol:gP,transformer:w0,tuple:OP,undefined:mP,union:EP,unknown:wP,void:xP,NEVER:HP,ZodIssueCode:fe,quotelessJson:FO,ZodError:En});const se=Symbol.for("drizzle:entityKind");function Mr(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,se))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(se in r&&r[se]===e[se])return!0;r=Object.getPrototypeOf(r)}return!1}class Ul{constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[se]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class KP{static[se]="ColumnBuilder";config;constructor(e,r,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const oa=Symbol.for("drizzle:Name");class GP{static[se]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{const{name:n,columns:i,foreignColumns:a}=e();return{name:n,columns:i,foreignTable:a[0].table,foreignColumns:a}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new QP(e,this)}}class QP{constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[se]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),i=r.map(u=>u.name),a=n.map(u=>u.name),l=[this.table[oa],...i,n[0].table[oa],...a];return e??`${l.join("_")}_fk`}}function YP(t,...e){return t(...e)}function ZP(t,e){return`${t[oa]}_${e.join("_")}_unique`}function b0(t,e,r){for(let n=e;n<t.length;n++){const i=t[n];if(i==="\\"){n++;continue}if(i==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(i===","||i==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function r_(t,e=0){const r=[];let n=e,i=!1;for(;n<t.length;){const a=t[n];if(a===","){(i||n===e)&&r.push(""),i=!0,n++;continue}if(i=!1,a==="\\"){n+=2;continue}if(a==='"'){const[d,h]=b0(t,n+1,!0);r.push(d),n=h;continue}if(a==="}")return[r,n+1];if(a==="{"){const[d,h]=r_(t,n+1);r.push(d),n=h;continue}const[l,u]=b0(t,n,!1);r.push(l),n=u}return[r,n]}function JP(t){const[e]=r_(t,1);return e}function n_(t){return`{${t.map(e=>Array.isArray(e)?n_(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class gt extends KP{foreignKeyConfigs=[];static[se]="PgColumnBuilder";array(e){return new eN(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:n,actions:i})=>YP((a,l)=>{const u=new GP(()=>{const d=a();return{columns:[e],foreignColumns:[d]}});return l.onUpdate&&u.onUpdate(l.onUpdate),l.onDelete&&u.onDelete(l.onDelete),u.build(r)},n,i))}buildExtraConfigColumn(e){return new XP(e,this.config)}}class st extends Ul{constructor(e,r){r.uniqueName||(r.uniqueName=ZP(e,[r.name])),super(e,r),this.table=e}static[se]="PgColumn"}class XP extends st{static[se]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class eN extends gt{static[se]="PgArrayBuilder";constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new Cg(e,this.config,r)}}class Cg extends st{constructor(e,r,n,i){super(e,r),this.baseColumn=n,this.range=i,this.size=r.size}size;static[se]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=JP(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){const n=e.map(i=>i===null?null:Mr(this.baseColumn,Cg)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return r?n:n_(n)}}const x0=Symbol.for("drizzle:isPgEnum");function tN(t){return!!t&&typeof t=="function"&&x0 in t&&t[x0]===!0}class s_{static[se]="Subquery";constructor(e,r,n,i=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:i}}}const rN={startActiveSpan(t,e){return e()}},aa=Symbol.for("drizzle:ViewBaseConfig"),jh=Symbol.for("drizzle:Schema"),_0=Symbol.for("drizzle:Columns"),S0=Symbol.for("drizzle:ExtraConfigColumns"),Rh=Symbol.for("drizzle:OriginalName"),Ah=Symbol.for("drizzle:BaseName"),Vu=Symbol.for("drizzle:IsAlias"),k0=Symbol.for("drizzle:ExtraConfigBuilder"),i_=Symbol.for("drizzle:IsDrizzleTable");let xn=class{static[se]="Table";static Symbol={Name:oa,Schema:jh,OriginalName:Rh,Columns:_0,ExtraConfigColumns:S0,BaseName:Ah,IsAlias:Vu,ExtraConfigBuilder:k0};[oa];[Rh];[jh];[_0];[S0];[Ah];[Vu]=!1;[i_]=!0;[k0]=void 0;constructor(e,r,n){this[oa]=this[Rh]=e,this[jh]=r,this[Ah]=n}};function o_(t){return typeof t=="object"&&t!==null&&i_ in t}function nN(t){return t!=null&&typeof t.getSQL=="function"}function sN(t){const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}class Zn{static[se]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new Zt([this])}}class Zt{constructor(e){this.queryChunks=e}static[se]="SQL";decoder=a_;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return rN.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:l,prepareTyping:u,inlineParams:d,paramStartIndex:h}=n;return sN(e.map(g=>{if(Mr(g,Zn))return{sql:g.value.join(""),params:[]};if(Mr(g,Ep))return{sql:a(g.value),params:[]};if(g===void 0)return{sql:"",params:[]};if(Array.isArray(g)){const v=[new Zn("(")];for(const[y,x]of g.entries())v.push(x),y<g.length-1&&v.push(new Zn(", "));return v.push(new Zn(")")),this.buildQueryFromSourceParams(v,n)}if(Mr(g,Zt))return this.buildQueryFromSourceParams(g.queryChunks,{...n,inlineParams:d||g.shouldInlineParams});if(Mr(g,xn)){const v=g[xn.Symbol.Schema],y=g[xn.Symbol.Name];return{sql:v===void 0||g[Vu]?a(y):a(v)+"."+a(y),params:[]}}if(Mr(g,Ul)){const v=i.getColumnCasing(g);if(r.invokeSource==="indexes")return{sql:a(v),params:[]};const y=g.table[xn.Symbol.Schema];return{sql:g.table[Vu]||y===void 0?a(g.table[xn.Symbol.Name])+"."+a(v):a(y)+"."+a(g.table[xn.Symbol.Name])+"."+a(v),params:[]}}if(Mr(g,iN)){const v=g[aa].schema,y=g[aa].name;return{sql:v===void 0||g[aa].isAlias?a(y):a(v)+"."+a(y),params:[]}}if(Mr(g,c_)){if(Mr(g.value,Tp))return{sql:l(h.value++,g),params:[g],typings:["none"]};const v=g.value===null?null:g.encoder.mapToDriverValue(g.value);if(Mr(v,Zt))return this.buildQueryFromSourceParams([v],n);if(d)return{sql:this.mapInlineParam(v,n),params:[]};let y=["none"];return u&&(y=[u(g.encoder)]),{sql:l(h.value++,v),params:[v],typings:y}}return Mr(g,Tp)?{sql:l(h.value++,g),params:[g],typings:["none"]}:Mr(g,Zt.Aliased)&&g.fieldAlias!==void 0?{sql:a(g.fieldAlias),params:[]}:Mr(g,s_)?g._.isWith?{sql:a(g._.alias),params:[]}:this.buildQueryFromSourceParams([new Zn("("),g._.sql,new Zn(") "),new Ep(g._.alias)],n):tN(g)?g.schema?{sql:a(g.schema)+"."+a(g.enumName),params:[]}:{sql:a(g.enumName),params:[]}:nN(g)?g.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([g.getSQL()],n):this.buildQueryFromSourceParams([new Zn("("),g.getSQL(),new Zn(")")],n):d?{sql:this.mapInlineParam(g,n),params:[]}:{sql:l(h.value++,g),params:[g],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Zt.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class Ep{constructor(e){this.value=e}static[se]="Name";brand;getSQL(){return new Zt([this])}}const a_={mapFromDriverValue:t=>t},l_={mapToDriverValue:t=>t};({...a_,...l_});class c_{constructor(e,r=l_){this.value=e,this.encoder=r}static[se]="Param";brand;getSQL(){return new Zt([this])}}function qu(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new Zn(t[0]));for(const[n,i]of e.entries())r.push(i,new Zn(t[n+1]));return new Zt(r)}(t=>{function e(){return new Zt([])}t.empty=e;function r(d){return new Zt(d)}t.fromList=r;function n(d){return new Zt([new Zn(d)])}t.raw=n;function i(d,h){const g=[];for(const[v,y]of d.entries())v>0&&h!==void 0&&g.push(h),g.push(y);return new Zt(g)}t.join=i;function a(d){return new Ep(d)}t.identifier=a;function l(d){return new Tp(d)}t.placeholder=l;function u(d,h){return new c_(d,h)}t.param=u})(qu||(qu={}));(t=>{class e{constructor(n,i){this.sql=n,this.fieldAlias=i}static[se]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(Zt||(Zt={}));class Tp{constructor(e){this.name=e}static[se]="Placeholder";getSQL(){return new Zt([this])}}const u_=Symbol.for("drizzle:IsDrizzleView");class iN{static[se]="View";[aa];[u_]=!0;constructor({name:e,schema:r,selectedFields:n,query:i}){this[aa]={name:e,originalName:e,schema:r,selectedFields:n,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new Zt([this])}}function oN(t){return typeof t=="object"&&t!==null&&u_ in t}Ul.prototype.getSQL=function(){return new Zt([this])};xn.prototype.getSQL=function(){return new Zt([this])};s_.prototype.getSQL=function(){return new Zt([this])};function aN(t){return t[xn.Symbol.Columns]}function lN(t){return t[aa].selectedFields}function Er(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}class yd extends gt{static[se]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class cN extends yd{static[se]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new uN(e,this.config)}}class uN extends st{static[se]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class dN extends yd{static[se]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new fN(e,this.config)}}class fN extends st{static[se]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function hN(t,e){const{name:r,config:n}=Er(t,e);return n.mode==="number"?new cN(r):new dN(r)}class pN extends gt{static[se]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new gN(e,this.config)}}class gN extends st{static[se]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class mN extends gt{static[se]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new vN(e,this.config)}}class vN extends st{static[se]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function yN(t,e){const{name:r,config:n}=Er(t,e);return n.mode==="number"?new pN(r):new mN(r)}class wN extends gt{static[se]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new bN(e,this.config)}}class bN extends st{static[se]="PgBoolean";getSQLType(){return"boolean"}}function d_(t){return new wN(t??"")}class xN extends gt{static[se]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new _N(e,this.config)}}class _N extends st{static[se]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function SN(t,e={}){const{name:r,config:n}=Er(t,e);return new xN(r,n)}class kN extends gt{static[se]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new EN(e,this.config)}}class EN extends st{static[se]="PgCidr";getSQLType(){return"cidr"}}function TN(t){return new kN(t??"")}class CN extends gt{static[se]="PgCustomColumnBuilder";constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new ON(e,this.config)}}class ON extends st{static[se]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function PN(t){return(e,r)=>{const{name:n,config:i}=Er(e,r);return new CN(n,i,t)}}class Xl extends gt{static[se]="PgDateColumnBaseBuilder";defaultNow(){return this.default(qu`now()`)}}class NN extends Xl{static[se]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new jN(e,this.config)}}class jN extends st{static[se]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class RN extends Xl{static[se]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new AN(e,this.config)}}class AN extends st{static[se]="PgDateString";getSQLType(){return"date"}}function IN(t,e){const{name:r,config:n}=Er(t,e);return n?.mode==="date"?new NN(r):new RN(r)}class DN extends gt{static[se]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new LN(e,this.config)}}class LN extends st{static[se]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function MN(t){return new DN(t??"")}class $N extends gt{static[se]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new FN(e,this.config)}}class FN extends st{static[se]="PgInet";getSQLType(){return"inet"}}function UN(t){return new $N(t??"")}class BN extends yd{static[se]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new zN(e,this.config)}}class zN extends st{static[se]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function $s(t){return new BN(t??"")}class VN extends gt{static[se]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new qN(e,this.config)}}class qN extends st{static[se]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}}function WN(t,e={}){const{name:r,config:n}=Er(t,e);return new VN(r,n)}class HN extends gt{static[se]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new KN(e,this.config)}}class KN extends st{static[se]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function GN(t){return new HN(t??"")}class QN extends gt{static[se]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new YN(e,this.config)}}class YN extends st{static[se]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function ZN(t){return new QN(t??"")}class JN extends gt{static[se]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new XN(e,this.config)}}class XN extends st{static[se]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,i]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class ej extends gt{static[se]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new tj(e,this.config)}}class tj extends st{static[se]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function rj(t,e){const{name:r,config:n}=Er(t,e);return!n?.mode||n.mode==="tuple"?new JN(r):new ej(r)}class nj extends gt{static[se]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new sj(e,this.config)}}class sj extends st{static[se]="PgMacaddr";getSQLType(){return"macaddr"}}function ij(t){return new nj(t??"")}class oj extends gt{static[se]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new aj(e,this.config)}}class aj extends st{static[se]="PgMacaddr8";getSQLType(){return"macaddr8"}}function lj(t){return new oj(t??"")}class cj extends gt{static[se]="PgNumericBuilder";constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new uj(e,this.config)}}class uj extends st{static[se]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function dj(t,e){const{name:r,config:n}=Er(t,e);return new cj(r,n?.precision,n?.scale)}class fj extends gt{static[se]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new hj(e,this.config)}}class hj extends st{static[se]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class pj extends gt{static[se]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new gj(e,this.config)}}class gj extends st{static[se]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function mj(t,e){const{name:r,config:n}=Er(t,e);return!n?.mode||n.mode==="tuple"?new fj(r):new pj(r)}function vj(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function E0(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let i=0;i<8;i++)n.setUint8(i,t[e+i]);return n.getFloat64(0,!0)}function f_(t){const e=vj(t);let r=0;const n=e[r];r+=1;const i=new DataView(e.buffer),a=i.getUint32(r,n===1);if(r+=4,a&536870912&&(i.getUint32(r,n===1),r+=4),(a&65535)===1){const l=E0(e,r);r+=8;const u=E0(e,r);return r+=8,[l,u]}throw new Error("Unsupported geometry type")}class yj extends gt{static[se]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new wj(e,this.config)}}class wj extends st{static[se]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return f_(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class bj extends gt{static[se]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new xj(e,this.config)}}class xj extends st{static[se]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=f_(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function _j(t,e){const{name:r,config:n}=Er(t,e);return!n?.mode||n.mode==="tuple"?new yj(r):new bj(r)}class Sj extends gt{static[se]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new kj(e,this.config)}}class kj extends st{static[se]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function Ej(t){return new Sj(t??"")}class Tj extends gt{static[se]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Cj(e,this.config)}}class Cj extends st{static[se]="PgSerial";getSQLType(){return"serial"}}function wd(t){return new Tj(t??"")}class Oj extends yd{static[se]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new Pj(e,this.config)}}class Pj extends st{static[se]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function Nj(t){return new Oj(t??"")}class jj extends gt{static[se]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Rj(e,this.config)}}class Rj extends st{static[se]="PgSmallSerial";getSQLType(){return"smallserial"}}function Aj(t){return new jj(t??"")}class Ij extends gt{static[se]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new Dj(e,this.config)}}class Dj extends st{static[se]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function ro(t,e={}){const{name:r,config:n}=Er(t,e);return new Ij(r,n)}class Lj extends Xl{constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}static[se]="PgTimeBuilder";build(e){return new Mj(e,this.config)}}class Mj extends st{static[se]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function $j(t,e={}){const{name:r,config:n}=Er(t,e);return new Lj(r,n.withTimezone??!1,n.precision)}class Fj extends Xl{static[se]="PgTimestampBuilder";constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Uj(e,this.config)}}class Uj extends st{static[se]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class Bj extends Xl{static[se]="PgTimestampStringBuilder";constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new zj(e,this.config)}}class zj extends st{static[se]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Wu(t,e={}){const{name:r,config:n}=Er(t,e);return n?.mode==="string"?new Bj(r,n.withTimezone??!1,n.precision):new Fj(r,n?.withTimezone??!1,n?.precision)}class Vj extends gt{static[se]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(qu`gen_random_uuid()`)}build(e){return new qj(e,this.config)}}class qj extends st{static[se]="PgUUID";getSQLType(){return"uuid"}}function Wj(t){return new Vj(t??"")}class Hj extends gt{static[se]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Kj(e,this.config)}}class Kj extends st{static[se]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function Gj(t,e={}){const{name:r,config:n}=Er(t,e);return new Hj(r,n)}class Qj extends gt{static[se]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Yj(e,this.config)}}class Yj extends st{static[se]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function Zj(t,e){const{name:r,config:n}=Er(t,e);return new Qj(r,n)}class Jj extends gt{static[se]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new Xj(e,this.config)}}class Xj extends st{static[se]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}function eR(t,e){const{name:r,config:n}=Er(t,e);return new Jj(r,n)}class tR extends gt{static[se]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new rR(e,this.config)}}class rR extends st{static[se]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function nR(t,e){const{name:r,config:n}=Er(t,e);return new tR(r,n)}class sR extends gt{static[se]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new iR(e,this.config)}}class iR extends st{static[se]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}function oR(t,e){const{name:r,config:n}=Er(t,e);return new sR(r,n)}function aR(){return{bigint:hN,bigserial:yN,boolean:d_,char:SN,cidr:TN,customType:PN,date:IN,doublePrecision:MN,inet:UN,integer:$s,interval:WN,json:GN,jsonb:ZN,line:rj,macaddr:ij,macaddr8:lj,numeric:dj,point:mj,geometry:_j,real:Ej,serial:wd,smallint:Nj,smallserial:Aj,text:ro,time:$j,timestamp:Wu,uuid:Wj,varchar:Gj,bit:Zj,halfvec:eR,sparsevec:nR,vector:oR}}const Cp=Symbol.for("drizzle:PgInlineForeignKeys"),T0=Symbol.for("drizzle:EnableRLS");class C0 extends xn{static[se]="PgTable";static Symbol=Object.assign({},xn.Symbol,{InlineForeignKeys:Cp,EnableRLS:T0});[Cp]=[];[T0]=!1;[xn.Symbol.ExtraConfigBuilder]=void 0}function lR(t,e,r,n,i=t){const a=new C0(t,n,i),l=typeof e=="function"?e(aR()):e,u=Object.fromEntries(Object.entries(l).map(([g,v])=>{const y=v;y.setName(g);const x=y.build(a);return a[Cp].push(...y.buildForeignKeys(x,a)),[g,x]})),d=Object.fromEntries(Object.entries(l).map(([g,v])=>{const y=v;y.setName(g);const x=y.buildExtraConfigColumn(a);return[g,x]})),h=Object.assign(a,u);return h[xn.Symbol.Columns]=u,h[xn.Symbol.ExtraConfigColumns]=d,Object.assign(h,{enableRLS:()=>(h[C0.Symbol.EnableRLS]=!0,h)})}const Og=(t,e,r)=>lR(t,e,r,void 0),qt={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function tr(t,e){return e.includes(t.columnType)}function cR(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const uR=bt.union([bt.string(),bt.number(),bt.boolean(),bt.null()]),dR=bt.union([uR,bt.record(bt.any()),bt.array(bt.any())]),fR=bt.custom(t=>t instanceof Buffer);function h_(t,e){const r=e?.zodInstance??bt,n=e?.coerce??{};let i;return cR(t)&&(i=t.enumValues.length?r.enum(t.enumValues):r.string()),i||(tr(t,["PgGeometry","PgPointTuple"])?i=r.tuple([r.number(),r.number()]):tr(t,["PgGeometryObject","PgPointObject"])?i=r.object({x:r.number(),y:r.number()}):tr(t,["PgHalfVector","PgVector"])?(i=r.array(r.number()),i=t.dimensions?i.length(t.dimensions):i):tr(t,["PgLine"])?i=r.tuple([r.number(),r.number(),r.number()]):tr(t,["PgLineABC"])?i=r.object({a:r.number(),b:r.number(),c:r.number()}):tr(t,["PgArray"])?(i=r.array(h_(t.baseColumn,r)),i=t.size?i.length(t.size):i):t.dataType==="array"?i=r.array(r.any()):t.dataType==="number"?i=hR(t,r,n):t.dataType==="bigint"?i=pR(t,r,n):t.dataType==="boolean"?i=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?i=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?i=gR(t,r,n):t.dataType==="json"?i=dR:t.dataType==="custom"?i=r.any():t.dataType==="buffer"&&(i=fR)),i||(i=r.any()),i}function hR(t,e,r){let n=t.getSQLType().includes("unsigned"),i,a,l=!1;tr(t,["MySqlTinyInt","SingleStoreTinyInt"])?(i=n?0:qt.INT8_MIN,a=n?qt.INT8_UNSIGNED_MAX:qt.INT8_MAX,l=!0):tr(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(i=n?0:qt.INT16_MIN,a=n?qt.INT16_UNSIGNED_MAX:qt.INT16_MAX,l=!0):tr(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(i=n?0:qt.INT24_MIN,a=n?qt.INT24_UNSIGNED_MAX:qt.INT24_MAX,l=tr(t,["MySqlMediumInt","SingleStoreMediumInt"])):tr(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(i=n?0:qt.INT32_MIN,a=n?qt.INT32_UNSIGNED_MAX:qt.INT32_MAX,l=!0):tr(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(i=n?0:qt.INT48_MIN,a=n?qt.INT48_UNSIGNED_MAX:qt.INT48_MAX):tr(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||tr(t,["MySqlSerial","SingleStoreSerial"]),i=n?0:Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,l=!0):tr(t,["MySqlYear","SingleStoreYear"])?(i=1901,a=2155,l=!0):(i=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER);let u=r===!0||r?.number?e.coerce.number():e.number();return u=u.min(i).max(a),l?u.int():u}function pR(t,e,r){const n=t.getSQLType().includes("unsigned"),i=n?0n:qt.INT64_MIN,a=n?qt.INT64_UNSIGNED_MAX:qt.INT64_MAX;return(r===!0||r?.bigint?e.coerce.bigint():e.bigint()).min(i).max(a)}function gR(t,e,r){if(tr(t,["PgUUID"]))return e.string().uuid();let n,i,a=!1;tr(t,["PgVarchar","SQLiteText"])?n=t.length:tr(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??qt.INT16_UNSIGNED_MAX:tr(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=qt.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=qt.INT24_UNSIGNED_MAX:t.textType==="text"?n=qt.INT16_UNSIGNED_MAX:n=qt.INT8_UNSIGNED_MAX),tr(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,a=!0),tr(t,["PgBinaryVector"])&&(i=/^[01]+$/,n=t.dimensions);let l=r===!0||r?.string?e.coerce.string():e.string();return l=i?l.regex(i):l,n&&a?l.length(n):n?l.max(n):l}function p_(t){return o_(t)?aN(t):lN(t)}function g_(t,e,r,n){const i={};for(const[a,l]of Object.entries(t)){if(!Mr(l,Ul)&&!Mr(l,Zt)&&!Mr(l,Zt.Aliased)&&typeof l=="object"){const v=o_(l)||oN(l)?p_(l):l;i[a]=g_(v,e[a]??{},r,n);continue}const u=e[a];if(u!==void 0&&typeof u!="function"){i[a]=u;continue}const d=Mr(l,Ul)?l:void 0,h=d?h_(d,n):bt.any(),g=typeof u=="function"?u(h):h;r.never(d)||(i[a]=g,d&&(r.nullable(d)&&(i[a]=i[a].nullable()),r.optional(d)&&(i[a]=i[a].optional())))}return bt.object(i)}const mR={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},vR=(t,e)=>{const r=p_(t);return g_(r,{},mR)},yR=Og("users",{id:wd("id").primaryKey(),username:ro("username").notNull().unique(),password:ro("password").notNull(),email:ro("email").unique(),rating:$s("rating").default(0),gamesPlayed:$s("games_played").default(0),wins:$s("wins").default(0),losses:$s("losses").default(0),draws:$s("draws").default(0)});Og("games",{id:wd("id").primaryKey(),whitePlayerId:$s("white_player_id"),blackPlayerId:$s("black_player_id"),pgn:ro("pgn"),result:ro("result"),createdAt:Wu("created_at").defaultNow()});Og("password_resets",{id:wd("id").primaryKey(),userId:$s("user_id").notNull(),code:ro("code").notNull(),expiresAt:Wu("expires_at").notNull(),used:d_("used").default(!1).notNull(),createdAt:Wu("created_at").defaultNow()});const Op=vR(yR).pick({username:!0,password:!0});bt.object({message:bt.string(),field:bt.string().optional()}),bt.object({message:bt.string()}),bt.object({message:bt.string()});const Qn={users:{login:{method:"POST",path:"/api/login",input:Op,responses:{200:bt.custom(),401:bt.object({message:bt.string()})}},register:{method:"POST",path:"/api/register",input:Op,responses:{201:bt.custom(),400:bt.object({message:bt.string()})}},me:{method:"GET",path:"/api/user",responses:{200:bt.custom(),401:bt.object({message:bt.string()})}}},games:{list:{method:"GET",path:"/api/games",responses:{200:bt.array(bt.custom())}}}},Pg="auth_token";function O0(){try{return localStorage.getItem(Pg)}catch{return null}}function P0(t){try{localStorage.setItem(Pg,t)}catch{}}function N0(){try{localStorage.removeItem(Pg)}catch{}}function mo(){const t=id(),{toast:e}=go(),[,r]=po(),{data:n,isLoading:i,error:a}=Nu({queryKey:[Qn.users.me.path],queryFn:async()=>{const h=O0();if(!h)return null;const g=await fetch(Qr+Qn.users.me.path,{headers:{Authorization:`Bearer ${h}`}});if(g.status===401)return N0(),null;if(!g.ok)throw new Error("Khng th ly thng tin ngi dng");return Qn.users.me.responses[200].parse(await g.json())},retry:!1}),l=Sh({mutationFn:async h=>{const g=await fetch(Qr+Qn.users.login.path,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!g.ok){if(g.status===401)throw new Error("Sai tn ng nhp hoc mt khu");const v=await g.json();throw new Error(v.message||"ng nhp tht bi")}return Qn.users.login.responses[200].parse(await g.json())},onSuccess:h=>{const g=h?.token;typeof g=="string"&&g&&P0(g),t.setQueryData([Qn.users.me.path],h),e({title:"Cho mng quay li!",description:`ng nhp vi ti khon ${h.username}`,variant:"default"}),r("/")},onError:h=>{e({title:"ng nhp tht bi",description:h.message,variant:"destructive"})}}),u=Sh({mutationFn:async h=>{const g=await fetch(Qr+Qn.users.register.path,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!g.ok){const v=await g.json();throw new Error(v.message||"ng k tht bi")}return Qn.users.register.responses[201].parse(await g.json())},onSuccess:h=>{const g=h?.token;typeof g=="string"&&g&&P0(g),t.setQueryData([Qn.users.me.path],h),e({title:"To ti khon thnh cng!",description:`Cho mng n vi ChessPro, ${h.username}!`,variant:"default"}),r("/")},onError:h=>{e({title:"ng k tht bi",description:h.message,variant:"destructive"})}}),d=Sh({mutationFn:async()=>{const h=O0();if(!(await fetch(Qr+"/api/logout",{method:"POST",headers:h?{Authorization:`Bearer ${h}`}:{}})).ok)throw new Error("ng xut tht bi");N0(),t.setQueryData([Qn.users.me.path],null)},onSuccess:()=>{r("/auth"),e({title:" ng xut",description:"Bn cn ng nhp li  tip tc chi."})},onError:h=>{e({title:"ng xut tht bi",description:h.message,variant:"destructive"})}});return{user:n,isLoading:i,error:a,login:l.mutate,isLoggingIn:l.isPending,register:u.mutate,isRegistering:u.isPending,logout:d.mutate}}const ps=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:ct("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));ps.displayName="Card";const Fs=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:ct("flex flex-col space-y-1.5 p-6",t),...e}));Fs.displayName="CardHeader";const Us=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:ct("text-2xl font-semibold leading-none tracking-tight",t),...e}));Us.displayName="CardTitle";const m_=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:ct("text-sm text-muted-foreground",t),...e}));m_.displayName="CardDescription";const gs=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:ct("p-6 pt-0",t),...e}));gs.displayName="CardContent";const wR=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:ct("flex items-center p-6 pt-0",t),...e}));wR.displayName="CardFooter";function bR(){return p.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:p.jsx(ps,{className:"w-full max-w-md mx-4",children:p.jsxs(gs,{className:"pt-6",children:[p.jsxs("div",{className:"flex mb-4 gap-2",children:[p.jsx(pC,{className:"h-8 w-8 text-red-500"}),p.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),p.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const xR=gg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),lt=b.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...i},a)=>{const l=n?Tb:"button";return p.jsx(l,{className:ct(xR({variant:e,size:r,className:t})),ref:a,...i})});lt.displayName="Button";const hs=b.forwardRef(({className:t,type:e,...r},n)=>p.jsx("input",{type:e,className:ct("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));hs.displayName="Input";var ec=t=>t.type==="checkbox",Xi=t=>t instanceof Date,Gr=t=>t==null;const v_=t=>typeof t=="object";var nr=t=>!Gr(t)&&!Array.isArray(t)&&v_(t)&&!Xi(t),y_=t=>nr(t)&&t.target?ec(t.target)?t.target.checked:t.target.value:t,_R=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,w_=(t,e)=>t.has(_R(e)),SR=t=>{const e=t.constructor&&t.constructor.prototype;return nr(e)&&e.hasOwnProperty("isPrototypeOf")},Ng=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Dr(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Ng&&(t instanceof Blob||n))&&(r||nr(t)))if(e=r?[]:{},!r&&!SR(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Dr(t[i]));else return t;return e}var bd=t=>Array.isArray(t)?t.filter(Boolean):[],rr=t=>t===void 0,be=(t,e,r)=>{if(!e||!nr(t))return r;const n=bd(e.split(/[,[\].]+?/)).reduce((i,a)=>Gr(i)?i:i[a],t);return rr(n)||n===t?rr(t[e])?r:t[e]:n},wn=t=>typeof t=="boolean",jg=t=>/^\w*$/.test(t),b_=t=>bd(t.replace(/["|']|\]/g,"").split(/\.|\[/)),St=(t,e,r)=>{let n=-1;const i=jg(e)?[e]:b_(e),a=i.length,l=a-1;for(;++n<a;){const u=i[n];let d=r;if(n!==l){const h=t[u];d=nr(h)||Array.isArray(h)?h:isNaN(+i[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=d,t=t[u]}};const Hu={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ts={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Is={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},x_=tt.createContext(null),xd=()=>tt.useContext(x_),kR=t=>{const{children:e,...r}=t;return tt.createElement(x_.Provider,{value:r},e)};var __=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const l=a;return e._proxyFormState[l]!==ts.all&&(e._proxyFormState[l]=!n||ts.all),r&&(r[l]=!0),t[l]}});return i};function ER(t){const e=xd(),{control:r=e.control,disabled:n,name:i,exact:a}=t||{},[l,u]=tt.useState(r._formState),d=tt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=tt.useRef(i);return h.current=i,tt.useEffect(()=>r._subscribe({name:h.current,formState:d.current,exact:a,callback:g=>{!n&&u({...r._formState,...g})}}),[r,n,a]),tt.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),tt.useMemo(()=>__(l,r,d.current,!1),[l,r])}var ms=t=>typeof t=="string",S_=(t,e,r,n,i)=>ms(t)?(n&&e.watch.add(t),be(r,t,i)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),be(r,a))):(n&&(e.watchAll=!0),r);function TR(t){const e=xd(),{control:r=e.control,name:n,defaultValue:i,disabled:a,exact:l}=t||{},u=tt.useRef(n),d=tt.useRef(i);u.current=n,tt.useEffect(()=>r._subscribe({name:u.current,formState:{values:!0},exact:l,callback:v=>!a&&g(S_(u.current,r._names,v.values||r._formValues,!1,d.current))}),[r,a,l]);const[h,g]=tt.useState(r._getWatch(n,i));return tt.useEffect(()=>r._removeUnmounted()),h}function CR(t){const e=xd(),{name:r,disabled:n,control:i=e.control,shouldUnregister:a}=t,l=w_(i._names.array,r),u=TR({control:i,name:r,defaultValue:be(i._formValues,r,be(i._defaultValues,r,t.defaultValue)),exact:!0}),d=ER({control:i,name:r,exact:!0}),h=tt.useRef(t),g=tt.useRef(i.register(r,{...t.rules,value:u,...wn(t.disabled)?{disabled:t.disabled}:{}})),v=tt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!be(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!be(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!be(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!be(d.validatingFields,r)},error:{enumerable:!0,get:()=>be(d.errors,r)}}),[d,r]),y=tt.useCallback(E=>g.current.onChange({target:{value:y_(E),name:r},type:Hu.CHANGE}),[r]),x=tt.useCallback(()=>g.current.onBlur({target:{value:be(i._formValues,r),name:r},type:Hu.BLUR}),[r,i._formValues]),S=tt.useCallback(E=>{const C=be(i._fields,r);C&&E&&(C._f.ref={focus:()=>E.focus(),select:()=>E.select(),setCustomValidity:T=>E.setCustomValidity(T),reportValidity:()=>E.reportValidity()})},[i._fields,r]),_=tt.useMemo(()=>({name:r,value:u,...wn(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:y,onBlur:x,ref:S}),[r,n,d.disabled,y,x,S,u]);return tt.useEffect(()=>{const E=i._options.shouldUnregister||a;i.register(r,{...h.current.rules,...wn(h.current.disabled)?{disabled:h.current.disabled}:{}});const C=(T,O)=>{const R=be(i._fields,T);R&&R._f&&(R._f.mount=O)};if(C(r,!0),E){const T=Dr(be(i._options.defaultValues,r));St(i._defaultValues,r,T),rr(be(i._formValues,r))&&St(i._formValues,r,T)}return!l&&i.register(r),()=>{(l?E&&!i._state.action:E)?i.unregister(r):C(r,!1)}},[r,i,l,a]),tt.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),tt.useMemo(()=>({field:_,formState:d,fieldState:v}),[_,d,v])}const OR=t=>t.render(CR(t));var k_=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},yl=t=>Array.isArray(t)?t:[t],j0=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},Pp=t=>Gr(t)||!v_(t);function bi(t,e){if(Pp(t)||Pp(e))return t===e;if(Xi(t)&&Xi(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r){const a=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const l=e[i];if(Xi(a)&&Xi(l)||nr(a)&&nr(l)||Array.isArray(a)&&Array.isArray(l)?!bi(a,l):a!==l)return!1}}return!0}var Kr=t=>nr(t)&&!Object.keys(t).length,Rg=t=>t.type==="file",rs=t=>typeof t=="function",Ku=t=>{if(!Ng)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},E_=t=>t.type==="select-multiple",Ag=t=>t.type==="radio",PR=t=>Ag(t)||ec(t),Ih=t=>Ku(t)&&t.isConnected;function NR(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=rr(t)?n++:t[e[n++]];return t}function jR(t){for(const e in t)if(t.hasOwnProperty(e)&&!rr(t[e]))return!1;return!0}function hr(t,e){const r=Array.isArray(e)?e:jg(e)?[e]:b_(e),n=r.length===1?t:NR(t,r),i=r.length-1,a=r[i];return n&&delete n[a],i!==0&&(nr(n)&&Kr(n)||Array.isArray(n)&&jR(n))&&hr(t,r.slice(0,-1)),t}var T_=t=>{for(const e in t)if(rs(t[e]))return!0;return!1};function Gu(t,e={}){const r=Array.isArray(t);if(nr(t)||r)for(const n in t)Array.isArray(t[n])||nr(t[n])&&!T_(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Gu(t[n],e[n])):Gr(t[n])||(e[n]=!0);return e}function C_(t,e,r){const n=Array.isArray(t);if(nr(t)||n)for(const i in t)Array.isArray(t[i])||nr(t[i])&&!T_(t[i])?rr(e)||Pp(r[i])?r[i]=Array.isArray(t[i])?Gu(t[i],[]):{...Gu(t[i])}:C_(t[i],Gr(e)?{}:e[i],r[i]):r[i]=!bi(t[i],e[i]);return r}var nl=(t,e)=>C_(t,e,Gu(e));const R0={value:!1,isValid:!1},A0={value:!0,isValid:!0};var O_=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!rr(t[0].attributes.value)?rr(t[0].value)||t[0].value===""?A0:{value:t[0].value,isValid:!0}:A0:R0}return R0},P_=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>rr(t)?t:e?t===""?NaN:t&&+t:r&&ms(t)?new Date(t):n?n(t):t;const I0={isValid:!1,value:null};var N_=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,I0):I0;function D0(t){const e=t.ref;return Rg(e)?e.files:Ag(e)?N_(t.refs).value:E_(e)?[...e.selectedOptions].map(({value:r})=>r):ec(e)?O_(t.refs).value:P_(rr(e.value)?t.ref.value:e.value,t)}var RR=(t,e,r,n)=>{const i={};for(const a of t){const l=be(e,a);l&&St(i,a,l._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Qu=t=>t instanceof RegExp,sl=t=>rr(t)?t:Qu(t)?t.source:nr(t)?Qu(t.value)?t.value.source:t.value:t,L0=t=>({isOnSubmit:!t||t===ts.onSubmit,isOnBlur:t===ts.onBlur,isOnChange:t===ts.onChange,isOnAll:t===ts.all,isOnTouch:t===ts.onTouched});const M0="AsyncFunction";var AR=t=>!!t&&!!t.validate&&!!(rs(t.validate)&&t.validate.constructor.name===M0||nr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===M0)),IR=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),$0=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const wl=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const a=be(t,i);if(a){const{_f:l,...u}=a;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],i)&&!n)return!0;if(l.ref&&e(l.ref,l.name)&&!n)return!0;if(wl(u,e))break}else if(nr(u)&&wl(u,e))break}}};function F0(t,e,r){const n=be(t,r);if(n||jg(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const a=i.join("."),l=be(e,a),u=be(t,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(u&&u.type)return{name:a,error:u};i.pop()}return{name:r}}var DR=(t,e,r,n)=>{r(t);const{name:i,...a}=t;return Kr(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(l=>e[l]===(!n||ts.all))},LR=(t,e,r)=>!t||!e||t===e||yl(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),MR=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,$R=(t,e)=>!bd(be(t,e)).length&&hr(t,e),FR=(t,e,r)=>{const n=yl(be(t,r));return St(n,"root",e[r]),St(t,r,n),t},ku=t=>ms(t);function U0(t,e,r="validate"){if(ku(t)||Array.isArray(t)&&t.every(ku)||wn(t)&&!t)return{type:r,message:ku(t)?t:"",ref:e}}var Bo=t=>nr(t)&&!Qu(t)?t:{value:t,message:""},B0=async(t,e,r,n,i,a)=>{const{ref:l,refs:u,required:d,maxLength:h,minLength:g,min:v,max:y,pattern:x,validate:S,name:_,valueAsNumber:E,mount:C}=t._f,T=be(r,_);if(!C||e.has(_))return{};const O=u?u[0]:l,R=Y=>{i&&O.reportValidity&&(O.setCustomValidity(wn(Y)?"":Y||""),O.reportValidity())},F={},B=Ag(l),M=ec(l),X=B||M,V=(E||Rg(l))&&rr(l.value)&&rr(T)||Ku(l)&&l.value===""||T===""||Array.isArray(T)&&!T.length,W=k_.bind(null,_,n,F),te=(Y,re,Z,Te=Is.maxLength,de=Is.minLength)=>{const ke=Y?re:Z;F[_]={type:Y?Te:de,message:ke,ref:l,...W(Y?Te:de,ke)}};if(a?!Array.isArray(T)||!T.length:d&&(!X&&(V||Gr(T))||wn(T)&&!T||M&&!O_(u).isValid||B&&!N_(u).isValid)){const{value:Y,message:re}=ku(d)?{value:!!d,message:d}:Bo(d);if(Y&&(F[_]={type:Is.required,message:re,ref:O,...W(Is.required,re)},!n))return R(re),F}if(!V&&(!Gr(v)||!Gr(y))){let Y,re;const Z=Bo(y),Te=Bo(v);if(!Gr(T)&&!isNaN(T)){const de=l.valueAsNumber||T&&+T;Gr(Z.value)||(Y=de>Z.value),Gr(Te.value)||(re=de<Te.value)}else{const de=l.valueAsDate||new Date(T),ke=ce=>new Date(new Date().toDateString()+" "+ce),H=l.type=="time",le=l.type=="week";ms(Z.value)&&T&&(Y=H?ke(T)>ke(Z.value):le?T>Z.value:de>new Date(Z.value)),ms(Te.value)&&T&&(re=H?ke(T)<ke(Te.value):le?T<Te.value:de<new Date(Te.value))}if((Y||re)&&(te(!!Y,Z.message,Te.message,Is.max,Is.min),!n))return R(F[_].message),F}if((h||g)&&!V&&(ms(T)||a&&Array.isArray(T))){const Y=Bo(h),re=Bo(g),Z=!Gr(Y.value)&&T.length>+Y.value,Te=!Gr(re.value)&&T.length<+re.value;if((Z||Te)&&(te(Z,Y.message,re.message),!n))return R(F[_].message),F}if(x&&!V&&ms(T)){const{value:Y,message:re}=Bo(x);if(Qu(Y)&&!T.match(Y)&&(F[_]={type:Is.pattern,message:re,ref:l,...W(Is.pattern,re)},!n))return R(re),F}if(S){if(rs(S)){const Y=await S(T,r),re=U0(Y,O);if(re&&(F[_]={...re,...W(Is.validate,re.message)},!n))return R(re.message),F}else if(nr(S)){let Y={};for(const re in S){if(!Kr(Y)&&!n)break;const Z=U0(await S[re](T,r),O,re);Z&&(Y={...Z,...W(re,Z.message)},R(Z.message),n&&(F[_]=Y))}if(!Kr(Y)&&(F[_]={ref:O,...Y},!n))return F}}return R(!0),F};const UR={mode:ts.onSubmit,reValidateMode:ts.onChange,shouldFocusError:!0};function BR(t={}){let e={...UR,...t},r={submitCount:0,isDirty:!1,isLoading:rs(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let i=nr(e.defaultValues)||nr(e.values)?Dr(e.values||e.defaultValues)||{}:{},a=e.shouldUnregister?{}:Dr(i),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...g};const y={array:j0(),state:j0()},x=L0(e.mode),S=L0(e.reValidateMode),_=e.criteriaMode===ts.all,E=N=>$=>{clearTimeout(h),h=setTimeout(N,$)},C=async N=>{if(!e.disabled&&(g.isValid||v.isValid||N)){const $=e.resolver?Kr((await V()).errors):await te(n,!0);$!==r.isValid&&y.state.next({isValid:$})}},T=(N,$)=>{!e.disabled&&(g.isValidating||g.validatingFields||v.isValidating||v.validatingFields)&&((N||Array.from(u.mount)).forEach(Q=>{Q&&($?St(r.validatingFields,Q,$):hr(r.validatingFields,Q))}),y.state.next({validatingFields:r.validatingFields,isValidating:!Kr(r.validatingFields)}))},O=(N,$=[],Q,we,me=!0,ae=!0)=>{if(we&&Q&&!e.disabled){if(l.action=!0,ae&&Array.isArray(be(n,N))){const xe=Q(be(n,N),we.argA,we.argB);me&&St(n,N,xe)}if(ae&&Array.isArray(be(r.errors,N))){const xe=Q(be(r.errors,N),we.argA,we.argB);me&&St(r.errors,N,xe),$R(r.errors,N)}if((g.touchedFields||v.touchedFields)&&ae&&Array.isArray(be(r.touchedFields,N))){const xe=Q(be(r.touchedFields,N),we.argA,we.argB);me&&St(r.touchedFields,N,xe)}(g.dirtyFields||v.dirtyFields)&&(r.dirtyFields=nl(i,a)),y.state.next({name:N,isDirty:re(N,$),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else St(a,N,$)},R=(N,$)=>{St(r.errors,N,$),y.state.next({errors:r.errors})},F=N=>{r.errors=N,y.state.next({errors:r.errors,isValid:!1})},B=(N,$,Q,we)=>{const me=be(n,N);if(me){const ae=be(a,N,rr(Q)?be(i,N):Q);rr(ae)||we&&we.defaultChecked||$?St(a,N,$?ae:D0(me._f)):de(N,ae),l.mount&&C()}},M=(N,$,Q,we,me)=>{let ae=!1,xe=!1;const Ze={name:N};if(!e.disabled){if(!Q||we){(g.isDirty||v.isDirty)&&(xe=r.isDirty,r.isDirty=Ze.isDirty=re(),ae=xe!==Ze.isDirty);const mt=bi(be(i,N),$);xe=!!be(r.dirtyFields,N),mt?hr(r.dirtyFields,N):St(r.dirtyFields,N,!0),Ze.dirtyFields=r.dirtyFields,ae=ae||(g.dirtyFields||v.dirtyFields)&&xe!==!mt}if(Q){const mt=be(r.touchedFields,N);mt||(St(r.touchedFields,N,Q),Ze.touchedFields=r.touchedFields,ae=ae||(g.touchedFields||v.touchedFields)&&mt!==Q)}ae&&me&&y.state.next(Ze)}return ae?Ze:{}},X=(N,$,Q,we)=>{const me=be(r.errors,N),ae=(g.isValid||v.isValid)&&wn($)&&r.isValid!==$;if(e.delayError&&Q?(d=E(()=>R(N,Q)),d(e.delayError)):(clearTimeout(h),d=null,Q?St(r.errors,N,Q):hr(r.errors,N)),(Q?!bi(me,Q):me)||!Kr(we)||ae){const xe={...we,...ae&&wn($)?{isValid:$}:{},errors:r.errors,name:N};r={...r,...xe},y.state.next(xe)}},V=async N=>{T(N,!0);const $=await e.resolver(a,e.context,RR(N||u.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return T(N),$},W=async N=>{const{errors:$}=await V(N);if(N)for(const Q of N){const we=be($,Q);we?St(r.errors,Q,we):hr(r.errors,Q)}else r.errors=$;return $},te=async(N,$,Q={valid:!0})=>{for(const we in N){const me=N[we];if(me){const{_f:ae,...xe}=me;if(ae){const Ze=u.array.has(ae.name),mt=me._f&&AR(me._f);mt&&g.validatingFields&&T([we],!0);const xt=await B0(me,u.disabled,a,_,e.shouldUseNativeValidation&&!$,Ze);if(mt&&g.validatingFields&&T([we]),xt[ae.name]&&(Q.valid=!1,$))break;!$&&(be(xt,ae.name)?Ze?FR(r.errors,xt,ae.name):St(r.errors,ae.name,xt[ae.name]):hr(r.errors,ae.name))}!Kr(xe)&&await te(xe,$,Q)}}return Q.valid},Y=()=>{for(const N of u.unMount){const $=be(n,N);$&&($._f.refs?$._f.refs.every(Q=>!Ih(Q)):!Ih($._f.ref))&&Be(N)}u.unMount=new Set},re=(N,$)=>!e.disabled&&(N&&$&&St(a,N,$),!bi(J(),i)),Z=(N,$,Q)=>S_(N,u,{...l.mount?a:rr($)?i:ms(N)?{[N]:$}:$},Q,$),Te=N=>bd(be(l.mount?a:i,N,e.shouldUnregister?be(i,N,[]):[])),de=(N,$,Q={})=>{const we=be(n,N);let me=$;if(we){const ae=we._f;ae&&(!ae.disabled&&St(a,N,P_($,ae)),me=Ku(ae.ref)&&Gr($)?"":$,E_(ae.ref)?[...ae.ref.options].forEach(xe=>xe.selected=me.includes(xe.value)):ae.refs?ec(ae.ref)?ae.refs.length>1?ae.refs.forEach(xe=>(!xe.defaultChecked||!xe.disabled)&&(xe.checked=Array.isArray(me)?!!me.find(Ze=>Ze===xe.value):me===xe.value)):ae.refs[0]&&(ae.refs[0].checked=!!me):ae.refs.forEach(xe=>xe.checked=xe.value===me):Rg(ae.ref)?ae.ref.value="":(ae.ref.value=me,ae.ref.type||y.state.next({name:N,values:Dr(a)})))}(Q.shouldDirty||Q.shouldTouch)&&M(N,me,Q.shouldTouch,Q.shouldDirty,!0),Q.shouldValidate&&A(N)},ke=(N,$,Q)=>{for(const we in $){const me=$[we],ae=`${N}.${we}`,xe=be(n,ae);(u.array.has(N)||nr(me)||xe&&!xe._f)&&!Xi(me)?ke(ae,me,Q):de(ae,me,Q)}},H=(N,$,Q={})=>{const we=be(n,N),me=u.array.has(N),ae=Dr($);St(a,N,ae),me?(y.array.next({name:N,values:Dr(a)}),(g.isDirty||g.dirtyFields||v.isDirty||v.dirtyFields)&&Q.shouldDirty&&y.state.next({name:N,dirtyFields:nl(i,a),isDirty:re(N,ae)})):we&&!we._f&&!Gr(ae)?ke(N,ae,Q):de(N,ae,Q),$0(N,u)&&y.state.next({...r}),y.state.next({name:l.mount?N:void 0,values:Dr(a)})},le=async N=>{l.mount=!0;const $=N.target;let Q=$.name,we=!0;const me=be(n,Q),ae=xe=>{we=Number.isNaN(xe)||Xi(xe)&&isNaN(xe.getTime())||bi(xe,be(a,Q,xe))};if(me){let xe,Ze;const mt=$.type?D0(me._f):y_(N),xt=N.type===Hu.BLUR||N.type===Hu.FOCUS_OUT,Un=!IR(me._f)&&!e.resolver&&!be(r.errors,Q)&&!me._f.deps||MR(xt,be(r.touchedFields,Q),r.isSubmitted,S,x),Cn=$0(Q,u,xt);St(a,Q,mt),xt?(me._f.onBlur&&me._f.onBlur(N),d&&d(0)):me._f.onChange&&me._f.onChange(N);const tn=M(Q,mt,xt),yr=!Kr(tn)||Cn;if(!xt&&y.state.next({name:Q,type:N.type,values:Dr(a)}),Un)return(g.isValid||v.isValid)&&(e.mode==="onBlur"?xt&&C():xt||C()),yr&&y.state.next({name:Q,...Cn?{}:tn});if(!xt&&Cn&&y.state.next({...r}),e.resolver){const{errors:wr}=await V([Q]);if(ae(mt),we){const rn=F0(r.errors,n,Q),Cr=F0(wr,n,rn.name||Q);xe=Cr.error,Q=Cr.name,Ze=Kr(wr)}}else T([Q],!0),xe=(await B0(me,u.disabled,a,_,e.shouldUseNativeValidation))[Q],T([Q]),ae(mt),we&&(xe?Ze=!1:(g.isValid||v.isValid)&&(Ze=await te(n,!0)));we&&(me._f.deps&&A(me._f.deps),X(Q,Ze,xe,tn))}},ce=(N,$)=>{if(be(r.errors,$)&&N.focus)return N.focus(),1},A=async(N,$={})=>{let Q,we;const me=yl(N);if(e.resolver){const ae=await W(rr(N)?N:me);Q=Kr(ae),we=N?!me.some(xe=>be(ae,xe)):Q}else N?(we=(await Promise.all(me.map(async ae=>{const xe=be(n,ae);return await te(xe&&xe._f?{[ae]:xe}:xe)}))).every(Boolean),!(!we&&!r.isValid)&&C()):we=Q=await te(n);return y.state.next({...!ms(N)||(g.isValid||v.isValid)&&Q!==r.isValid?{}:{name:N},...e.resolver||!N?{isValid:Q}:{},errors:r.errors}),$.shouldFocus&&!we&&wl(n,ce,N?me:u.mount),we},J=N=>{const $={...l.mount?a:i};return rr(N)?$:ms(N)?be($,N):N.map(Q=>be($,Q))},Ne=(N,$)=>({invalid:!!be(($||r).errors,N),isDirty:!!be(($||r).dirtyFields,N),error:be(($||r).errors,N),isValidating:!!be(r.validatingFields,N),isTouched:!!be(($||r).touchedFields,N)}),ye=N=>{N&&yl(N).forEach($=>hr(r.errors,$)),y.state.next({errors:N?r.errors:{}})},$e=(N,$,Q)=>{const we=(be(n,N,{_f:{}})._f||{}).ref,me=be(r.errors,N)||{},{ref:ae,message:xe,type:Ze,...mt}=me;St(r.errors,N,{...mt,...$,ref:we}),y.state.next({name:N,errors:r.errors,isValid:!1}),Q&&Q.shouldFocus&&we&&we.focus&&we.focus()},We=(N,$)=>rs(N)?y.state.subscribe({next:Q=>N(Z(void 0,$),Q)}):Z(N,$,!0),Ke=N=>y.state.subscribe({next:$=>{LR(N.name,$.name,N.exact)&&DR($,N.formState||g,un,N.reRenderRoot)&&N.callback({values:{...a},...r,...$})}}).unsubscribe,Xe=N=>(l.mount=!0,v={...v,...N.formState},Ke({...N,formState:v})),Be=(N,$={})=>{for(const Q of N?yl(N):u.mount)u.mount.delete(Q),u.array.delete(Q),$.keepValue||(hr(n,Q),hr(a,Q)),!$.keepError&&hr(r.errors,Q),!$.keepDirty&&hr(r.dirtyFields,Q),!$.keepTouched&&hr(r.touchedFields,Q),!$.keepIsValidating&&hr(r.validatingFields,Q),!e.shouldUnregister&&!$.keepDefaultValue&&hr(i,Q);y.state.next({values:Dr(a)}),y.state.next({...r,...$.keepDirty?{isDirty:re()}:{}}),!$.keepIsValid&&C()},Nt=({disabled:N,name:$})=>{(wn(N)&&l.mount||N||u.disabled.has($))&&(N?u.disabled.add($):u.disabled.delete($))},Tr=(N,$={})=>{let Q=be(n,N);const we=wn($.disabled)||wn(e.disabled);return St(n,N,{...Q||{},_f:{...Q&&Q._f?Q._f:{ref:{name:N}},name:N,mount:!0,...$}}),u.mount.add(N),Q?Nt({disabled:wn($.disabled)?$.disabled:e.disabled,name:N}):B(N,!0,$.value),{...we?{disabled:$.disabled||e.disabled}:{},...e.progressive?{required:!!$.required,min:sl($.min),max:sl($.max),minLength:sl($.minLength),maxLength:sl($.maxLength),pattern:sl($.pattern)}:{},name:N,onChange:le,onBlur:le,ref:me=>{if(me){Tr(N,$),Q=be(n,N);const ae=rr(me.value)&&me.querySelectorAll&&me.querySelectorAll("input,select,textarea")[0]||me,xe=PR(ae),Ze=Q._f.refs||[];if(xe?Ze.find(mt=>mt===ae):ae===Q._f.ref)return;St(n,N,{_f:{...Q._f,...xe?{refs:[...Ze.filter(Ih),ae,...Array.isArray(be(i,N))?[{}]:[]],ref:{type:ae.type,name:N}}:{ref:ae}}}),B(N,!1,void 0,ae)}else Q=be(n,N,{}),Q._f&&(Q._f.mount=!1),(e.shouldUnregister||$.shouldUnregister)&&!(w_(u.array,N)&&l.action)&&u.unMount.add(N)}}},Zr=()=>e.shouldFocusError&&wl(n,ce,u.mount),Ft=N=>{wn(N)&&(y.state.next({disabled:N}),wl(n,($,Q)=>{const we=be(n,Q);we&&($.disabled=we._f.disabled||N,Array.isArray(we._f.refs)&&we._f.refs.forEach(me=>{me.disabled=we._f.disabled||N}))},0,!1))},sr=(N,$)=>async Q=>{let we;Q&&(Q.preventDefault&&Q.preventDefault(),Q.persist&&Q.persist());let me=Dr(a);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:ae,values:xe}=await V();r.errors=ae,me=xe}else await te(n);if(u.disabled.size)for(const ae of u.disabled)St(me,ae,void 0);if(hr(r.errors,"root"),Kr(r.errors)){y.state.next({errors:{}});try{await N(me,Q)}catch(ae){we=ae}}else $&&await $({...r.errors},Q),Zr(),setTimeout(Zr);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Kr(r.errors)&&!we,submitCount:r.submitCount+1,errors:r.errors}),we)throw we},ht=(N,$={})=>{be(n,N)&&(rr($.defaultValue)?H(N,Dr(be(i,N))):(H(N,$.defaultValue),St(i,N,Dr($.defaultValue))),$.keepTouched||hr(r.touchedFields,N),$.keepDirty||(hr(r.dirtyFields,N),r.isDirty=$.defaultValue?re(N,Dr(be(i,N))):re()),$.keepError||(hr(r.errors,N),g.isValid&&C()),y.state.next({...r}))},Jr=(N,$={})=>{const Q=N?Dr(N):i,we=Dr(Q),me=Kr(N),ae=me?i:we;if($.keepDefaultValues||(i=Q),!$.keepValues){if($.keepDirtyValues){const xe=new Set([...u.mount,...Object.keys(nl(i,a))]);for(const Ze of Array.from(xe))be(r.dirtyFields,Ze)?St(ae,Ze,be(a,Ze)):H(Ze,be(ae,Ze))}else{if(Ng&&rr(N))for(const xe of u.mount){const Ze=be(n,xe);if(Ze&&Ze._f){const mt=Array.isArray(Ze._f.refs)?Ze._f.refs[0]:Ze._f.ref;if(Ku(mt)){const xt=mt.closest("form");if(xt){xt.reset();break}}}}for(const xe of u.mount)H(xe,be(ae,xe))}a=Dr(ae),y.array.next({values:{...ae}}),y.state.next({values:{...ae}})}u={mount:$.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!g.isValid||!!$.keepIsValid||!!$.keepDirtyValues,l.watch=!!e.shouldUnregister,y.state.next({submitCount:$.keepSubmitCount?r.submitCount:0,isDirty:me?!1:$.keepDirty?r.isDirty:!!($.keepDefaultValues&&!bi(N,i)),isSubmitted:$.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:me?{}:$.keepDirtyValues?$.keepDefaultValues&&a?nl(i,a):r.dirtyFields:$.keepDefaultValues&&N?nl(i,N):$.keepDirty?r.dirtyFields:{},touchedFields:$.keepTouched?r.touchedFields:{},errors:$.keepErrors?r.errors:{},isSubmitSuccessful:$.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Xr=(N,$)=>Jr(rs(N)?N(a):N,$),Tn=(N,$={})=>{const Q=be(n,N),we=Q&&Q._f;if(we){const me=we.refs?we.refs[0]:we.ref;me.focus&&(me.focus(),$.shouldSelect&&rs(me.select)&&me.select())}},un=N=>{r={...r,...N}},pe={control:{register:Tr,unregister:Be,getFieldState:Ne,handleSubmit:sr,setError:$e,_subscribe:Ke,_runSchema:V,_getWatch:Z,_getDirty:re,_setValid:C,_setFieldArray:O,_setDisabledField:Nt,_setErrors:F,_getFieldArray:Te,_reset:Jr,_resetDefaultValues:()=>rs(e.defaultValues)&&e.defaultValues().then(N=>{Xr(N,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:Y,_disableForm:Ft,_subjects:y,_proxyFormState:g,get _fields(){return n},get _formValues(){return a},get _state(){return l},set _state(N){l=N},get _defaultValues(){return i},get _names(){return u},set _names(N){u=N},get _formState(){return r},get _options(){return e},set _options(N){e={...e,...N}}},subscribe:Xe,trigger:A,register:Tr,handleSubmit:sr,watch:We,setValue:H,getValues:J,reset:Xr,resetField:ht,clearErrors:ye,unregister:Be,setError:$e,setFocus:Tn,getFieldState:Ne};return{...pe,formControl:pe}}function zR(t={}){const e=tt.useRef(void 0),r=tt.useRef(void 0),[n,i]=tt.useState({isDirty:!1,isValidating:!1,isLoading:rs(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:rs(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:BR(t),formState:n},t.formControl&&t.defaultValues&&!rs(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const a=e.current.control;return a._options=t,tt.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0}),[a]),tt.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),tt.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==n.isDirty&&a._subjects.state.next({isDirty:l})}},[a,n.isDirty]),tt.useEffect(()=>{t.values&&!bi(t.values,r.current)?(a._reset(t.values,a._options.resetOptions),r.current=t.values,i(l=>({...l}))):a._resetDefaultValues()},[t.values,a]),tt.useEffect(()=>{t.errors&&!Kr(t.errors)&&a._setErrors(t.errors)},[t.errors,a]),tt.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),tt.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=__(n,a),e.current}const z0=(t,e,r)=>{if(t&&"reportValidity"in t){const n=be(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},j_=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?z0(n.ref,r,t):n.refs&&n.refs.forEach(i=>z0(i,r,t))}},VR=(t,e)=>{e.shouldUseNativeValidation&&j_(t,e);const r={};for(const n in t){const i=be(e.fields,n),a=Object.assign(t[n]||{},{ref:i&&i.ref});if(qR(e.names||Object.keys(t),n)){const l=Object.assign({},be(r,n));St(l,"root",a),St(r,n,l)}else St(r,n,a)}return r},qR=(t,e)=>t.some(r=>r.startsWith(e+"."));var WR=function(t,e){for(var r={};t.length;){var n=t[0],i=n.code,a=n.message,l=n.path.join(".");if(!r[l])if("unionErrors"in n){var u=n.unionErrors[0].errors[0];r[l]={message:u.message,type:u.code}}else r[l]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(g){return g.errors.forEach(function(v){return t.push(v)})}),e){var d=r[l].types,h=d&&d[n.code];r[l]=k_(l,e,r,i,h?[].concat(h,n.message):n.message)}t.shift()}return r},HR=function(t,e,r){return r===void 0&&(r={}),function(n,i,a){try{return Promise.resolve((function(l,u){try{var d=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(h){return a.shouldUseNativeValidation&&j_({},a),{errors:{},values:r.raw?n:h}})}catch(h){return u(h)}return d&&d.then?d.then(void 0,u):d})(0,function(l){if((function(u){return Array.isArray(u?.errors)})(l))return{values:{},errors:VR(WR(l.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw l}))}catch(l){return Promise.reject(l)}}},KR="Label",R_=b.forwardRef((t,e)=>p.jsx(Tt.label,{...t,ref:e,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));R_.displayName=KR;var A_=R_;const GR=gg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),I_=b.forwardRef(({className:t,...e},r)=>p.jsx(A_,{ref:r,className:ct(GR(),t),...e}));I_.displayName=A_.displayName;const QR=kR,D_=b.createContext({}),V0=({...t})=>p.jsx(D_.Provider,{value:{name:t.name},children:p.jsx(OR,{...t})}),_d=()=>{const t=b.useContext(D_),e=b.useContext(L_),{getFieldState:r,formState:n}=xd(),i=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},L_=b.createContext({}),Np=b.forwardRef(({className:t,...e},r)=>{const n=b.useId();return p.jsx(L_.Provider,{value:{id:n},children:p.jsx("div",{ref:r,className:ct("space-y-2",t),...e})})});Np.displayName="FormItem";const jp=b.forwardRef(({className:t,...e},r)=>{const{error:n,formItemId:i}=_d();return p.jsx(I_,{ref:r,className:ct(n&&"text-destructive",t),htmlFor:i,...e})});jp.displayName="FormLabel";const Rp=b.forwardRef(({...t},e)=>{const{error:r,formItemId:n,formDescriptionId:i,formMessageId:a}=_d();return p.jsx(Tb,{ref:e,id:n,"aria-describedby":r?`${i} ${a}`:`${i}`,"aria-invalid":!!r,...t})});Rp.displayName="FormControl";const YR=b.forwardRef(({className:t,...e},r)=>{const{formDescriptionId:n}=_d();return p.jsx("p",{ref:r,id:n,className:ct("text-sm text-muted-foreground",t),...e})});YR.displayName="FormDescription";const Ap=b.forwardRef(({className:t,children:e,...r},n)=>{const{error:i,formMessageId:a}=_d(),l=i?String(i?.message??""):e;return l?p.jsx("p",{ref:n,id:a,className:ct("text-sm font-medium text-destructive",t),...r,children:l}):null});Ap.displayName="FormMessage";function ZR(){const[t,e]=b.useState(!0),[r,n]=b.useState(!1),[i,a]=b.useState(""),[l,u]=b.useState("request"),[d,h]=b.useState(""),[g,v]=b.useState(""),[y,x]=b.useState(!1),{user:S,login:_,register:E,isLoggingIn:C,isRegistering:T}=mo(),{toast:O}=go(),R=zR({resolver:HR(Op),defaultValues:{username:"",password:""}});if(S)return p.jsx(ub,{to:"/"});const F=W=>{t?_(W):E(W)},B=async W=>{if(W.preventDefault(),!i){O({title:"Li",description:"Vui lng nhp email ca bn",variant:"destructive"});return}try{x(!0);const te=await fetch(Qr+"/api/user/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})});if(!te.ok){const Y=await te.json().catch(()=>null);throw new Error(Y?.message||"Gi email t li mt khu tht bi")}O({title:" gi email",description:"Hy kim tra hp th  ly m t li mt khu."}),u("confirm")}catch(te){const Y=te instanceof Error?te.message:"C li xy ra, vui lng th li";O({title:"Li",description:Y,variant:"destructive"})}finally{x(!1)}},M=async W=>{if(W.preventDefault(),!i||!d||!g){O({title:"Thiu thng tin",description:"Vui lng nhp y  email, m v mt khu mi",variant:"destructive"});return}x(!0);try{const te=await fetch(Qr+"/api/user/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,code:d,newPassword:g})});if(!te.ok){const Y=await te.json().catch(()=>null);throw new Error(Y?.message||"t li mt khu tht bi")}O({title:"Thnh cng",description:"Mt khu mi  c cp nht, hy ng nhp li."}),n(!1),u("request"),a(""),h(""),v("")}catch(te){const Y=te instanceof Error?te.message:"C li xy ra, vui lng th li";O({title:"Li",description:Y,variant:"destructive"})}finally{x(!1)}},X=()=>{O({title:"ng nhp Google",description:"Tnh nng ng nhp Google s c tch hp ti y.",variant:"default"})},V=C||T;return r?p.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsx("div",{className:"w-full max-w-md z-10",children:p.jsxs("div",{className:"glass-card p-8 rounded-3xl animate-in zoom-in-95 duration-500",children:[p.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:l==="request"?"Qun mt khu":"Nhp m t li mt khu"}),p.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:l==="request"?"Nhp email  gn vi ti khon  nhn m t li mt khu.":"Kim tra email  ly m, sau  nhp m v mt khu mi bn di."}),l==="request"?p.jsxs("form",{onSubmit:B,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"Email"}),p.jsx(hs,{type:"email",placeholder:"ban@example.com",value:i,onChange:W=>a(W.target.value),className:"glass-input h-12 rounded-xl text-lg font-medium"})]}),p.jsx(lt,{type:"submit",className:"w-full h-12 rounded-xl text-lg font-bold btn-primary",disabled:y,children:y?p.jsx(_u,{className:"w-5 h-5 animate-spin"}):"Gi m v email"}),p.jsx(lt,{type:"button",variant:"ghost",onClick:()=>{n(!1),u("request")},className:"w-full text-slate-400 hover:text-white",children:"Quay li ng nhp"})]}):p.jsxs("form",{onSubmit:M,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"Email"}),p.jsx(hs,{type:"email",placeholder:"ban@example.com",value:i,onChange:W=>a(W.target.value),className:"glass-input h-11 rounded-xl text-base"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"M t li"}),p.jsx(hs,{placeholder:"Nhp m gm 6 s",value:d,onChange:W=>h(W.target.value),className:"glass-input h-11 rounded-xl text-base"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"Mt khu mi"}),p.jsx(hs,{type:"password",placeholder:"Mt khu mi",value:g,onChange:W=>v(W.target.value),className:"glass-input h-11 rounded-xl text-base"})]}),p.jsx(lt,{type:"submit",className:"w-full h-12 rounded-xl text-lg font-bold btn-primary",disabled:y,children:y?p.jsx(_u,{className:"w-5 h-5 animate-spin"}):"i mt khu"}),p.jsx(lt,{type:"button",variant:"ghost",onClick:()=>{u("request"),h(""),v("")},className:"w-full text-slate-400 hover:text-white",children:"Quay li bc gi m"})]})]})})]}):p.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsxs("div",{className:"w-full max-w-md z-10",children:[p.jsxs("div",{className:"text-center mb-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[p.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-2xl mx-auto flex items-center justify-center shadow-2xl shadow-indigo-900/40 rotate-12 mb-6",children:p.jsx(ud,{className:"w-8 h-8 text-white"})}),p.jsxs("h1",{className:"text-4xl md:text-5xl font-black italic tracking-tighter text-white drop-shadow-lg mb-1",children:["Chess",p.jsx("span",{className:"text-indigo-500",children:"Pro"})]}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-[0.2em] text-[10px]",children:"c vua ca ngi vit"})]}),p.jsxs("div",{className:"glass-card p-8 rounded-3xl animate-in zoom-in-95 duration-500",children:[p.jsxs("div",{className:"flex w-full mb-8 bg-slate-900/50 p-1 rounded-xl",children:[p.jsx("button",{onClick:()=>e(!0),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${t?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white"}`,children:"NG NHP"}),p.jsx("button",{onClick:()=>e(!1),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${t?"text-slate-400 hover:text-white":"bg-indigo-600 text-white shadow-lg"}`,children:"NG K"})]}),p.jsx(QR,{...R,children:p.jsxs("form",{onSubmit:R.handleSubmit(F),className:"space-y-4",children:[p.jsx(V0,{control:R.control,name:"username",render:({field:W})=>p.jsxs(Np,{children:[p.jsx(jp,{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"Tn ng nhp"}),p.jsx(Rp,{children:p.jsx(hs,{placeholder:"Kythu123",...W,className:"glass-input h-12 rounded-xl text-lg font-medium"})}),p.jsx(Ap,{})]})}),p.jsx(V0,{control:R.control,name:"password",render:({field:W})=>p.jsxs(Np,{children:[p.jsx(jp,{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"Mt khu"}),p.jsx(Rp,{children:p.jsx(hs,{type:"password",placeholder:"",...W,className:"glass-input h-12 rounded-xl text-lg font-medium"})}),p.jsx(Ap,{})]})}),t&&p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{type:"button",onClick:()=>n(!0),className:"text-xs text-indigo-400 hover:text-indigo-300 font-bold",children:"Qun mt khu?"})}),p.jsx(lt,{type:"submit",className:"w-full h-12 rounded-xl text-lg font-bold mt-6 btn-primary",disabled:V,children:V?p.jsx(_u,{className:"w-5 h-5 animate-spin"}):p.jsxs(p.Fragment,{children:[t?"Bt u chi":"To ti khon",p.jsx(ul,{className:"w-5 h-5 ml-2"})]})}),p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t border-slate-700"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-[#0f172a] px-2 text-slate-500",children:"Hoc tip tc vi"})})]}),p.jsxs(lt,{type:"button",variant:"outline",onClick:X,className:"w-full h-12 rounded-xl border-slate-700 bg-slate-800/50 hover:bg-slate-800 text-white font-bold",children:[p.jsx(gp,{className:"w-4 h-4 mr-2 text-red-500"}),"ng nhp bng Gmail"]})]})})]})]})]})}let M_=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function JR(){const{user:t,logout:e}=mo(),[,r]=po(),[n,i]=b.useState("");if(!t)return p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx(Uo,{href:"/auth",children:p.jsx(lt,{children:"ng nhp trc"})})});const a=()=>{const u=M_(6).toUpperCase();r(`/game/online/${u}`)},l=()=>{n.length>0&&r(`/game/online/${n.toUpperCase()}`)};return p.jsxs("div",{className:"min-h-screen bg-[#020617] text-white relative overflow-x-hidden",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12 md:py-20 flex flex-col items-center text-center",children:[p.jsxs("div",{className:"mb-12 animate-in fade-in slide-in-from-top-8 duration-700",children:[p.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-[2rem] mx-auto flex items-center justify-center shadow-2xl shadow-indigo-500/30 rotate-12 hover:rotate-6 transition-transform duration-300 mb-6",children:p.jsx(ud,{className:"w-10 h-10 text-white"})}),p.jsxs("h1",{className:"text-5xl md:text-7xl font-black italic tracking-tighter text-white drop-shadow-2xl mb-2",children:["Chess",p.jsx("span",{className:"text-indigo-500",children:"Pro"})]}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-[0.2em] text-xs md:text-sm",children:"c vua ca ngi vit"})]}),p.jsx("div",{className:"w-full max-w-sm mb-12",children:p.jsxs("div",{className:"glass-card p-2 rounded-full flex items-center justify-between pl-6 pr-2",children:[p.jsxs("span",{className:"font-bold text-slate-300",children:["Xin cho, ",t.username]}),p.jsx(lt,{variant:"ghost",size:"sm",onClick:()=>e(),className:"text-red-400 hover:text-red-300 hover:bg-red-950/30 rounded-full px-4",children:"ng xut"})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-4xl animate-in fade-in zoom-in-95 duration-700 delay-150",children:[p.jsxs("div",{className:"glass-card p-8 rounded-[2.5rem] flex flex-col items-center gap-6 group hover:border-indigo-500/30 transition-all duration-300",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-500/20 text-indigo-400 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx(ix,{className:"w-8 h-8"})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-black italic uppercase text-indigo-400 mb-1",children:"nh online"}),p.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"nh xp hng & giao hu"})]}),p.jsxs("div",{className:"w-full space-y-4",children:[p.jsx(Uo,{href:"/game/online/random",children:p.jsx(lt,{className:"w-full h-14 text-lg font-bold rounded-xl btn-primary mb-4",children:"Ghp trn nhanh"})}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t border-slate-700"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-[#0f172a] px-2 text-slate-500 font-bold",children:"Hoc chi vi bn b"})})]}),p.jsxs("div",{className:"flex gap-2 pt-2",children:[p.jsx(lt,{onClick:a,className:"flex-1 bg-slate-800 hover:bg-slate-700 text-indigo-400 border border-indigo-500/20 rounded-xl font-bold",children:"To phng"}),p.jsxs("div",{className:"flex-1 flex gap-2",children:[p.jsx("input",{value:n,onChange:u=>i(u.target.value),placeholder:"M PHNG",className:"glass-input w-full rounded-xl text-center font-bold tracking-widest uppercase text-sm"}),p.jsx(lt,{onClick:l,size:"icon",className:"bg-slate-800 hover:bg-slate-700 text-indigo-400 border border-indigo-500/20 rounded-xl font-bold shrink-0",children:p.jsx(ul,{className:"w-4 h-4"})})]})]})]})]}),p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs(Uo,{href:"/game/ai/new",className:"flex-1 glass-card p-6 rounded-[2.5rem] flex items-center gap-6 group hover:border-emerald-500/30 transition-all cursor-pointer",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-emerald-500/20 text-emerald-400 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx(CC,{className:"w-8 h-8"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h2",{className:"text-3xl font-black italic uppercase text-emerald-400 mb-1",children:"nh vi AI"}),p.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Stockfish 15"})]}),p.jsx(ul,{className:"ml-auto text-emerald-500/50 group-hover:translate-x-1 transition-transform"})]}),p.jsxs(Uo,{href:"/game/offline/local",className:"flex-1 glass-card p-6 rounded-[2.5rem] flex items-center gap-6 group hover:border-amber-500/30 transition-all cursor-pointer",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-amber-500/20 text-amber-400 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx(bC,{className:"w-8 h-8"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h2",{className:"text-3xl font-black italic uppercase text-amber-400 mb-1",children:"Chi trn cng my"}),p.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Chuyn lt & nh lun phin"})]}),p.jsx(ul,{className:"ml-auto text-amber-500/50 group-hover:translate-x-1 transition-transform"})]})]})]}),p.jsxs("div",{className:"mt-12 flex gap-4 w-full max-w-4xl",children:[p.jsxs(Uo,{href:"/social",className:"flex-1 glass-card px-8 py-4 rounded-2xl flex items-center justify-between border-indigo-500/10 cursor-pointer hover:bg-white/5 transition-colors group",children:[p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx(dd,{className:"w-5 h-5 text-yellow-500 group-hover:scale-110 transition-transform"}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:"Bng xp hng"}),p.jsx("div",{className:"text-sm font-bold text-white",children:"Xem cao th hng u"})]})]}),p.jsx(ul,{className:"text-slate-500 group-hover:translate-x-1 transition-transform"})]}),p.jsxs(Uo,{href:"/profile",className:"glass-card px-8 py-4 rounded-2xl flex items-center gap-6 border-indigo-500/10 cursor-pointer hover:bg-white/5 transition-colors group",children:[p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:"Elo ca bn"}),p.jsx("div",{className:"text-xl font-black text-white group-hover:text-indigo-400 transition-colors",children:t.rating??0})]}),p.jsx("div",{className:"h-8 w-px bg-white/10 mx-2"}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:"Vn  chi"}),p.jsx("div",{className:"text-xl font-black text-white group-hover:text-indigo-400 transition-colors",children:t.gamesPlayed||0})]})]})]})]})]})}function XR(t){return t!==null?{comment:t,variations:[]}:{variations:[]}}function eA(t,e,r,n,i){const a={move:t,variations:i};return e&&(a.suffix=e),r&&(a.nag=r),n!==null&&(a.comment=n),a}function tA(...t){const[e,...r]=t;let n=e;for(const i of r)i!==null&&(n.variations=[i,...i.variations],i.variations=[],n=i);return e}function rA(t,e){if(e.marker&&e.marker.comment){let r=e.root;for(;;){const n=r.variations[0];if(!n){r.comment=e.marker.comment;break}r=n}}return{headers:t,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function nA(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function pa(t,e,r,n){var i=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(i,pa.prototype),i.expected=e,i.found=r,i.location=n,i.name="SyntaxError",i}nA(pa,Error);function Dh(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,r+=r.repeat(e),t+r.slice(0,e))}pa.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var r=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){r=t[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,a=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,l=this.location.source+":"+a.line+":"+a.column;if(r){var u=this.location.end,d=Dh("",a.line.toString().length," "),h=r[i.line-1],g=i.line===u.line?u.column:h.length+1,v=g-i.column||1;e+=`
 --> `+l+`
`+d+` |
`+a.line+" | "+h+`
`+d+" | "+Dh("",i.column-1," ")+Dh("",v,"^")}else e+=`
 at `+l}return e};pa.buildMessage=function(t,e){var r={literal:function(h){return'"'+i(h.text)+'"'},class:function(h){var g=h.parts.map(function(v){return Array.isArray(v)?a(v[0])+"-"+a(v[1]):a(v)});return"["+(h.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(h){return h.description}};function n(h){return h.charCodeAt(0).toString(16).toUpperCase()}function i(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+n(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+n(g)})}function a(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+n(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+n(g)})}function l(h){return r[h.type](h)}function u(h){var g=h.map(l),v,y;if(g.sort(),g.length>0){for(v=1,y=1;v<g.length;v++)g[v-1]!==g[v]&&(g[y]=g[v],y++);g.length=y}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function d(h){return h?'"'+i(h)+'"':"end of input"}return"Expected "+u(t)+" but "+d(e)+" found."};function sA(t,e){e=e!==void 0?e:{};var r={},n=e.grammarSource,i={pgn:Gt},a=Gt,l="[",u='"',d="]",h=".",g="O-O-O",v="O-O",y="0-0-0",x="0-0",S="$",_="{",E="}",C=";",T="(",O=")",R="1-0",F="0-1",B="1/2-1/2",M="*",X=/^[a-zA-Z]/,V=/^[^"]/,W=/^[0-9]/,te=/^[.]/,Y=/^[a-zA-Z1-8\-=]/,re=/^[+#]/,Z=/^[!?]/,Te=/^[^}]/,de=/^[^\r\n]/,ke=/^[ \t\r\n]/,H=Se("tag pair"),le=_t("[",!1),ce=_t('"',!1),A=_t("]",!1),J=Se("tag name"),Ne=oe([["a","z"],["A","Z"]],!1,!1),ye=Se("tag value"),$e=oe(['"'],!0,!1),We=Se("move number"),Ke=oe([["0","9"]],!1,!1),Xe=_t(".",!1),Be=oe(["."],!1,!1),Nt=Se("standard algebraic notation"),Tr=_t("O-O-O",!1),Zr=_t("O-O",!1),Ft=_t("0-0-0",!1),sr=_t("0-0",!1),ht=oe([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Jr=oe(["+","#"],!1,!1),Xr=Se("suffix annotation"),Tn=oe(["!","?"],!1,!1),un=Se("NAG"),en=_t("$",!1),pe=Se("brace comment"),N=_t("{",!1),$=oe(["}"],!0,!1),Q=_t("}",!1),we=Se("rest of line comment"),me=_t(";",!1),ae=oe(["\r",`
`],!0,!1),xe=Se("variation"),Ze=_t("(",!1),mt=_t(")",!1),xt=Se("game termination marker"),Un=_t("1-0",!1),Cn=_t("0-1",!1),tn=_t("1/2-1/2",!1),yr=_t("*",!1),wr=Se("whitespace"),rn=oe([" ","	","\r",`
`],!1,!1),Cr=function(D,K){return rA(D,K)},vt=function(D){return Object.fromEntries(D)},qr=function(D,K){return[D,K]},dn=function(D,K){return{root:D,marker:K}},Me=function(D,K){return tA(XR(D),...K.flat())},Pt=function(D,K,G,Le,De){return eA(D,K,G,Le,De)},Ct=function(D){return D},Kt=function(D){return D.replace(/[\r\n]+/g," ")},ir=function(D){return D.trim()},Jt=function(D){return D},jt=function(D,K){return{result:D,comment:K}},z=e.peg$currPos|0,or=[{line:1,column:1}],yt=z,ar=e.peg$maxFailExpected||[],he=e.peg$silentFails|0,Xt;if(e.startRule){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');a=i[e.startRule]}function _t(D,K){return{type:"literal",text:D,ignoreCase:K}}function oe(D,K,G){return{type:"class",parts:D,inverted:K,ignoreCase:G}}function ee(){return{type:"end"}}function Se(D){return{type:"other",description:D}}function ze(D){var K=or[D],G;if(K)return K;if(D>=or.length)G=or.length-1;else for(G=D;!or[--G];);for(K=or[G],K={line:K.line,column:K.column};G<D;)t.charCodeAt(G)===10?(K.line++,K.column=1):K.column++,G++;return or[D]=K,K}function ot(D,K,G){var Le=ze(D),De=ze(K),dt={source:n,start:{offset:D,line:Le.line,column:Le.column},end:{offset:K,line:De.line,column:De.column}};return dt}function ve(D){z<yt||(z>yt&&(yt=z,ar=[]),ar.push(D))}function Rt(D,K,G){return new pa(pa.buildMessage(D,K),D,K,G)}function Gt(){var D,K,G;return D=z,K=Or(),G=Pr(),D=Cr(K,G),D}function Or(){var D,K,G;for(D=z,K=[],G=Ut();G!==r;)K.push(G),G=Ut();return G=Nr(),D=vt(K),D}function Ut(){var D,K,G,Le,De,dt,fn;return he++,D=z,Nr(),t.charCodeAt(z)===91?(K=l,z++):(K=r,he===0&&ve(le)),K!==r?(Nr(),G=Bn(),G!==r?(Nr(),t.charCodeAt(z)===34?(Le=u,z++):(Le=r,he===0&&ve(ce)),Le!==r?(De=Ri(),t.charCodeAt(z)===34?(dt=u,z++):(dt=r,he===0&&ve(ce)),dt!==r?(Nr(),t.charCodeAt(z)===93?(fn=d,z++):(fn=r,he===0&&ve(A)),fn!==r?D=qr(G,De):(z=D,D=r)):(z=D,D=r)):(z=D,D=r)):(z=D,D=r)):(z=D,D=r),he--,D===r&&he===0&&ve(H),D}function Bn(){var D,K,G;if(he++,D=z,K=[],G=t.charAt(z),X.test(G)?z++:(G=r,he===0&&ve(Ne)),G!==r)for(;G!==r;)K.push(G),G=t.charAt(z),X.test(G)?z++:(G=r,he===0&&ve(Ne));else K=r;return K!==r?D=t.substring(D,z):D=K,he--,D===r&&(K=r,he===0&&ve(J)),D}function Ri(){var D,K,G;for(he++,D=z,K=[],G=t.charAt(z),V.test(G)?z++:(G=r,he===0&&ve($e));G!==r;)K.push(G),G=t.charAt(z),V.test(G)?z++:(G=r,he===0&&ve($e));return D=t.substring(D,z),he--,K=r,he===0&&ve(ye),D}function Pr(){var D,K,G;return D=z,K=zn(),Nr(),G=On(),G===r&&(G=null),Nr(),D=dn(K,G),D}function zn(){var D,K,G,Le;for(D=z,K=Hs(),K===r&&(K=null),G=[],Le=rc();Le!==r;)G.push(Le),Le=rc();return D=Me(K,G),D}function rc(){var D,K,G,Le,De,dt,fn,ks;if(D=z,Nr(),Bt(),Nr(),K=Ad(),K!==r){for(G=ba(),G===r&&(G=null),Le=[],De=xa();De!==r;)Le.push(De),De=xa();for(De=Nr(),dt=Hs(),dt===r&&(dt=null),fn=[],ks=Ai();ks!==r;)fn.push(ks),ks=Ai();D=Pt(K,G,Le,dt,fn)}else z=D,D=r;return D}function Bt(){var D,K,G,Le,De,dt;for(he++,D=z,K=[],G=t.charAt(z),W.test(G)?z++:(G=r,he===0&&ve(Ke));G!==r;)K.push(G),G=t.charAt(z),W.test(G)?z++:(G=r,he===0&&ve(Ke));if(t.charCodeAt(z)===46?(G=h,z++):(G=r,he===0&&ve(Xe)),G!==r){for(Le=Nr(),De=[],dt=t.charAt(z),te.test(dt)?z++:(dt=r,he===0&&ve(Be));dt!==r;)De.push(dt),dt=t.charAt(z),te.test(dt)?z++:(dt=r,he===0&&ve(Be));K=[K,G,Le,De],D=K}else z=D,D=r;return he--,D===r&&(K=r,he===0&&ve(We)),D}function Ad(){var D,K,G,Le,De,dt;if(he++,D=z,K=z,t.substr(z,5)===g?(G=g,z+=5):(G=r,he===0&&ve(Tr)),G===r&&(t.substr(z,3)===v?(G=v,z+=3):(G=r,he===0&&ve(Zr)),G===r&&(t.substr(z,5)===y?(G=y,z+=5):(G=r,he===0&&ve(Ft)),G===r&&(t.substr(z,3)===x?(G=x,z+=3):(G=r,he===0&&ve(sr)),G===r))))if(G=z,Le=t.charAt(z),X.test(Le)?z++:(Le=r,he===0&&ve(Ne)),Le!==r){if(De=[],dt=t.charAt(z),Y.test(dt)?z++:(dt=r,he===0&&ve(ht)),dt!==r)for(;dt!==r;)De.push(dt),dt=t.charAt(z),Y.test(dt)?z++:(dt=r,he===0&&ve(ht));else De=r;De!==r?(Le=[Le,De],G=Le):(z=G,G=r)}else z=G,G=r;return G!==r?(Le=t.charAt(z),re.test(Le)?z++:(Le=r,he===0&&ve(Jr)),Le===r&&(Le=null),G=[G,Le],K=G):(z=K,K=r),K!==r?D=t.substring(D,z):D=K,he--,D===r&&(K=r,he===0&&ve(Nt)),D}function ba(){var D,K,G;for(he++,D=z,K=[],G=t.charAt(z),Z.test(G)?z++:(G=r,he===0&&ve(Tn));G!==r;)K.push(G),K.length>=2?G=r:(G=t.charAt(z),Z.test(G)?z++:(G=r,he===0&&ve(Tn)));return K.length<1?(z=D,D=r):D=K,he--,D===r&&(K=r,he===0&&ve(Xr)),D}function xa(){var D,K,G,Le,De;if(he++,D=z,Nr(),t.charCodeAt(z)===36?(K=S,z++):(K=r,he===0&&ve(en)),K!==r){if(G=z,Le=[],De=t.charAt(z),W.test(De)?z++:(De=r,he===0&&ve(Ke)),De!==r)for(;De!==r;)Le.push(De),De=t.charAt(z),W.test(De)?z++:(De=r,he===0&&ve(Ke));else Le=r;Le!==r?G=t.substring(G,z):G=Le,G!==r?D=Ct(G):(z=D,D=r)}else z=D,D=r;return he--,D===r&&he===0&&ve(un),D}function Hs(){var D;return D=Id(),D===r&&(D=nc()),D}function Id(){var D,K,G,Le,De;if(he++,D=z,t.charCodeAt(z)===123?(K=_,z++):(K=r,he===0&&ve(N)),K!==r){for(G=z,Le=[],De=t.charAt(z),Te.test(De)?z++:(De=r,he===0&&ve($));De!==r;)Le.push(De),De=t.charAt(z),Te.test(De)?z++:(De=r,he===0&&ve($));G=t.substring(G,z),t.charCodeAt(z)===125?(Le=E,z++):(Le=r,he===0&&ve(Q)),Le!==r?D=Kt(G):(z=D,D=r)}else z=D,D=r;return he--,D===r&&(K=r,he===0&&ve(pe)),D}function nc(){var D,K,G,Le,De;if(he++,D=z,t.charCodeAt(z)===59?(K=C,z++):(K=r,he===0&&ve(me)),K!==r){for(G=z,Le=[],De=t.charAt(z),de.test(De)?z++:(De=r,he===0&&ve(ae));De!==r;)Le.push(De),De=t.charAt(z),de.test(De)?z++:(De=r,he===0&&ve(ae));G=t.substring(G,z),D=ir(G)}else z=D,D=r;return he--,D===r&&(K=r,he===0&&ve(we)),D}function Ai(){var D,K,G,Le;return he++,D=z,Nr(),t.charCodeAt(z)===40?(K=T,z++):(K=r,he===0&&ve(Ze)),K!==r?(G=zn(),G!==r?(Nr(),t.charCodeAt(z)===41?(Le=O,z++):(Le=r,he===0&&ve(mt)),Le!==r?D=Jt(G):(z=D,D=r)):(z=D,D=r)):(z=D,D=r),he--,D===r&&he===0&&ve(xe),D}function On(){var D,K,G;return he++,D=z,t.substr(z,3)===R?(K=R,z+=3):(K=r,he===0&&ve(Un)),K===r&&(t.substr(z,3)===F?(K=F,z+=3):(K=r,he===0&&ve(Cn)),K===r&&(t.substr(z,7)===B?(K=B,z+=7):(K=r,he===0&&ve(tn)),K===r&&(t.charCodeAt(z)===42?(K=M,z++):(K=r,he===0&&ve(yr))))),K!==r?(Nr(),G=Hs(),G===r&&(G=null),D=jt(K,G)):(z=D,D=r),he--,D===r&&(K=r,he===0&&ve(xt)),D}function Nr(){var D,K;for(he++,D=[],K=t.charAt(z),ke.test(K)?z++:(K=r,he===0&&ve(rn));K!==r;)D.push(K),K=t.charAt(z),ke.test(K)?z++:(K=r,he===0&&ve(rn));return he--,K=r,he===0&&ve(wr),D}if(Xt=a(),e.peg$library)return{peg$result:Xt,peg$currPos:z,peg$FAILED:r,peg$maxFailExpected:ar,peg$maxFailPos:yt};if(Xt!==r&&z===t.length)return Xt;throw Xt!==r&&z<t.length&&ve(ee()),Rt(ar,yt<t.length?t.charAt(yt):null,yt<t.length?ot(yt,yt+1):ot(yt,yt))}const Eu=0xffffffffffffffffn;function Lh(t,e){return(t<<e|t>>64n-e)&0xffffffffffffffffn}function q0(t,e){return t*e&Eu}function iA(t){return function(){let e=BigInt(t&Eu),r=BigInt(t>>64n&Eu);const n=q0(Lh(q0(e,5n),7n),9n);return r^=e,e=(Lh(e,24n)^r^r<<16n)&Eu,r=Lh(r,37n),t=r<<64n|e,n}}const Sd=iA(0xa187eb39cdcaed8f31c4b365b102e01en),oA=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Sd()))),aA=Array.from({length:8},()=>Sd()),lA=Array.from({length:16},()=>Sd()),Mh=Sd(),zr="w",vn="b",cr="p",Ip="n",Tu="b",hl="r",yi="q",pr="k",$h="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class cu{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,r){const{color:n,piece:i,from:a,to:l,flags:u,captured:d,promotion:h}=r,g=Sr(a),v=Sr(l);this.color=n,this.piece=i,this.from=g,this.to=v,this.san=e._moveToSan(r,e._moves({legal:!0})),this.lan=g+v,this.before=e.fen(),e._makeMove(r),this.after=e.fen(),e._undoMove(),this.flags="";for(const y in Je)Je[y]&u&&(this.flags+=Hi[y]);d&&(this.captured=d),h&&(this.promotion=h,this.lan+=h)}isCapture(){return this.flags.indexOf(Hi.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Hi.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Hi.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Hi.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Hi.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Hi.BIG_PAWN)>-1}}const Ar=-1,Hi={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Je={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Dp={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},cA={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},uA={...Dp,...cA},Ge={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Fh={b:[16,32,17,15],w:[-16,-32,-17,-15]},W0={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},dA=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],fA=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],hA={p:1,n:2,b:4,r:8,q:16,k:32},pA="pnbrqkPNBRQK",H0=[Ip,Tu,hl,yi],gA=7,mA=6,vA=1,yA=0,uu={[pr]:Je.KSIDE_CASTLE,[yi]:Je.QSIDE_CASTLE},pi={w:[{square:Ge.a1,flag:Je.QSIDE_CASTLE},{square:Ge.h1,flag:Je.KSIDE_CASTLE}],b:[{square:Ge.a8,flag:Je.QSIDE_CASTLE},{square:Ge.h8,flag:Je.KSIDE_CASTLE}]},wA={b:vA,w:mA},Uh="--";function no(t){return t>>4}function Bl(t){return t&15}function $_(t){return"0123456789".indexOf(t)!==-1}function Sr(t){const e=Bl(t),r=no(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(r,r+1)}function il(t){return t===zr?vn:zr}function bA(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const r=parseInt(e[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(e[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let l=0;l<i.length;l++){let u=0,d=!1;for(let h=0;h<i[l].length;h++)if($_(i[l][h])){if(d)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};u+=parseInt(i[l][h],10),d=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[l][h]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};u+=1,d=!1}if(u!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const a=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:l,regex:u}of a){if(!u.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${l} king`};if((e[0].match(u)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${l} kings`}}return Array.from(i[0]+i[7]).some(l=>l.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function xA(t,e){const r=t.from,n=t.to,i=t.piece;let a=0,l=0,u=0;for(let d=0,h=e.length;d<h;d++){const g=e[d].from,v=e[d].to,y=e[d].piece;i===y&&r!==g&&n===v&&(a++,no(r)===no(g)&&l++,Bl(r)===Bl(g)&&u++)}return a>0?l>0&&u>0?Sr(r):u>0?Sr(r).charAt(1):Sr(r).charAt(0):""}function gi(t,e,r,n,i,a=void 0,l=Je.NORMAL){const u=no(n);if(i===cr&&(u===gA||u===yA))for(let d=0;d<H0.length;d++){const h=H0[d];t.push({color:e,from:r,to:n,piece:i,captured:a,promotion:h,flags:l|Je.PROMOTION})}else t.push({color:e,from:r,to:n,piece:i,captured:a,flags:l})}function K0(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:cr:(e=e.toLowerCase(),e==="o"?pr:e)}function Bh(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class mi{_board=new Array(128);_turn=zr;_header={};_kings={w:Ar,b:Ar};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=$h,{skipValidation:r=!1}={}){this.load(e,{skipValidation:r})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Ar,b:Ar},this._turn=zr,this._castling={w:0,b:0},this._epSquare=Ar,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...uA},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:r=!1,preserveHeaders:n=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const u=["-","-","0","1"];e=i.concat(u.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!r){const{ok:u,error:d}=bA(e);if(!u)throw new Error(d)}const a=i[0];let l=0;this.clear({preserveHeaders:n});for(let u=0;u<a.length;u++){const d=a.charAt(u);if(d==="/")l+=8;else if($_(d))l+=parseInt(d,10);else{const h=d<"a"?zr:vn;this._put({type:d.toLowerCase(),color:h},Sr(l)),l++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=Je.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=Je.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=Je.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=Je.QSIDE_CASTLE),this._epSquare=i[3]==="-"?Ar:Ge[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let r=0,n="";for(let l=Ge.a8;l<=Ge.h1;l++){if(this._board[l]){r>0&&(n+=r,r=0);const{color:u,type:d}=this._board[l];n+=u===zr?d.toUpperCase():d.toLowerCase()}else r++;l+1&136&&(r>0&&(n+=r),l!==Ge.h1&&(n+="/"),r=0,l+=8)}let i="";this._castling[zr]&Je.KSIDE_CASTLE&&(i+="K"),this._castling[zr]&Je.QSIDE_CASTLE&&(i+="Q"),this._castling[vn]&Je.KSIDE_CASTLE&&(i+="k"),this._castling[vn]&Je.QSIDE_CASTLE&&(i+="q"),i=i||"-";let a="-";if(this._epSquare!==Ar)if(e)a=Sr(this._epSquare);else{const l=this._epSquare+(this._turn===zr?16:-16),u=[l+1,l-1];for(const d of u){if(d&136)continue;const h=this._turn;if(this._board[d]?.color===h&&this._board[d]?.type===cr){this._makeMove({color:h,from:d,to:this._epSquare,piece:cr,captured:cr,flags:Je.EP_CAPTURE});const g=!this._isKingAttacked(h);if(this._undoMove(),g){a=Sr(this._epSquare);break}}}}return[n,this._turn,i,a,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:r,type:n}=this._board[e],i={w:0,b:1}[r],a={p:0,n:1,b:2,r:3,q:4,k:5}[n];return oA[i][a][e]}_epKey(){return this._epSquare===Ar?0n:aA[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return lA[e]}_computeHash(){let e=0n;for(let r=Ge.a8;r<=Ge.h1;r++){if(r&136){r+=7;continue}this._board[r]&&(e^=this._pieceKey(r))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Mh),e}_updateSetup(e){this._history.length>0||(e!==$h?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load($h)}get(e){return this._board[Ge[e]]}findPiece(e){const r=[];for(let n=Ge.a8;n<=Ge.h1;n++){if(n&136){n+=7;continue}!this._board[n]||this._board[n]?.color!==e.color||this._board[n].color===e.color&&this._board[n].type===e.type&&r.push(Sr(n))}return r}put({type:e,color:r},n){return this._put({type:e,color:r},n)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,r){this._hash^=this._pieceKey(e),this._board[e]=r,this._hash^=this._pieceKey(e)}_put({type:e,color:r},n){if(pA.indexOf(e.toLowerCase())===-1||!(n in Ge))return!1;const i=Ge[n];if(e==pr&&!(this._kings[r]==Ar||this._kings[r]==i))return!1;const a=this._board[i];return a&&a.type===pr&&(this._kings[a.color]=Ar),this._set(i,{type:e,color:r}),e===pr&&(this._kings[r]=i),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const r=this.get(e);return this._clear(Ge[e]),r&&r.type===pr&&(this._kings[r.color]=Ar),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),r}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[Ge.e1]?.type===pr&&this._board[Ge.e1]?.color===zr,r=this._board[Ge.e8]?.type===pr&&this._board[Ge.e8]?.color===vn;(!e||this._board[Ge.a1]?.type!==hl||this._board[Ge.a1]?.color!==zr)&&(this._castling.w&=-65),(!e||this._board[Ge.h1]?.type!==hl||this._board[Ge.h1]?.color!==zr)&&(this._castling.w&=-33),(!r||this._board[Ge.a8]?.type!==hl||this._board[Ge.a8]?.color!==vn)&&(this._castling.b&=-65),(!r||this._board[Ge.h8]?.type!==hl||this._board[Ge.h8]?.color!==vn)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Ar)return;const e=this._epSquare+(this._turn===zr?-16:16),r=this._epSquare+(this._turn===zr?16:-16),n=[r+1,r-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[r]?.color!==il(this._turn)||this._board[r]?.type!==cr){this._hash^=this._epKey(),this._epSquare=Ar;return}const i=a=>!(a&136)&&this._board[a]?.color===this._turn&&this._board[a]?.type===cr;n.some(i)||(this._hash^=this._epKey(),this._epSquare=Ar)}_attacked(e,r,n){const i=[];for(let a=Ge.a8;a<=Ge.h1;a++){if(a&136){a+=7;continue}if(this._board[a]===void 0||this._board[a].color!==e)continue;const l=this._board[a],u=a-r;if(u===0)continue;const d=u+119;if(dA[d]&hA[l.type]){if(l.type===cr){if(u>0&&l.color===zr||u<=0&&l.color===vn)if(n)i.push(Sr(a));else return!0;continue}if(l.type==="n"||l.type==="k")if(n){i.push(Sr(a));continue}else return!0;const h=fA[d];let g=a+h,v=!1;for(;g!==r;){if(this._board[g]!=null){v=!0;break}g+=h}if(!v)if(n){i.push(Sr(a));continue}else return!0}}return n?i:!1}attackers(e,r){return r?this._attacked(r,Ge[e],!0):this._attacked(this._turn,Ge[e],!0)}_isKingAttacked(e){const r=this._kings[e];return r===-1?!1:this._attacked(il(e),r)}hash(){return this._hash.toString(16)}isAttacked(e,r){return this._attacked(r,Ge[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},r=[];let n=0,i=0;for(let a=Ge.a8;a<=Ge.h1;a++){if(i=(i+1)%2,a&136){a+=7;continue}const l=this._board[a];l&&(e[l.type]=l.type in e?e[l.type]+1:1,l.type===Tu&&r.push(i),n++)}if(n===2)return!0;if(n===3&&(e[Tu]===1||e[Ip]===1))return!0;if(n===e[Tu]+2){let a=0;const l=r.length;for(let u=0;u<l;u++)a+=r[u];if(a===0||a===l)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:r=void 0,piece:n=void 0}={}){const i=this._moves({square:r,piece:n});return e?i.map(a=>new cu(this,a)):i.map(a=>this._moveToSan(a,i))}_moves({legal:e=!0,piece:r=void 0,square:n=void 0}={}){const i=n?n.toLowerCase():void 0,a=r?.toLowerCase(),l=[],u=this._turn,d=il(u);let h=Ge.a8,g=Ge.h1,v=!1;if(i)if(i in Ge)h=g=Ge[i],v=!0;else return[];for(let x=h;x<=g;x++){if(x&136){x+=7;continue}if(!this._board[x]||this._board[x].color===d)continue;const{type:S}=this._board[x];let _;if(S===cr){if(a&&a!==S)continue;_=x+Fh[u][0],this._board[_]||(gi(l,u,x,_,cr),_=x+Fh[u][1],wA[u]===no(x)&&!this._board[_]&&gi(l,u,x,_,cr,void 0,Je.BIG_PAWN));for(let E=2;E<4;E++)_=x+Fh[u][E],!(_&136)&&(this._board[_]?.color===d?gi(l,u,x,_,cr,this._board[_].type,Je.CAPTURE):_===this._epSquare&&gi(l,u,x,_,cr,cr,Je.EP_CAPTURE))}else{if(a&&a!==S)continue;for(let E=0,C=W0[S].length;E<C;E++){const T=W0[S][E];for(_=x;_+=T,!(_&136);){if(!this._board[_])gi(l,u,x,_,S);else{if(this._board[_].color===u)break;gi(l,u,x,_,S,this._board[_].type,Je.CAPTURE);break}if(S===Ip||S===pr)break}}}}if((a===void 0||a===pr)&&(!v||g===this._kings[u])){if(this._castling[u]&Je.KSIDE_CASTLE){const x=this._kings[u],S=x+2;!this._board[x+1]&&!this._board[S]&&!this._attacked(d,this._kings[u])&&!this._attacked(d,x+1)&&!this._attacked(d,S)&&gi(l,u,this._kings[u],S,pr,void 0,Je.KSIDE_CASTLE)}if(this._castling[u]&Je.QSIDE_CASTLE){const x=this._kings[u],S=x-2;!this._board[x-1]&&!this._board[x-2]&&!this._board[x-3]&&!this._attacked(d,this._kings[u])&&!this._attacked(d,x-1)&&!this._attacked(d,S)&&gi(l,u,this._kings[u],S,pr,void 0,Je.QSIDE_CASTLE)}}if(!e||this._kings[u]===-1)return l;const y=[];for(let x=0,S=l.length;x<S;x++)this._makeMove(l[x]),this._isKingAttacked(u)||y.push(l[x]),this._undoMove();return y}move(e,{strict:r=!1}={}){let n=null;if(typeof e=="string")n=this._moveFromSan(e,r);else if(e===null)n=this._moveFromSan(Uh,r);else if(typeof e=="object"){const a=this._moves();for(let l=0,u=a.length;l<u;l++)if(e.from===Sr(a[l].from)&&e.to===Sr(a[l].to)&&(!("promotion"in a[l])||e.promotion===a[l].promotion)){n=a[l];break}}if(!n)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&n.flags&Je.NULL_MOVE)throw new Error("Null move not allowed when in check");const i=new cu(this,n);return this._makeMove(n),this._incPositionCount(),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,r){this._hash^=this._pieceKey(e),this._board[r]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(r)}_makeMove(e){const r=this._turn,n=il(r);if(this._push(e),e.flags&Je.NULL_MOVE){r===vn&&this._moveNumber++,this._halfMoves++,this._turn=n,this._epSquare=Ar;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&Je.EP_CAPTURE&&(this._turn===vn?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:r})),this._board[e.to].type===pr){if(this._kings[r]=e.to,e.flags&Je.KSIDE_CASTLE){const i=e.to-1,a=e.to+1;this._movePiece(a,i)}else if(e.flags&Je.QSIDE_CASTLE){const i=e.to+1,a=e.to-2;this._movePiece(a,i)}this._castling[r]=0}if(this._castling[r]){for(let i=0,a=pi[r].length;i<a;i++)if(e.from===pi[r][i].square&&this._castling[r]&pi[r][i].flag){this._castling[r]^=pi[r][i].flag;break}}if(this._castling[n]){for(let i=0,a=pi[n].length;i<a;i++)if(e.to===pi[n][i].square&&this._castling[n]&pi[n][i].flag){this._castling[n]^=pi[n][i].flag;break}}if(this._hash^=this._castlingKey(),e.flags&Je.BIG_PAWN){let i;r===vn?i=e.to-16:i=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===cr&&this._board[e.to-1]?.color===n||!(e.to+1&136)&&this._board[e.to+1]?.type===cr&&this._board[e.to+1]?.color===n?(this._epSquare=i,this._hash^=this._epKey()):this._epSquare=Ar}else this._epSquare=Ar;e.piece===cr?this._halfMoves=0:e.flags&(Je.CAPTURE|Je.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,r===vn&&this._moveNumber++,this._turn=n,this._hash^=Mh}undo(){const e=this._hash,r=this._undoMove();if(r){const n=new cu(this,r);return this._decPositionCount(e),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const r=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Mh;const n=this._turn,i=il(n);if(r.flags&Je.NULL_MOVE)return r;if(this._movePiece(r.to,r.from),r.piece&&(this._clear(r.from),this._set(r.from,{type:r.piece,color:n})),r.captured)if(r.flags&Je.EP_CAPTURE){let a;n===vn?a=r.to-16:a=r.to+16,this._set(a,{type:cr,color:i})}else this._set(r.to,{type:r.captured,color:i});if(r.flags&(Je.KSIDE_CASTLE|Je.QSIDE_CASTLE)){let a,l;r.flags&Je.KSIDE_CASTLE?(a=r.to+1,l=r.to-1):(a=r.to-2,l=r.to+1),this._movePiece(l,a)}return r}pgn({newline:e=`
`,maxWidth:r=0}={}){const n=[];let i=!1;for(const y in this._header)this._header[y]&&n.push(`[${y} "${this._header[y]}"]`+e),i=!0;i&&this._history.length&&n.push(e);const a=y=>{const x=this._comments[this.fen()];if(typeof x<"u"){const S=y.length>0?" ":"";y=`${y}${S}{${x}}`}return y},l=[];for(;this._history.length>0;)l.push(this._undoMove());const u=[];let d="";for(l.length===0&&u.push(a(""));l.length>0;){d=a(d);const y=l.pop();if(!y)break;if(!this._history.length&&y.color==="b"){const x=`${this._moveNumber}. ...`;d=d?`${d} ${x}`:x}else y.color==="w"&&(d.length&&u.push(d),d=this._moveNumber+".");d=d+" "+this._moveToSan(y,this._moves({legal:!0})),this._makeMove(y)}if(d.length&&u.push(a(d)),u.push(this._header.Result||"*"),r===0)return n.join("")+u.join(" ");const h=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},g=function(y,x){for(const S of x.split(" "))if(S){if(y+S.length>r){for(;h();)y--;n.push(e),y=0}n.push(S),y+=S.length,n.push(" "),y++}return h()&&y--,y};let v=0;for(let y=0;y<u.length;y++){if(v+u[y].length>r&&u[y].includes("{")){v=g(v,u[y]);continue}v+u[y].length>r&&y!==0?(n[n.length-1]===" "&&n.pop(),n.push(e),v=0):y!==0&&(n.push(" "),v++),n.push(u[y]),v+=u[y].length}return n.join("")}header(...e){for(let r=0;r<e.length;r+=2)typeof e[r]=="string"&&typeof e[r+1]=="string"&&(this._header[e[r]]=e[r+1]);return this._header}setHeader(e,r){return this._header[e]=r??Dp[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=Dp[e]||null,!0):!1}getHeaders(){const e={};for(const[r,n]of Object.entries(this._header))n!==null&&(e[r]=n);return e}loadPgn(e,{strict:r=!1,newlineChar:n=`\r?
`}={}){n!==`\r?
`&&(e=e.replace(new RegExp(n,"g"),`
`));const i=sA(e);this.reset();const a=i.headers;let l="";for(const h in a)h.toLowerCase()==="fen"&&(l=a[h]),this.header(h,a[h]);if(!r)l&&this.load(l,{preserveHeaders:!0});else if(a.SetUp==="1"){if(!("FEN"in a))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(a.FEN,{preserveHeaders:!0})}let u=i.root;for(;u;){if(u.move){const h=this._moveFromSan(u.move,r);if(h==null)throw new Error(`Invalid move in PGN: ${u.move}`);this._makeMove(h),this._incPositionCount()}u.comment!==void 0&&(this._comments[this.fen()]=u.comment),u=u.variations[0]}const d=i.result;d&&Object.keys(this._header).length&&this._header.Result!==d&&this.setHeader("Result",d)}_moveToSan(e,r){let n="";if(e.flags&Je.KSIDE_CASTLE)n="O-O";else if(e.flags&Je.QSIDE_CASTLE)n="O-O-O";else{if(e.flags&Je.NULL_MOVE)return Uh;if(e.piece!==cr){const i=xA(e,r);n+=e.piece.toUpperCase()+i}e.flags&(Je.CAPTURE|Je.EP_CAPTURE)&&(e.piece===cr&&(n+=Sr(e.from)[0]),n+="x"),n+=Sr(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,r=!1){let n=Bh(e);if(r||(n==="0-0"?n="O-O":n==="0-0-0"&&(n="O-O-O")),n==Uh)return{color:this._turn,from:0,to:0,piece:"k",flags:Je.NULL_MOVE};let i=K0(n),a=this._moves({legal:!0,piece:i});for(let y=0,x=a.length;y<x;y++)if(n===Bh(this._moveToSan(a[y],a)))return a[y];if(r)return null;let l,u,d,h,g,v=!1;if(u=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),u?(l=u[1],d=u[2],h=u[3],g=u[4],d.length==1&&(v=!0)):(u=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),u&&(l=u[1],d=u[2],h=u[3],g=u[4],d.length==1&&(v=!0))),i=K0(n),a=this._moves({legal:!0,piece:l||i}),!h)return null;for(let y=0,x=a.length;y<x;y++)if(d){if((!l||l.toLowerCase()==a[y].piece)&&Ge[d]==a[y].from&&Ge[h]==a[y].to&&(!g||g.toLowerCase()==a[y].promotion))return a[y];if(v){const S=Sr(a[y].from);if((!l||l.toLowerCase()==a[y].piece)&&Ge[h]==a[y].to&&(d==S[0]||d==S[1])&&(!g||g.toLowerCase()==a[y].promotion))return a[y]}}else if(n===Bh(this._moveToSan(a[y],a)).replace("x",""))return a[y];return null}ascii(){let e=`   +------------------------+
`;for(let r=Ge.a8;r<=Ge.h1;r++){if(Bl(r)===0&&(e+=" "+"87654321"[no(r)]+" |"),this._board[r]){const n=this._board[r].type,a=this._board[r].color===zr?n.toUpperCase():n.toLowerCase();e+=" "+a+" "}else e+=" . ";r+1&136&&(e+=`|
`,r+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const r=this._moves({legal:!1});let n=0;const i=this._turn;for(let a=0,l=r.length;a<l;a++)this._makeMove(r[a]),this._isKingAttacked(i)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let r=[];for(let n=Ge.a8;n<=Ge.h1;n++)this._board[n]==null?r.push(null):r.push({square:Sr(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(r),r=[],n+=8);return e}squareColor(e){if(e in Ge){const r=Ge[e];return(no(r)+Bl(r))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const r=[],n=[];for(;this._history.length>0;)r.push(this._undoMove());for(;;){const i=r.pop();if(!i)break;e?n.push(new cu(this,i)):n.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return n}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const r=this._positionCount.get(e)??0;r===1?this._positionCount.delete(e):this._positionCount.set(e,r-1)}_pruneComments(){const e=[],r={},n=i=>{i in this._comments&&(r[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),n(this.fen())}this._comments=r}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const r=this._comments[e];return delete this._comments[e],{fen:e,comment:r}})}setCastlingRights(e,r){for(const i of[pr,yi])r[i]!==void 0&&(r[i]?this._castling[e]|=uu[i]:this._castling[e]&=~uu[i]);this._updateCastlingRights();const n=this.getCastlingRights(e);return(r[pr]===void 0||r[pr]===n[pr])&&(r[yi]===void 0||r[yi]===n[yi])}getCastlingRights(e){return{[pr]:(this._castling[e]&uu[pr])!==0,[yi]:(this._castling[e]&uu[yi])!==0}}moveNumber(){return this._moveNumber}}const _A="https://cdn.jsdelivr.net/npm/stockfish@15.0.0/src/stockfish.min.js";let ol=null;function SA(){return ol||(ol=fetch(_A).then(t=>t.blob()).then(t=>URL.createObjectURL(t)).catch(t=>{throw console.error("Failed to load Stockfish",t),ol=null,t}),ol)}function kA(t,e=10){const[r,n]=b.useState(null),[i,a]=b.useState("0.0"),[l,u]=b.useState(!1),d=b.useRef(null),h=b.useRef("w");b.useEffect(()=>{let v=!1;return SA().then(y=>{if(v)return;const x=new Worker(y);x.onmessage=E=>{const C=E.data;if(typeof C=="string"){if(C.startsWith("bestmove")){const T=C.split(" ")[1];T&&(n({from:T.substring(0,2),to:T.substring(2,4)}),u(!1))}else if(C.includes("score cp")){const T=C.match(/score cp (-?\d+)/);if(T){let O=parseInt(T[1])/100;h.current==="b"&&(O=-O),a(O.toFixed(2))}}else if(C.includes("score mate")){const T=C.match(/score mate (-?\d+)/);if(T){let O=parseInt(T[1]);h.current==="b"&&(O=-O),a(O>0?`M${Math.abs(O)}`:`-M${Math.abs(O)}`)}}}};const S=Math.min(4,navigator.hardwareConcurrency||1),_=Math.max(0,Math.min(20,e));x.postMessage("uci"),x.postMessage(`setoption name Threads value ${S}`),x.postMessage("setoption name Hash value 128"),x.postMessage("setoption name MultiPV value 1"),x.postMessage(`setoption name Skill Level value ${_}`),x.postMessage(`setoption name UCI_LimitStrength value ${_<20}`),x.postMessage(`setoption name UCI_Elo value ${_*100+800}`),x.postMessage("setoption name Ponder value false"),x.postMessage("isready"),d.current=x}).catch(y=>console.error("Failed to load Stockfish",y)),()=>{v=!0,d.current?.terminate(),d.current=null}},[]);const g=b.useCallback(v=>{if(!d.current)return;u(!0),n(null);const y=v.split(" ");y.length>1&&(h.current=y[1]),d.current.postMessage(`position fen ${v}`),d.current.postMessage("go movetime 1500")},[]);return{bestMove:r,evaluation:i,isThinking:l,search:g}}const F_=b.createContext({dragDropManager:void 0});function Dn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var G0=typeof Symbol=="function"&&Symbol.observable||"@@observable",Q0=function(){return Math.random().toString(36).substring(7).split("").join(".")},Y0={INIT:"@@redux/INIT"+Q0(),REPLACE:"@@redux/REPLACE"+Q0()};function U_(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Dn(0));if(typeof e=="function"&&r===void 0&&(r=e,e=void 0),r!==void 0){if(typeof r!="function")throw new Error(Dn(1));return r(U_)(t,e)}if(typeof t!="function")throw new Error(Dn(2));var i=t,a=e,l=[],u=l,d=!1;function h(){u===l&&(u=l.slice())}function g(){if(d)throw new Error(Dn(3));return a}function v(x){if(typeof x!="function")throw new Error(Dn(4));if(d)throw new Error(Dn(5));var S=!0;return h(),u.push(x),function(){if(S){if(d)throw new Error(Dn(6));S=!1,h();var _=u.indexOf(x);u.splice(_,1),l=null}}}function y(x){if(!(function(E){if(typeof E!="object"||E===null)return!1;for(var C=E;Object.getPrototypeOf(C)!==null;)C=Object.getPrototypeOf(C);return Object.getPrototypeOf(E)===C})(x))throw new Error(Dn(7));if(x.type===void 0)throw new Error(Dn(8));if(d)throw new Error(Dn(9));try{d=!0,a=i(a,x)}finally{d=!1}for(var S=l=u,_=0;_<S.length;_++)(0,S[_])();return x}return y({type:Y0.INIT}),(n={dispatch:y,subscribe:v,getState:g,replaceReducer:function(x){if(typeof x!="function")throw new Error(Dn(10));i=x,y({type:Y0.REPLACE})}})[G0]=function(){var x,S=v;return(x={subscribe:function(_){if(typeof _!="object"||_===null)throw new Error(Dn(11));function E(){_.next&&_.next(g())}return E(),{unsubscribe:S(E)}}})[G0]=function(){return this},x},n}function et(t,e,...r){if(typeof process<"u"&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,(function(){return r[i++]}))),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function B_(t){return typeof t=="object"}const Ig="dnd-core/INIT_COORDS",Dg="dnd-core/BEGIN_DRAG",z_="dnd-core/PUBLISH_DRAG_SOURCE",kd="dnd-core/HOVER",Lg="dnd-core/DROP",Mg="dnd-core/END_DRAG";function Z0(t,e){return{type:Ig,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const EA={type:Ig,payload:{clientOffset:null,sourceClientOffset:null}};function TA(t){return function(e=[],r={publishSource:!0}){const{publishSource:n=!0,clientOffset:i,getSourceClientOffset:a}=r,l=t.getMonitor(),u=t.getRegistry();t.dispatch(Z0(i)),(function(y,x,S){et(!x.isDragging(),"Cannot call beginDrag while dragging."),y.forEach((function(_){et(S.getSource(_),"Expected sourceIds to be registered.")}))})(e,l,u);const d=(function(y,x){let S=null;for(let _=y.length-1;_>=0;_--)if(x.canDragSource(y[_])){S=y[_];break}return S})(e,l);if(d==null)return void t.dispatch(EA);let h=null;if(i){if(!a)throw new Error("getSourceClientOffset must be defined");(function(y){et(typeof y=="function","When clientOffset is provided, getSourceClientOffset must be a function.")})(a),h=a(d)}t.dispatch(Z0(i,h));const g=u.getSource(d).beginDrag(l,d);if(g==null)return;(function(y){et(B_(y),"Item must be an object.")})(g),u.pinSource(d);const v=u.getSourceType(d);return{type:Dg,payload:{itemType:v,item:g,sourceId:d,clientOffset:i||null,sourceClientOffset:h||null,isSourcePublic:!!n}}}}function CA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})))),n.forEach((function(i){CA(t,i,r[i])}))}return t}function PA(t){return function(e={}){const r=t.getMonitor(),n=t.getRegistry();(function(a){et(a.isDragging(),"Cannot call drop while not dragging."),et(!a.didDrop(),"Cannot call drop twice during one drag operation.")})(r),(function(a){const l=a.getTargetIds().filter(a.canDropOnTarget,a);return l.reverse(),l})(r).forEach(((a,l)=>{const u=(function(h,g,v,y){const x=v.getTarget(h);let S=x?x.drop(y,h):void 0;return(function(_){et(_===void 0||B_(_),"Drop result must either be an object or undefined.")})(S),S===void 0&&(S=g===0?{}:y.getDropResult()),S})(a,l,n,r),d={type:Lg,payload:{dropResult:OA({},e,u)}};t.dispatch(d)}))}}function NA(t){return function(){const e=t.getMonitor(),r=t.getRegistry();(function(i){et(i.isDragging(),"Cannot call endDrag while not dragging.")})(e);const n=e.getSourceId();return n!=null&&(r.getSource(n,!0).endDrag(e,n),r.unpinSource()),{type:Mg}}}function Lp(t,e){return e===null?t===null:Array.isArray(t)?t.some((r=>r===e)):t===e}function jA(t){return function(e,{clientOffset:r}={}){(function(l){et(Array.isArray(l),"Expected targetIds to be an array.")})(e);const n=e.slice(0),i=t.getMonitor(),a=t.getRegistry();return(function(l,u,d){for(let h=l.length-1;h>=0;h--){const g=l[h];Lp(u.getTargetType(g),d)||l.splice(h,1)}})(n,a,i.getItemType()),(function(l,u,d){et(u.isDragging(),"Cannot call hover while not dragging."),et(!u.didDrop(),"Cannot call hover after drop.");for(let h=0;h<l.length;h++){const g=l[h];et(l.lastIndexOf(g)===h,"Expected targetIds to be unique in the passed array."),et(d.getTarget(g),"Expected targetIds to be registered.")}})(n,i,a),(function(l,u,d){l.forEach((function(h){d.getTarget(h).hover(u,h)}))})(n,i,a),{type:kd,payload:{targetIds:n,clientOffset:r||null}}}}function RA(t){return function(){if(t.getMonitor().isDragging())return{type:z_}}}class AA{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store,n=(function(i){return{beginDrag:TA(i),publishDragSource:RA(i),hover:jA(i),drop:PA(i),endDrag:NA(i)}})(this);return Object.keys(n).reduce(((i,a)=>{const l=n[a];var u;return i[a]=(u=l,(...d)=>{const h=u.apply(e,d);h!==void 0&&r(h)}),i}),{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function J0(t,e){return{x:t.x-e.x,y:t.y-e.y}}const bl=[],$g=[];bl.__IS_NONE__=!0,$g.__IS_ALL__=!0;class IA{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;et(typeof e=="function","listener must be a function."),et(n===void 0||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;return this.store.subscribe((()=>{const a=this.store.getState(),l=a.stateId;try{l===i||l===i+1&&!(function(d,h){return d!==bl&&(d===$g||h===void 0||(g=d,h.filter((v=>g.indexOf(v)>-1))).length>0);var g})(a.dirtyHandlerIds,n)||e()}finally{i=l}}))}subscribeToOffsetChange(e){et(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;return this.store.subscribe((()=>{const n=this.store.getState().dragOffset;n!==r&&(r=n,e())}))}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return et(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()&&r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);return et(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop()?!1:Lp(this.registry.getTargetType(e),this.getItemType())&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);return et(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic()?!1:this.registry.getSourceType(e)===this.getItemType()&&r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!Lp(i,a))return!1;const l=this.getTargetIds();if(!l.length)return!1;const u=l.indexOf(e);return n?u===l.length-1:u>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return(function(e){const{clientOffset:r,initialClientOffset:n,initialSourceClientOffset:i}=e;return r&&n&&i?J0((l=i,{x:(a=r).x+l.x,y:a.y+l.y}),n):null;var a,l})(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return(function(e){const{clientOffset:r,initialClientOffset:n}=e;return r&&n?J0(r,n):null})(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const X0=typeof global<"u"?global:self,ew=X0.MutationObserver||X0.WebKitMutationObserver;function V_(t){return function(){const e=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(e),clearInterval(r),t()}}}const DA=typeof ew=="function"?function(t){let e=1;const r=new ew(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}:V_;class LA{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}const q_=new class{enqueueTask(t){const{queue:e,requestFlush:r}=this;e.length||(r(),this.flushing=!0),e[e.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const e=this.index;if(this.index++,t[e].call(),this.index>this.capacity){for(let r=0,n=t.length-this.index;r<n;r++)t[r]=t[r+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=DA(this.flush),this.requestErrorThrow=V_((()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()}))}},MA=new class{create(t){const e=this.freeTasks,r=e.length?e.pop():new LA(this.onError,(n=>e[e.length]=n));return r.task=t,r}constructor(t){this.onError=t,this.freeTasks=[]}}(q_.registerPendingError),Fg="dnd-core/ADD_SOURCE",Ug="dnd-core/ADD_TARGET",Bg="dnd-core/REMOVE_SOURCE",Ed="dnd-core/REMOVE_TARGET";function Mp(t,e){e&&Array.isArray(t)?t.forEach((r=>Mp(r,!1))):et(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Mn;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Mn||(Mn={}));let $A=0;function FA(t){const e=($A++).toString();switch(t){case Mn.SOURCE:return`S${e}`;case Mn.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function tw(t){switch(t[0]){case"S":return Mn.SOURCE;case"T":return Mn.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function rw(t,e){const r=t.entries();let n=!1;do{const{done:i,value:[,a]}=r.next();if(a===e)return!0;n=!!i}while(!n);return!1}class UA{addSource(e,r){Mp(e),(function(i){et(typeof i.canDrag=="function","Expected canDrag to be a function."),et(typeof i.beginDrag=="function","Expected beginDrag to be a function."),et(typeof i.endDrag=="function","Expected endDrag to be a function.")})(r);const n=this.addHandler(Mn.SOURCE,e,r);return this.store.dispatch((function(i){return{type:Fg,payload:{sourceId:i}}})(n)),n}addTarget(e,r){Mp(e,!0),(function(i){et(typeof i.canDrop=="function","Expected canDrop to be a function."),et(typeof i.hover=="function","Expected hover to be a function."),et(typeof i.drop=="function","Expected beginDrag to be a function.")})(r);const n=this.addHandler(Mn.TARGET,e,r);return this.store.dispatch((function(i){return{type:Ug,payload:{targetId:i}}})(n)),n}containsHandler(e){return rw(this.dragSources,e)||rw(this.dropTargets,e)}getSource(e,r=!1){return et(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return et(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return et(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return et(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return tw(e)===Mn.SOURCE}isTargetId(e){return tw(e)===Mn.TARGET}removeSource(e){var r;et(this.getSource(e),"Expected an existing source."),this.store.dispatch((function(n){return{type:Bg,payload:{sourceId:n}}})(e)),r=()=>{this.dragSources.delete(e),this.types.delete(e)},q_.enqueueTask(MA.create(r))}removeTarget(e){et(this.getTarget(e),"Expected an existing target."),this.store.dispatch((function(r){return{type:Ed,payload:{targetId:r}}})(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);et(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){et(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const i=FA(e);return this.types.set(i,r),e===Mn.SOURCE?this.dragSources.set(i,n):e===Mn.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const BA=(t,e)=>t===e;function zA(t=bl,e){switch(e.type){case kd:break;case Fg:case Ug:case Ed:case Bg:return bl;default:return $g}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,i=(function(u,d){const h=new Map,g=y=>{h.set(y,h.has(y)?h.get(y)+1:1)};u.forEach(g),d.forEach(g);const v=[];return h.forEach(((y,x)=>{y===1&&v.push(x)})),v})(r,n);if(!(i.length>0||!(function(u,d,h=BA){if(u.length!==d.length)return!1;for(let g=0;g<u.length;++g)if(!h(u[g],d[g]))return!1;return!0})(r,n)))return bl;const a=n[n.length-1],l=r[r.length-1];return a!==l&&(a&&i.push(a),l&&i.push(l)),i}function VA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const nw={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function qA(t=nw,e){const{payload:r}=e;switch(e.type){case Ig:case Dg:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case kd:return n=t.clientOffset,i=r.clientOffset,!n&&!i||n&&i&&n.x===i.x&&n.y===i.y?t:(function(a){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{},d=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(u).filter((function(h){return Object.getOwnPropertyDescriptor(u,h).enumerable})))),d.forEach((function(h){VA(a,h,u[h])}))}return a})({},t,{clientOffset:r.clientOffset});case Mg:case Lg:return nw;default:return t}var n,i}function WA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})))),n.forEach((function(i){WA(t,i,r[i])}))}return t}const HA={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function KA(t=HA,e){const{payload:r}=e;switch(e.type){case Dg:return zo({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case z_:return zo({},t,{isSourcePublic:!0});case kd:return zo({},t,{targetIds:r.targetIds});case Ed:return t.targetIds.indexOf(r.targetId)===-1?t:zo({},t,{targetIds:(n=t.targetIds,i=r.targetId,n.filter((a=>a!==i)))});case Lg:return zo({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case Mg:return zo({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}var n,i}function GA(t=0,e){switch(e.type){case Fg:case Ug:return t+1;case Bg:case Ed:return t-1;default:return t}}function QA(t=0){return t+1}function YA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})))),n.forEach((function(i){YA(t,i,r[i])}))}return t}function JA(t={},e){return{dirtyHandlerIds:zA(t.dirtyHandlerIds,{type:e.type,payload:ZA({},e.payload,{prevTargetIds:(r=t,n="dragOperation.targetIds",i=[],n.split(".").reduce(((a,l)=>a&&a[l]?a[l]:i||null),r))})}),dragOffset:qA(t.dragOffset,e),refCount:GA(t.refCount,e),dragOperation:KA(t.dragOperation,e),stateId:QA(t.stateId)};var r,n,i}function XA(t,e=void 0,r={},n=!1){const i=(function(d){const h=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return U_(JA,d&&h&&h({name:"dnd-core",instanceId:"dnd-core"}))})(n),a=new IA(i,new UA(i)),l=new AA(i,a),u=t(l,e,r);return l.receiveBackend(u),l}function eI(t,e){if(t==null)return{};var r,n,i=(function(l,u){if(l==null)return{};var d,h,g={},v=Object.keys(l);for(h=0;h<v.length;h++)d=v[h],u.indexOf(d)>=0||(g[d]=l[d]);return g})(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}let sw=0;const du=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var tI=b.memo((function(t){var{children:e}=t,r=eI(t,["children"]);const[n,i]=(function(a){if("manager"in a)return[{dragDropManager:a.manager},!1];const l=(function(d,h=iw(),g,v){const y=h;return y[du]||(y[du]={dragDropManager:XA(d,h,g,v)}),y[du]})(a.backend,a.context,a.options,a.debugMode),u=!a.context;return[l,u]})(r);return b.useEffect((()=>{if(i){const a=iw();return++sw,()=>{--sw==0&&(a[du]=null)}}}),[]),p.jsx(F_.Provider,{value:n,children:e})}));function iw(){return typeof global<"u"?global:window}var rI=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(e)){if((n=e.length)!=r.length)return!1;for(i=n;i--!=0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((n=(a=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(i=n;i--!=0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!=0;){var l=a[i];if(!t(e[l],r[l]))return!1}return!0}return e!=e&&r!=r};const uo=typeof window<"u"?b.useLayoutEffect:b.useEffect;function W_(t,e,r){const[n,i]=b.useState((()=>e(t))),a=b.useCallback((()=>{const l=e(t);rI(n,l)||(i(l),r&&r())}),[n,t,r]);return uo(a),[n,a]}function H_(t,e,r){return(function(n,i,a){const[l,u]=W_(n,i,a);return uo((function(){const d=n.getHandlerId();if(d!=null)return n.subscribeToStateChange(u,{handlerIds:[d]})}),[n,u]),l})(e,t||(()=>({})),(()=>r.reconnect()))}function K_(t,e){const r=[...e||[]];return e==null&&typeof t!="function"&&r.push(t),b.useMemo((()=>typeof t=="function"?t():t),r)}function nI(t){return b.useMemo((()=>t.hooks.dragSource()),[t])}function sI(t){return b.useMemo((()=>t.hooks.dragPreview()),[t])}let zh=!1,Vh=!1;class iI{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){et(!zh,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return zh=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{zh=!1}}isDragging(){if(!this.sourceId)return!1;et(!Vh,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Vh=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Vh=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let qh=!1;class oI{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;et(!qh,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return qh=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{qh=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function $p(t,e,r,n){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const a=Object.keys(t),l=Object.keys(e);if(a.length!==l.length)return!1;const u=Object.prototype.hasOwnProperty.bind(e);for(let d=0;d<a.length;d++){const h=a[d];if(!u(h))return!1;const g=t[h],v=e[h];if(i=void 0,i===!1||i===void 0&&g!==v)return!1}return!0}function Fp(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function aI(t){return(e=null,r=null)=>{if(!b.isValidElement(e)){const i=e;return t(i,r),i}const n=e;return(function(i){if(typeof i.type=="string")return;const a=i.type.displayName||i.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${a} into a <div>, or turn it into a drag source or a drop target itself.`)})(n),(function(i,a){const l=i.ref;return et(typeof l!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),b.cloneElement(i,l?{ref:u=>{ow(l,u),ow(a,u)}}:{ref:a})})(n,r?i=>t(i,r):t)}}function G_(t){const e={};return Object.keys(t).forEach((r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const i=aI(n);e[r]=()=>i}})),e}function ow(t,e){typeof t=="function"?t(e):t.current=e}class lI{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();n&&this.disconnectDragPreview(),this.handlerId&&(r?n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions)):this.lastConnectedDragPreview=r)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!$p(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!$p(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=G_({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Fp(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Fp(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class cI{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;this.handlerId&&(r?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions)):this.lastConnectedDropTarget=r)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!$p(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=G_({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Fp(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function fo(){const{dragDropManager:t}=b.useContext(F_);return et(t!=null,"Expected drag drop context"),t}class uI{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return n=typeof e.item=="object"?e.item:typeof e.item=="function"?e.item(r):{},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag!="function"||e.canDrag(r)}isDragging(e,r){const n=this.spec,i=this.monitor,{isDragging:a}=n;return a?a(i):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:i}=e;i&&i(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function dI(t,e,r){const n=fo(),i=(function(l,u,d){const h=b.useMemo((()=>new uI(l,u,d)),[u,d]);return b.useEffect((()=>{h.spec=l}),[l]),h})(t,e,r),a=(function(l){return b.useMemo((()=>{const u=l.type;return et(u!=null,"spec.type must be defined"),u}),[l])})(t);uo((function(){if(a!=null){const[l,u]=(function(d,h,g){const v=g.getRegistry(),y=v.addSource(d,h);return[y,()=>v.removeSource(y)]})(a,i,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),u}}),[n,e,r,i,a])}function fI(t,e){const r=K_(t,e);et(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=(function(){const a=fo();return b.useMemo((()=>new iI(a)),[a])})(),i=(function(a,l){const u=fo(),d=b.useMemo((()=>new lI(u.getBackend())),[u]);return uo((()=>(d.dragSourceOptions=a||null,d.reconnect(),()=>d.disconnectDragSource())),[d,a]),uo((()=>(d.dragPreviewOptions=l||null,d.reconnect(),()=>d.disconnectDragPreview())),[d,l]),d})(r.options,r.previewOptions);return dI(r,n,i),[H_(r.collect,n,i),nI(i),sI(i)]}function hI(t){return b.useMemo((()=>t.hooks.dropTarget()),[t])}class pI{canDrop(){const e=this.spec,r=this.monitor;return!e.canDrop||e.canDrop(r.getItem(),r)}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function gI(t,e,r){const n=fo(),i=(function(l,u){const d=b.useMemo((()=>new pI(l,u)),[u]);return b.useEffect((()=>{d.spec=l}),[l]),d})(t,e),a=(function(l){const{accept:u}=l;return b.useMemo((()=>(et(l.accept!=null,"accept must be defined"),Array.isArray(u)?u:[u])),[u])})(t);uo((function(){const[l,u]=(function(d,h,g){const v=g.getRegistry(),y=v.addTarget(d,h);return[y,()=>v.removeTarget(y)]})(a,i,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),u}),[n,e,i,r,a.map((l=>l.toString())).join("|")])}function mI(t,e){const r=K_(t,e),n=(function(){const a=fo();return b.useMemo((()=>new oI(a)),[a])})(),i=(function(a){const l=fo(),u=b.useMemo((()=>new cI(l.getBackend())),[l]);return uo((()=>(u.dropTargetOptions=a||null,u.reconnect(),()=>u.disconnectDropTarget())),[a]),u})(r.options);return gI(r,n,i),[H_(r.collect,n,i),hI(i)]}function Q_(t){let e=null;return()=>(e==null&&(e=t()),e)}class vI{enter(e){const r=this.entered.length;return this.entered=(function(n,i){const a=new Set,l=d=>a.add(d);n.forEach(l),i.forEach(l);const u=[];return a.forEach((d=>u.push(d))),u})(this.entered.filter((n=>this.isNodeInDocument(n)&&(!n.contains||n.contains(e)))),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;var n,i;return this.entered=(n=this.entered.filter(this.isNodeInDocument),i=e,n.filter((a=>a!==i))),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class yI{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach((e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null)})}))}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach((n=>{const i=this.config.exposeProperties[n];i!=null&&(r[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})})),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Y_="__NATIVE_FILE__",Z_="__NATIVE_URL__",J_="__NATIVE_TEXT__",X_="__NATIVE_HTML__";var aw=Object.freeze({__proto__:null,FILE:Y_,HTML:X_,TEXT:J_,URL:Z_});function Wh(t,e,r){const n=e.reduce(((i,a)=>i||t.getData(a)),"");return n??r}const Up={[Y_]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[X_]:{exposeProperties:{html:(t,e)=>Wh(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Z_]:{exposeProperties:{urls:(t,e)=>Wh(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[J_]:{exposeProperties:{text:(t,e)=>Wh(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Hh(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(Up).filter((r=>{const n=Up[r];return!!n?.matchesTypes&&n.matchesTypes.some((i=>e.indexOf(i)>-1))}))[0]||null}const wI=Q_((()=>/firefox/i.test(navigator.userAgent))),lw=Q_((()=>!!window.safari));class cw{interpolate(e){const{xs:r,ys:n,c1s:i,c2s:a,c3s:l}=this;let u=r.length-1;if(e===r[u])return n[u];let d,h=0,g=l.length-1;for(;h<=g;){d=Math.floor(.5*(h+g));const x=r[d];if(x<e)h=d+1;else{if(!(x>e))return n[d];g=d-1}}u=Math.max(0,g);const v=e-r[u],y=v*v;return n[u]+i[u]*v+a[u]*y+l[u]*v*y}constructor(e,r){const{length:n}=e,i=[];for(let x=0;x<n;x++)i.push(x);i.sort(((x,S)=>e[x]<e[S]?-1:1));const a=[],l=[];let u,d;for(let x=0;x<n-1;x++)u=e[x+1]-e[x],d=r[x+1]-r[x],a.push(u),l.push(d/u);const h=[l[0]];for(let x=0;x<a.length-1;x++){const S=l[x],_=l[x+1];if(S*_<=0)h.push(0);else{u=a[x];const E=a[x+1],C=u+E;h.push(3*C/((C+E)/S+(C+u)/_))}}h.push(l[l.length-1]);const g=[],v=[];let y;for(let x=0;x<h.length-1;x++){y=l[x];const S=h[x],_=1/a[x],E=S+h[x+1]-y-y;g.push((y-S-E)*_),v.push(E*_*_)}this.xs=e,this.ys=r,this.c1s=h,this.c2s=g,this.c3s=v}}const bI=1;function e1(t){const e=t.nodeType===bI?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function fu(t){return{x:t.clientX,y:t.clientY}}function xI(t,e,r,n,i){const a=(l=e).nodeName==="IMG"&&(wI()||!(!((u=document.documentElement)===null||u===void 0)&&u.contains(l)));var l,u;const d=e1(a?t:e),h={x:r.x-d.x,y:r.y-d.y},{offsetWidth:g,offsetHeight:v}=t,{anchorX:y,anchorY:x}=n,{dragPreviewWidth:S,dragPreviewHeight:_}=(function(O,R,F,B){let M=O?R.width:F,X=O?R.height:B;return lw()&&O&&(X/=window.devicePixelRatio,M/=window.devicePixelRatio),{dragPreviewWidth:M,dragPreviewHeight:X}})(a,e,g,v),{offsetX:E,offsetY:C}=i,T=C===0||C;return{x:E===0||E?E:new cw([0,.5,1],[h.x,h.x/g*S,h.x+S-g]).interpolate(y),y:T?C:(()=>{let O=new cw([0,.5,1],[h.y,h.y/v*_,h.y+_-v]).interpolate(x);return lw()&&a&&(O+=(window.devicePixelRatio-1)*_),O})()}}let hu;function _I(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})))),n.forEach((function(i){_I(t,i,r[i])}))}return t}class SI{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var r;e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&((r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const i=l=>this.handleDragStart(l,e),a=l=>this.handleSelectStart(l);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",i),r.addEventListener("selectstart",a),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",i),r.removeEventListener("selectstart",a),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=l=>this.handleDragEnter(l,e),i=l=>this.handleDragOver(l,e),a=l=>this.handleDrop(l,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",i),r.addEventListener("drop",a),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",i),r.removeEventListener("drop",a)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return uw({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return uw({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(aw).some((r=>aw[r]===e))}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=(function(n,i){const a=Up[n];if(!a)throw new Error(`native type ${n} has no configuration`);const l=new yI(a);return l.loadDataTransfer(i),l})(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;return this.currentDragSourceNode=null,this.rootElement&&((e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&e1(a)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame((()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null})))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:a}=this;this.dragStartSourceIds=null;const l=fu(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:l});const{dataTransfer:u}=i,d=Hh(u);if(this.monitor.isDragging()){if(u&&typeof u.setDragImage=="function"){const g=this.monitor.getSourceId(),v=this.sourceNodes.get(g),y=this.sourcePreviewNodes.get(g)||v;if(y){const{anchorX:x,anchorY:S,offsetX:_,offsetY:E}=this.getCurrentSourcePreviewNodeOptions(),C=xI(v,y,l,{anchorX:x,anchorY:S},{offsetX:_,offsetY:E});u.setDragImage(y,C.x,C.y)}}try{u?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:h}=this.getCurrentSourcePreviewNodeOptions();h?this.actions.publishDragSource():setTimeout((()=>this.actions.publishDragSource()),0)}else if(d)this.beginDragNativeItem(d);else{if(u&&!u.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{var a;if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()&&((a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)),!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:l}=i,u=Hh(l);u&&this.beginDragNativeItem(u,l)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:a}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=i.altKey,a.length>0&&this.actions.hover(a,{clientOffset:fu(i)}),a.some((l=>this.monitor.canDropOnTarget(l)))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=i=>{var a;this.dragOverTargetIds=[],this.isDraggingNativeItem()&&((a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer))},this.handleTopDragOver=i=>{const{dragOverTargetIds:a}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return i.preventDefault(),void(i.dataTransfer&&(i.dataTransfer.dropEffect="none"));this.altKeyPressed=i.altKey,this.lastClientOffset=fu(i),this.scheduleHover(a),(a||[]).some((l=>this.monitor.canDropOnTarget(l)))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout((()=>this.endDragNativeItem()),0),this.cancelHover())},this.handleTopDropCapture=i=>{var a;this.dropTargetIds=[],this.isDraggingNativeItem()?(i.preventDefault(),(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)):Hh(i.dataTransfer)&&i.preventDefault(),this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:a}=this;this.dropTargetIds=[],this.actions.hover(a,{clientOffset:fu(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))},this.options=new class{get window(){return this.globalContext?this.globalContext:typeof window<"u"?window:void 0}get document(){var i;return!((i=this.globalContext)===null||i===void 0)&&i.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var i;return((i=this.optionsArgs)===null||i===void 0?void 0:i.rootElement)||this.window}constructor(i,a){this.ownerDocument=null,this.globalContext=i,this.optionsArgs=a}}(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new vI(this.isNodeInDocument)}}const kI=function(t,e,r){return new SI(t,e,r)};var _i;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(_i||(_i={}));class EI{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0&&e}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0&&e}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0&&e}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0&&e}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)===null||e===void 0||e}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,r,n,i;return(i=(n=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,r,n,i;return(i=(n=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&i!==void 0?i:0}get window(){return this.context&&this.context.window?this.context.window:typeof window<"u"?window:void 0}get document(){var e;return!((e=this.context)===null||e===void 0)&&e.document?this.context.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,r){this.args=e,this.context=r}}const TI=1,CI=0;function Kh(t){return t.button===void 0||t.button===CI}function t1(t){return!!t.targetTouches}function Yu(t,e){return t1(t)?(function(r,n){return r.targetTouches.length===1?Yu(r.targetTouches[0]):n&&r.touches.length===1&&r.touches[0].target===n.target?Yu(r.touches[0]):void 0})(t,e):{x:t.clientX,y:t.clientY}}const dw=(()=>{let t=!1;try{addEventListener("test",(()=>{}),Object.defineProperty({},"passive",{get:()=>(t=!0,!0)}))}catch{}return t})(),al={[_i.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[_i.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[_i.keyboard]:{keydown:"keydown"}};class xl{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(et(!xl.isSetUp,"Cannot have two Touch backends at the same time."),xl.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(xl.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,r,n,i=!1){const a=dw?{capture:i,passive:!1}:i;this.listenerTypes.forEach((function(l){const u=al[l][r];u&&e.addEventListener(u,n,a)}))}removeEventListener(e,r,n,i=!1){const a=dw?{capture:i,passive:!1}:i;this.listenerTypes.forEach((function(l){const u=al[l][r];u&&e.removeEventListener(u,n,a)}))}connectDragSource(e,r){const n=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,r),this.addEventListener(r,"start",n),()=>{this.sourceNodes.delete(e),this.removeEventListener(r,"start",n)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,r){const n=this.options.rootElement;if(!this.document||!n)return()=>{};const i=a=>{if(!this.document||!n||!this.monitor.isDragging())return;let l;switch(a.type){case al.mouse.move:l={x:a.clientX,y:a.clientY};break;case al.touch.move:var u,d;l={x:((u=a.touches[0])===null||u===void 0?void 0:u.clientX)||0,y:((d=a.touches[0])===null||d===void 0?void 0:d.clientY)||0}}const h=l!=null?this.document.elementFromPoint(l.x,l.y):void 0,g=h&&r.contains(h);return h===r||g?this.handleMove(a,e):void 0};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,r),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return this.options.delayTouchStart||this.options.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver((()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())})),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,r,n){this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&(function(l){const u=l.nodeType===1?l:l.parentElement;if(!u)return;const{top:d,left:h}=u.getBoundingClientRect();return{x:h,y:d}})(a)},this.handleTopMoveStartCapture=i=>{Kh(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!Kh(i))return;const a=Yu(i);a&&(t1(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=a),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!Kh(i))return;const a=i.type===al.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),a),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,a)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(a)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:a,dragOverTargetIds:l}=this,u=this.options.enableHoverOutsideTarget,d=Yu(i,this.lastTargetTouchFallback);if(!d)return;if(this._isScrolling||!this.monitor.isDragging()&&(function(T,O,R,F,B){if(!B)return!1;const M=180*Math.atan2(F-O,R-T)/Math.PI+180;for(let X=0;X<B.length;++X){const V=B[X];if(V&&(V.start==null||M>=V.start)&&(V.end==null||M<=V.end))return!0}return!1})(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,d.x,d.y,this.options.scrollAngleRanges))return void(this._isScrolling=!0);var h,g,v,y;if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&a&&(h=this._mouseClientOffset.x||0,g=this._mouseClientOffset.y||0,v=d.x,y=d.y,Math.sqrt(Math.pow(Math.abs(v-h),2)+Math.pow(Math.abs(y-g),2))>(this.options.touchSlop?this.options.touchSlop:0))&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(a,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const x=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(x),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const S=(l||[]).map((T=>this.targetNodes.get(T))).filter((T=>!!T)),_=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(d.x,d.y,S):this.document.elementsFromPoint(d.x,d.y),E=[];for(const T in _){if(!_.hasOwnProperty(T))continue;let O=_[T];for(O!=null&&E.push(O);O;)O=O.parentElement,O&&E.indexOf(O)===-1&&E.push(O)}const C=E.filter((T=>S.indexOf(T)>-1)).map((T=>this._getDropTargetId(T))).filter((T=>!!T)).filter(((T,O,R)=>R.indexOf(T)===O));if(u)for(const T in this.targetNodes){const O=this.targetNodes.get(T);if(x&&O&&O.contains(x)&&C.indexOf(T)===-1){C.unshift(T);break}}C.reverse(),this.actions.hover(C,{clientOffset:d})},this._getDropTargetId=i=>{const a=this.targetNodes.keys();let l=a.next();for(;l.done===!1;){const u=l.value;if(i===this.targetNodes.get(u))return u;l=a.next()}},this.handleTopMoveEndCapture=i=>{this._isScrolling=!1,this.lastTargetTouchFallback=void 0,(function(a){return a.buttons===void 0||(a.buttons&TI)==0})(i)&&(this.monitor.isDragging()&&!this.monitor.didDrop()?(i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()):this.moveStartSourceIds=void 0)},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new EI(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(_i.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(_i.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(_i.keyboard)}}const OI=function(t,e={},r={}){return new xl(t,e,r)},zl="abcdefgh".split(""),Cu={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},PI={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},NI={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},jI=[7,6,5,4,3,2,1,0],RI=[0,1,2,3,4,5,6,7],fw={wP:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),p.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),p.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),p.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),p.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),p.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[p.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),p.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),p.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),p.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[p.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),p.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),p.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),p.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),p.jsx("circle",{cx:"6",cy:"12",r:"2"}),p.jsx("circle",{cx:"14",cy:"9",r:"2"}),p.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),p.jsx("circle",{cx:"31",cy:"9",r:"2"}),p.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),p.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),p.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),p.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),p.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),p.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),p.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),p.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[p.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),p.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),p.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),p.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[p.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),p.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),p.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),p.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),p.jsx("circle",{cx:"6",cy:"12",r:"2"}),p.jsx("circle",{cx:"14",cy:"9",r:"2"}),p.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),p.jsx("circle",{cx:"31",cy:"9",r:"2"}),p.jsx("circle",{cx:"39",cy:"12",r:"2"}),p.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),p.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[p.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),p.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),p.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),p.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),p.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),p.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),p.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function Bp(t,e,r){const n=e/8,i=t==="white"?jI:RI;return{x:(t==="white"?PI:NI)[r[0]]*n+n/2,y:i[parseInt(r[1],10)-1]*n+n/2}}function hw(t){let e=!1;return Object.keys(Cu).forEach((r=>{t[r]!==Cu[r]&&(e=!0)})),Object.keys(t).forEach((r=>{Cu[r]!==t[r]&&(e=!0)})),e}function pw(t){return t==="start"?Cu:typeof t=="string"?(function(e){if(!(function(a){a=a.replace(/ .+$/,""),a=(function(u){return u.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")})(a);const l=a.split("/");if(l.length!==8)return!1;for(let u=0;u<8;u++)if(l[u].length!==8||l[u].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0})(e))return{};const r=(e=e.replace(/ .+$/,"")).split("/"),n={};let i=8;for(let a=0;a<8;a++){const l=r[a].split("");let u=0;for(let d=0;d<l.length;d++)l[d].search(/[1-8]/)!==-1?u+=parseInt(l[d],10):(n[zl[u]+i]=AI(l[d]),u+=1);i-=1}return n})(t):t}function AI(t){return t.toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase()}const r1=b.createContext({}),qs=()=>b.useContext(r1),II=b.forwardRef((({allowDragOutsideBoard:t=!0,animationDuration:e=300,areArrowsAllowed:r=!0,arePiecesDraggable:n=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:a=!1,boardOrientation:l="white",boardWidth:u,children:d,clearPremovesOnRightClick:h=!0,customArrows:g,customArrowColor:v="rgb(255,170,0)",customBoardStyle:y,customDarkSquareStyle:x={backgroundColor:"#B58863"},customDropSquareStyle:S={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:_={backgroundColor:"#F0D9B5"},customPieces:E,customPremoveDarkSquareStyle:C={backgroundColor:"#A42323"},customPremoveLightSquareStyle:T={backgroundColor:"#BD2828"},customSquare:O="div",customSquareStyles:R,dropOffBoardAction:F="snapback",id:B=0,isDraggablePiece:M=(()=>!0),getPositionObject:X=(()=>{}),onArrowsChange:V=(()=>{}),onDragOverSquare:W=(()=>{}),onMouseOutSquare:te=(()=>{}),onMouseOverSquare:Y=(()=>{}),onPieceClick:re=(()=>{}),onPieceDragBegin:Z=(()=>{}),onPieceDragEnd:Te=(()=>{}),onPieceDrop:de=(()=>!0),onPromotionCheck:ke=((Xe,Be,Nt)=>(Nt==="wP"&&Xe[1]==="7"&&Be[1]==="8"||Nt==="bP"&&Xe[1]==="2"&&Be[1]==="1")&&Math.abs(Xe.charCodeAt(0)-Be.charCodeAt(0))<=1),onPromotionPieceSelect:H,onSquareClick:le=(()=>{}),onSquareRightClick:ce=(()=>{}),position:A="start",promotionDialogVariant:J="default",promotionToSquare:Ne=null,showBoardNotation:ye=!0,showPromotionDialog:$e=!1,snapToCursor:We=!0},Ke)=>{const[Xe,Be]=b.useState(pw(A)),[Nt,Tr]=b.useState({removed:{},added:{}}),[Zr,Ft]=b.useState(void 0),[sr,ht]=b.useState($e&&!a),[Jr,Xr]=b.useState(null),[Tn,un]=b.useState(Ne),[en,pe]=b.useState([]),N=b.useRef(en),[$,Q]=b.useState(),[we,me]=b.useState(Object.assign(Object.assign({},fw),E)),[ae,xe]=b.useState(!1),[Ze,mt]=b.useState(),[xt,Un]=b.useState(!1);b.useImperativeHandle(Ke,(()=>({clearPremoves(Me=!0){vt(Me)}}))),b.useEffect((()=>{me(Object.assign(Object.assign({},fw),E))}),[E]),b.useEffect((()=>{ht($e),un(Ne)}),[Ne,$e]),b.useEffect((()=>{var Me,Pt,Ct;qr();const Kt=pw(A),ir=(function(jt,z){const or={removed:{},added:{}};return Object.keys(jt).forEach((yt=>{z[yt]!==jt[yt]&&(or.removed[yt]=jt[yt])})),Object.keys(z).forEach((yt=>{jt[yt]!==z[yt]&&(or.added[yt]=z[yt])})),or})(Xe,Kt),Jt=((Me=Object.keys(ir.added))===null||Me===void 0?void 0:Me.length)<=2?(Ct=(Pt=Object.entries(ir.added))===null||Pt===void 0?void 0:Pt[0])===null||Ct===void 0?void 0:Ct[1][0]:void 0;if(xt)Be(Kt),Un(!1),i&&Cr(Jt),Ze&&clearTimeout(Ze);else if(ae)Be(Kt),Un(!1),i&&Cr(Jt);else{hw(Kt)&&Zr!==void 0?Ft(Jt):hw(Kt)?Ft(void 0):Ft("b"),Tr(ir),Un(!0);const jt=setTimeout((()=>{Be(Kt),Un(!1),i&&Cr(Jt)}),e);mt(jt)}return xe(!1),X(Kt),yr(),()=>{clearTimeout(Ze)}}),[A]);const{arrows:Cn,newArrow:tn,clearArrows:yr,drawNewArrow:wr,onArrowDrawEnd:rn}=((Me,Pt=!0,Ct,Kt)=>{const[ir,Jt]=b.useState([]),[jt,z]=b.useState([]),[or,yt]=b.useState();b.useEffect((()=>{Array.isArray(Me)&&Jt(Me?.filter((he=>he[0]!==he[1])))}),[Me]),b.useEffect((()=>{Ct?.(jt)}),[jt]);const ar=[...jt,...ir];return{arrows:ar,newArrow:or,clearArrows:function(){z([]),yt(void 0)},drawNewArrow:(he,Xt)=>{Pt&&yt([he,Xt,Kt])},setArrows:z,onArrowDrawEnd:(he,Xt)=>{if(he===Xt||!Pt)return;let _t;const oe=[he,Xt,Kt];_t=ar.every((([ee,Se])=>!(ee===he&&Se===Xt)))?[...jt,oe]:jt.filter((([ee,Se])=>!(ee===he&&Se===Xt))),yt(void 0),z(_t)}}})(g,r,V,v);function Cr(Me){if(N.current.length===0)return;const Pt=N.current[0];if(Pt.piece[0]!==void 0&&Pt.piece[0]!==Me&&de.length)if(Ft(Pt.piece[0]),xe(!0),de(Pt.sourceSq,Pt.targetSq,Pt.piece)){const Ct=[...N.current];Ct.shift(),N.current=Ct,pe([...Ct])}else vt()}function vt(Me=!0){Me&&Ft(void 0),N.current=[],pe([])}function qr(){Xr(null),un(null),ht(!1)}const dn={animationDuration:e,arePiecesDraggable:n,arePremovesAllowed:i,boardOrientation:l,boardWidth:u,customArrowColor:v,customBoardStyle:y,customDarkSquareStyle:x,customDropSquareStyle:S,customLightSquareStyle:_,customPremoveDarkSquareStyle:C,customPremoveLightSquareStyle:T,customSquare:O,customSquareStyles:R,id:B,isDraggablePiece:M,onDragOverSquare:W,onMouseOutSquare:te,onMouseOverSquare:Y,onPieceClick:re,onPieceDragBegin:Z,onPieceDragEnd:Te,onPieceDrop:de,onPromotionCheck:ke,onPromotionPieceSelect:H,onSquareClick:le,showBoardNotation:ye,snapToCursor:We,promotionDialogVariant:J,allowDragOutsideBoard:t,arrows:Cn,newArrow:tn,onArrowDrawEnd:rn,chessPieces:we,clearArrows:yr,drawNewArrow:wr,clearCurrentRightClickDown:function(){Q(void 0)},currentPosition:Xe,handleSetPosition:function(Me,Pt,Ct,Kt){if(Me===Pt)return;if(yr(),i&&xt||i&&(Zr===Ct[0]||N.current.filter((Jt=>Jt.piece[0]===Ct[0])).length>0)){const Jt=[...N.current];return Jt.push({sourceSq:Me,targetSq:Pt,piece:Ct}),N.current=Jt,pe([...Jt]),void qr()}if(!i&&xt)return;const ir=Object.assign({},Xe);xe(!!Kt),Ft(Ct[0]),de.length?de(Me,Pt,Ct)||vt():(F!=="trash"||Pt||delete ir[Me],delete ir[Me],ir[Pt]=Ct,Be(ir)),qr(),X(ir)},isWaitingForAnimation:xt,lastPieceColour:Zr,onRightClickDown:function(Me){Q(Me)},onRightClickUp:function(Me){if($){if($===Me)return Q(void 0),h&&vt(!1),void ce(Me)}else Q(void 0)},positionDifferences:Nt,promoteFromSquare:Jr,promoteToSquare:Tn,premoves:en,setPromoteFromSquare:Xr,setPromoteToSquare:un,setShowPromoteDialog:ht,showPromoteDialog:sr,autoPromoteToQueen:a,currentRightClickDown:$};return p.jsx(r1.Provider,Object.assign({value:dn},{children:d}))}));function DI({row:t,col:e}){const{boardOrientation:r,boardWidth:n,customDarkSquareStyle:i,customLightSquareStyle:a}=qs(),l=a.backgroundColor,u=i.backgroundColor,d=e===0,h=t===7;function g(){return r==="white"?8-t:t+1}function v(){return r==="black"?zl[7-e]:zl[e]}return d&&h?p.jsxs(p.Fragment,{children:[p.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:l}),mw(n))},{children:g()})),p.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:l}),gw(n))},{children:v()}))]}):h?p.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!=0?u:l}),gw(n))},{children:v()})):d?p.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:t%2==0?u:l}),mw(n))},{children:g()})):null}const gw=t=>({alignSelf:"flex-end",paddingLeft:t/8-t/48,fontSize:t/48}),mw=t=>({alignSelf:"flex-start",paddingRight:t/8-t/48,fontSize:t/48});function vw({isPremovedPiece:t=!1,piece:e,square:r,squares:n}){const{animationDuration:i,arePiecesDraggable:a,arePremovesAllowed:l,boardWidth:u,boardOrientation:d,chessPieces:h,currentPosition:g,id:v,isDraggablePiece:y,isWaitingForAnimation:x,onPieceClick:S,onPieceDragBegin:_,onPieceDragEnd:E,positionDifferences:C,premoves:T,onPromotionCheck:O}=qs(),[R,F]=b.useState({opacity:1,zIndex:5,touchAction:"none",cursor:a&&y({piece:e,sourceSquare:r})?"-webkit-grab":"default"}),[{canDrag:B,isDragging:M},X,V]=fI((()=>({type:"piece",item:()=>(_(e,r),{piece:e,square:r,id:v}),end:()=>E(e,r),collect:W=>({canDrag:y({piece:e,sourceSquare:r}),isDragging:!!W.isDragging()})})),[e,r,g,v]);return V((hu||(hu=new Image,hu.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),hu),{captureDraggingState:!0}),b.useEffect((()=>{F((W=>Object.assign(Object.assign({},W),{opacity:M?0:1})))}),[M]),b.useEffect((()=>{if(!l)return;let W=!1;!t&&T.find((te=>te.targetSq===r))&&(W=!0),T.find((te=>te.sourceSq===r&&te.piece===e))&&(W=!0),F((te=>Object.assign(Object.assign({},te),{display:W?"none":"unset"})))}),[g,T]),b.useEffect((()=>{var W;const te=(W=C.removed)===null||W===void 0?void 0:W[r];if(!C.added||!te)return;const Y=Object.entries(C.added).find((([re,Z])=>Z===te||O(r,re,te)));if(x&&te&&Y&&!t){const re=r,Z=Y[0];if(re&&Z){const Te=u/8;F((de=>Object.assign(Object.assign({},de),{transform:`translate(${(d==="black"?-1:1)*(Z.charCodeAt(0)-re.charCodeAt(0))*Te}px, ${(d==="black"?-1:1)*(Number(re[1])-Number(Z[1]))*Te}px)`,transition:`transform ${i}ms`,zIndex:6})))}}}),[C]),b.useEffect((()=>{const{sourceSq:W}={sourceSq:n[r]};W&&F((te=>Object.assign(Object.assign({},te),{transform:"translate(0px, 0px)",transition:"transform 0ms"})))}),[g]),b.useEffect((()=>{F((W=>Object.assign(Object.assign({},W),{cursor:a&&y({piece:e,sourceSquare:r})?"-webkit-grab":"default"})))}),[r,g,a]),p.jsx("div",Object.assign({ref:a&&B?X:null,onClick:()=>S(e),"data-piece":e,style:R},{children:typeof h[e]=="function"?h[e]({squareWidth:u/8,isDragging:M,square:r}):p.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:u/8,height:u/8},{children:p.jsx("g",{children:h[e]})}))}))}function LI({square:t,squareColor:e,setSquares:r,squareHasPremove:n,children:i}){const a=b.useRef(null),{autoPromoteToQueen:l,boardWidth:u,boardOrientation:d,clearArrows:h,currentPosition:g,currentRightClickDown:v,customBoardStyle:y,customDarkSquareStyle:x,customDropSquareStyle:S,customLightSquareStyle:_,customPremoveDarkSquareStyle:E,customPremoveLightSquareStyle:C,customSquare:T,customSquareStyles:O,drawNewArrow:R,handleSetPosition:F,isWaitingForAnimation:B,lastPieceColour:M,onArrowDrawEnd:X,onDragOverSquare:V,onMouseOutSquare:W,onMouseOverSquare:te,onPieceDrop:Y,onPromotionCheck:re,onRightClickDown:Z,onRightClickUp:Te,onSquareClick:de,setPromoteFromSquare:ke,setPromoteToSquare:H,setShowPromoteDialog:le}=qs(),[{isOver:ce},A]=mI((()=>({accept:"piece",drop:J,collect:ye=>({isOver:!!ye.isOver()})})),[t,g,Y,B,M]);function J(ye){re(ye.square,t,ye.piece)?l?F(ye.square,t,ye.piece[0]==="w"?"wQ":"bQ"):(ke(ye.square),H(t),le(!0)):F(ye.square,t,ye.piece,!0)}b.useEffect((()=>{if(a.current){const{x:ye,y:$e}=a.current.getBoundingClientRect();r((We=>Object.assign(Object.assign({},We),{[t]:{x:ye,y:$e}})))}}),[u,d]);const Ne=Object.assign(Object.assign(Object.assign(Object.assign({},MI(t,d,y)),e==="black"?x:_),n&&(e==="black"?E:C)),ce&&S);return p.jsx("div",Object.assign({ref:A,style:Ne,"data-square-color":e,"data-square":t,onMouseOver:ye=>{ye.buttons===2&&v&&R(v,t),ye.relatedTarget&&ye.currentTarget.contains(ye.relatedTarget)||te(t)},onMouseOut:ye=>{ye.relatedTarget&&ye.currentTarget.contains(ye.relatedTarget)||W(t)},onMouseDown:ye=>{ye.button===2&&Z(t)},onMouseUp:ye=>{ye.button===2&&(v&&X(v,t),Te(t))},onDragEnter:()=>V(t),onClick:()=>{de(t),h()},onContextMenu:ye=>{ye.preventDefault()}},{children:p.jsx(T,typeof T=="string"?Object.assign({ref:a,style:Object.assign(Object.assign(Object.assign({},ww(u)),yw),!n&&O?.[t])},{children:i}):Object.assign({ref:a,square:t,squareColor:e,style:Object.assign(Object.assign(Object.assign({},ww(u)),yw),!n&&O?.[t])},{children:i}))}))}const yw={display:"flex",justifyContent:"center"},ww=t=>({width:t/8,height:t/8}),MI=(t,e,r)=>r?.borderRadius?t==="a1"?e==="white"?{borderBottomLeftRadius:r.borderRadius}:{borderTopRightRadius:r.borderRadius}:t==="a8"?e==="white"?{borderTopLeftRadius:r.borderRadius}:{borderBottomRightRadius:r.borderRadius}:t==="h1"?e==="white"?{borderBottomRightRadius:r.borderRadius}:{borderTopLeftRadius:r.borderRadius}:t==="h8"?e==="white"?{borderTopRightRadius:r.borderRadius}:{borderBottomLeftRadius:r.borderRadius}:{}:{};function $I(){const[t,e]=b.useState({}),{boardOrientation:r,boardWidth:n,currentPosition:i,id:a,premoves:l,showBoardNotation:u}=qs();return p.jsx("div",Object.assign({"data-boardid":a},{children:[...Array(8)].map(((d,h)=>p.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:n}},{children:[...Array(8)].map(((g,v)=>{const y=r==="black"?zl[7-v]+(h+1):zl[v]+(8-h),x=v%2==h%2?"white":"black",S=l.find((E=>E.sourceSq===y||E.targetSq===y)),_=l.find((E=>E.targetSq===y));return p.jsxs(LI,Object.assign({square:y,squareColor:x,setSquares:e,squareHasPremove:!!S},{children:[i[y]&&p.jsx(vw,{piece:i[y],square:y,squares:t}),_&&p.jsx(vw,{isPremovedPiece:!0,piece:_.piece,square:y,squares:t}),u&&p.jsx(DI,{row:h,col:v})]}),`${v}${h}`)}))}),h.toString())))}))}const FI=()=>{const{arrows:t,newArrow:e,boardOrientation:r,boardWidth:n,customArrowColor:i}=qs(),a=[...t,e].filter(Boolean);return p.jsx("svg",Object.assign({width:n,height:n,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:a.map(((l,u)=>{const[d,h,g]=l;if(d===h)return null;const v=Bp(r,n,d),y=Bp(r,n,h);let x=n/32;const S=u===t.length;t.some((O=>O[0]!==d&&O[1]===h))&&!S&&(x=n/16);const _=y.x-v.x,E=y.y-v.y,C=Math.hypot(E,_),T={x:v.x+_*(C-x)/C,y:v.y+E*(C-x)/C};return p.jsxs(b.Fragment,{children:[p.jsx("marker",Object.assign({id:`arrowhead-${u}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:p.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:g??i})})),p.jsx("line",{x1:v.x,y1:v.y,x2:T.x,y2:T.y,opacity:S?"0.5":"0.65",stroke:g??i,strokeWidth:S?.9*n/40:n/40,markerEnd:`url(#arrowhead-${u})`})]},`${d}-${h}${S?"-active":""}`)}))}))};function UI({option:t}){const[e,r]=b.useState(!1),{boardWidth:n,chessPieces:i,customDarkSquareStyle:a,customLightSquareStyle:l,handleSetPosition:u,onPromotionPieceSelect:d,promoteFromSquare:h,promoteToSquare:g,promotionDialogVariant:v}=qs(),y=()=>{switch(t[1]){case"Q":return a.backgroundColor;case"R":return l.backgroundColor;case"N":return v==="default"?l.backgroundColor:a.backgroundColor;case"B":return v==="default"?a.backgroundColor:l.backgroundColor}};return p.jsx("div",Object.assign({onClick:()=>{d?.length?d(t):u(h,g,t,!0)},onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),"data-piece":t,style:{cursor:"pointer",backgroundColor:e?y():`${y()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[t]=="function"?p.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[t]({squareWidth:n/8,isDragging:!1})})):p.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:n/8,height:n/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:p.jsx("g",{children:i[t]})}))}))}function BI(){const{boardOrientation:t,boardWidth:e,promotionDialogVariant:r,promoteToSquare:n}=qs(),i=n?.[1]==="1"?"b":"w",a=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],l={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:e/4+"px",top:0,backgroundColor:"white",left:0}},u=Bp(t,e,n||"a8");return p.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${u?.y}px`,left:`${u?.x}px`,zIndex:1e3},l[r]),title:"Choose promotion piece"},{children:a.map((d=>p.jsx(UI,{option:d},d)))}))}const zI={whiteKing:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:p.jsx("g",{children:p.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function VI({children:t}){try{return p.jsx(p.Fragment,{children:t})}catch(e){return console.log(e),p.jsx(n1,{showError:!0})}}function n1({showError:t=!1}){return p.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[p.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:zI.whiteKing})),t&&p.jsx("h1",{children:"Something went wrong"})]}))}function qI(){const t=b.useRef(null),{boardWidth:e,clearCurrentRightClickDown:r,onPromotionPieceSelect:n,setShowPromoteDialog:i,showPromoteDialog:a,customBoardStyle:l}=qs();return b.useEffect((()=>{function u(d){t.current&&!t.current.contains(d.target)&&r()}return document.addEventListener("mouseup",u),()=>{document.removeEventListener("mouseup",u)}}),[]),e?p.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:p.jsxs("div",Object.assign({ref:t,style:Object.assign(Object.assign({position:"relative"},WI(e)),l)},{children:[p.jsx($I,{}),p.jsx(FI,{}),a&&p.jsxs(p.Fragment,{children:[p.jsx("div",{onClick:()=>{i(!1),n?.()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),p.jsx(BI,{})]})]}))})):p.jsx(n1,{})}const WI=t=>({cursor:"default",height:t,width:t});function HI({boardContainer:t}){const{boardWidth:e,chessPieces:r,id:n,snapToCursor:i,allowDragOutsideBoard:a}=qs(),l=(function(y){const x=fo().getMonitor(),[S,_]=W_(x,y);return b.useEffect((()=>x.subscribeToOffsetChange(_))),b.useEffect((()=>x.subscribeToStateChange(_))),S})((y=>({item:y.getItem(),clientOffset:y.getClientOffset(),sourceClientOffset:y.getSourceClientOffset(),isDragging:y.isDragging()}))),{isDragging:u,item:d,clientOffset:h,sourceClientOffset:g}=l,v=b.useCallback(((y,x)=>{if(!y||!x)return{display:"none"};let{x:S,y:_}=i?y:x;const E=e/8/2;if(i&&(S-=E,_-=E),!a){const{left:T,top:O}=t,R=T-E,F=O-E,B=T+e-E,M=O+e-E;S=Math.max(R,Math.min(S,B)),_=Math.max(F,Math.min(_,M))}const C=`translate(${S}px, ${_}px)`;return{transform:C,WebkitTransform:C,touchAction:"none"}}),[e,a,i,t]);return u&&d.id===n?p.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:p.jsx("div",Object.assign({style:v(h,g)},{children:typeof r[d.piece]=="function"?r[d.piece]({squareWidth:e/8,isDragging:!0}):p.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:p.jsx("g",{children:r[d.piece]})}))}))})):null}const KI=b.forwardRef(((t,e)=>{var r;const{customDndBackend:n,customDndBackendOptions:i}=t,a=(function(R,F){var B={};for(var M in R)Object.prototype.hasOwnProperty.call(R,M)&&F.indexOf(M)<0&&(B[M]=R[M]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function"){var X=0;for(M=Object.getOwnPropertySymbols(R);X<M.length;X++)F.indexOf(M[X])<0&&Object.prototype.propertyIsEnumerable.call(R,M[X])&&(B[M[X]]=R[M[X]])}return B})(t,["customDndBackend","customDndBackendOptions"]),[l,u]=b.useState(),[d,h]=b.useState(!1),[g,v]=b.useState(!1),[y,x]=b.useState(t.boardWidth),S=b.useRef(null),_=b.useRef(null),[E,C]=b.useState({left:0,top:0}),T=(r=S.current)===null||r===void 0?void 0:r.getBoundingClientRect();b.useEffect((()=>{C({left:T?.left?T?.left:0,top:T?.top?T?.top:0})}),[T]),b.useEffect((()=>{v("ontouchstart"in window),h(!0),u(window)}),[]),b.useEffect((()=>{var R;if(t.boardWidth===void 0&&(!((R=S.current)===null||R===void 0)&&R.offsetWidth)){const F=new ResizeObserver((()=>{var B;x((B=S.current)===null||B===void 0?void 0:B.offsetWidth)}));return F.observe(S.current),()=>{F.disconnect()}}}),[S.current,l]);const O=n||(g?OI:kI);return d&&l?p.jsx(VI,{children:p.jsxs("div",Object.assign({ref:_,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[p.jsx("div",{ref:S,style:{width:"100%"}}),p.jsx(tI,Object.assign({backend:O,context:l,options:n?i:void 0},{children:y&&p.jsxs(II,Object.assign({boardWidth:y},a,{ref:e},{children:[p.jsx(HI,{boardContainer:E}),p.jsx(qI,{})]}))}))]}))}):null})),GI=b.memo(function({game:e,onMove:r,orientation:n="white",isThinking:i=!1,disabled:a=!1,lastMove:l,onReset:u}){const d=b.useRef(null),[h,g]=b.useState(320),[v,y]=b.useState(null),[x,S]=b.useState({}),[_,E]=b.useState({}),[C,T]=b.useState(null);b.useEffect(()=>{const V=()=>{if(d.current){const te=Math.min(d.current.clientWidth,600);g(te)}},W=new ResizeObserver(V);return d.current&&W.observe(d.current),V(),()=>W.disconnect()},[]),b.useEffect(()=>{if(e.inCheck()){const V=e.board();let W="";const te="abcdefgh";for(let Y=0;Y<8;Y++){for(let re=0;re<8;re++){const Z=V[Y][re];if(Z&&Z.type==="k"&&Z.color===e.turn()){const Te=te[re],de=8-Y;W=`${Te}${de}`;break}}if(W)break}if(W){E({[W]:{background:"radial-gradient(circle, rgba(255,0,0,0.8) 0%, transparent 80%)",boxShadow:"inset 0 0 10px 2px rgba(255,0,0,0.8)"}});return}}E({})},[e]);function O(V){const W=e.moves({square:V,verbose:!0});if(W.length===0)return;const te={};W.forEach(Y=>{const re=e.get(Y.to),Z=e.get(V);te[Y.to]={background:re&&Z&&re.color!==Z.color?"radial-gradient(circle, rgba(255, 215, 0, 0.6) 40%, transparent 40%)":"radial-gradient(circle, rgba(255, 215, 0, 0.3) 25%, transparent 25%)",borderRadius:"50%"}}),te[V]={background:"rgba(255, 215, 0, 0.4)"},S(te)}function R(V){if(C&&!a){if(V){const W=V[1]?.toLowerCase();if(!W||!"qrbn".includes(W)||!r(C.from,C.to,W))return}T(null),y(null),S({})}}function F(V){if(!(a||i||e.isGameOver()))if(v){if(v===V){y(null),S({});return}const W=e.get(v);if(W?.type==="p"&&(W.color==="w"&&V[1]==="8"||W.color==="b"&&V[1]==="1")&&e.moves({square:v,verbose:!0}).find(de=>de.to===V)){T({from:v,to:V});return}if(r(v,V)){y(null),S({});return}const re=e.get(V);if(re&&re.color===e.turn()){y(V),O(V);return}y(null),S({})}else{const W=e.get(V);W&&W.color===e.turn()&&(y(V),O(V))}}const B={...l?{[l.from]:{background:"rgba(255, 215, 0, 0.3)"},[l.to]:{background:"rgba(255, 215, 0, 0.3)"}}:{},...x,..._},M=e.isGameOver(),X=M?e.isCheckmate()?e.turn()==="w"?"en thng":"Trng thng":"Ha":"";return p.jsxs("div",{ref:d,className:`
        w-full aspect-square max-w-[600px] mx-auto 
        bg-slate-900 rounded-lg shadow-2xl overflow-hidden 
        border-[6px] border-slate-800
        transition-all duration-300
        ${i?"ring-4 ring-indigo-500/30":""}
        relative
      `,children:[p.jsx(KI,{position:e.fen(),onPieceDrop:(V,W,te)=>{if(a||i||e.isGameOver())return!1;if(te[1]==="P"&&V[1]==="7"&&W[1]==="8"||te[1]==="p"&&V[1]==="2"&&W[1]==="1")return a||T({from:V,to:W}),!1;const re=r(V,W);return re&&(y(null),S({})),re},onSquareClick:F,customSquareStyles:B,boardOrientation:n,boardWidth:h,customDarkSquareStyle:{backgroundColor:"#312e81"},customLightSquareStyle:{backgroundColor:"#e2e8f0"},customDropSquareStyle:{boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.2)"},animationDuration:300}),C&&p.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-lg",children:p.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl flex flex-col gap-4 shadow-2xl border border-white/10 animate-in zoom-in-95",children:[p.jsx("div",{className:"text-white text-sm font-bold text-center uppercase tracking-widest opacity-50",children:"Select Promotion"}),p.jsx("div",{className:"flex gap-3",children:["q","r","b","n"].map(V=>p.jsx("div",{className:"w-16 h-16 cursor-pointer bg-slate-700 hover:bg-indigo-600 rounded-xl p-2 transition-all hover:scale-110 active:scale-95",onClick:()=>R(`${e.turn()}${V.toUpperCase()}`),children:p.jsx("img",{src:`https://images.chesscomfiles.com/chess-themes/pieces/neo/150/${e.turn()}${V}.png`,alt:V,className:"w-full h-full object-contain"})},V))}),p.jsx(lt,{variant:"ghost",className:"text-slate-400 hover:text-white hover:bg-white/5",onClick:()=>R(void 0),children:"Cancel"})]})}),M&&p.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-black/70 backdrop-blur-md animate-in fade-in duration-500",children:p.jsxs("div",{className:"text-center p-8",children:[p.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-indigo-500/50 animate-bounce",children:p.jsx(dd,{className:"w-10 h-10 text-white"})}),p.jsx("h2",{className:"text-4xl font-black italic text-white mb-2 tracking-tighter",children:"GAME OVER"}),p.jsx("div",{className:"text-xl font-bold text-indigo-400 uppercase tracking-[0.2em] mb-8",children:X}),p.jsx("div",{className:"flex gap-4 justify-center",children:p.jsxs(lt,{onClick:u,className:"bg-white text-black hover:bg-slate-200 font-bold px-8 h-12 rounded-xl",children:[p.jsx(nx,{className:"w-4 h-4 mr-2"}),"Play Again"]})})]})})]})});function QI({onFlip:t,onResign:e,onDraw:r,onReset:n,gameMode:i,disabled:a=!1}){return p.jsxs("div",{className:"flex flex-wrap gap-3 justify-center md:justify-start",children:[p.jsx(lt,{variant:"secondary",size:"icon",onClick:t,className:"bg-slate-800 hover:bg-slate-700 text-slate-200 border border-white/10",title:"Flip Board",children:p.jsx(xC,{className:"w-5 h-5"})}),i==="ai"&&p.jsxs(lt,{variant:"secondary",onClick:n,className:"bg-emerald-600/20 hover:bg-emerald-600/30 text-emerald-400 border border-emerald-500/20",children:[p.jsx(nx,{className:"w-4 h-4 mr-2"}),"Vn mi"]}),i==="online"&&p.jsxs(p.Fragment,{children:[p.jsxs(lt,{variant:"destructive",onClick:e,disabled:a,className:"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20",children:[p.jsx(gC,{className:"w-4 h-4 mr-2"}),"Xin thua"]}),p.jsxs(lt,{variant:"secondary",onClick:r,disabled:a,className:"bg-amber-500/10 hover:bg-amber-500/20 text-amber-400 border border-amber-500/20",children:[p.jsx(vC,{className:"w-4 h-4 mr-2"}),"Xin ha"]})]})]})}var YI=b.createContext(void 0);function zg(t){const e=b.useContext(YI);return t||e||"ltr"}function ZI(t,[e,r]){return Math.min(r,Math.max(e,t))}function JI(t,e){return b.useReducer((r,n)=>e[r][n]??r,t)}var Vg="ScrollArea",[s1]=Ni(Vg),[XI,Fn]=s1(Vg),i1=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:a=600,...l}=t,[u,d]=b.useState(null),[h,g]=b.useState(null),[v,y]=b.useState(null),[x,S]=b.useState(null),[_,E]=b.useState(null),[C,T]=b.useState(0),[O,R]=b.useState(0),[F,B]=b.useState(!1),[M,X]=b.useState(!1),V=kr(e,te=>d(te)),W=zg(i);return p.jsx(XI,{scope:r,type:n,dir:W,scrollHideDelay:a,scrollArea:u,viewport:h,onViewportChange:g,content:v,onContentChange:y,scrollbarX:x,onScrollbarXChange:S,scrollbarXEnabled:F,onScrollbarXEnabledChange:B,scrollbarY:_,onScrollbarYChange:E,scrollbarYEnabled:M,onScrollbarYEnabledChange:X,onCornerWidthChange:T,onCornerHeightChange:R,children:p.jsx(Tt.div,{dir:W,...l,ref:V,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":O+"px",...t.style}})})});i1.displayName=Vg;var o1="ScrollAreaViewport",a1=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:i,...a}=t,l=Fn(o1,r),u=b.useRef(null),d=kr(e,u,l.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(Tt.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});a1.displayName=o1;var Ss="ScrollAreaScrollbar",qg=b.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Fn(Ss,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=i,u=t.orientation==="horizontal";return b.useEffect(()=>(u?a(!0):l(!0),()=>{u?a(!1):l(!1)}),[u,a,l]),i.type==="hover"?p.jsx(e5,{...n,ref:e,forceMount:r}):i.type==="scroll"?p.jsx(t5,{...n,ref:e,forceMount:r}):i.type==="auto"?p.jsx(l1,{...n,ref:e,forceMount:r}):i.type==="always"?p.jsx(Wg,{...n,ref:e}):null});qg.displayName=Ss;var e5=b.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Fn(Ss,t.__scopeScrollArea),[a,l]=b.useState(!1);return b.useEffect(()=>{const u=i.scrollArea;let d=0;if(u){const h=()=>{window.clearTimeout(d),l(!0)},g=()=>{d=window.setTimeout(()=>l(!1),i.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",g),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",g)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx(ji,{present:r||a,children:p.jsx(l1,{"data-state":a?"visible":"hidden",...n,ref:e})})}),t5=b.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Fn(Ss,t.__scopeScrollArea),a=t.orientation==="horizontal",l=Cd(()=>d("SCROLL_END"),100),[u,d]=JI("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,i.scrollHideDelay,d]),b.useEffect(()=>{const h=i.viewport,g=a?"scrollLeft":"scrollTop";if(h){let v=h[g];const y=()=>{const x=h[g];v!==x&&(d("SCROLL"),l()),v=x};return h.addEventListener("scroll",y),()=>h.removeEventListener("scroll",y)}},[i.viewport,a,d,l]),p.jsx(ji,{present:r||u!=="hidden",children:p.jsx(Wg,{"data-state":u==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:ut(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:ut(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),l1=b.forwardRef((t,e)=>{const r=Fn(Ss,t.__scopeScrollArea),{forceMount:n,...i}=t,[a,l]=b.useState(!1),u=t.orientation==="horizontal",d=Cd(()=>{if(r.viewport){const h=r.viewport.offsetWidth<r.viewport.scrollWidth,g=r.viewport.offsetHeight<r.viewport.scrollHeight;l(u?h:g)}},10);return ga(r.viewport,d),ga(r.content,d),p.jsx(ji,{present:n||a,children:p.jsx(Wg,{"data-state":a?"visible":"hidden",...i,ref:e})})}),Wg=b.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,i=Fn(Ss,t.__scopeScrollArea),a=b.useRef(null),l=b.useRef(0),[u,d]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=h1(u.viewport,u.content),g={...n,sizes:u,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:y=>a.current=y,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:y=>l.current=y};function v(y,x){return a5(y,l.current,u,x)}return r==="horizontal"?p.jsx(r5,{...g,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const y=i.viewport.scrollLeft,x=bw(y,u,i.dir);a.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollLeft=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollLeft=v(y,i.dir))}}):r==="vertical"?p.jsx(n5,{...g,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const y=i.viewport.scrollTop,x=bw(y,u);a.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollTop=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollTop=v(y))}}):null}),r5=b.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,a=Fn(Ss,t.__scopeScrollArea),[l,u]=b.useState(),d=b.useRef(null),h=kr(e,d,a.onScrollbarXChange);return b.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),p.jsx(u1,{"data-orientation":"horizontal",...i,ref:h,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Td(r)+"px",...t.style},onThumbPointerDown:g=>t.onThumbPointerDown(g.x),onDragScroll:g=>t.onDragScroll(g.x),onWheelScroll:(g,v)=>{if(a.viewport){const y=a.viewport.scrollLeft+g.deltaX;t.onWheelScroll(y),g1(y,v)&&g.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Ju(l.paddingLeft),paddingEnd:Ju(l.paddingRight)}})}})}),n5=b.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,a=Fn(Ss,t.__scopeScrollArea),[l,u]=b.useState(),d=b.useRef(null),h=kr(e,d,a.onScrollbarYChange);return b.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),p.jsx(u1,{"data-orientation":"vertical",...i,ref:h,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Td(r)+"px",...t.style},onThumbPointerDown:g=>t.onThumbPointerDown(g.y),onDragScroll:g=>t.onDragScroll(g.y),onWheelScroll:(g,v)=>{if(a.viewport){const y=a.viewport.scrollTop+g.deltaY;t.onWheelScroll(y),g1(y,v)&&g.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Ju(l.paddingTop),paddingEnd:Ju(l.paddingBottom)}})}})}),[s5,c1]=s1(Ss),u1=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:a,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:g,onResize:v,...y}=t,x=Fn(Ss,r),[S,_]=b.useState(null),E=kr(e,V=>_(V)),C=b.useRef(null),T=b.useRef(""),O=x.viewport,R=n.content-n.viewport,F=vr(g),B=vr(d),M=Cd(v,10);function X(V){if(C.current){const W=V.clientX-C.current.left,te=V.clientY-C.current.top;h({x:W,y:te})}}return b.useEffect(()=>{const V=W=>{const te=W.target;S?.contains(te)&&F(W,R)};return document.addEventListener("wheel",V,{passive:!1}),()=>document.removeEventListener("wheel",V,{passive:!1})},[O,S,R,F]),b.useEffect(B,[n,B]),ga(S,M),ga(x.content,M),p.jsx(s5,{scope:r,scrollbar:S,hasThumb:i,onThumbChange:vr(a),onThumbPointerUp:vr(l),onThumbPositionChange:B,onThumbPointerDown:vr(u),children:p.jsx(Tt.div,{...y,ref:E,style:{position:"absolute",...y.style},onPointerDown:ut(t.onPointerDown,V=>{V.button===0&&(V.target.setPointerCapture(V.pointerId),C.current=S.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),X(V))}),onPointerMove:ut(t.onPointerMove,X),onPointerUp:ut(t.onPointerUp,V=>{const W=V.target;W.hasPointerCapture(V.pointerId)&&W.releasePointerCapture(V.pointerId),document.body.style.webkitUserSelect=T.current,x.viewport&&(x.viewport.style.scrollBehavior=""),C.current=null})})})}),Zu="ScrollAreaThumb",d1=b.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=c1(Zu,t.__scopeScrollArea);return p.jsx(ji,{present:r||i.hasThumb,children:p.jsx(i5,{ref:e,...n})})}),i5=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...i}=t,a=Fn(Zu,r),l=c1(Zu,r),{onThumbPositionChange:u}=l,d=kr(e,v=>l.onThumbChange(v)),h=b.useRef(void 0),g=Cd(()=>{h.current&&(h.current(),h.current=void 0)},100);return b.useEffect(()=>{const v=a.viewport;if(v){const y=()=>{if(g(),!h.current){const x=l5(v,u);h.current=x,u()}};return u(),v.addEventListener("scroll",y),()=>v.removeEventListener("scroll",y)}},[a.viewport,g,u]),p.jsx(Tt.div,{"data-state":l.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ut(t.onPointerDownCapture,v=>{const x=v.target.getBoundingClientRect(),S=v.clientX-x.left,_=v.clientY-x.top;l.onThumbPointerDown({x:S,y:_})}),onPointerUp:ut(t.onPointerUp,l.onThumbPointerUp)})});d1.displayName=Zu;var Hg="ScrollAreaCorner",f1=b.forwardRef((t,e)=>{const r=Fn(Hg,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?p.jsx(o5,{...t,ref:e}):null});f1.displayName=Hg;var o5=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,i=Fn(Hg,r),[a,l]=b.useState(0),[u,d]=b.useState(0),h=!!(a&&u);return ga(i.scrollbarX,()=>{const g=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(g),d(g)}),ga(i.scrollbarY,()=>{const g=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(g),l(g)}),h?p.jsx(Tt.div,{...n,ref:e,style:{width:a,height:u,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ju(t){return t?parseInt(t,10):0}function h1(t,e){const r=t/e;return isNaN(r)?0:r}function Td(t){const e=h1(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function a5(t,e,r,n="ltr"){const i=Td(r),a=i/2,l=e||a,u=i-l,d=r.scrollbar.paddingStart+l,h=r.scrollbar.size-r.scrollbar.paddingEnd-u,g=r.content-r.viewport,v=n==="ltr"?[0,g]:[g*-1,0];return p1([d,h],v)(t)}function bw(t,e,r="ltr"){const n=Td(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,l=e.content-e.viewport,u=a-n,d=r==="ltr"?[0,l]:[l*-1,0],h=ZI(t,d);return p1([0,l],[0,u])(h)}function p1(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function g1(t,e){return t>0&&t<e}var l5=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return(function i(){const a={left:t.scrollLeft,top:t.scrollTop},l=r.left!==a.left,u=r.top!==a.top;(l||u)&&e(),r=a,n=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(n)};function Cd(t,e){const r=vr(t),n=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(n.current),[]),b.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function ga(t,e){const r=vr(e);$n(()=>{let n=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(n),i.unobserve(t)}}},[t,r])}var m1=i1,c5=a1,u5=f1;const Kg=b.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(m1,{ref:n,className:ct("relative overflow-hidden",t),...r,children:[p.jsx(c5,{className:"h-full w-full rounded-[inherit]",children:e}),p.jsx(v1,{}),p.jsx(u5,{})]}));Kg.displayName=m1.displayName;const v1=b.forwardRef(({className:t,orientation:e="vertical",...r},n)=>p.jsx(qg,{ref:n,orientation:e,className:ct("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:p.jsx(d1,{className:"relative flex-1 rounded-full bg-border"})}));v1.displayName=qg.displayName;function d5({history:t}){const e=b.useRef(null);b.useEffect(()=>{if(e.current){const n=e.current.querySelector("[data-radix-scroll-area-viewport]");n&&(n.scrollTop=n.scrollHeight)}},[t]);const r=[];for(let n=0;n<t.length;n+=2)r.push({number:Math.floor(n/2)+1,white:t[n],black:t[n+1]||""});return p.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden flex flex-col h-full shadow-lg",children:[p.jsxs("div",{className:"px-4 py-3 bg-white/5 border-b border-white/5 flex justify-between items-center",children:[p.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Move History"}),p.jsxs("span",{className:"text-[10px] bg-indigo-500/20 text-indigo-300 px-2 py-0.5 rounded-full font-mono",children:[t.length," moves"]})]}),p.jsx(Kg,{className:"flex-1 p-4 h-[200px]",ref:e,children:p.jsx("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-y-1 gap-x-2 text-sm font-medium",children:r.map((n,i)=>p.jsxs("div",{className:"contents group",children:[p.jsxs("div",{className:"text-slate-600 font-mono py-1 text-right pr-1 group-hover:text-slate-400 transition-colors",children:[n.number,"."]}),p.jsx("div",{className:"bg-indigo-500/5 text-indigo-200 py-1 px-2 rounded hover:bg-indigo-500/10 transition-colors cursor-default text-center",children:n.white}),p.jsx("div",{className:`py-1 px-2 rounded transition-colors text-center cursor-default ${n.black?"bg-indigo-500/5 text-indigo-200 hover:bg-indigo-500/10":""}`,children:n.black})]},i))})})]})}function f5({messages:t,onSendMessage:e,disabled:r}){const[n,i]=b.useState(""),a=b.useRef(null);b.useEffect(()=>{if(a.current){const u=a.current.querySelector("[data-radix-scroll-area-viewport]");u&&(u.scrollTop=u.scrollHeight)}},[t]);const l=u=>{u.preventDefault(),n.trim()&&(e(n),i(""))};return p.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden flex flex-col h-[300px] lg:h-full",children:[p.jsx("div",{className:"px-4 py-3 bg-white/5 border-b border-white/5",children:p.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest text-indigo-400",children:"Tr chuyn trc tip"})}),p.jsx(Kg,{className:"flex-1 p-4",ref:a,children:p.jsxs("div",{className:"space-y-4",children:[t.length===0&&p.jsx("div",{className:"text-center text-slate-600 text-xs mt-4 italic",children:"Cha c tin nhn no. Hy ni xin cho!"}),t.map((u,d)=>p.jsxs("div",{className:`flex flex-col ${u.isMe?"items-end":"items-start"}`,children:[!u.isMe&&p.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 ml-1",children:u.sender}),p.jsx("div",{className:`
                  px-3 py-2 rounded-xl text-sm max-w-[85%] shadow-sm
                  ${u.isMe?"bg-indigo-600 text-white rounded-tr-sm":"bg-slate-800 text-slate-200 border border-white/5 rounded-tl-sm"}
                `,children:u.text})]},d))]})}),p.jsxs("form",{onSubmit:l,className:"p-3 bg-slate-900/50 border-t border-white/5 flex gap-2",children:[p.jsx(hs,{value:n,onChange:u=>i(u.target.value),placeholder:"Nhp tin nhn...",className:"bg-slate-800 border-none focus-visible:ring-indigo-500/50",disabled:r}),p.jsx(lt,{type:"submit",size:"icon",disabled:r||!n.trim(),className:"bg-indigo-600 hover:bg-indigo-500",children:p.jsx(_C,{className:"w-4 h-4"})})]})]})}function h5({evaluation:t,orientation:e}){const[r,n]=b.useState(50);b.useEffect(()=>{let a=0;if(t.startsWith("M")||t.startsWith("-M"))a=!t.startsWith("-")?100:-100;else{const u=parseFloat(t);isNaN(u)||(a=u)}let l=50+a*5;t.includes("M")&&(t.startsWith("-")?l=0:l=100),l=Math.max(2,Math.min(98,l)),n(l)},[t]);const i=e==="white";return p.jsxs("div",{className:"w-6 h-[400px] md:h-[500px] bg-slate-700 rounded-sm overflow-hidden flex flex-col relative border border-slate-600 shadow-inner",children:[p.jsx("div",{className:"absolute inset-0 bg-[#403d39] w-full h-full"}),p.jsx("div",{className:"absolute w-full bg-white transition-all duration-700 ease-in-out",style:{height:`${r}%`,[i?"bottom":"top"]:0}}),p.jsx("div",{className:`absolute w-full text-center text-[10px] font-bold z-10 
          ${i?r>50?"bottom-1 text-slate-800":"top-1 text-white":r>50?"top-1 text-slate-800":"bottom-1 text-white"}
      `,children:t})]})}function p5({fen:t}){const e=b.useMemo(()=>{const n={p:8,n:2,b:2,r:2,q:1},i={w:{p:0,n:0,b:0,r:0,q:0},b:{p:0,n:0,b:0,r:0,q:0}},a=t.split(" ")[0];for(const d of a){if(d==="/"||!isNaN(parseInt(d)))continue;const h=d===d.toUpperCase()?"w":"b",g=d.toLowerCase();i[h][g]!==void 0&&i[h][g]++}const l=[],u=[];return Object.keys(n).forEach(d=>{for(let h=0;h<n[d]-i.w[d];h++)l.push(`w${d.toUpperCase()}`);for(let h=0;h<n[d]-i.b[d];h++)u.push(`b${d.toUpperCase()}`)}),{whiteCaptured:l,blackCaptured:u}},[t]),r=n=>p.jsx("div",{className:"flex flex-wrap gap-0.5 min-h-[24px]",children:n.map((i,a)=>p.jsx("img",{src:`https://images.chesscomfiles.com/chess-themes/pieces/neo/150/${i.toLowerCase()}.png`,alt:i,className:"w-5 h-5 md:w-6 md:h-6 object-contain opacity-80"},a))});return p.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[p.jsxs("div",{className:"flex justify-between items-center bg-white/5 rounded-lg p-2 border border-white/10",children:[p.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"Captured by Black"}),r(e.whiteCaptured)]}),p.jsxs("div",{className:"flex justify-between items-center bg-white/5 rounded-lg p-2 border border-white/10",children:[p.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"Captured by White"}),r(e.blackCaptured)]})]})}function Od(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function g5(t,e,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(g){try{h(n.next(g))}catch(v){l(v)}}function d(g){try{h(n.throw(g))}catch(v){l(v)}}function h(g){g.done?a(g.value):i(g.value).then(u,d)}h((n=n.apply(t,e||[])).next())})}const m5=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Gg extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class v5 extends Gg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xw extends Gg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _w extends Gg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(zp||(zp={}));class y5{constructor(e,{headers:r={},customFetch:n,region:i=zp.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=m5(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return g5(this,arguments,void 0,function*(r,n={}){var i;let a,l;try{const{headers:u,method:d,body:h,signal:g,timeout:v}=n;let y={},{region:x}=n;x||(x=this.region);const S=new URL(`${this.url}/${r}`);x&&x!=="any"&&(y["x-region"]=x,S.searchParams.set("forceFunctionRegion",x));let _;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",_=h):typeof h=="string"?(y["Content-Type"]="text/plain",_=h):typeof FormData<"u"&&h instanceof FormData?_=h:(y["Content-Type"]="application/json",_=JSON.stringify(h)):_=h;let E=g;v&&(l=new AbortController,a=setTimeout(()=>l.abort(),v),g?(E=l.signal,g.addEventListener("abort",()=>l.abort())):E=l.signal);const C=yield this.fetch(S.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:_,signal:E}).catch(F=>{throw new v5(F)}),T=C.headers.get("x-relay-error");if(T&&T==="true")throw new xw(C);if(!C.ok)throw new _w(C);let O=((i=C.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),R;return O==="application/json"?R=yield C.json():O==="application/octet-stream"||O==="application/pdf"?R=yield C.blob():O==="text/event-stream"?R=C:O==="multipart/form-data"?R=yield C.formData():R=yield C.text(),{data:R,error:null,response:C}}catch(u){return{data:null,error:u,response:u instanceof _w||u instanceof xw?u.context:void 0}}finally{a&&clearTimeout(a)}})}}var w5=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},b5=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,u=null,d=null,h=a.status,g=a.statusText;if(a.ok){var v,y;if(r.method!=="HEAD"){var x;const C=await a.text();C===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?u=C:u=JSON.parse(C))}const _=(v=r.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),E=(y=a.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");_&&E&&E.length>1&&(d=parseInt(E[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var S;const _=await a.text();try{l=JSON.parse(_),Array.isArray(l)&&a.status===404&&(u=[],l=null,h=200,g="OK")}catch{a.status===404&&_===""?(h=204,g="No Content"):l={message:_}}if(l&&r.isMaybeSingle&&(!(l==null||(S=l.details)===null||S===void 0)&&S.includes("0 rows"))&&(l=null,h=200,g="OK"),l&&r.shouldThrowOnError)throw new w5(l)}return{error:l,data:u,count:d,status:h,statusText:g}});return this.shouldThrowOnError||(i=i.catch(a=>{var l;let u="";const d=a?.cause;if(d){var h,g,v,y;const S=(h=d?.message)!==null&&h!==void 0?h:"",_=(g=d?.code)!==null&&g!==void 0?g:"";u=`${(v=a?.name)!==null&&v!==void 0?v:"FetchError"}: ${a?.message}`,u+=`

Caused by: ${(y=d?.name)!==null&&y!==void 0?y:"Error"}: ${S}`,_&&(u+=` (${_})`),d?.stack&&(u+=`
${d.stack}`)}else{var x;u=(x=a?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(l=a?.name)!==null&&l!==void 0?l:"FetchError"}: ${a?.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},x5=class extends b5{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var l;const u=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${u};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Sw=new RegExp("[,()]");var Zo=class extends x5{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Sw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Sw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},_5=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}select(t,e){const{head:r=!1,count:n}=e??{},i=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new Zo({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Zo({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new Zo({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:e}={}){var r;const n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Zo({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Zo({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},S5=class y1{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _5(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new y1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:a}={}){var l;let u;const d=new URL(`${this.url}/rpc/${e}`);let h;n||i?(u=n?"HEAD":"GET",Object.entries(r).filter(([v,y])=>y!==void 0).map(([v,y])=>[v,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([v,y])=>{d.searchParams.append(v,y)})):(u="POST",h=r);const g=new Headers(this.headers);return a&&g.set("Prefer",`count=${a}`),new Zo({method:u,url:d,headers:g,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class k5{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const E5="2.89.0",T5=`realtime-js/${E5}`,w1="1.0.0",C5="2.0.0",kw=w1,Vp=1e4,O5=1e3,P5=100;var wi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(wi||(wi={}));var gr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(gr||(gr={}));var Xn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Xn||(Xn={}));var qp;(function(t){t.websocket="websocket"})(qp||(qp={}));var Zi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Zi||(Zi={}));class N5{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,r,n){var i,a;const l=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",d=(a=e.join_ref)!==null&&a!==void 0?a:"",h=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(g).length===0?"":JSON.stringify(g);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+h.length+v.length,x=new ArrayBuffer(this.HEADER_LENGTH+y);let S=new DataView(x),_=0;S.setUint8(_++,this.KINDS.userBroadcastPush),S.setUint8(_++,d.length),S.setUint8(_++,u.length),S.setUint8(_++,l.length),S.setUint8(_++,h.length),S.setUint8(_++,v.length),S.setUint8(_++,r),Array.from(d,C=>S.setUint8(_++,C.charCodeAt(0))),Array.from(u,C=>S.setUint8(_++,C.charCodeAt(0))),Array.from(l,C=>S.setUint8(_++,C.charCodeAt(0))),Array.from(h,C=>S.setUint8(_++,C.charCodeAt(0))),Array.from(v,C=>S.setUint8(_++,C.charCodeAt(0)));var E=new Uint8Array(x.byteLength+n.byteLength);return E.set(new Uint8Array(x),0),E.set(new Uint8Array(n),x.byteLength),E.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,a,l,u,d]=n;return r({join_ref:i,ref:a,topic:l,event:u,payload:d})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,r,i)}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2),l=r.getUint8(3),u=r.getUint8(4);let d=this.HEADER_LENGTH+4;const h=n.decode(e.slice(d,d+i));d=d+i;const g=n.decode(e.slice(d,d+a));d=d+a;const v=n.decode(e.slice(d,d+l));d=d+l;const y=e.slice(d,e.byteLength),x=u===this.JSON_ENCODING?JSON.parse(n.decode(y)):y,S={type:this.BROADCAST_EVENT,event:g,payload:x};return l>0&&(S.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class b1{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var It;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(It||(It={}));const Ew=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=j5(l,t,e,i),a),{}):{}},j5=(t,e,r,n)=>{const i=e.find(u=>u.name===t),a=i?.type,l=r[t];return a&&!n.includes(a)?x1(a,l):Wp(l)},x1=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return D5(e,r)}switch(t){case It.bool:return R5(e);case It.float4:case It.float8:case It.int2:case It.int4:case It.int8:case It.numeric:case It.oid:return A5(e);case It.json:case It.jsonb:return I5(e);case It.timestamp:return L5(e);case It.abstime:case It.date:case It.daterange:case It.int4range:case It.int8range:case It.money:case It.reltime:case It.text:case It.time:case It.timestamptz:case It.timetz:case It.tsrange:case It.tstzrange:return Wp(e);default:return Wp(e)}},Wp=t=>t,R5=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},A5=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},I5=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},D5=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const l=t.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>x1(e,u))}return t},L5=t=>typeof t=="string"?t.replace(" ","T"):t,_1=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Gh{constructor(e,r,n={},i=Vp){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Tw||(Tw={}));class _l{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_l.syncState(this.state,i,a,l),this.pendingDiffs.forEach(d=>{this.state=_l.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=_l.syncDiff(this.state,i,a,l),u())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),l=this.transformState(r),u={},d={};return this.map(a,(h,g)=>{l[h]||(d[h]=g)}),this.map(l,(h,g)=>{const v=a[h];if(v){const y=g.map(E=>E.presence_ref),x=v.map(E=>E.presence_ref),S=g.filter(E=>x.indexOf(E.presence_ref)<0),_=v.filter(E=>y.indexOf(E.presence_ref)<0);S.length>0&&(u[h]=S),_.length>0&&(d[h]=_)}else u[h]=g}),this.syncDiff(a,{joins:u,leaves:d},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(u,d)=>{var h;const g=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(d),g.length>0){const v=e[u].map(x=>x.presence_ref),y=g.filter(x=>v.indexOf(x.presence_ref)<0);e[u].unshift(...y)}n(u,g,d)}),this.map(l,(u,d)=>{let h=e[u];if(!h)return;const g=d.map(v=>v.presence_ref);h=h.filter(v=>g.indexOf(v.presence_ref)<0),e[u]=h,i(u,h,d),h.length===0&&delete e[u]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Cw||(Cw={}));var Sl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Sl||(Sl={}));var Ls;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ls||(Ls={}));class ta{constructor(e,r={config:{}},n){var i,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=gr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gh(this,Xn.join,this.params,this.timeout),this.rejoinTimer=new b1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=gr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=gr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xn.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new _l(this),this.broadcastEndpointURL=_1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==gr.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,h=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[Sl.PRESENCE]&&this.bindings[Sl.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,v={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(x=>e?.(Ls.CHANNEL_ERROR,x)),this._onClose(()=>e?.(Ls.CLOSED)),this.updateJoinPayload(Object.assign({config:y},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){e?.(Ls.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,E=(S=_?.length)!==null&&S!==void 0?S:0,C=[];for(let T=0;T<E;T++){const O=_[T],{filter:{event:R,schema:F,table:B,filter:M}}=O,X=x&&x[T];if(X&&X.event===R&&ta.isFilterValueEqual(X.schema,F)&&ta.isFilterValueEqual(X.table,B)&&ta.isFilterValueEqual(X.filter,M))C.push(Object.assign(Object.assign({},O),{id:X.id}));else{this.unsubscribe(),this.state=gr.errored,e?.(Ls.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Ls.SUBSCRIBED);return}}).receive("error",x=>{this.state=gr.errored,e?.(Ls.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ls.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===gr.joined&&e===Sl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const h=await u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const h=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),h.receive("ok",()=>a("ok")),h.receive("error",()=>a("error")),h.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=gr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Gh(this,Xn.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),l}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Gh(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>P5){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:h,join:g}=Xn;if(n&&[u,d,h,g].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var S,_,E;return((S=x.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(_=x.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(x=>x.callback(y,n)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var S,_,E,C,T,O;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const R=x.id,F=(S=x.filter)===null||S===void 0?void 0:S.event;return R&&((_=r.ids)===null||_===void 0?void 0:_.includes(R))&&(F==="*"||F?.toLocaleLowerCase()===((E=r.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const R=(T=(C=x?.filter)===null||C===void 0?void 0:C.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return R==="*"||R===((O=r?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const S=y.data,{schema:_,table:E,commit_timestamp:C,type:T,errors:O}=S;y=Object.assign(Object.assign({},{schema:_,table:E,commit_timestamp:C,eventType:T,new:{},old:{},errors:O}),this._getPayloadRecords(S))}x.callback(y,n)})}_isClosed(){return this.state===gr.closed}_isJoined(){return this.state===gr.joined}_isJoining(){return this.state===gr.joining}_isLeaving(){return this.state===gr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&ta.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xn.close,{},e)}_onError(e){this._on(Xn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Ew(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Ew(e.columns,e.old_record)),r}}const Qh=()=>{},pu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},M5=[1e3,2e3,5e3,1e4],$5=1e4,F5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class U5{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Vp,this.transport=null,this.heartbeatIntervalMs=pu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qh,this.ref=0,this.reconnectTimer=null,this.vsn=kw,this.logger=Qh,this.conn=null,this.sendBuffer=[],this.serializer=new N5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${qp.websocket}`,this.httpEndpoint=_1(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=k5.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case wi.connecting:return Zi.Connecting;case wi.open:return Zi.Open;case wi.closing:return Zi.Closing;default:return Zi.Closed}}isConnected(){return this.connectionState()===Zi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new ta(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(O5,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},pu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:l}=r,u=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${i} ${u}`.trim(),a),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(i,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===wi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===wi.open||this.conn.readyState===wi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([F5],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const a={access_token:r,version:T5};r&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Xn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new b1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,a,l,u,d,h,g,v,y,x;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:Vp,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:pu.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:Qh,this.vsn=(d=e?.vsn)!==null&&d!==void 0?d:kw,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(S=>M5[S-1]||$5),this.vsn){case w1:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((S,_)=>_(JSON.stringify(S))),this.decode=(v=e?.decode)!==null&&v!==void 0?v:((S,_)=>_(JSON.parse(S)));break;case C5:this.encode=(y=e?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var Vl=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function B5(t,e,r){const n=new URL(e,t);if(r)for(const[i,a]of Object.entries(r))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function z5(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function V5(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:l}){const u=B5(t.baseUrl,n,i),d=await z5(t.auth),h=await e(u,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...d,...l},body:a?JSON.stringify(a):void 0}),g=await h.text(),v=(h.headers.get("content-type")||"").includes("application/json"),y=v&&g?JSON.parse(g):g;if(!h.ok){const x=v?y:void 0,S=x?.error;throw new Vl(S?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:S?.type,icebergCode:S?.code,details:x})}return{status:h.status,headers:h.headers,data:y}}}}function gu(t){return t.join("")}var q5=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:gu(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gu(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gu(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gu(t.namespace)}`}),!0}catch(e){if(e instanceof Vl&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Vl&&r.status===409)return;throw r}}};function Vo(t){return t.join("")}var W5=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Vl&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Vl&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},H5=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=V5({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new q5(this.client,e),this.tableOps=new W5(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Pd=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Wt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var K5=class extends Pd{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Hp=class extends Pd{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Qg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),G5=()=>Response,Kp=t=>{if(Array.isArray(t))return t.map(r=>Kp(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Kp(n)}),e},Q5=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Y5=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function ql(t){"@babel/helpers - typeof";return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ql(t)}function Z5(t,e){if(ql(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ql(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function J5(t){var e=Z5(t,"string");return ql(e)=="symbol"?e:e+""}function X5(t,e,r){return(e=J5(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ow(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ow(Object(r),!0).forEach(function(n){X5(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ow(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const Yh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},eD=async(t,e,r)=>{t instanceof await G5()&&!r?.noResolveJson?t.json().then(n=>{const i=t.status||500,a=n?.statusCode||i+"";e(new K5(Yh(n),i,a))}).catch(n=>{e(new Hp(Yh(n),n))}):e(new Hp(Yh(t),t))},tD=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!n?i:(Q5(n)?(i.headers=qe({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),qe(qe({},i),r))};async function tc(t,e,r,n,i,a){return new Promise((l,u)=>{t(r,tD(e,n,i,a)).then(d=>{if(!d.ok)throw d;return n?.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>eD(d,u,n))})}async function Wl(t,e,r,n){return tc(t,"GET",e,r,n)}async function Jn(t,e,r,n,i){return tc(t,"POST",e,n,i,r)}async function Gp(t,e,r,n,i){return tc(t,"PUT",e,n,i,r)}async function rD(t,e,r,n){return tc(t,"HEAD",e,qe(qe({},r),{},{noResolveJson:!0}),n)}async function Yg(t,e,r,n,i){return tc(t,"DELETE",e,n,i,r)}var nD=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Wt(e))return{data:null,error:e};throw e}}};let S1;S1=Symbol.toStringTag;var sD=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[S1]="BlobDownloadBuilder",this.promise=null}asStream(){return new nD(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Wt(e))return{data:null,error:e};throw e}}};const iD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var oD=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=Qg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var i=this;try{let a;const l=qe(qe({},Pw),n);let u=qe(qe({},i.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",i.encodeMetadata(d)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),d&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(d))):(a=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=i.toBase64(i.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),n?.headers&&(u=qe(qe({},u),n.headers));const h=i._removeEmptyFolders(e),g=i._getFinalPath(h),v=await(t=="PUT"?Gp:Jn)(i.fetch,`${i.url}/object/${g}`,a,qe({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:v.Id,fullPath:v.Key},error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var i=this;const a=i._removeEmptyFolders(t),l=i._getFinalPath(a),u=new URL(i.url+`/object/upload/sign/${l}`);u.searchParams.set("token",e);try{let d;const h=qe({upsert:Pw.upsert},n),g=qe(qe({},i.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType),{data:{path:a,fullPath:(await Gp(i.fetch,u.toString(),d,{headers:g})).Key},error:null}}catch(d){if(i.shouldThrowOnError)throw d;if(Wt(d))return{data:null,error:d};throw d}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const i=qe({},r.headers);e?.upsert&&(i["x-upsert"]="true");const a=await Jn(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),l=new URL(r.url+a.url),u=l.searchParams.get("token");if(!u)throw new Pd("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await Jn(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async copy(t,e,r){var n=this;try{return{data:{path:(await Jn(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,r){var n=this;try{let i=n._getFinalPath(t),a=await Jn(n.fetch,`${n.url}/object/sign/${i}`,qe({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${n.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,r){var n=this;try{const i=await Jn(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>qe(qe({},l),{},{signedUrl:l.signedURL?encodeURI(`${n.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}download(t,e){const r=typeof e?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(e?.transform||{}),i=n?`?${n}`:"",a=this._getFinalPath(t),l=()=>Wl(this.fetch,`${this.url}/${r}/${a}${i}`,{headers:this.headers,noResolveJson:!0});return new sD(l,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:Kp(await Wl(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await rD(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Wt(n)&&n instanceof Hp){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}async remove(t){var e=this;try{return{data:await Yg(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const i=qe(qe(qe({},iD),e),{},{prefix:t||""});return{data:await Jn(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async listV2(t,e){var r=this;try{const n=qe({},t);return{data:await Jn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const k1="2.89.0",E1={"X-Client-Info":`storage-js/${k1}`};var aD=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const i=new URL(t);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=qe(qe({},E1),e),this.fetch=Qg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await Wl(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Wl(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await Jn(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await Gp(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await Jn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Yg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},lD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=qe(qe({},E1),e),this.fetch=Qg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Jn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const n=r.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await Wl(e.fetch,i,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Yg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!Y5(t))throw new Pd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new H5({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,a){const l=i[a];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(i,u),error:null}}catch(d){if(n)throw d;return{data:null,error:d}}}}})}};const Zg={"X-Client-Info":`storage-js/${k1}`,"Content-Type":"application/json"};var T1=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function _n(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Zh=class extends T1{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},cD=class extends T1{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Jg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Nw=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dD=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const n=t.status||500,i=t;if(typeof i.json=="function")i.json().then(a=>{const l=a?.statusCode||a?.code||n+"";e(new Zh(Nw(a),n,l))}).catch(()=>{const a=n+"";e(new Zh(i.statusText||`HTTP ${n} error`,n,a))});else{const a=n+"";e(new Zh(i.statusText||`HTTP ${n} error`,n,a))}}else e(new cD(Nw(t),t))},fD=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return n?(uD(n)?(i.headers=qe({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,qe(qe({},i),r)):i};async function hD(t,e,r,n,i,a){return new Promise((l,u)=>{t(r,fD(e,n,i,a)).then(d=>{if(!d.ok)throw d;if(n?.noResolveJson)return d;const h=d.headers.get("content-type");return!h||!h.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>dD(d,u,n))})}async function Sn(t,e,r,n,i){return hD(t,"POST",e,n,i,r)}var pD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=qe(qe({},Zg),e),this.fetch=Jg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Sn(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await Sn(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await Sn(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await Sn(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}}},gD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=qe(qe({},Zg),e),this.fetch=Jg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Sn(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await Sn(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Sn(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await Sn(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Sn(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}},mD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=qe(qe({},Zg),e),this.fetch=Jg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Sn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Sn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await Sn(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Sn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}}},vD=class extends mD{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new yD(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},yD=class extends pD{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,qe(qe({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,qe(qe({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new wD(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},wD=class extends gD{constructor(t,e,r,n,i){super(t,e,i),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,qe(qe({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,qe(qe({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,qe(qe({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,qe(qe({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,qe(qe({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},bD=class extends aD{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new oD(this.url,this.headers,t,this.fetch)}get vectors(){return new vD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lD(this.url+"/iceberg",this.headers,this.fetch)}};const C1="2.89.0",Jo=30*1e3,Qp=3,Jh=Qp*Jo,xD="http://localhost:9999",_D="supabase.auth.token",SD={"X-Client-Info":`gotrue-js/${C1}`},Yp="X-Supabase-Api-Version",O1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ED=600*1e3;class Hl extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class TD extends Hl{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function CD(t){return Ie(t)&&t.name==="AuthApiError"}class Ji extends Hl{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Ws extends Hl{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class yn extends Ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function OD(t){return Ie(t)&&t.name==="AuthSessionMissingError"}class qo extends Ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mu extends Ws{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class vu extends Ws{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function PD(t){return Ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class jw extends Ws{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ND extends Ws{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Zp extends Ws{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Xh(t){return Ie(t)&&t.name==="AuthRetryableFetchError"}class Rw extends Ws{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Jp extends Ws{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Aw=` 	
\r=`.split(""),jD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Aw.length;e+=1)t[Aw[e].charCodeAt(0)]=-2;for(let e=0;e<Xu.length;e+=1)t[Xu[e].charCodeAt(0)]=e;return t})();function Iw(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Xu[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Xu[n]),e.queuedBits-=6}}function P1(t,e,r){const n=jD[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Dw(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{ID(l,n,r)};for(let l=0;l<t.length;l+=1)P1(t.charCodeAt(l),i,a);return e.join("")}function RD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function AD(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}RD(n,e)}}function ID(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function la(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)P1(t.charCodeAt(i),r,n);return new Uint8Array(e)}function DD(t){const e=[];return AD(t,r=>e.push(r)),new Uint8Array(e)}function eo(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>Iw(i,r,n)),Iw(null,r,n),e.join("")}function LD(t){return Math.round(Date.now()/1e3)+t}function MD(){return Symbol("auth-callback")}const Lr=()=>typeof window<"u"&&typeof document<"u",Ki={tested:!1,writable:!1},N1=()=>{if(!Lr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ki.tested)return Ki.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ki.tested=!0,Ki.writable=!0}catch{Ki.tested=!0,Ki.writable=!1}return Ki.writable};function $D(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const j1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),FD=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Xo=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Gi=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ir=async(t,e)=>{await t.removeItem(e)};class Nd{constructor(){this.promise=new Nd.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Nd.promiseConstructor=Promise;function ep(t){const e=t.split(".");if(e.length!==3)throw new Jp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!kD.test(e[n]))throw new Jp("JWT not in base64url format");return{header:JSON.parse(Dw(e[0])),payload:JSON.parse(Dw(e[1])),signature:la(e[2]),raw:{header:e[0],payload:e[1]}}}async function UD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function BD(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){n(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function zD(t){return("0"+t.toString(16)).substr(-2)}function VD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,zD).join("")}async function qD(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function WD(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await qD(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wo(t,e,r=!1){const n=VD();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Xo(t,`${e}-code-verifier`,i);const a=await WD(n);return[a,n===a?"plain":"s256"]}const HD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KD(t){const e=t.headers.get(Yp);if(!e||!e.match(HD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function GD(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function QD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const YD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ho(t){if(!YD.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tp(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ZD(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function Lw(t){return JSON.parse(JSON.stringify(t))}const Qi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),JD=[502,503,504];async function Mw(t){var e;if(!FD(t))throw new Zp(Qi(t),0);if(JD.includes(t.status))throw new Zp(Qi(t),t.status);let r;try{r=await t.json()}catch(a){throw new Ji(Qi(a),a)}let n;const i=KD(t);if(i&&i.getTime()>=O1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Rw(Qi(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new yn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Rw(Qi(r),t.status,r.weak_password.reasons);throw new TD(Qi(r),t.status||500,n)}const XD=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function Ve(t,e,r,n){var i;const a=Object.assign({},n?.headers);a[Yp]||(a[Yp]=O1["2024-01-01"].name),n?.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await eL(t,e,r+u,{headers:a,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(d):{data:Object.assign({},d),error:null}}async function eL(t,e,r,n,i,a){const l=XD(e,n,i,a);let u;try{u=await t(r,Object.assign({},l))}catch(d){throw console.error(d),new Zp(Qi(d),0)}if(u.ok||await Mw(u),n?.noResolveJson)return u;try{return await u.json()}catch(d){await Mw(d)}}function Yn(t){var e;let r=null;nL(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=LD(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function $w(t){const e=Yn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function xi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function tL(t){return{data:t,error:null}}function rL(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,l=Od(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function Fw(t){return t}function nL(t){return t.access_token&&t.refresh_token&&t.expires_in}const rp=["global","local","others"];class sL{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=j1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=rp[0]){if(rp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rp.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:xi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Od(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:rL,redirectTo:r?.redirectTo})}catch(r){if(Ie(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},g=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Fw});if(g.error)throw g.error;const v=await g.json(),y=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);h[`${E}Page`]=_}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(Ie(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Ho(e);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Ho(e);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:xi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Ho(e);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:xi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ho(e.userId);try{const{data:r,error:n}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Ho(e.userId),Ho(e.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,a,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},g=await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Fw});if(g.error)throw g.error;const v=await g.json(),y=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);h[`${E}Page`]=_}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(Ie(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ie(r))return{data:null,error:r};throw r}}}function Uw(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Ko={debug:!!(globalThis&&N1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class R1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class iL extends R1{}async function oL(t,e,r){Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new iL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ko.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function aL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function A1(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function lL(t){return parseInt(t,16)}function cL(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function uL(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:d,resources:h,scheme:g,uri:v,version:y}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const x=A1(t.address),S=g?`${g}://${n}`:n,_=t.statement?`${t.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${x}

${_}`;let C=`URI: ${v}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),u&&(C+=`
Not Before: ${u.toISOString()}`),d&&(C+=`
Request ID: ${d}`),h){let T=`
Resources:`;for(const O of h){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);T+=`
- ${O}`}C+=T}return`${E}
${C}`}class ur extends Error{constructor({message:e,code:r,cause:n,name:i}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class ed extends ur{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function dL({error:t,options:e}){var r,n,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ur({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ur({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ur({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ur({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ur({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ur({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new ur({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ur({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(I1(l)){if(a.rp.id!==l)return new ur({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ur({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ur({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ur({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ur({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function fL({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ur({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ur({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(I1(n)){if(r.rpId!==n)return new ur({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ur({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ur({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ur({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class hL{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const pL=new hL;function gL(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Od(t,["challenge","user","excludeCredentials"]),a=la(e).buffer,l=Object.assign(Object.assign({},r),{id:la(r.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:a,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const h=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},h),{id:la(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function mL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Od(t,["challenge","allowCredentials"]),i=la(e).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:la(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function vL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:eo(new Uint8Array(t.response.attestationObject)),clientDataJSON:eo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function yL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:eo(new Uint8Array(i.authenticatorData)),clientDataJSON:eo(new Uint8Array(i.clientDataJSON)),signature:eo(new Uint8Array(i.signature)),userHandle:i.userHandle?eo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function I1(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Bw(){var t,e;return!!(Lr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function wL(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ed("Browser returned unexpected credential type",e)}:{data:null,error:new ed("Empty credential response",e)}}catch(e){return{data:null,error:dL({error:e,options:t})}}}async function bL(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ed("Browser returned unexpected credential type",e)}:{data:null,error:new ed("Empty credential response",e)}}catch(e){return{data:null,error:fL({error:e,options:t})}}}const xL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},_L={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function td(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const a in i){const l=i[a];if(l!==void 0)if(Array.isArray(l))n[a]=l;else if(r(l))n[a]=l;else if(e(l)){const u=n[a];e(u)?n[a]=td(u,l):n[a]=td(l)}else n[a]=l}return n}function SL(t,e){return td(xL,t,e||{})}function kL(t,e){return td(_L,t,e||{})}class EL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:u};const d=i??pL.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${n}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=SL(l.webauthn.credential_options.publicKey,a?.create),{data:g,error:v}=await wL({publicKey:h,signal:d});return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}case"request":{const h=kL(l.webauthn.credential_options.publicKey,a?.request),{data:g,error:v}=await bL(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:d}));return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}}}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Ji("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Hl("rpId is required for WebAuthn authentication")};try{if(!Bw())return{data:null,error:new Ji("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Ji("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Hl("rpId is required for WebAuthn registration")};try{if(!Bw())return{data:null,error:new Ji("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(g=>{var v;return(v=g.data)===null||v===void 0?void 0:v.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:u};const{data:d,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Ji("Unexpected error in register",l)}}}}aL();const TL={url:xD,storageKey:_D,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:SD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function zw(t,e,r){return await r()}const Go={};class Kl{get jwks(){var e,r;return(r=(e=Go[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Go[this.storageKey]=Object.assign(Object.assign({},Go[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Go[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Go[this.storageKey]=Object.assign(Object.assign({},Go[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},TL),e);if(this.storageKey=a.storageKey,this.instanceID=(r=Kl.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Kl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Lr()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new sL({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=j1(a.fetch),this.lock=a.lock||zw,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&Lr()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=oL:this.lock=zw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new EL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:N1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Uw(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Uw(this.memoryStorage)),Lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${C1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Lr()&&(r=$D(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Lr()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),PD(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ie(r)?this._returnResult({error:r}):this._returnResult({error:new Ji("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Yn}),{data:l,error:u}=a;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(a){if(Ie(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:g,password:v,options:y}=e;let x=null,S=null;this.flowType==="pkce"&&([x,S]=await Wo(this.storage,this.storageKey)),a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:g,password:v,data:(r=y?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:x,code_challenge_method:S},xform:Yn})}else if("phone"in e){const{phone:g,password:v,options:y}=e;a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(n=y?.data)!==null&&n!==void 0?n:{},channel:(i=y?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:Yn})}else throw new mu("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return await Ir(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(a){if(await Ir(this.storage,`${this.storageKey}-code-verifier`),Ie(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:l,options:u}=e;r=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:$w})}else if("phone"in e){const{phone:a,password:l,options:u}=e;r=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:$w})}else throw new mu("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new qo;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,a,l,u,d,h,g,v,y;let x,S;if("message"in e)x=e.message,S=e.signature;else{const{chain:_,wallet:E,statement:C,options:T}=e;let O;if(Lr())if(typeof E=="object")O=E;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")O=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=E}const R=new URL((r=T?.url)!==null&&r!==void 0?r:window.location.href),F=await O.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=A1(F[0]);let M=(n=T?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const V=await O.request({method:"eth_chainId"});M=lL(V)}const X={domain:R.host,address:B,statement:C,uri:R.href,version:"1",chainId:M,nonce:(i=T?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(a=T?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=T?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=T?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=T?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(g=T?.signInWithEthereum)===null||g===void 0?void 0:g.resources};x=uL(X),S=await O.request({method:"personal_sign",params:[cL(x),B]})}try{const{data:_,error:E}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:S},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Yn});if(E)throw E;if(!_||!_.session||!_.user){const C=new qo;return this._returnResult({data:{user:null,session:null},error:C})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:E})}catch(_){if(Ie(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var r,n,i,a,l,u,d,h,g,v,y,x;let S,_;if("message"in e)S=e.message,_=e.signature;else{const{chain:E,wallet:C,statement:T,options:O}=e;let R;if(Lr())if(typeof C=="object")R=C;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))R=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=C}const F=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in R&&R.signIn){const B=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),T?{statement:T}:null));let M;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")M=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)M=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)S=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),_=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${F.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(i=(n=O?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=O?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((l=O?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((u=O?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((d=O?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((h=O?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((v=(g=O?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...O.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const B=await R.signMessage(new TextEncoder().encode(S),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=B}}try{const{data:E,error:C}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:eo(_)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Yn});if(C)throw C;if(!E||!E.session||!E.user){const T=new qo;return this._returnResult({data:{user:null,session:null},error:T})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(Ie(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const r=await Gi(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new ND;const{data:a,error:l}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Yn});if(await Ir(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const u=new qo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(await Ir(this.storage,`${this.storageKey}-code-verifier`),Ie(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:l}=e,u=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Yn}),{data:d,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d||!d.session||!d.user){const g=new qo;return this._returnResult({data:{user:null,session:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:h})}catch(r){if(Ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,a,l;try{if("email"in e){const{email:u,options:d}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Wo(this.storage,this.storageKey));const{error:v}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(n=d?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:u,options:d}=e,{data:h,error:g}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:g})}throw new mu("You must provide either an email or phone number.")}catch(u){if(await Ir(this.storage,`${this.storageKey}-code-verifier`),Ie(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Yn});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,h=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(i){if(Ie(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,a,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Wo(this.storage,this.storageKey));const h=await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:tL});return!((a=h.data)===null||a===void 0)&&a.url&&Lr()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await Ir(this.storage,`${this.storageKey}-code-verifier`),Ie(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new yn;const{error:i}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Ie(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:l}=await Ve(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:l,error:u}=await Ve(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:u})}throw new mu("You must provide either an email or phone number and a type")}catch(r){if(Ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Gi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Jh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await Gi(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=tp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=ZD(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xi}):await this._useSession(async r=>{var n,i,a;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yn}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:xi})})}catch(r){if(Ie(r))return OD(r)&&(await this._removeSession(),await Ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new yn;const l=i.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Wo(this.storage,this.storageKey));const{data:h,error:g}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:xi});if(g)throw g;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(await Ir(this.storage,`${this.storageKey}-code-verifier`),Ie(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new yn;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:l}=ep(e.access_token);if(l.exp&&(n=l.exp,i=n<=r),i){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(Ie(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:l,error:u}=r;if(u)throw u;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new yn;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Lr())throw new vu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new vu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new jw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jw("No code detected.");const{data:T,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:h}=e;if(!a||!u||!l||!h)throw new vu("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(u);let y=g+v;d&&(y=parseInt(d));const x=y-g;x*1e3<=Jo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${v}s`);const S=y-v;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,y,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,y,g);const{data:_,error:E}=await this._getUser(a);if(E)throw E;const C={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:v,expires_at:y,refresh_token:l,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(n){if(Ie(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Gi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({error:a});const l=(n=i.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(CD(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=MD(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Wo(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Ir(this.storage,`${this.storageKey}-code-verifier`),Ie(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var l,u,d,h,g;const{data:v,error:y}=a;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",x,{headers:this.headers,jwt:(g=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return Lr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(Ie(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:l,provider:u,token:d,access_token:h,nonce:g}=e,v=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:h,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Yn}),{data:y,error:x}=v;return x?this._returnResult({data:{user:null,session:null},error:x}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new qo}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:x}))}catch(i){if(await Ir(this.storage,`${this.storageKey}-code-verifier`),Ie(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:l}=r;if(l)throw l;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await BD(async i=>(i>0&&await UD(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Yn})),(i,a)=>{const l=200*Math.pow(2,i);return a&&Xh(a)&&Date.now()+l-n<Jo})}catch(n){if(this._debug(r,"error",n),Ie(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Lr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Gi(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Gi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Xo(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:tp()}else if(i&&!i.user&&!i.user){const l=await Gi(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await Ir(this.storage,this.storageKey+"-user"),await Xo(this.storage,this.storageKey,i)):i.user=tp()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Jh;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Jh}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Xh(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new yn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Nd;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new yn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(i,"error",a),Ie(a)){const l={data:null,error:a};return Xh(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,r)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ir(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Xo(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=Lw(i);await Xo(this.storage,this.storageKey,a)}else{const i=Lw(r);await Xo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ir(this.storage,this.storageKey),await Ir(this.storage,this.storageKey+"-code-verifier"),await Ir(this.storage,this.storageKey+"-user"),this.userStorage&&await Ir(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Lr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Jo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Jo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Jo}ms, refresh threshold is ${Qp} ticks`),i<=Qp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof R1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Lr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Wo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(n?.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await Ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:h}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&d.type==="totp"&&(!((i=d?.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?vL(e.webauthn.credential_response):yL(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:gL(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:mL(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ep(n.access_token);let l=null;a.aal&&(l=a.aal);let u=l;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const h=a.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await Ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new yn})})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new yn});const l=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Lr()&&!r?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new yn});const l=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Lr()&&!r?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await Ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new yn})})}catch(e){if(Ie(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await Ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new yn})})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(u=>u.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(u=>u.kid===e),n&&this.jwks_cached_at+ED>i)return n;const{data:a,error:l}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(u=>u.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:x,error:S}=await this.getSession();if(S||!x.session)return this._returnResult({data:null,error:S});n=x.session.access_token}const{header:i,payload:a,signature:l,raw:{header:u,payload:d}}=ep(n);r?.allowExpired||GD(a.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!h){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:a,header:i,signature:l},error:null}}const g=QD(i.alg),v=await crypto.subtle.importKey("jwk",h,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,l,DD(`${u}.${d}`)))throw new Jp("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}}Kl.nextInstanceID={};const CL=Kl,OL="2.89.0";let pl="";typeof Deno<"u"?pl="deno":typeof document<"u"?pl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pl="react-native":pl="node";const PL={"X-Client-Info":`supabase-js-${pl}/${OL}`},NL={headers:PL},jL={schema:"public"},RL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},AL={};function Gl(t){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(t)}function IL(t,e){if(Gl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DL(t){var e=IL(t,"string");return Gl(e)=="symbol"?e:e+""}function LL(t,e,r){return(e=DL(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Yt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vw(Object(r),!0).forEach(function(n){LL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const ML=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),$L=()=>Headers,FL=(t,e,r)=>{const n=ML(r),i=$L();return async(a,l)=>{var u;const d=(u=await e())!==null&&u!==void 0?u:t;let h=new i(l?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),n(a,Yt(Yt({},l),{},{headers:h}))}};function UL(t){return t.endsWith("/")?t:t+"/"}function BL(t,e){var r,n;const{db:i,auth:a,realtime:l,global:u}=t,{db:d,auth:h,realtime:g,global:v}=e,y={db:Yt(Yt({},d),i),auth:Yt(Yt({},h),a),realtime:Yt(Yt({},g),l),storage:{},global:Yt(Yt(Yt({},v),u),{},{headers:Yt(Yt({},(r=v?.headers)!==null&&r!==void 0?r:{}),(n=u?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function zL(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(UL(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var VL=class extends CL{constructor(t){super(t)}},qL=class{constructor(t,e,r){var n,i;this.supabaseUrl=t,this.supabaseKey=e;const a=zL(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:jL,realtime:AL,auth:Yt(Yt({},RL),{},{storageKey:l}),global:NL},d=BL(r??{},u);if(this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=d.auth)!==null&&h!==void 0?h:{},this.headers,d.global.fetch)}this.fetch=FL(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Yt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new S5(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new bD(this.storageUrl.href,this.headers,this.fetch,r?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new y5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:a,flowType:l,lock:u,debug:d,throwOnError:h},g,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new VL({url:this.authUrl.href,headers:Yt(Yt({},y),g),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,flowType:l,lock:u,debug:d,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new U5(this.realtimeUrl.href,Yt(Yt({},t),{},{params:Yt(Yt({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const WL=(t,e,r)=>new qL(t,e,r);function HL(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}HL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const D1={},KL=D1?.VITE_SUPABASE_URL||"https://fersigqisuhgyidehkci.supabase.co",GL=D1?.VITE_SUPABASE_ANON_KEY||"sb_publishable_ULaZnmy69ARyAKDqdoQRMg_PmhnpYdF",QL=WL(KL,GL,{auth:{persistSession:!1},realtime:{params:{eventsPerSecond:10}}});function YL(){const{mode:t,id:e}=ab(),[r,n]=po(),{user:i}=mo(),{toast:a}=go(),[l,u]=b.useState(new mi),[d,h]=b.useState(l.fen()),[g,v]=b.useState([]),[y,x]=b.useState("white"),[S,_]=b.useState(null),[E,C]=b.useState([]),[T,O]=b.useState(!1),[R,F]=b.useState(!0),[B,M]=b.useState(null),[X,V]=b.useState(!1),[W,te]=b.useState(null),[Y,re]=b.useState(t==="online"),[Z,Te]=b.useState(null),[de,ke]=b.useState(null),[H,le]=b.useState(!1),[ce,A]=b.useState(!1),[J,Ne]=b.useState(typeof navigator<"u"?!navigator.onLine:!1),[ye,$e]=b.useState(6e5),[We,Ke]=b.useState(6e5),[Xe,Be]=b.useState(null),[Nt,Tr]=b.useState(null),[Zr,Ft]=b.useState(null),sr=b.useRef(null),[ht,Jr]=b.useState(!1),[Xr,Tn]=b.useState(null),[un,en]=b.useState({}),[pe,N]=b.useState(null),$=b.useRef(null),{bestMove:Q,evaluation:we,isThinking:me,search:ae}=kA(),[xe,Ze]=b.useState(t==="online"&&e==="random"),[mt,xt]=b.useState(!1),[Un,Cn]=b.useState(!1),tn=b.useRef(0),yr=b.useRef(null),wr=b.useRef(null),rn=b.useRef(0),Cr=b.useRef(null),vt=b.useCallback(oe=>{const ee=$.current;ee&&ee.send({type:"broadcast",event:"message",payload:oe})},[]),qr=b.useCallback(()=>{if(sr.current&&sr.current.state==="running")return sr.current;const oe=window.AudioContext||window.webkitAudioContext;if(!oe)return null;sr.current||(sr.current=new oe);const ee=sr.current;return ee&&ee.state==="suspended"&&ee.resume().catch(()=>{}),ee},[]);b.useEffect(()=>{const oe=()=>{qr(),window.removeEventListener("click",oe),window.removeEventListener("keydown",oe)};return window.addEventListener("click",oe),window.addEventListener("keydown",oe),()=>{window.removeEventListener("click",oe),window.removeEventListener("keydown",oe),yr.current&&(yr.current.pause(),yr.current.src="",yr.current.load(),yr.current=null),sr.current&&(sr.current.close().catch(console.error),sr.current=null)}},[qr]);const dn=b.useCallback(oe=>{try{const ee=qr();if(!ee)return;const Se=ee.createOscillator(),ze=ee.createGain();let ot=1040,ve=.12;switch(oe){case"capture":ot=720;break;case"check":ot=1280,ve=.2;break;case"start":ot=960,ve=.3;break;case"end":ot=560,ve=.5;break;default:ot=1040}Se.frequency.value=ot,ze.gain.value=.3,ze.gain.setValueAtTime(0,ee.currentTime),ze.gain.linearRampToValueAtTime(.3,ee.currentTime+.02),ze.gain.exponentialRampToValueAtTime(.01,ee.currentTime+ve),Se.connect(ze),ze.connect(ee.destination),Se.start(ee.currentTime),Se.stop(ee.currentTime+ve+.1)}catch(ee){console.error("Audio playback failed",ee)}},[qr]),Me=b.useCallback((oe,ee=!1)=>{const Se=typeof performance<"u"?performance.now():Date.now();!ee&&Se-tn.current<200||(tn.current=Se,!(!R&&!ee)&&dn(oe))},[R,dn]),Pt=oe=>{const ee=Math.max(0,Math.floor(oe/1e3)),Se=Math.floor(ee/60).toString().padStart(2,"0"),ze=(ee%60).toString().padStart(2,"0");return`${Se}:${ze}`},Ct=b.useCallback(()=>{const oe=new mi;u(oe),h(oe.fen()),v([]),M(null),V(!1),te(null),$e(6e5),Ke(6e5),Be(Date.now()),A(!1),wr.current=null,tn.current=0},[]);b.useEffect(()=>{const oe=()=>{Ne(!1),a({title:" kt ni li mng",description:"Bn c th tip tc vn u."})},ee=()=>{Ne(!0),a({title:"Mt kt ni mng",description:"Vui lng kim tra li internet ca bn.",variant:"destructive"})};return window.addEventListener("online",oe),window.addEventListener("offline",ee),()=>{window.removeEventListener("online",oe),window.removeEventListener("offline",ee)}},[a]),b.useEffect(()=>{if(t!=="online"||!e||!i)return;const oe=e==="random"?"global:matchmaking":`room:${e}`,ee=QL.channel(oe);$.current=ee,ee.on("broadcast",{event:"message"},ze=>{N(ze.payload)}),ee.on("presence",{event:"sync"},()=>{const ze=ee.presenceState(),ot=Object.values(ze).flat();Te(ot.length)});const Se=()=>{ee.send({type:"broadcast",event:"message",payload:{type:"join",roomId:e,userId:i.id,username:i.username,color:S}})};return ee.subscribe(async ze=>{ze==="SUBSCRIBED"?(Jr(!0),await ee.track({userId:i.id,username:i.username,color:S,online_at:new Date().toISOString()}),Se(),Cr.current=window.setInterval(()=>{de||Se()},2e3)):ze==="CLOSED"?(Jr(!1),console.log("Supabase channel closed")):ze==="CHANNEL_ERROR"&&(Jr(!1),console.error("Supabase channel error"),a({title:"Li kt ni",description:"Khng th kt ni vi my ch Realtime. ang th li...",variant:"destructive"}),setTimeout(()=>{t==="online"&&!ht&&ee.subscribe()},3e3))}),()=>{Jr(!1),$.current=null,ee.unsubscribe(),Cr.current!=null&&(window.clearInterval(Cr.current),Cr.current=null)}},[t,e,i,de]);const Kt=b.useCallback((oe,ee,Se="q")=>{try{const ze=l.fen();if(!new mi(ze).moves({verbose:!0}).some(Ut=>Ut.from===oe&&Ut.to===ee&&(Ut.promotion?Ut.promotion===Se:!0)))return!1;const Gt=new mi(ze),Or=Gt.move({from:oe,to:ee,promotion:Se});if(!Or)return!1;if(u(Gt),h(Gt.fen()),v(Ut=>{const Bn=`${oe}-${ee}`;return Ut[Ut.length-1]===Bn?Ut:[...Ut,Bn]}),M({from:oe,to:ee}),Be(Date.now()),Gt.isGameOver()){V(!0);let Ut="Ha";Gt.isCheckmate()&&(Ut=Gt.turn()==="w"?"en thng":"Trng thng"),te(Ut),Me("end"),t==="online"&&(a({title:"Vn u kt thc",description:`${Ut}. ang tr v snh chnh...`}),setTimeout(()=>{n("/")},3500))}else if(Gt.inCheck())Me("check");else if(Or.captured)Me("capture");else{const Ut=`${oe}-${ee}`;wr.current!==Ut&&(Me("move"),wr.current=Ut)}return!0}catch(ze){return console.error("Li khi thc hin nc i:",ze),!1}},[l,Me,t,a,n]);b.useEffect(()=>{Te(null),ke(null),C([]),V(!1),te(null),_(t==="ai"?"w":null),x("white"),re(t==="online"),Ze(t==="online"&&e==="random"),le(!1),A(!1),$e(6e5),Ke(6e5),Be(null),Cn(!1),Ct()},[e,t,Ct]),b.useEffect(()=>{!i&&t==="online"&&n("/auth")},[i,t,n]),b.useEffect(()=>{t==="ai"&&(_("w"),re(!1),le(!0))},[t,e,i,ht,mt,n,vt]),b.useEffect(()=>{if(!(!pe||t!=="online"))switch(pe.type){case"ping":pe.senderId===i?.id&&pe.ts&&Tn(Date.now()-pe.ts);break;case"join":if(pe.userId===i?.id)break;if(e==="random"){if(i?.id&&i.id<pe.userId){const ee=Math.random().toString(36).slice(2,9).toUpperCase();vt({type:"match_found",roomId:ee,targetUserId:pe.userId,creatorId:i.id}),n(`/game/online/${ee}`)}break}ke({id:pe.userId,username:pe.username||"i th"});let oe;pe.color?oe=pe.color==="w"?"b":"w":i?.id&&i.id<pe.userId?oe="w":oe="b",_(oe),x(oe==="w"?"white":"black"),re(!1),le(!0),Ze(!1),a({title:"i th  kt ni",description:`${pe.username}  tham gia vn u!`}),i&&vt({type:"opponent_info",id:i.id,username:i.username,color:oe});break;case"match_found":if(pe.targetUserId!==i?.id)break;Ze(!1),pe.roomId&&n(`/game/online/${pe.roomId}`);break;case"move":if(pe?.from&&pe?.to&&pe.fen){const ee=`${pe.from}-${pe.to}-${pe.fen}`,Se=pe.ts||0;if(wr.current===ee||Se>0&&Se<rn.current||pe.fen===l.fen())break;try{const ze=new mi(pe.fen);u(ze),h(ze.fen()),M({from:pe.from,to:pe.to}),v(ot=>{const ve=`${pe.from}-${pe.to}`;return ot[ot.length-1]===ve?ot:[...ot,ve]}),typeof pe.whiteTimeMs=="number"&&$e(pe.whiteTimeMs),typeof pe.blackTimeMs=="number"&&Ke(pe.blackTimeMs),Be(Date.now()),ze.isGameOver()?Me("end"):ze.inCheck()?Me("check"):ze.history({verbose:!0}).pop()?.captured?Me("capture"):Me("move"),wr.current=ee,rn.current=Math.max(rn.current,Se)}catch(ze){console.error("Failed to apply remote move",ze)}}break;case"chat":if(!pe.text||pe.sender===i?.username)break;C(ee=>{const Se=ee[ee.length-1];return Se&&!Se.isMe&&Se.sender===pe.sender&&Se.text===pe.text&&Date.now()-Se._ts<500?ee:[...ee,{sender:pe.sender,text:pe.text,isMe:!1,_ts:Date.now()}]});break;case"draw_request":if(pe.sender===i?.username||ce)break;A(!0),a({title:"Li mi ha",description:`${pe.sender} mun xin ha vn u.`,action:p.jsxs("div",{className:"flex gap-2",children:[p.jsx(lt,{size:"sm",onClick:()=>vt({type:"draw_respond",roomId:e,accepted:!0}),children:"ng "}),p.jsx(lt,{size:"sm",variant:"outline",onClick:()=>vt({type:"draw_respond",roomId:e,accepted:!1}),children:"T chi"})]}),duration:15e3});break;case"draw_respond":pe.accepted?(V(!0),te("Ha (tha thun)"),Me("end"),jt("Ha (tha thun)"),a({title:"Vn u kt thc",description:"Hai bn  ng  ha. ang tr v snh chnh..."}),setTimeout(()=>{n("/")},3500)):a({title:"Li mi b t chi",description:"i th mun tip tc nh."}),A(!1);break;case"voice_signal":if(pe.senderId===i?.id)break;if(pe.signal&&pe.signal.type==="audio"){pe.senderId&&en(ee=>({...ee,[pe.senderId]:Date.now()}));try{const ee=qr();if(!ee)break;const Se=pe.signal.data.split(",")[1],ze=window.atob(Se),ot=ze.length,ve=new Uint8Array(ot);for(let Rt=0;Rt<ot;Rt++)ve[Rt]=ze.charCodeAt(Rt);ee.decodeAudioData(ve.buffer).then(Rt=>{const Gt=ee.createBufferSource();Gt.buffer=Rt,Gt.connect(ee.destination),Gt.start(0)}).catch(Rt=>{console.debug("AudioContext decode failed, falling back to Audio element",Rt),yr.current||(yr.current=new Audio);const Gt=yr.current,Or=Gt.src;Gt.src=pe.signal.data,Gt.play().catch(()=>{}),Or.startsWith("blob:")&&URL.revokeObjectURL(Or)})}catch(ee){console.warn("Voice play failed",ee)}}break;case"start_game":if(H)break;le(!0),re(!1),_(pe.color),x(pe.color==="w"?"white":"black"),Ct(),Me("start"),a({title:"Vn u bt u",description:`Bn cm qun ${pe.color==="w"?"Trng":"en"}`});break;case"game_over":if(X)break;V(!0),te(pe.result),Me("end"),jt(pe.result,pe.winnerColor),a({title:"Vn u kt thc",description:`Kt qu: ${pe.result}. ang tr v snh chnh...`}),A(!1),setTimeout(()=>{n("/")},3500);break;case"state":if(pe.fen){const ee=new mi(pe.fen);u(ee),h(ee.fen()),v([]),M(null),re(!1),le(!0),typeof pe.whiteTimeMs=="number"&&$e(pe.whiteTimeMs),typeof pe.blackTimeMs=="number"&&Ke(pe.blackTimeMs),Be(Date.now())}break;case"role":{const ee=pe.role;ee==="w"||ee==="b"?(_(ee),x(ee==="w"?"white":"black")):_(null),typeof pe.waiting=="boolean"?re(pe.waiting):re(!1);break}case"opponent_info":if(pe.id){if(ke({id:pe.id,username:pe.username||"i th"}),!S&&pe.color){const ee=pe.color==="w"?"b":"w";_(ee),x(ee==="w"?"white":"black")}re(!1),le(!0),Ze(!1),H||vt({type:"request_sync",roomId:e,requesterId:i?.id})}break;case"request_sync":H&&i?.id!==pe.requesterId&&vt({type:"state",fen:l.fen(),whiteTimeMs:ye,blackTimeMs:We,history:g});break}},[pe,t]),b.useEffect(()=>{if(t!=="online"||!ht){Tn(null);return}const oe=setInterval(()=>{vt({type:"ping",senderId:i?.id,ts:Date.now()})},5e3);return()=>clearInterval(oe)},[t,ht,i,vt]),b.useEffect(()=>{const oe=setInterval(()=>{const ee=Date.now();en(Se=>{const ze={...Se};let ot=!1;return Object.keys(ze).forEach(ve=>{const Rt=Number(ve);ee-ze[Rt]>2e3&&(delete ze[Rt],ot=!0)}),ot?ze:Se})},1e3);return()=>clearInterval(oe)},[]),b.useEffect(()=>{t==="ai"&&l.turn()==="b"&&!l.isGameOver()&&ae(l.fen())},[d,t,l,ae]),b.useEffect(()=>{t==="ai"&&Q&&l.turn()==="b"&&Kt(Q.from,Q.to,"q")},[Q,l,Kt]),b.useEffect(()=>{let oe=null,ee=null,Se=!1;return!T||!ht||t!=="online"?void 0:((async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Mic not supported");if(ee=await navigator.mediaDevices.getUserMedia({audio:!0}),Se){ee.getTracks().forEach(ot=>ot.stop());return}oe=new MediaRecorder(ee),oe.ondataavailable=async ot=>{if(ot.data.size>0&&ht&&!Se){const ve=new FileReader;ve.onloadend=()=>{if(Se)return;const Rt=ve.result;vt({type:"voice_signal",roomId:e,senderId:i?.id,signal:{type:"audio",data:Rt}})},ve.readAsDataURL(ot.data)}},oe.start(500),Ft(ee),Tr(oe)}catch(ot){console.error("Mic access error",ot),Se||(O(!1),a({title:"Li truy cp Mic",description:"Vui lng cho php truy cp micro  s dng tnh nng ny.",variant:"destructive"}))}})(),()=>{Se=!0,oe&&oe.state!=="inactive"&&oe.stop(),ee&&ee.getTracks().forEach(ot=>ot.stop()),Tr(null),Ft(null)})},[T,ht,e,i,vt,a,t]);const ir=b.useRef(6e5),Jt=b.useRef(6e5);b.useEffect(()=>{ir.current=ye},[ye]),b.useEffect(()=>{Jt.current=We},[We]),b.useEffect(()=>{if(t!=="online"||X||Y||!H||!ht){Be(null);return}const oe=setInterval(()=>{Be(ee=>{const Se=Date.now(),ot=Se-(ee??Se),ve=Math.min(ot,2e3);if(ve<=0)return Se;if(l.turn()==="w"){const Rt=Math.max(0,ir.current-ve);ir.current=Rt,$e(Rt)}else{const Rt=Math.max(0,Jt.current-ve);Jt.current=Rt,Ke(Rt)}return Se})},200);return()=>clearInterval(oe)},[t,X,Y,H,ht,l.turn()]);const jt=b.useCallback(async(oe,ee)=>{if(!(t!=="online"||!e||!i||!de)&&S==="w")try{await hT("POST","/api/game/over",{roomId:e,result:oe,winnerColor:ee,opponentId:de.id})}catch(Se){console.error("Failed to record game over",Se)}},[t,e,i,de,S]);b.useEffect(()=>{if(!(t!=="online"||X||Y||!H)){if(ye<=0){const oe="en thng (ht gi)";V(!0),te(oe),Me("end"),S==="w"&&(vt({type:"game_over",roomId:e,result:oe,winnerColor:"b"}),jt(oe,"b"))}else if(We<=0){const oe="Trng thng (ht gi)";V(!0),te(oe),Me("end"),S==="b"&&vt({type:"game_over",roomId:e,result:oe,winnerColor:"w"})}}},[ye,We,t,X,Y,H,S,vt,e,Me,jt]);const z=b.useCallback((oe,ee,Se)=>{if(l.isGameOver()||Y)return!1;try{if(t==="online"){if(!S||l.turn()!==S)return!1;if(!ht||!e)return a({title:"Mt kt ni",description:"ang c gng kt ni li...",variant:"destructive"}),!1;const ot=l.fen();if(!new mi(ot).moves({verbose:!0}).some(Pr=>Pr.from===oe&&Pr.to===ee&&(Se?Pr.promotion===Se:!0)))return!1;const Or=new mi(ot);if(!Or.move({from:oe,to:ee,promotion:Se}))return!1;const Bn=Or.fen();u(Or),h(Bn),M({from:oe,to:ee}),v(Pr=>{const zn=`${oe}-${ee}`;return Pr[Pr.length-1]===zn?Pr:[...Pr,zn]}),Be(Date.now());const Ri=`${oe}-${ee}-${Bn}`;if(wr.current!==Ri&&(Me("move"),wr.current=Ri),vt({type:"move",roomId:e,move:{from:oe,to:ee},fen:Bn,promotion:Se,ts:Date.now()}),Or.isGameOver()){let Pr="Ha",zn;Or.isCheckmate()&&(Pr=Or.turn()==="w"?"en thng":"Trng thng",zn=Or.turn()==="w"?"b":"w"),vt({type:"game_over",roomId:e,result:Pr,winnerColor:zn}),jt(Pr,zn)}return!0}return t==="ai"&&l.turn()==="b"?!1:Kt(oe,ee,Se)}catch(ze){return console.error("Li khi ko th nc i:",ze),!1}},[l,t,S,ht,vt,Kt,e,Y,a,Me,jt]);if(xe)return p.jsxs("div",{className:"min-h-screen bg-[#020617] flex items-center justify-center overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(79,70,229,0.15)_0%,transparent_70%)]"}),p.jsxs("div",{className:"text-center relative z-10 p-12 glass-card rounded-3xl border border-white/10 animate-in zoom-in-95 duration-500",children:[p.jsx("div",{className:"w-24 h-24 border-8 border-indigo-500/20 border-t-indigo-500 rounded-full animate-spin mx-auto mb-8 shadow-[0_0_40px_rgba(79,70,229,0.3)]"}),p.jsx("h2",{className:"text-4xl font-black italic text-white mb-4 tracking-tighter uppercase",children:"ang tm i th"}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-sm animate-pulse",children:"ang ghp trn vi k th xng tm..."}),p.jsx(lt,{variant:"ghost",className:"mt-8 text-slate-500 hover:text-white",onClick:()=>n("/"),children:"Hy tm kim"})]})]});const or=b.useCallback(oe=>{const ee=oe.trim();if(ee)if(t==="online"){const Se=i?.username||"Ti";C(ze=>[...ze,{sender:Se,text:ee,isMe:!0}]),vt({type:"chat",roomId:e,text:ee,sender:Se})}else C(Se=>[...Se,{sender:"Ti",text:ee,isMe:!0}])},[t,vt,i,e,C]),yt=b.useCallback(()=>{navigator.clipboard.writeText(e||""),a({title:" sao chp",description:"M phng  c sao chp."})},[e,a]);b.useMemo(()=>t==="ai"?"Bn u vi AI":t==="offline"?"Chi Offline":S?S==="w"?"Bn cm qun Trng":"Bn cm qun en":"ang xem trn",[t,S]);const ar=t==="online"&&!S,he=t==="online"?!S||Y:!1,Xt=Z!==null?Math.min(Z,2):null,_t=Z!==null?Math.max(Z-2,0):null;return p.jsxs("div",{className:"min-h-screen bg-[#020617] text-white p-4 md:p-6 lg:p-8 relative",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsxs("header",{className:"max-w-7xl mx-auto mb-6 flex items-center justify-between glass-card p-4 rounded-2xl",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(lt,{variant:"ghost",size:"icon",onClick:()=>n("/"),className:"hover:bg-white/10 rounded-xl",children:p.jsx(rx,{className:"w-5 h-5 text-slate-400"})}),p.jsxs("div",{children:[p.jsxs("h1",{className:"text-xl font-black italic tracking-tighter text-white",children:["Chess",p.jsx("span",{className:"text-indigo-500",children:"Pro"})]}),t==="online"&&de?p.jsxs("div",{className:"mt-1 text-xs text-slate-300 flex items-center gap-2",children:["i th: ",p.jsx("span",{className:"font-bold text-white",children:de.username}),un[de.id]&&p.jsxs("div",{className:"flex gap-0.5 items-end h-3",children:[p.jsx("div",{className:"w-0.5 h-1 bg-indigo-400 animate-bounce",style:{animationDelay:"0s"}}),p.jsx("div",{className:"w-0.5 h-2 bg-indigo-400 animate-bounce",style:{animationDelay:"0.1s"}}),p.jsx("div",{className:"w-0.5 h-1.5 bg-indigo-400 animate-bounce",style:{animationDelay:"0.2s"}})]})]}):p.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-[0.2em]",children:"c vua ca ngi vit"}),p.jsx("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest mt-1",children:t==="online"?p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:`flex items-center gap-1 ${J||!ht?"text-red-500":"text-emerald-500"}`,children:[p.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${J||!ht?"bg-red-500":"bg-emerald-500"} animate-pulse`}),J||!ht?"Mt kt ni":" kt ni"]}),Xr!==null&&ht&&!J&&p.jsxs("span",{className:"text-[10px] text-slate-500 font-medium",children:[Xr,"ms"]}),p.jsx("span",{className:"text-slate-700 mx-1",children:""}),p.jsxs("span",{children:["Phng: ",e]}),p.jsx("button",{onClick:yt,className:"hover:text-white transition-colors",children:p.jsx(n0,{className:"w-3 h-3 ml-1"})}),Xt!==null&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-slate-700 mx-1",children:""}),p.jsxs("span",{className:"text-slate-500 hidden md:inline",children:[Xt," chi",_t&&_t>0?` / ${_t} xem`:""]})]})]}):p.jsx("span",{children:t==="ai"?"u vi Stockfish 15":"Chi trn cng my"})})]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[t==="ai"&&p.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[p.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 tracking-wider",children:"nh gi"}),p.jsx("span",{className:`text-sm font-mono font-bold ${we.includes("-")?"text-red-400":"text-emerald-400"}`,children:we})]}),p.jsxs("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg relative group cursor-help",children:[p.jsx(ud,{className:"w-5 h-5 text-white"}),p.jsx("div",{className:"absolute top-12 right-0 w-max bg-black/80 p-2 rounded text-xs hidden group-hover:block z-50 border border-white/10",children:"Vua c"})]})]})]}),p.jsxs("main",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-[1fr_350px] gap-6 items-start",children:[p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"glass-card p-6 md:p-10 rounded-[2.5rem] flex flex-col justify-center items-center relative min-h-[500px] border border-white/5 shadow-2xl",children:[me&&p.jsxs("div",{className:"absolute top-6 right-6 flex items-center gap-2 bg-black/60 px-4 py-2 rounded-2xl border border-yellow-500/30 z-10 animate-in slide-in-from-right-5 duration-300 shadow-xl backdrop-blur-md",children:[p.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-ping"}),p.jsx("span",{className:"text-[10px] font-black text-yellow-400 uppercase tracking-[0.2em]",children:"AI ang tnh..."})]}),!ht&&t==="online"&&p.jsx("div",{className:"absolute inset-0 z-50 bg-black/60 backdrop-blur-sm rounded-[2.5rem] flex items-center justify-center",children:p.jsxs("div",{className:"text-center p-8 glass-card border-red-500/30 rounded-3xl max-w-sm animate-pulse",children:[p.jsx(EC,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-black italic mb-2 tracking-tight text-red-500",children:"MT KT NI"}),p.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:"ang th kt ni li..."})]})}),Y&&t==="online"&&!ar&&ht&&p.jsx("div",{className:"absolute inset-0 z-40 bg-black/40 backdrop-blur-sm rounded-[2.5rem] flex items-center justify-center",children:p.jsxs("div",{className:"text-center p-8 glass-card border-white/10 rounded-3xl max-w-sm",children:[p.jsx(ix,{className:"w-12 h-12 text-indigo-400 mx-auto mb-4 animate-pulse"}),p.jsx("h3",{className:"text-xl font-black italic mb-2 tracking-tight",children:"ANG CH I TH"}),p.jsxs("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:["Gi m phng: ",p.jsx("span",{className:"text-white select-all",children:e})]}),p.jsxs(lt,{variant:"outline",size:"sm",onClick:yt,className:"mt-4 border-white/10 hover:bg-white/5 rounded-xl font-bold",children:[p.jsx(n0,{className:"w-4 h-4 mr-2"})," Sao chp m"]})]})}),p.jsxs("div",{className:"flex gap-8 items-center w-full justify-center",children:[(t==="ai"||ar)&&p.jsx(h5,{evaluation:we,orientation:y}),p.jsxs("div",{className:"flex flex-col gap-6 w-full max-w-[600px]",children:[p.jsx(GI,{game:l,onMove:z,orientation:y,isThinking:me,disabled:he||!ht,lastMove:B,onReset:Ct}),p.jsx(p5,{fen:d})]})]})]}),p.jsxs("div",{className:"glass-card p-6 rounded-3xl flex flex-col md:flex-row justify-between items-center gap-6 border border-white/5 shadow-xl",children:[p.jsxs("div",{className:"flex items-center gap-5 w-full md:w-auto",children:[p.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center border transition-all duration-500 shrink-0 ${l.turn()==="w"?"bg-white border-white":"bg-slate-800 border-white/10"}`,children:p.jsx("div",{className:`w-8 h-8 rounded-full ${l.turn()==="w"?"bg-slate-900":"bg-white"}`})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] mb-1",children:"Lt i"}),p.jsxs("div",{className:"text-2xl font-black italic text-indigo-400 tracking-tight",children:[l.turn()==="w"?"Trng":"en"," ang i"]}),t==="online"&&p.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[11px] font-mono w-full max-w-[300px]",children:[p.jsxs("div",{className:`flex items-center justify-between gap-2 px-3 py-1.5 rounded-lg border transition-colors ${l.turn()==="w"?"border-emerald-500/70 bg-emerald-500/10 text-emerald-200":"border-white/5 text-slate-400 bg-white/5"}`,children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 rounded-full bg-white border border-slate-400"}),p.jsx("span",{className:"uppercase tracking-widest text-[9px] font-bold",children:S==="w"?"BN":"I TH"})]}),p.jsx("span",{className:"font-bold",children:Pt(ye)})]}),p.jsxs("div",{className:`flex items-center justify-between gap-2 px-3 py-1.5 rounded-lg border transition-colors ${l.turn()==="b"?"border-emerald-500/70 bg-emerald-500/10 text-emerald-200":"border-white/5 text-slate-400 bg-white/5"}`,children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 rounded-full bg-black border border-slate-600"}),p.jsx("span",{className:"uppercase tracking-widest text-[9px] font-bold",children:S==="b"?"BN":"I TH"})]}),p.jsx("span",{className:"font-bold",children:Pt(We)})]})]})]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(QI,{onFlip:()=>x(oe=>oe==="white"?"black":"white"),onResign:()=>{if(!ar&&window.confirm("Bn chc chn mun xin thua?")){const oe=S==="w"?"en thng (Xin thua)":"Trng thng (Xin thua)",ee=S==="w"?"b":"w";vt({type:"game_over",roomId:e,result:oe,winnerColor:ee}),V(!0),te(oe),jt(oe,ee)}},onDraw:()=>{if(!(ar||X||!ht)){if(ce){a({title:" gi li mi",description:"ang ch hi m..."});return}A(!0),vt({type:"draw_request",roomId:e,sender:i?.username}),a({title:" gi li mi ha",description:"ang ch i th..."})}},onReset:Ct,gameMode:t,disabled:ar||!ht}),p.jsx("div",{className:"h-10 w-[1px] bg-white/10 mx-2"}),p.jsx(lt,{variant:"outline",size:"icon",onClick:()=>{F(oe=>{const ee=!oe;return ee&&Me("move",!0),ee})},className:`w-12 h-12 rounded-2xl transition-all duration-300 ${R?"bg-slate-800 border-white/10 text-slate-100":"bg-slate-900 border-slate-600 text-slate-500"}`,title:R?"Tt m thanh":"Bt m thanh",children:R?p.jsx(SC,{className:"w-5 h-5"}):p.jsx(kC,{className:"w-5 h-5"})}),p.jsx(lt,{variant:"outline",size:"icon",onClick:()=>{if(t!=="online"||ar||!ht){a({title:"Khng th bt Mic",description:"Mic ch kh dng khi ang chi Online.",variant:"destructive"});return}O(oe=>!oe)},className:`w-12 h-12 rounded-2xl transition-all duration-300 ${T?"bg-indigo-500 text-white border-transparent shadow-[0_0_15px_rgba(79,70,229,0.5)]":"bg-slate-800 border-white/10 text-slate-400"}`,title:T?"Tt Mic":"Bt Mic",children:T?p.jsx(wC,{className:"w-5 h-5 animate-pulse"}):p.jsx(yC,{className:"w-5 h-5"})})]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-6 h-full content-start",children:[p.jsx(d5,{history:g}),p.jsx(f5,{messages:E,onSendMessage:or,disabled:t==="ai"})]})]})]})}var np="rovingFocusGroup.onEntryFocus",ZL={bubbles:!1,cancelable:!0},jd="RovingFocusGroup",[Xp,L1,JL]=Ob(jd),[XL,M1]=Ni(jd,[JL]),[eM,tM]=XL(jd),$1=b.forwardRef((t,e)=>p.jsx(Xp.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(Xp.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(rM,{...t,ref:e})})}));$1.displayName=jd;var rM=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:g=!1,...v}=t,y=b.useRef(null),x=kr(e,y),S=zg(a),[_=null,E]=dg({prop:l,defaultProp:u,onChange:d}),[C,T]=b.useState(!1),O=vr(h),R=L1(r),F=b.useRef(!1),[B,M]=b.useState(0);return b.useEffect(()=>{const X=y.current;if(X)return X.addEventListener(np,O),()=>X.removeEventListener(np,O)},[O]),p.jsx(eM,{scope:r,orientation:n,dir:S,loop:i,currentTabStopId:_,onItemFocus:b.useCallback(X=>E(X),[E]),onItemShiftTab:b.useCallback(()=>T(!0),[]),onFocusableItemAdd:b.useCallback(()=>M(X=>X+1),[]),onFocusableItemRemove:b.useCallback(()=>M(X=>X-1),[]),children:p.jsx(Tt.div,{tabIndex:C||B===0?-1:0,"data-orientation":n,...v,ref:x,style:{outline:"none",...t.style},onMouseDown:ut(t.onMouseDown,()=>{F.current=!0}),onFocus:ut(t.onFocus,X=>{const V=!F.current;if(X.target===X.currentTarget&&V&&!C){const W=new CustomEvent(np,ZL);if(X.currentTarget.dispatchEvent(W),!W.defaultPrevented){const te=R().filter(de=>de.focusable),Y=te.find(de=>de.active),re=te.find(de=>de.id===_),Te=[Y,re,...te].filter(Boolean).map(de=>de.ref.current);B1(Te,g)}}F.current=!1}),onBlur:ut(t.onBlur,()=>T(!1))})})}),F1="RovingFocusGroupItem",U1=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,...l}=t,u=mx(),d=a||u,h=tM(F1,r),g=h.currentTabStopId===d,v=L1(r),{onFocusableItemAdd:y,onFocusableItemRemove:x}=h;return b.useEffect(()=>{if(n)return y(),()=>x()},[n,y,x]),p.jsx(Xp.ItemSlot,{scope:r,id:d,focusable:n,active:i,children:p.jsx(Tt.span,{tabIndex:g?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:ut(t.onMouseDown,S=>{n?h.onItemFocus(d):S.preventDefault()}),onFocus:ut(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:ut(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){h.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const _=iM(S,h.orientation,h.dir);if(_!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let C=v().filter(T=>T.focusable).map(T=>T.ref.current);if(_==="last")C.reverse();else if(_==="prev"||_==="next"){_==="prev"&&C.reverse();const T=C.indexOf(S.currentTarget);C=h.loop?oM(C,T+1):C.slice(T+1)}setTimeout(()=>B1(C))}})})})});U1.displayName=F1;var nM={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sM(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function iM(t,e,r){const n=sM(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return nM[n]}function B1(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function oM(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var aM=$1,lM=U1,Xg="Tabs",[cM]=Ni(Xg,[M1]),z1=M1(),[uM,em]=cM(Xg),V1=b.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:l="horizontal",dir:u,activationMode:d="automatic",...h}=t,g=zg(u),[v,y]=dg({prop:n,onChange:i,defaultProp:a});return p.jsx(uM,{scope:r,baseId:mx(),value:v,onValueChange:y,orientation:l,dir:g,activationMode:d,children:p.jsx(Tt.div,{dir:g,"data-orientation":l,...h,ref:e})})});V1.displayName=Xg;var q1="TabsList",W1=b.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...i}=t,a=em(q1,r),l=z1(r);return p.jsx(aM,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:n,children:p.jsx(Tt.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});W1.displayName=q1;var H1="TabsTrigger",K1=b.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...a}=t,l=em(H1,r),u=z1(r),d=Y1(l.baseId,n),h=Z1(l.baseId,n),g=n===l.value;return p.jsx(lM,{asChild:!0,...u,focusable:!i,active:g,children:p.jsx(Tt.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":h,"data-state":g?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...a,ref:e,onMouseDown:ut(t.onMouseDown,v=>{!i&&v.button===0&&v.ctrlKey===!1?l.onValueChange(n):v.preventDefault()}),onKeyDown:ut(t.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&l.onValueChange(n)}),onFocus:ut(t.onFocus,()=>{const v=l.activationMode!=="manual";!g&&!i&&v&&l.onValueChange(n)})})})});K1.displayName=H1;var G1="TabsContent",Q1=b.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:i,children:a,...l}=t,u=em(G1,r),d=Y1(u.baseId,n),h=Z1(u.baseId,n),g=n===u.value,v=b.useRef(g);return b.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),p.jsx(ji,{present:i||g,children:({present:y})=>p.jsx(Tt.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:h,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:v.current?"0s":void 0},children:y&&a})})});Q1.displayName=G1;function Y1(t,e){return`${t}-trigger-${e}`}function Z1(t,e){return`${t}-content-${e}`}var dM=V1,J1=W1,X1=K1,eS=Q1;const fM=dM,tS=b.forwardRef(({className:t,...e},r)=>p.jsx(J1,{ref:r,className:ct("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));tS.displayName=J1.displayName;const eg=b.forwardRef(({className:t,...e},r)=>p.jsx(X1,{ref:r,className:ct("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));eg.displayName=X1.displayName;const tg=b.forwardRef(({className:t,...e},r)=>p.jsx(eS,{ref:r,className:ct("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));tg.displayName=eS.displayName;const rS=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{className:"relative w-full overflow-auto",children:p.jsx("table",{ref:r,className:ct("w-full caption-bottom text-sm",t),...e})}));rS.displayName="Table";const nS=b.forwardRef(({className:t,...e},r)=>p.jsx("thead",{ref:r,className:ct("[&_tr]:border-b",t),...e}));nS.displayName="TableHeader";const sS=b.forwardRef(({className:t,...e},r)=>p.jsx("tbody",{ref:r,className:ct("[&_tr:last-child]:border-0",t),...e}));sS.displayName="TableBody";const hM=b.forwardRef(({className:t,...e},r)=>p.jsx("tfoot",{ref:r,className:ct("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));hM.displayName="TableFooter";const rg=b.forwardRef(({className:t,...e},r)=>p.jsx("tr",{ref:r,className:ct("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));rg.displayName="TableRow";const gl=b.forwardRef(({className:t,...e},r)=>p.jsx("th",{ref:r,className:ct("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));gl.displayName="TableHead";const ml=b.forwardRef(({className:t,...e},r)=>p.jsx("td",{ref:r,className:ct("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));ml.displayName="TableCell";const pM=b.forwardRef(({className:t,...e},r)=>p.jsx("caption",{ref:r,className:ct("mt-4 text-sm text-muted-foreground",t),...e}));pM.displayName="TableCaption";var tm="Avatar",[gM]=Ni(tm),[mM,iS]=gM(tm),oS=b.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[i,a]=b.useState("idle");return p.jsx(mM,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:p.jsx(Tt.span,{...n,ref:e})})});oS.displayName=tm;var aS="AvatarImage",lS=b.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...a}=t,l=iS(aS,r),u=vM(n,a),d=vr(h=>{i(h),l.onImageLoadingStatusChange(h)});return $n(()=>{u!=="idle"&&d(u)},[u,d]),u==="loaded"?p.jsx(Tt.img,{...a,ref:e,src:n}):null});lS.displayName=aS;var cS="AvatarFallback",uS=b.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...i}=t,a=iS(cS,r),[l,u]=b.useState(n===void 0);return b.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>u(!0),n);return()=>window.clearTimeout(d)}},[n]),l&&a.imageLoadingStatus!=="loaded"?p.jsx(Tt.span,{...i,ref:e}):null});uS.displayName=cS;function qw(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function vM(t,{referrerPolicy:e,crossOrigin:r}){const n=wM(),i=b.useRef(null),a=n?(i.current||(i.current=new window.Image),i.current):null,[l,u]=b.useState(()=>qw(a,t));return $n(()=>{u(qw(a,t))},[a,t]),$n(()=>{const d=v=>()=>{u(v)};if(!a)return;const h=d("loaded"),g=d("error");return a.addEventListener("load",h),a.addEventListener("error",g),e&&(a.referrerPolicy=e),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",h),a.removeEventListener("error",g)}},[a,r,e]),l}function yM(){return()=>{}}function wM(){return b.useSyncExternalStore(yM,()=>!0,()=>!1)}var dS=oS,fS=lS,hS=uS;const pS=b.forwardRef(({className:t,...e},r)=>p.jsx(dS,{ref:r,className:ct(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));pS.displayName=dS.displayName;const bM=b.forwardRef(({className:t,...e},r)=>p.jsx(fS,{ref:r,className:ct("aspect-square h-full w-full",t),...e}));bM.displayName=fS.displayName;const gS=b.forwardRef(({className:t,...e},r)=>p.jsx(hS,{ref:r,className:ct("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));gS.displayName=hS.displayName;const xM="auth_token";function _M(){try{return localStorage.getItem(xM)}catch{return null}}function SM(){const{user:t}=mo(),{toast:e}=go(),[r,n]=po(),[i,a]=b.useState(""),[l,u]=b.useState(null),{data:d,isLoading:h}=Nu({queryKey:["/api/leaderboard"]}),{data:g}=Nu({queryKey:["/api/users/search",i],queryFn:async()=>i?(await fetch(`${Qr}/api/users/search?q=${encodeURIComponent(i)}`)).json():[],enabled:i.length>0});return p.jsxs("div",{className:"min-h-screen bg-[#020617] text-white relative p-6",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[p.jsx(lt,{variant:"ghost",size:"icon",onClick:()=>n("/"),children:p.jsx(fC,{className:"w-6 h-6"})}),p.jsxs("h1",{className:"text-3xl font-black italic tracking-tighter",children:["Cng ng",p.jsx("span",{className:"text-indigo-500",children:"Hub"})]})]}),l&&p.jsxs(ps,{className:"bg-indigo-600/10 border-indigo-500/30 backdrop-blur-md mb-8",children:[p.jsxs(Fs,{className:"flex flex-row items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-500/20 flex items-center justify-center border border-indigo-500/30",children:p.jsx(i0,{className:"w-8 h-8 text-indigo-400"})}),p.jsxs("div",{children:[p.jsx(Us,{className:"text-2xl text-white",children:l.username}),p.jsxs(m_,{className:"text-indigo-300",children:["Hng: ",l.rating," Elo"]})]})]}),p.jsx(lt,{variant:"outline",size:"sm",onClick:()=>u(null),children:"ng"})]}),p.jsxs(gs,{children:[p.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 text-center",children:[p.jsx("div",{className:"text-sm text-slate-400",children:"Thng"}),p.jsx("div",{className:"text-xl font-bold text-emerald-400",children:l.wins||0})]}),p.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 text-center",children:[p.jsx("div",{className:"text-sm text-slate-400",children:"Thua"}),p.jsx("div",{className:"text-xl font-bold text-red-400",children:l.losses||0})]}),p.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 text-center",children:[p.jsx("div",{className:"text-sm text-slate-400",children:"Ha"}),p.jsx("div",{className:"text-xl font-bold text-amber-400",children:l.draws||0})]})]}),p.jsxs(lt,{className:"w-full bg-indigo-500 hover:bg-indigo-600",onClick:async()=>{const v=M_(6).toUpperCase();try{const y=_M();(await fetch(`${Qr}/api/invite`,{method:"POST",headers:y?{"Content-Type":"application/json",Authorization:`Bearer ${y}`}:{"Content-Type":"application/json"},body:JSON.stringify({toUserId:l.id,roomId:v})})).ok&&(e({title:" gi li mi",description:`ang ch ${l.username} chp nhn...`}),n(`/game/online/${v}`))}catch(y){console.error("Send invite failed",y)}},children:[p.jsx(sx,{className:"w-4 h-4 mr-2"}),"Gi li mi thch u"]})]})]}),p.jsxs(fM,{defaultValue:"leaderboard",className:"w-full",children:[p.jsxs(tS,{className:"grid w-full grid-cols-2 bg-slate-900/50 p-1 rounded-xl mb-8",children:[p.jsxs(eg,{value:"leaderboard",className:"rounded-lg data-[state=active]:bg-indigo-600 data-[state=active]:text-white",children:[p.jsx(dd,{className:"w-4 h-4 mr-2"}),"Bng xp hng"]}),p.jsxs(eg,{value:"search",className:"rounded-lg data-[state=active]:bg-indigo-600 data-[state=active]:text-white",children:[p.jsx(s0,{className:"w-4 h-4 mr-2"}),"Tm ngi chi"]})]}),p.jsx(tg,{value:"leaderboard",children:p.jsxs(ps,{className:"glass-card border-none text-slate-200",children:[p.jsx(Fs,{children:p.jsxs(Us,{className:"flex items-center gap-2",children:[p.jsx(ud,{className:"w-6 h-6 text-yellow-500"}),"Cao th hng u"]})}),p.jsx(gs,{children:h?p.jsx("div",{className:"text-center py-8 text-slate-500",children:"ang ti..."}):p.jsxs(rS,{children:[p.jsx(nS,{children:p.jsxs(rg,{className:"hover:bg-transparent border-white/10",children:[p.jsx(gl,{className:"text-slate-400",children:"Hng"}),p.jsx(gl,{className:"text-slate-400",children:"Ngi chi"}),p.jsx(gl,{className:"text-right text-slate-400",children:"Elo"}),p.jsx(gl,{className:"text-right text-slate-400",children:"Vn"})]})}),p.jsx(sS,{children:d?.map((v,y)=>p.jsxs(rg,{className:"hover:bg-white/5 border-white/5 cursor-pointer",onClick:()=>u(v),children:[p.jsxs(ml,{className:"font-bold",children:[y===0&&p.jsx("span",{className:"text-yellow-500",children:""}),y===1&&p.jsx("span",{className:"text-slate-400",children:""}),y===2&&p.jsx("span",{className:"text-amber-700",children:""}),y>2&&p.jsxs("span",{className:"text-slate-500",children:["#",y+1]})]}),p.jsx(ml,{className:"font-medium text-indigo-300",children:p.jsxs("div",{className:"flex items-center gap-2",children:[v.username,v.id!==t?.id&&p.jsx(lt,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:x=>{x.stopPropagation(),u(v)},children:p.jsx(i0,{className:"w-3 h-3"})})]})}),p.jsx(ml,{className:"text-right font-mono font-bold",children:v.rating}),p.jsx(ml,{className:"text-right text-slate-500",children:v.gamesPlayed})]},v.id))})]})})]})}),p.jsx(tg,{value:"search",children:p.jsxs(ps,{className:"glass-card border-none text-slate-200",children:[p.jsxs(Fs,{children:[p.jsx(Us,{children:"Tm ngi chi"}),p.jsxs("div",{className:"relative",children:[p.jsx(s0,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500"}),p.jsx(hs,{placeholder:"Tm theo tn ti khon...",className:"pl-10 bg-slate-900/50 border-white/10 text-white",value:i,onChange:v=>a(v.target.value)})]})]}),p.jsx(gs,{children:p.jsxs("div",{className:"space-y-4",children:[g?.map(v=>p.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-900/30 rounded-xl border border-white/5 cursor-pointer hover:border-indigo-500/50 transition-all",onClick:()=>u(v),children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(pS,{children:p.jsx(gS,{className:"bg-indigo-600 text-white",children:v.username.substring(0,2).toUpperCase()})}),p.jsxs("div",{children:[p.jsx("div",{className:"font-bold text-white",children:v.username}),p.jsxs("div",{className:"text-xs text-slate-500",children:["Elo: ",v.rating]})]})]}),p.jsx("div",{className:"flex gap-2",children:p.jsx(lt,{size:"sm",variant:"secondary",className:"bg-white/10 hover:bg-white/20",onClick:y=>{y.stopPropagation(),u(v)},children:"Xem Profile"})})]},v.id)),i&&g?.length===0&&p.jsx("div",{className:"text-center text-slate-500 py-8",children:"Khng tm thy ngi chi no"})]})})]})})]})]})]})}function ls(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ho(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const mS=6048e5,kM=864e5;let EM={};function Rd(){return EM}function Ql(t,e){const r=Rd(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=ls(t),a=i.getDay(),l=(a<n?7:0)+a-n;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function rd(t){return Ql(t,{weekStartsOn:1})}function vS(t){const e=ls(t),r=e.getFullYear(),n=ho(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=rd(n),a=ho(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const l=rd(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=l.getTime()?r:r-1}function Ww(t){const e=ls(t);return e.setHours(0,0,0,0),e}function Hw(t){const e=ls(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function TM(t,e){const r=Ww(t),n=Ww(e),i=+r-Hw(r),a=+n-Hw(n);return Math.round((i-a)/kM)}function CM(t){const e=vS(t),r=ho(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),rd(r)}function OM(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function PM(t){if(!OM(t)&&typeof t!="number")return!1;const e=ls(t);return!isNaN(Number(e))}function NM(t){const e=ls(t),r=ho(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const jM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},RM=(t,e,r)=>{let n;const i=jM[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function sp(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const AM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},IM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},DM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},LM={date:sp({formats:AM,defaultWidth:"full"}),time:sp({formats:IM,defaultWidth:"full"}),dateTime:sp({formats:DM,defaultWidth:"full"})},MM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$M=(t,e,r,n)=>MM[t];function ll(t){return(e,r)=>{const n=r?.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=r?.width?String(r.width):l;i=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=r?.width?String(r.width):t.defaultWidth;i=t.values[u]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const FM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},UM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},BM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},VM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WM=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},HM={ordinalNumber:WM,era:ll({values:FM,defaultWidth:"wide"}),quarter:ll({values:UM,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ll({values:BM,defaultWidth:"wide"}),day:ll({values:zM,defaultWidth:"wide"}),dayPeriod:ll({values:VM,defaultWidth:"wide",formattingValues:qM,defaultFormattingWidth:"wide"})};function cl(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const l=a[0],u=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?GM(u,v=>v.test(l)):KM(u,v=>v.test(l));let h;h=t.valueCallback?t.valueCallback(d):d,h=r.valueCallback?r.valueCallback(h):h;const g=e.slice(l.length);return{value:h,rest:g}}}function KM(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function GM(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function QM(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=r.valueCallback?r.valueCallback(l):l;const u=e.slice(i.length);return{value:l,rest:u}}}const YM=/^(\d+)(th|st|nd|rd)?/i,ZM=/\d+/i,JM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},XM={any:[/^b/i,/^(a|c)/i]},e3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},t3={any:[/1/i,/2/i,/3/i,/4/i]},r3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},n3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},s3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},i3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},o3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},a3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},l3={ordinalNumber:QM({matchPattern:YM,parsePattern:ZM,valueCallback:t=>parseInt(t,10)}),era:cl({matchPatterns:JM,defaultMatchWidth:"wide",parsePatterns:XM,defaultParseWidth:"any"}),quarter:cl({matchPatterns:e3,defaultMatchWidth:"wide",parsePatterns:t3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:cl({matchPatterns:r3,defaultMatchWidth:"wide",parsePatterns:n3,defaultParseWidth:"any"}),day:cl({matchPatterns:s3,defaultMatchWidth:"wide",parsePatterns:i3,defaultParseWidth:"any"}),dayPeriod:cl({matchPatterns:o3,defaultMatchWidth:"any",parsePatterns:a3,defaultParseWidth:"any"})},c3={code:"en-US",formatDistance:RM,formatLong:LM,formatRelative:$M,localize:HM,match:l3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function u3(t){const e=ls(t);return TM(e,NM(e))+1}function d3(t){const e=ls(t),r=+rd(e)-+CM(e);return Math.round(r/mS)+1}function yS(t,e){const r=ls(t),n=r.getFullYear(),i=Rd(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=ho(t,0);l.setFullYear(n+1,0,a),l.setHours(0,0,0,0);const u=Ql(l,e),d=ho(t,0);d.setFullYear(n,0,a),d.setHours(0,0,0,0);const h=Ql(d,e);return r.getTime()>=u.getTime()?n+1:r.getTime()>=h.getTime()?n:n-1}function f3(t,e){const r=Rd(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=yS(t,e),a=ho(t,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),Ql(a,e)}function h3(t,e){const r=ls(t),n=+Ql(r,e)-+f3(r,e);return Math.round(n/mS)+1}function Et(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const vi={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Et(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Et(r+1,2)},d(t,e){return Et(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Et(t.getHours()%12||12,e.length)},H(t,e){return Et(t.getHours(),e.length)},m(t,e){return Et(t.getMinutes(),e.length)},s(t,e){return Et(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Et(i,e.length)}},Qo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Kw={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return vi.y(t,e)},Y:function(t,e,r,n){const i=yS(t,n),a=i>0?i:1-i;if(e==="YY"){const l=a%100;return Et(l,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Et(a,e.length)},R:function(t,e){const r=vS(t);return Et(r,e.length)},u:function(t,e){const r=t.getFullYear();return Et(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Et(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Et(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return vi.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Et(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=h3(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Et(i,e.length)},I:function(t,e,r){const n=d3(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Et(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):vi.d(t,e)},D:function(t,e,r){const n=u3(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Et(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Et(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Et(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Et(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Qo.noon:n===0?i=Qo.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Qo.evening:n>=12?i=Qo.afternoon:n>=4?i=Qo.morning:i=Qo.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return vi.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):vi.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Et(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Et(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):vi.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):vi.s(t,e)},S:function(t,e){return vi.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Qw(n);case"XXXX":case"XX":return Yi(n);default:return Yi(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return Qw(n);case"xxxx":case"xx":return Yi(n);default:return Yi(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Gw(n,":");default:return"GMT"+Yi(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Gw(n,":");default:return"GMT"+Yi(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Et(n,e.length)},T:function(t,e,r){const n=t.getTime();return Et(n,e.length)}};function Gw(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+e+Et(a,2)}function Qw(t,e){return t%60===0?(t>0?"-":"+")+Et(Math.abs(t)/60,2):Yi(t,e)}function Yi(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Et(Math.trunc(n/60),2),a=Et(n%60,2);return r+i+e+a}const Yw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},wS=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},p3=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return Yw(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Yw(n,e)).replace("{{time}}",wS(i,e))},g3={p:wS,P:p3},m3=/^D+$/,v3=/^Y+$/,y3=["D","DD","YY","YYYY"];function w3(t){return m3.test(t)}function b3(t){return v3.test(t)}function x3(t,e,r){const n=_3(t,e,r);if(console.warn(n),y3.includes(t))throw new RangeError(n)}function _3(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const S3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,k3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,E3=/^'([^]*?)'?$/,T3=/''/g,C3=/[a-zA-Z]/;function O3(t,e,r){const n=Rd(),i=n.locale??c3,a=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,l=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,u=ls(t);if(!PM(u))throw new RangeError("Invalid time value");let d=e.match(k3).map(g=>{const v=g[0];if(v==="p"||v==="P"){const y=g3[v];return y(g,i.formatLong)}return g}).join("").match(S3).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const v=g[0];if(v==="'")return{isToken:!1,value:P3(g)};if(Kw[v])return{isToken:!0,value:g};if(v.match(C3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:g}});i.localize.preprocessor&&(d=i.localize.preprocessor(u,d));const h={firstWeekContainsDate:a,weekStartsOn:l,locale:i};return d.map(g=>{if(!g.isToken)return g.value;const v=g.value;(b3(v)||w3(v))&&x3(v,e,String(t));const y=Kw[v[0]];return y(u,v,i.localize,h)}).join("")}function P3(t){const e=t.match(E3);return e?e[1].replace(T3,"'"):t}const N3="auth_token";function yu(){try{return localStorage.getItem(N3)}catch{return null}}function j3(){const{user:t}=mo(),e=id(),[,r]=po(),{toast:n}=go(),[i,a]=b.useState(""),[l,u]=b.useState(!1),[d,h]=b.useState(!1),[g,v]=b.useState([]),{data:y,isLoading:x}=Nu({queryKey:[`/api/games/${t?.id}`],enabled:!!t?.id});if(b.useEffect(()=>{t?.email&&a(t.email)},[t?.email]),b.useEffect(()=>{(async()=>{if(t){h(!0);try{const E=yu(),C=await fetch(`${Qr}/api/inbox`,{headers:E?{Authorization:`Bearer ${E}`}:{}});if(C.ok){const T=await C.json();v(T||[])}}catch(E){console.error("Failed to load inbox",E)}finally{h(!1)}}})()},[t]),!t)return null;const S=async()=>{if(!i){n({title:"Li",description:"Vui lng nhp email",variant:"destructive"});return}u(!0);try{const _=yu(),E=await fetch(Qr+"/api/user/email",{method:"POST",headers:_?{"Content-Type":"application/json",Authorization:`Bearer ${_}`}:{"Content-Type":"application/json"},body:JSON.stringify({email:i})});if(!E.ok){const C=await E.json().catch(()=>null);throw new Error(C?.message||"Lu email tht bi")}e.setQueryData([Qn.users.me.path],C=>C&&{...C,email:i}),n({title:" lu email",description:"Email s dng  t li mt khu khi qun."})}catch(_){const E=_ instanceof Error?_.message:"C li xy ra, vui lng th li";n({title:"Li",description:E,variant:"destructive"})}finally{u(!1)}};return p.jsxs("div",{className:"min-h-screen bg-[#020617] text-white p-4 md:p-8 relative overflow-hidden",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[p.jsx("header",{className:"flex items-center justify-between mb-8",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(lt,{variant:"ghost",size:"icon",onClick:()=>r("/"),className:"hover:bg-white/10 rounded-xl",children:p.jsx(rx,{className:"w-5 h-5 text-slate-400"})}),p.jsxs("h1",{className:"text-3xl font-black italic tracking-tighter",children:["H s ",p.jsx("span",{className:"text-indigo-500",children:"ngi chi"})]})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[p.jsxs(ps,{className:"bg-slate-900/50 border-white/10 backdrop-blur-md",children:[p.jsxs(Fs,{className:"flex flex-row items-center justify-between pb-2",children:[p.jsx(Us,{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"im Elo"}),p.jsx(dd,{className:"w-4 h-4 text-yellow-500"})]}),p.jsxs(gs,{children:[p.jsx("div",{className:"text-4xl font-black text-white",children:t.rating||0}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Elo hin ti"})]})]}),p.jsxs(ps,{className:"bg-slate-900/50 border-white/10 backdrop-blur-md md:col-span-3",children:[p.jsx(Fs,{className:"flex flex-row items-center justify-between pb-2",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(gp,{className:"w-4 h-4 text-indigo-400"}),p.jsx(Us,{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"Email ti khon"})]})}),p.jsxs(gs,{children:[p.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-stretch md:items-center",children:[p.jsx(hs,{type:"email",placeholder:"ban@example.com",value:i,onChange:_=>a(_.target.value),className:"glass-input h-11 rounded-xl text-sm md:text-base"}),p.jsx(lt,{onClick:S,disabled:l,className:"md:w-auto w-full h-11 rounded-xl font-bold",children:l?"ang lu...":"Lu email"})]}),p.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Email dng  nhn m khi bn bm qun mt khu."})]})]}),p.jsxs(ps,{className:"bg-slate-900/50 border-white/10 backdrop-blur-md",children:[p.jsxs(Fs,{className:"flex flex-row items-center justify-between pb-2",children:[p.jsx(Us,{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"S vn  chi"}),p.jsx(sx,{className:"w-4 h-4 text-indigo-500"})]}),p.jsxs(gs,{children:[p.jsx("div",{className:"text-4xl font-black text-white",children:t.gamesPlayed||0}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Tng s vn"})]})]}),p.jsxs(ps,{className:"bg-slate-900/50 border-white/10 backdrop-blur-md",children:[p.jsxs(Fs,{className:"flex flex-row items-center justify-between pb-2",children:[p.jsx(Us,{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"Tham gia t"}),p.jsx(hC,{className:"w-4 h-4 text-emerald-500"})]}),p.jsxs(gs,{children:[p.jsx("div",{className:"text-xl font-bold text-white",children:"Hm nay"}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Va tham gia"})]})]}),p.jsxs(ps,{className:"bg-slate-900/50 border-white/10 backdrop-blur-md md:col-span-3",children:[p.jsx(Fs,{className:"flex flex-row items-center justify-between pb-2",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(gp,{className:"w-4 h-4 text-indigo-400"}),p.jsx(Us,{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"Hm th li mi u"})]})}),p.jsx(gs,{children:d?p.jsx("div",{className:"text-sm text-slate-500",children:"ang ti li mi..."}):g.length===0?p.jsx("div",{className:"text-sm text-slate-500",children:"Cha c li mi no."}):p.jsx("div",{className:"space-y-3",children:g.map(_=>p.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-slate-900/60 px-4 py-3",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"text-sm font-bold text-white",children:[_.fromUsername," mi bn u c"]}),p.jsxs("div",{className:"text-[11px] text-slate-500",children:["M phng: ",_.roomId]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(lt,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 rounded-lg",onClick:async()=>{try{const E=yu(),C=await fetch(`${Qr}/api/invite/${_.id}/respond`,{method:"POST",headers:E?{"Content-Type":"application/json",Authorization:`Bearer ${E}`}:{"Content-Type":"application/json"},body:JSON.stringify({action:"accept"})});if(C.ok){const T=await C.json();v(O=>O.filter(R=>R.id!==_.id)),T.roomId&&r(`/game/online/${T.roomId}`)}}catch(E){console.error("Accept invite failed",E)}},children:"Chp nhn"}),p.jsx(lt,{size:"sm",variant:"outline",className:"rounded-lg border-red-500/40 text-red-400",onClick:async()=>{try{const E=yu();(await fetch(`${Qr}/api/invite/${_.id}/respond`,{method:"POST",headers:E?{"Content-Type":"application/json",Authorization:`Bearer ${E}`}:{"Content-Type":"application/json"},body:JSON.stringify({action:"decline"})})).ok&&v(T=>T.filter(O=>O.id!==_.id))}catch(E){console.error("Decline invite failed",E)}},children:"T chi"})]})]},_.id))})})]})]}),p.jsxs("div",{className:"bg-slate-900/50 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:[p.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center gap-2",children:[p.jsx(mC,{className:"w-5 h-5 text-indigo-400"}),p.jsx("h2",{className:"text-xl font-bold text-white",children:"Lch s thi u"})]}),p.jsx("div",{className:"divide-y divide-white/5",children:x?p.jsx("div",{className:"p-8 text-center text-slate-500",children:"ang ti lch s..."}):y&&y.length>0?y.map(_=>{const E=_.whitePlayerId===t.id,C=_.result||"",T=C.includes("Trng thng")?"w":C.includes("en thng")?"b":C.includes("Ha")?"draw":null,F=T===(E?"w":"b")?"bg-emerald-500":T==="draw"?"bg-slate-500":"bg-red-500",B=E?"Cm qun Trng":"Cm qun en",M=C||"Kt qu cha xc nh",X=_.createdAt?O3(new Date(_.createdAt),"MMM d, HH:mm"):"-";return p.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-white/5 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:`w-2 h-12 rounded-full ${F}`}),p.jsxs("div",{children:[p.jsx("div",{className:"font-bold text-white",children:M}),p.jsx("div",{className:"text-sm text-slate-400",children:B})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"text-sm font-mono text-slate-500",children:X}),p.jsxs("div",{className:"text-xs text-indigo-400 mt-1",children:["ID: ",_.id]})]})]},_.id)}):p.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cha c vn no. Hy bt u mt vn u!"})})]})]})]})}const R3="auth_token";function A3(){try{return localStorage.getItem(R3)}catch{return null}}function I3(){const{user:t}=mo(),{toast:e}=go(),[,r]=po(),n=b.useRef(null);return b.useEffect(()=>{if(!t)return;let i=!1;n.current||(n.current=new Set);const a=async()=>{try{const u=A3(),d=await fetch(`${Qr}/api/inbox`,{headers:u?{Authorization:`Bearer ${u}`}:{}});if(!d.ok)return;const h=await d.json();if(i||!Array.isArray(h))return;const g=n.current;h.forEach(v=>{g.has(v.id)||(g.add(v.id),e({title:"Li mi thch u mi",description:`${v.fromUsername} mun thch u vi bn!`,action:p.jsx("div",{className:"flex gap-2",children:p.jsx(lt,{size:"sm",onClick:()=>r(`/game/online/${v.roomId}`),children:"Chp nhn"})}),duration:1e4}))})}catch{}};a();const l=window.setInterval(a,1e4);return()=>{i=!0,window.clearInterval(l)}},[t,e,r]),null}function wu({component:t,...e}){const{user:r,isLoading:n}=mo();return n?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#020617]",children:p.jsx(_u,{className:"w-10 h-10 animate-spin text-indigo-500"})}):r?p.jsx(t,{...e}):p.jsx(ub,{to:"/auth"})}function D3(){return p.jsxs(p.Fragment,{children:[p.jsx(I3,{}),p.jsxs(NE,{children:[p.jsx(Fo,{path:"/auth",component:ZR}),p.jsx(Fo,{path:"/",children:()=>p.jsx(wu,{component:JR})}),p.jsx(Fo,{path:"/game/:mode/:id",children:()=>p.jsx(wu,{component:YL})}),p.jsx(Fo,{path:"/social",children:()=>p.jsx(wu,{component:SM})}),p.jsx(Fo,{path:"/profile",children:()=>p.jsx(wu,{component:j3})}),p.jsx(Fo,{component:bR})]})]})}function L3(){return p.jsx(YE,{client:gT,children:p.jsxs(MO,{children:[p.jsx(c2,{}),p.jsx(D3,{})]})})}window.addEventListener("unhandledrejection",t=>{t.preventDefault(),console.warn("Unhandled promise rejected:",t.reason)});cE.createRoot(document.getElementById("root")).render(p.jsx(L3,{}));
