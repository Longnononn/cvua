function rE(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function Jw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gh={exports:{}},Qa={},mh={exports:{}},at={};var Ey;function nE(){if(Ey)return at;Ey=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=v&&I[v]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function E(I,X,Pe){this.props=I,this.context=X,this.refs=_,this.updater=Pe||x}E.prototype.isReactComponent={},E.prototype.setState=function(I,X){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,X,"setState")},E.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function C(){}C.prototype=E.prototype;function T(I,X,Pe){this.props=I,this.context=X,this.refs=_,this.updater=Pe||x}var O=T.prototype=new C;O.constructor=T,S(O,E.prototype),O.isPureReactComponent=!0;var A=Array.isArray,U=Object.prototype.hasOwnProperty,z={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function J(I,X,Pe){var ge,Le={},Qe=null,qe=null;if(X!=null)for(ge in X.ref!==void 0&&(qe=X.ref),X.key!==void 0&&(Qe=""+X.key),X)U.call(X,ge)&&!$.hasOwnProperty(ge)&&(Le[ge]=X[ge]);var Ke=arguments.length-2;if(Ke===1)Le.children=Pe;else if(1<Ke){for(var Me=Array(Ke),yt=0;yt<Ke;yt++)Me[yt]=arguments[yt+2];Le.children=Me}if(I&&I.defaultProps)for(ge in Ke=I.defaultProps,Ke)Le[ge]===void 0&&(Le[ge]=Ke[ge]);return{$$typeof:t,type:I,key:Qe,ref:qe,props:Le,_owner:z.current}}function V(I,X){return{$$typeof:t,type:I.type,key:X,ref:I.ref,props:I.props,_owner:I._owner}}function W(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function ee(I){var X={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Pe){return X[Pe]})}var Y=/\/+/g;function te(I,X){return typeof I=="object"&&I!==null&&I.key!=null?ee(""+I.key):X.toString(36)}function Z(I,X,Pe,ge,Le){var Qe=typeof I;(Qe==="undefined"||Qe==="boolean")&&(I=null);var qe=!1;if(I===null)qe=!0;else switch(Qe){case"string":case"number":qe=!0;break;case"object":switch(I.$$typeof){case t:case e:qe=!0}}if(qe)return qe=I,Le=Le(qe),I=ge===""?"."+te(qe,0):ge,A(Le)?(Pe="",I!=null&&(Pe=I.replace(Y,"$&/")+"/"),Z(Le,X,Pe,"",function(yt){return yt})):Le!=null&&(W(Le)&&(Le=V(Le,Pe+(!Le.key||qe&&qe.key===Le.key?"":(""+Le.key).replace(Y,"$&/")+"/")+I)),X.push(Le)),1;if(qe=0,ge=ge===""?".":ge+":",A(I))for(var Ke=0;Ke<I.length;Ke++){Qe=I[Ke];var Me=ge+te(Qe,Ke);qe+=Z(Qe,X,Pe,Me,Le)}else if(Me=y(I),typeof Me=="function")for(I=Me.call(I),Ke=0;!(Qe=I.next()).done;)Qe=Qe.value,Me=ge+te(Qe,Ke++),qe+=Z(Qe,X,Pe,Me,Le);else if(Qe==="object")throw X=String(I),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return qe}function ke(I,X,Pe){if(I==null)return I;var ge=[],Le=0;return Z(I,ge,"","",function(Qe){return X.call(Pe,Qe,Le++)}),ge}function fe(I){if(I._status===-1){var X=I._result;X=X(),X.then(function(Pe){(I._status===0||I._status===-1)&&(I._status=1,I._result=Pe)},function(Pe){(I._status===0||I._status===-1)&&(I._status=2,I._result=Pe)}),I._status===-1&&(I._status=0,I._result=X)}if(I._status===1)return I._result.default;throw I._result}var Se={current:null},H={transition:null},ue={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:H,ReactCurrentOwner:z};function ae(){throw Error("act(...) is not supported in production builds of React.")}return at.Children={map:ke,forEach:function(I,X,Pe){ke(I,function(){X.apply(this,arguments)},Pe)},count:function(I){var X=0;return ke(I,function(){X++}),X},toArray:function(I){return ke(I,function(X){return X})||[]},only:function(I){if(!W(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},at.Component=E,at.Fragment=r,at.Profiler=i,at.PureComponent=T,at.StrictMode=n,at.Suspense=d,at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,at.act=ae,at.cloneElement=function(I,X,Pe){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var ge=S({},I.props),Le=I.key,Qe=I.ref,qe=I._owner;if(X!=null){if(X.ref!==void 0&&(Qe=X.ref,qe=z.current),X.key!==void 0&&(Le=""+X.key),I.type&&I.type.defaultProps)var Ke=I.type.defaultProps;for(Me in X)U.call(X,Me)&&!$.hasOwnProperty(Me)&&(ge[Me]=X[Me]===void 0&&Ke!==void 0?Ke[Me]:X[Me])}var Me=arguments.length-2;if(Me===1)ge.children=Pe;else if(1<Me){Ke=Array(Me);for(var yt=0;yt<Me;yt++)Ke[yt]=arguments[yt+2];ge.children=Ke}return{$$typeof:t,type:I.type,key:Le,ref:Qe,props:ge,_owner:qe}},at.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:a,_context:I},I.Consumer=I},at.createElement=J,at.createFactory=function(I){var X=J.bind(null,I);return X.type=I,X},at.createRef=function(){return{current:null}},at.forwardRef=function(I){return{$$typeof:u,render:I}},at.isValidElement=W,at.lazy=function(I){return{$$typeof:g,_payload:{_status:-1,_result:I},_init:fe}},at.memo=function(I,X){return{$$typeof:h,type:I,compare:X===void 0?null:X}},at.startTransition=function(I){var X=H.transition;H.transition={};try{I()}finally{H.transition=X}},at.unstable_act=ae,at.useCallback=function(I,X){return Se.current.useCallback(I,X)},at.useContext=function(I){return Se.current.useContext(I)},at.useDebugValue=function(){},at.useDeferredValue=function(I){return Se.current.useDeferredValue(I)},at.useEffect=function(I,X){return Se.current.useEffect(I,X)},at.useId=function(){return Se.current.useId()},at.useImperativeHandle=function(I,X,Pe){return Se.current.useImperativeHandle(I,X,Pe)},at.useInsertionEffect=function(I,X){return Se.current.useInsertionEffect(I,X)},at.useLayoutEffect=function(I,X){return Se.current.useLayoutEffect(I,X)},at.useMemo=function(I,X){return Se.current.useMemo(I,X)},at.useReducer=function(I,X,Pe){return Se.current.useReducer(I,X,Pe)},at.useRef=function(I){return Se.current.useRef(I)},at.useState=function(I){return Se.current.useState(I)},at.useSyncExternalStore=function(I,X,Pe){return Se.current.useSyncExternalStore(I,X,Pe)},at.useTransition=function(){return Se.current.useTransition()},at.version="18.3.1",at}var Ty;function rd(){return Ty||(Ty=1,mh.exports=nE()),mh.exports}var Cy;function sE(){if(Cy)return Qa;Cy=1;var t=rd(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,h){var g,v={},y=null,x=null;h!==void 0&&(y=""+h),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(g in d)n.call(d,g)&&!a.hasOwnProperty(g)&&(v[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:u,key:y,ref:x,props:v,_owner:i.current}}return Qa.Fragment=r,Qa.jsx=l,Qa.jsxs=l,Qa}var Oy;function iE(){return Oy||(Oy=1,gh.exports=sE()),gh.exports}var p=iE(),nu={},vh={exports:{}},nn={},yh={exports:{}},wh={};var Py;function oE(){return Py||(Py=1,(function(t){function e(H,ue){var ae=H.length;H.push(ue);e:for(;0<ae;){var I=ae-1>>>1,X=H[I];if(0<i(X,ue))H[I]=ue,H[ae]=X,ae=I;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var ue=H[0],ae=H.pop();if(ae!==ue){H[0]=ae;e:for(var I=0,X=H.length,Pe=X>>>1;I<Pe;){var ge=2*(I+1)-1,Le=H[ge],Qe=ge+1,qe=H[Qe];if(0>i(Le,ae))Qe<X&&0>i(qe,Le)?(H[I]=qe,H[Qe]=ae,I=Qe):(H[I]=Le,H[ge]=ae,I=ge);else if(Qe<X&&0>i(qe,ae))H[I]=qe,H[Qe]=ae,I=Qe;else break e}}return ue}function i(H,ue){var ae=H.sortIndex-ue.sortIndex;return ae!==0?ae:H.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],h=[],g=1,v=null,y=3,x=!1,S=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(H){for(var ue=r(h);ue!==null;){if(ue.callback===null)n(h);else if(ue.startTime<=H)n(h),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=r(h)}}function A(H){if(_=!1,O(H),!S)if(r(d)!==null)S=!0,fe(U);else{var ue=r(h);ue!==null&&Se(A,ue.startTime-H)}}function U(H,ue){S=!1,_&&(_=!1,C(J),J=-1),x=!0;var ae=y;try{for(O(ue),v=r(d);v!==null&&(!(v.expirationTime>ue)||H&&!ee());){var I=v.callback;if(typeof I=="function"){v.callback=null,y=v.priorityLevel;var X=I(v.expirationTime<=ue);ue=t.unstable_now(),typeof X=="function"?v.callback=X:v===r(d)&&n(d),O(ue)}else n(d);v=r(d)}if(v!==null)var Pe=!0;else{var ge=r(h);ge!==null&&Se(A,ge.startTime-ue),Pe=!1}return Pe}finally{v=null,y=ae,x=!1}}var z=!1,$=null,J=-1,V=5,W=-1;function ee(){return!(t.unstable_now()-W<V)}function Y(){if($!==null){var H=t.unstable_now();W=H;var ue=!0;try{ue=$(!0,H)}finally{ue?te():(z=!1,$=null)}}else z=!1}var te;if(typeof T=="function")te=function(){T(Y)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ke=Z.port2;Z.port1.onmessage=Y,te=function(){ke.postMessage(null)}}else te=function(){E(Y,0)};function fe(H){$=H,z||(z=!0,te())}function Se(H,ue){J=E(function(){H(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){S||x||(S=!0,fe(U))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var ue=3;break;default:ue=y}var ae=y;y=ue;try{return H()}finally{y=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ue){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ae=y;y=H;try{return ue()}finally{y=ae}},t.unstable_scheduleCallback=function(H,ue,ae){var I=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?I+ae:I):ae=I,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ae+X,H={id:g++,callback:ue,priorityLevel:H,startTime:ae,expirationTime:X,sortIndex:-1},ae>I?(H.sortIndex=ae,e(h,H),r(d)===null&&H===r(h)&&(_?(C(J),J=-1):_=!0,Se(A,ae-I))):(H.sortIndex=X,e(d,H),S||x||(S=!0,fe(U))),H},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(H){var ue=y;return function(){var ae=y;y=ue;try{return H.apply(this,arguments)}finally{y=ae}}}})(wh)),wh}var Ny;function aE(){return Ny||(Ny=1,yh.exports=oE()),yh.exports}var jy;function lE(){if(jy)return nn;jy=1;var t=rd(),e=aE();function r(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)n.add(o[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function y(s){return d.call(v,s)?!0:d.call(g,s)?!1:h.test(s)?v[s]=!0:(g[s]=!0,!1)}function x(s,o,c,f){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,o,c,f){if(o===null||typeof o>"u"||x(s,o,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function _(s,o,c,f,m,w,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=s,this.type=o,this.sanitizeURL=w,this.removeEmptyString=k}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new _(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];E[o]=new _(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new _(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new _(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new _(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new _(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new _(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new _(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new _(s,5,!1,s.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function T(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(C,T);E[o]=new _(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(C,T);E[o]=new _(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(C,T);E[o]=new _(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new _(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new _(s,1,!1,s.toLowerCase(),null,!0,!0)});function O(s,o,c,f){var m=E.hasOwnProperty(o)?E[o]:null;(m!==null?m.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,c,m,f)&&(c=null),f||m===null?y(o)&&(c===null?s.removeAttribute(o):s.setAttribute(o,""+c)):m.mustUseProperty?s[m.propertyName]=c===null?m.type===3?!1:"":c:(o=m.attributeName,f=m.attributeNamespace,c===null?s.removeAttribute(o):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,f?s.setAttributeNS(f,o,c):s.setAttribute(o,c))))}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),z=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),ee=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),ke=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),H=Symbol.iterator;function ue(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var ae=Object.assign,I;function X(s){if(I===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);I=o&&o[1]||""}return`
`+I+s}var Pe=!1;function ge(s,o){if(!s||Pe)return"";Pe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(q){var f=q}Reflect.construct(s,[],o)}else{try{o.call()}catch(q){f=q}s.call(o.prototype)}else{try{throw Error()}catch(q){f=q}s()}}catch(q){if(q&&f&&typeof q.stack=="string"){for(var m=q.stack.split(`
`),w=f.stack.split(`
`),k=m.length-1,N=w.length-1;1<=k&&0<=N&&m[k]!==w[N];)N--;for(;1<=k&&0<=N;k--,N--)if(m[k]!==w[N]){if(k!==1||N!==1)do if(k--,N--,0>N||m[k]!==w[N]){var R=`
`+m[k].replace(" at new "," at ");return s.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",s.displayName)),R}while(1<=k&&0<=N);break}}}finally{Pe=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?X(s):""}function Le(s){switch(s.tag){case 5:return X(s.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return s=ge(s.type,!1),s;case 11:return s=ge(s.type.render,!1),s;case 1:return s=ge(s.type,!0),s;default:return""}}function Qe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case $:return"Fragment";case z:return"Portal";case V:return"Profiler";case J:return"StrictMode";case te:return"Suspense";case Z:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ee:return(s.displayName||"Context")+".Consumer";case W:return(s._context.displayName||"Context")+".Provider";case Y:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ke:return o=s.displayName||null,o!==null?o:Qe(s.type)||"Memo";case fe:o=s._payload,s=s._init;try{return Qe(s(o))}catch{}}return null}function qe(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qe(o);case 8:return o===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ke(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Me(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function yt(s){var o=Me(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,w=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(k){f=""+k,w.call(this,k)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function kr(s){s._valueTracker||(s._valueTracker=yt(s))}function pr(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return s&&(f=Me(s)?s.checked?"true":"false":s.value),s=f,s!==c?(o.setValue(s),!0):!1}function Ft(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function er(s,o){var c=o.checked;return ae({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function _t(s,o){var c=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;c=Ke(o.value!=null?o.value:c),s._wrapperState={initialChecked:f,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function bn(s,o){o=o.checked,o!=null&&O(s,"checked",o,!1)}function ve(s,o){bn(s,o);var c=Ke(o.value),f=o.type;if(c!=null)f==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Br(s,o.type,c):o.hasOwnProperty("defaultValue")&&Br(s,o.type,Ke(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function An(s,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,c||o===s.value||(s.value=o),s.defaultValue=o}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function Br(s,o,c){(o!=="number"||Ft(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Ar=Array.isArray;function or(s,o,c,f){if(s=s.options,o){o={};for(var m=0;m<c.length;m++)o["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=o.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&f&&(s[c].defaultSelected=!0)}else{for(c=""+Ke(c),o=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function j(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(r(91));return ae({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function F(s,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(r(92));if(Ar(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),c=o}s._wrapperState={initialValue:Ke(c)}}function Q(s,o){var c=Ke(o.value),f=Ke(o.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),o.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),f!=null&&(s.defaultValue=""+f)}function me(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function pe(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?pe(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var _e,Ze=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,f,m){MSApp.execUnsafeLocalFunction(function(){return s(o,c,f,m)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(_e=_e||document.createElement("div"),_e.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=_e.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ht(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var ot={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gr=["Webkit","ms","Moz","O"];Object.keys(ot).forEach(function(s){gr.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),ot[o]=ot[s]})});function zr(s,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||ot.hasOwnProperty(s)&&ot[s]?(""+o).trim():o+"px"}function Pt(s,o){s=s.style;for(var c in o)if(o.hasOwnProperty(c)){var f=c.indexOf("--")===0,m=zr(c,o[c],f);c==="float"&&(c="cssFloat"),f?s.setProperty(c,m):s[c]=m}}var Vr=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(s,o){if(o){if(Vr[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(r(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(r(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(r(61))}if(o.style!=null&&typeof o.style!="object")throw Error(r(62))}}function St(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qr=null;function Ir(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Zr=null,mr=null,lt=null;function Nt(s){if(s=Ia(s)){if(typeof Zr!="function")throw Error(r(280));var o=s.stateNode;o&&(o=yc(o),Zr(s.stateNode,s.type,o))}}function At(s){mr?lt?lt.push(s):lt=[s]:mr=s}function Mt(){if(mr){var s=mr,o=lt;if(lt=mr=null,Nt(s),o)for(s=0;s<o.length;s++)Nt(o[s])}}function vr(s,o){return s(o)}function tr(){}var Ht=!1;function P(s,o,c){if(Ht)return s(o,c);Ht=!0;try{return vr(s,o,c)}finally{Ht=!1,(mr!==null||lt!==null)&&(tr(),Mt())}}function ne(s,o){var c=s.stateNode;if(c===null)return null;var f=yc(c);if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var ye=!1;if(u)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){ye=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch{ye=!1}function re(s,o,c,f,m,w,k,N,R){var q=Array.prototype.slice.call(arguments,3);try{o.apply(c,q)}catch(oe){this.onError(oe)}}var it=!1,nt=null,kt=!1,rr=null,ct={onError:function(s){it=!0,nt=s}};function In(s,o,c,f,m,w,k,N,R){it=!1,nt=null,re.apply(ct,arguments)}function Ei(s,o,c,f,m,w,k,N,R){if(In.apply(this,arguments),it){if(it){var q=nt;it=!1,nt=null}else throw Error(r(198));kt||(kt=!0,rr=q)}}function be(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function Dn(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function ha(s){if(be(s)!==s)throw Error(r(188))}function Rd(s){var o=s.alternate;if(!o){if(o=be(s),o===null)throw Error(r(188));return o!==s?null:s}for(var c=s,f=o;;){var m=c.return;if(m===null)break;var w=m.alternate;if(w===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===c)return ha(m),s;if(w===f)return ha(m),o;w=w.sibling}throw Error(r(188))}if(c.return!==f.return)c=m,f=w;else{for(var k=!1,N=m.child;N;){if(N===c){k=!0,c=m,f=w;break}if(N===f){k=!0,f=m,c=w;break}N=N.sibling}if(!k){for(N=w.child;N;){if(N===c){k=!0,c=w,f=m;break}if(N===f){k=!0,f=w,c=m;break}N=N.sibling}if(!k)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:o}function pa(s){return s=Rd(s),s!==null?Zl(s):null}function Zl(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Zl(s);if(o!==null)return o;s=s.sibling}return null}var Jl=e.unstable_scheduleCallback,Xl=e.unstable_cancelCallback,ec=e.unstable_shouldYield,tc=e.unstable_requestPaint,Ut=e.unstable_now,Ad=e.unstable_getCurrentPriorityLevel,ga=e.unstable_ImmediatePriority,ma=e.unstable_UserBlockingPriority,Fs=e.unstable_NormalPriority,Id=e.unstable_LowPriority,rc=e.unstable_IdlePriority,Ti=null,xn=null;function Er(s){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Ti,s,void 0,(s.current.flags&128)===128)}catch{}}var L=Math.clz32?Math.clz32:De,K=Math.log,G=Math.LN2;function De(s){return s>>>=0,s===0?32:31-(K(s)/G|0)|0}var Ie=64,pt=4194304;function on(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function vs(s,o){var c=s.pendingLanes;if(c===0)return 0;var f=0,m=s.suspendedLanes,w=s.pingedLanes,k=c&268435455;if(k!==0){var N=k&~m;N!==0?f=on(N):(w&=k,w!==0&&(f=on(w)))}else k=c&~m,k!==0?f=on(k):w!==0&&(f=on(w));if(f===0)return 0;if(o!==0&&o!==f&&(o&m)===0&&(m=f&-f,w=o&-o,m>=w||m===16&&(w&4194240)!==0))return o;if((f&4)!==0&&(f|=c&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)c=31-L(o),m=1<<c,f|=s[c],o&=~m;return f}function xS(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _S(s,o){for(var c=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,w=s.pendingLanes;0<w;){var k=31-L(w),N=1<<k,R=m[k];R===-1?((N&c)===0||(N&f)!==0)&&(m[k]=xS(N,o)):R<=o&&(s.expiredLanes|=N),w&=~N}}function Dd(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function rm(){var s=Ie;return Ie<<=1,(Ie&4194240)===0&&(Ie=64),s}function Ld(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function va(s,o,c){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-L(o),s[o]=c}function SS(s,o){var c=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-L(c),w=1<<m;o[m]=0,f[m]=-1,s[m]=-1,c&=~w}}function Md(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var f=31-L(c),m=1<<f;m&o|s[f]&o&&(s[f]|=o),c&=~m}}var Et=0;function nm(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var sm,$d,im,om,am,Fd=!1,nc=[],Us=null,Bs=null,zs=null,ya=new Map,wa=new Map,Vs=[],kS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lm(s,o){switch(s){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":ya.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(o.pointerId)}}function ba(s,o,c,f,m,w){return s===null||s.nativeEvent!==w?(s={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:w,targetContainers:[m]},o!==null&&(o=Ia(o),o!==null&&$d(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function ES(s,o,c,f,m){switch(o){case"focusin":return Us=ba(Us,s,o,c,f,m),!0;case"dragenter":return Bs=ba(Bs,s,o,c,f,m),!0;case"mouseover":return zs=ba(zs,s,o,c,f,m),!0;case"pointerover":var w=m.pointerId;return ya.set(w,ba(ya.get(w)||null,s,o,c,f,m)),!0;case"gotpointercapture":return w=m.pointerId,wa.set(w,ba(wa.get(w)||null,s,o,c,f,m)),!0}return!1}function cm(s){var o=Ci(s.target);if(o!==null){var c=be(o);if(c!==null){if(o=c.tag,o===13){if(o=Dn(c),o!==null){s.blockedOn=o,am(s.priority,function(){im(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sc(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=Bd(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);qr=f,c.target.dispatchEvent(f),qr=null}else return o=Ia(c),o!==null&&$d(o),s.blockedOn=c,!1;o.shift()}return!0}function um(s,o,c){sc(s)&&c.delete(o)}function TS(){Fd=!1,Us!==null&&sc(Us)&&(Us=null),Bs!==null&&sc(Bs)&&(Bs=null),zs!==null&&sc(zs)&&(zs=null),ya.forEach(um),wa.forEach(um)}function xa(s,o){s.blockedOn===o&&(s.blockedOn=null,Fd||(Fd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,TS)))}function _a(s){function o(m){return xa(m,s)}if(0<nc.length){xa(nc[0],s);for(var c=1;c<nc.length;c++){var f=nc[c];f.blockedOn===s&&(f.blockedOn=null)}}for(Us!==null&&xa(Us,s),Bs!==null&&xa(Bs,s),zs!==null&&xa(zs,s),ya.forEach(o),wa.forEach(o),c=0;c<Vs.length;c++)f=Vs[c],f.blockedOn===s&&(f.blockedOn=null);for(;0<Vs.length&&(c=Vs[0],c.blockedOn===null);)cm(c),c.blockedOn===null&&Vs.shift()}var co=A.ReactCurrentBatchConfig,ic=!0;function CS(s,o,c,f){var m=Et,w=co.transition;co.transition=null;try{Et=1,Ud(s,o,c,f)}finally{Et=m,co.transition=w}}function OS(s,o,c,f){var m=Et,w=co.transition;co.transition=null;try{Et=4,Ud(s,o,c,f)}finally{Et=m,co.transition=w}}function Ud(s,o,c,f){if(ic){var m=Bd(s,o,c,f);if(m===null)sf(s,o,f,oc,c),lm(s,f);else if(ES(m,s,o,c,f))f.stopPropagation();else if(lm(s,f),o&4&&-1<kS.indexOf(s)){for(;m!==null;){var w=Ia(m);if(w!==null&&sm(w),w=Bd(s,o,c,f),w===null&&sf(s,o,f,oc,c),w===m)break;m=w}m!==null&&f.stopPropagation()}else sf(s,o,f,null,c)}}var oc=null;function Bd(s,o,c,f){if(oc=null,s=Ir(f),s=Ci(s),s!==null)if(o=be(s),o===null)s=null;else if(c=o.tag,c===13){if(s=Dn(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return oc=s,null}function dm(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ad()){case ga:return 1;case ma:return 4;case Fs:case Id:return 16;case rc:return 536870912;default:return 16}default:return 16}}var qs=null,zd=null,ac=null;function fm(){if(ac)return ac;var s,o=zd,c=o.length,f,m="value"in qs?qs.value:qs.textContent,w=m.length;for(s=0;s<c&&o[s]===m[s];s++);var k=c-s;for(f=1;f<=k&&o[c-f]===m[w-f];f++);return ac=m.slice(s,1<f?1-f:void 0)}function lc(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function cc(){return!0}function hm(){return!1}function an(s){function o(c,f,m,w,k){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=w,this.target=k,this.currentTarget=null;for(var N in s)s.hasOwnProperty(N)&&(c=s[N],this[N]=c?c(w):w[N]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?cc:hm,this.isPropagationStopped=hm,this}return ae(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),o}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vd=an(uo),Sa=ae({},uo,{view:0,detail:0}),PS=an(Sa),qd,Wd,ka,uc=ae({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ka&&(ka&&s.type==="mousemove"?(qd=s.screenX-ka.screenX,Wd=s.screenY-ka.screenY):Wd=qd=0,ka=s),qd)},movementY:function(s){return"movementY"in s?s.movementY:Wd}}),pm=an(uc),NS=ae({},uc,{dataTransfer:0}),jS=an(NS),RS=ae({},Sa,{relatedTarget:0}),Hd=an(RS),AS=ae({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),IS=an(AS),DS=ae({},uo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),LS=an(DS),MS=ae({},uo,{data:0}),gm=an(MS),$S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},US={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BS(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=US[s])?!!o[s]:!1}function Kd(){return BS}var zS=ae({},Sa,{key:function(s){if(s.key){var o=$S[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=lc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?FS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kd,charCode:function(s){return s.type==="keypress"?lc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?lc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),VS=an(zS),qS=ae({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mm=an(qS),WS=ae({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kd}),HS=an(WS),KS=ae({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),GS=an(KS),QS=ae({},uc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=an(QS),ZS=[9,13,27,32],Gd=u&&"CompositionEvent"in window,Ea=null;u&&"documentMode"in document&&(Ea=document.documentMode);var JS=u&&"TextEvent"in window&&!Ea,vm=u&&(!Gd||Ea&&8<Ea&&11>=Ea),ym=" ",wm=!1;function bm(s,o){switch(s){case"keyup":return ZS.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var fo=!1;function XS(s,o){switch(s){case"compositionend":return xm(o);case"keypress":return o.which!==32?null:(wm=!0,ym);case"textInput":return s=o.data,s===ym&&wm?null:s;default:return null}}function ek(s,o){if(fo)return s==="compositionend"||!Gd&&bm(s,o)?(s=fm(),ac=zd=qs=null,fo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return vm&&o.locale!=="ko"?null:o.data;default:return null}}var tk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _m(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!tk[s.type]:o==="textarea"}function Sm(s,o,c,f){At(f),o=gc(o,"onChange"),0<o.length&&(c=new Vd("onChange","change",null,c,f),s.push({event:c,listeners:o}))}var Ta=null,Ca=null;function rk(s){Bm(s,0)}function dc(s){var o=vo(s);if(pr(o))return s}function nk(s,o){if(s==="change")return o}var km=!1;if(u){var Qd;if(u){var Yd="oninput"in document;if(!Yd){var Em=document.createElement("div");Em.setAttribute("oninput","return;"),Yd=typeof Em.oninput=="function"}Qd=Yd}else Qd=!1;km=Qd&&(!document.documentMode||9<document.documentMode)}function Tm(){Ta&&(Ta.detachEvent("onpropertychange",Cm),Ca=Ta=null)}function Cm(s){if(s.propertyName==="value"&&dc(Ca)){var o=[];Sm(o,Ca,s,Ir(s)),P(rk,o)}}function sk(s,o,c){s==="focusin"?(Tm(),Ta=o,Ca=c,Ta.attachEvent("onpropertychange",Cm)):s==="focusout"&&Tm()}function ik(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return dc(Ca)}function ok(s,o){if(s==="click")return dc(o)}function ak(s,o){if(s==="input"||s==="change")return dc(o)}function lk(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Ln=typeof Object.is=="function"?Object.is:lk;function Oa(s,o){if(Ln(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!d.call(o,m)||!Ln(s[m],o[m]))return!1}return!0}function Om(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Pm(s,o){var c=Om(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=o&&f>=o)return{node:c,offset:o-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Om(c)}}function Nm(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Nm(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function jm(){for(var s=window,o=Ft();o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)s=o.contentWindow;else break;o=Ft(s.document)}return o}function Zd(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function ck(s){var o=jm(),c=s.focusedElem,f=s.selectionRange;if(o!==c&&c&&c.ownerDocument&&Nm(c.ownerDocument.documentElement,c)){if(f!==null&&Zd(c)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(s,c.value.length);else if(s=(o=c.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=c.textContent.length,w=Math.min(f.start,m);f=f.end===void 0?w:Math.min(f.end,m),!s.extend&&w>f&&(m=f,f=w,w=m),m=Pm(c,w);var k=Pm(c,f);m&&k&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==k.node||s.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),w>f?(s.addRange(o),s.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),s.addRange(o)))}}for(o=[],s=c;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)s=o[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var uk=u&&"documentMode"in document&&11>=document.documentMode,ho=null,Jd=null,Pa=null,Xd=!1;function Rm(s,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Xd||ho==null||ho!==Ft(f)||(f=ho,"selectionStart"in f&&Zd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Pa&&Oa(Pa,f)||(Pa=f,f=gc(Jd,"onSelect"),0<f.length&&(o=new Vd("onSelect","select",null,o,c),s.push({event:o,listeners:f}),o.target=ho)))}function fc(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var po={animationend:fc("Animation","AnimationEnd"),animationiteration:fc("Animation","AnimationIteration"),animationstart:fc("Animation","AnimationStart"),transitionend:fc("Transition","TransitionEnd")},ef={},Am={};u&&(Am=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function hc(s){if(ef[s])return ef[s];if(!po[s])return s;var o=po[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in Am)return ef[s]=o[c];return s}var Im=hc("animationend"),Dm=hc("animationiteration"),Lm=hc("animationstart"),Mm=hc("transitionend"),$m=new Map,Fm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ws(s,o){$m.set(s,o),a(o,[s])}for(var tf=0;tf<Fm.length;tf++){var rf=Fm[tf],dk=rf.toLowerCase(),fk=rf[0].toUpperCase()+rf.slice(1);Ws(dk,"on"+fk)}Ws(Im,"onAnimationEnd"),Ws(Dm,"onAnimationIteration"),Ws(Lm,"onAnimationStart"),Ws("dblclick","onDoubleClick"),Ws("focusin","onFocus"),Ws("focusout","onBlur"),Ws(Mm,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Na));function Um(s,o,c){var f=s.type||"unknown-event";s.currentTarget=c,Ei(f,o,void 0,s),s.currentTarget=null}function Bm(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],m=f.event;f=f.listeners;e:{var w=void 0;if(o)for(var k=f.length-1;0<=k;k--){var N=f[k],R=N.instance,q=N.currentTarget;if(N=N.listener,R!==w&&m.isPropagationStopped())break e;Um(m,N,q),w=R}else for(k=0;k<f.length;k++){if(N=f[k],R=N.instance,q=N.currentTarget,N=N.listener,R!==w&&m.isPropagationStopped())break e;Um(m,N,q),w=R}}}if(kt)throw s=rr,kt=!1,rr=null,s}function It(s,o){var c=o[df];c===void 0&&(c=o[df]=new Set);var f=s+"__bubble";c.has(f)||(zm(o,s,2,!1),c.add(f))}function nf(s,o,c){var f=0;o&&(f|=4),zm(c,s,f,o)}var pc="_reactListening"+Math.random().toString(36).slice(2);function ja(s){if(!s[pc]){s[pc]=!0,n.forEach(function(c){c!=="selectionchange"&&(hk.has(c)||nf(c,!1,s),nf(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[pc]||(o[pc]=!0,nf("selectionchange",!1,o))}}function zm(s,o,c,f){switch(dm(o)){case 1:var m=CS;break;case 4:m=OS;break;default:m=Ud}c=m.bind(null,o,c,s),m=void 0,!ye||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(o,c,{capture:!0,passive:m}):s.addEventListener(o,c,!0):m!==void 0?s.addEventListener(o,c,{passive:m}):s.addEventListener(o,c,!1)}function sf(s,o,c,f,m){var w=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var N=f.stateNode.containerInfo;if(N===m||N.nodeType===8&&N.parentNode===m)break;if(k===4)for(k=f.return;k!==null;){var R=k.tag;if((R===3||R===4)&&(R=k.stateNode.containerInfo,R===m||R.nodeType===8&&R.parentNode===m))return;k=k.return}for(;N!==null;){if(k=Ci(N),k===null)return;if(R=k.tag,R===5||R===6){f=w=k;continue e}N=N.parentNode}}f=f.return}P(function(){var q=w,oe=Ir(c),ce=[];e:{var se=$m.get(s);if(se!==void 0){var Ee=Vd,Oe=s;switch(s){case"keypress":if(lc(c)===0)break e;case"keydown":case"keyup":Ee=VS;break;case"focusin":Oe="focus",Ee=Hd;break;case"focusout":Oe="blur",Ee=Hd;break;case"beforeblur":case"afterblur":Ee=Hd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=jS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=HS;break;case Im:case Dm:case Lm:Ee=IS;break;case Mm:Ee=GS;break;case"scroll":Ee=PS;break;case"wheel":Ee=YS;break;case"copy":case"cut":case"paste":Ee=LS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=mm}var Ne=(o&4)!==0,Yt=!Ne&&s==="scroll",M=Ne?se!==null?se+"Capture":null:se;Ne=[];for(var D=q,B;D!==null;){B=D;var he=B.stateNode;if(B.tag===5&&he!==null&&(B=he,M!==null&&(he=ne(D,M),he!=null&&Ne.push(Ra(D,he,B)))),Yt)break;D=D.return}0<Ne.length&&(se=new Ee(se,Oe,null,c,oe),ce.push({event:se,listeners:Ne}))}}if((o&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",Ee=s==="mouseout"||s==="pointerout",se&&c!==qr&&(Oe=c.relatedTarget||c.fromElement)&&(Ci(Oe)||Oe[ys]))break e;if((Ee||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,Ee?(Oe=c.relatedTarget||c.toElement,Ee=q,Oe=Oe?Ci(Oe):null,Oe!==null&&(Yt=be(Oe),Oe!==Yt||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Ee=null,Oe=q),Ee!==Oe)){if(Ne=pm,he="onMouseLeave",M="onMouseEnter",D="mouse",(s==="pointerout"||s==="pointerover")&&(Ne=mm,he="onPointerLeave",M="onPointerEnter",D="pointer"),Yt=Ee==null?se:vo(Ee),B=Oe==null?se:vo(Oe),se=new Ne(he,D+"leave",Ee,c,oe),se.target=Yt,se.relatedTarget=B,he=null,Ci(oe)===q&&(Ne=new Ne(M,D+"enter",Oe,c,oe),Ne.target=B,Ne.relatedTarget=Yt,he=Ne),Yt=he,Ee&&Oe)t:{for(Ne=Ee,M=Oe,D=0,B=Ne;B;B=go(B))D++;for(B=0,he=M;he;he=go(he))B++;for(;0<D-B;)Ne=go(Ne),D--;for(;0<B-D;)M=go(M),B--;for(;D--;){if(Ne===M||M!==null&&Ne===M.alternate)break t;Ne=go(Ne),M=go(M)}Ne=null}else Ne=null;Ee!==null&&Vm(ce,se,Ee,Ne,!1),Oe!==null&&Yt!==null&&Vm(ce,Yt,Oe,Ne,!0)}}e:{if(se=q?vo(q):window,Ee=se.nodeName&&se.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&se.type==="file")var je=nk;else if(_m(se))if(km)je=ak;else{je=ik;var $e=sk}else(Ee=se.nodeName)&&Ee.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(je=ok);if(je&&(je=je(s,q))){Sm(ce,je,c,oe);break e}$e&&$e(s,se,q),s==="focusout"&&($e=se._wrapperState)&&$e.controlled&&se.type==="number"&&Br(se,"number",se.value)}switch($e=q?vo(q):window,s){case"focusin":(_m($e)||$e.contentEditable==="true")&&(ho=$e,Jd=q,Pa=null);break;case"focusout":Pa=Jd=ho=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,Rm(ce,c,oe);break;case"selectionchange":if(uk)break;case"keydown":case"keyup":Rm(ce,c,oe)}var Fe;if(Gd)e:{switch(s){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else fo?bm(s,c)&&(Ge="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ge="onCompositionStart");Ge&&(vm&&c.locale!=="ko"&&(fo||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&fo&&(Fe=fm()):(qs=oe,zd="value"in qs?qs.value:qs.textContent,fo=!0)),$e=gc(q,Ge),0<$e.length&&(Ge=new gm(Ge,s,null,c,oe),ce.push({event:Ge,listeners:$e}),Fe?Ge.data=Fe:(Fe=xm(c),Fe!==null&&(Ge.data=Fe)))),(Fe=JS?XS(s,c):ek(s,c))&&(q=gc(q,"onBeforeInput"),0<q.length&&(oe=new gm("onBeforeInput","beforeinput",null,c,oe),ce.push({event:oe,listeners:q}),oe.data=Fe))}Bm(ce,o)})}function Ra(s,o,c){return{instance:s,listener:o,currentTarget:c}}function gc(s,o){for(var c=o+"Capture",f=[];s!==null;){var m=s,w=m.stateNode;m.tag===5&&w!==null&&(m=w,w=ne(s,c),w!=null&&f.unshift(Ra(s,w,m)),w=ne(s,o),w!=null&&f.push(Ra(s,w,m))),s=s.return}return f}function go(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Vm(s,o,c,f,m){for(var w=o._reactName,k=[];c!==null&&c!==f;){var N=c,R=N.alternate,q=N.stateNode;if(R!==null&&R===f)break;N.tag===5&&q!==null&&(N=q,m?(R=ne(c,w),R!=null&&k.unshift(Ra(c,R,N))):m||(R=ne(c,w),R!=null&&k.push(Ra(c,R,N)))),c=c.return}k.length!==0&&s.push({event:o,listeners:k})}var pk=/\r\n?/g,gk=/\u0000|\uFFFD/g;function qm(s){return(typeof s=="string"?s:""+s).replace(pk,`
`).replace(gk,"")}function mc(s,o,c){if(o=qm(o),qm(s)!==o&&c)throw Error(r(425))}function vc(){}var of=null,af=null;function lf(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var cf=typeof setTimeout=="function"?setTimeout:void 0,mk=typeof clearTimeout=="function"?clearTimeout:void 0,Wm=typeof Promise=="function"?Promise:void 0,vk=typeof queueMicrotask=="function"?queueMicrotask:typeof Wm<"u"?function(s){return Wm.resolve(null).then(s).catch(yk)}:cf;function yk(s){setTimeout(function(){throw s})}function uf(s,o){var c=o,f=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){s.removeChild(m),_a(o);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);_a(o)}function Hs(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Hm(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return s;o--}else c==="/$"&&o++}s=s.previousSibling}return null}var mo=Math.random().toString(36).slice(2),rs="__reactFiber$"+mo,Aa="__reactProps$"+mo,ys="__reactContainer$"+mo,df="__reactEvents$"+mo,wk="__reactListeners$"+mo,bk="__reactHandles$"+mo;function Ci(s){var o=s[rs];if(o)return o;for(var c=s.parentNode;c;){if(o=c[ys]||c[rs]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=Hm(s);s!==null;){if(c=s[rs])return c;s=Hm(s)}return o}s=c,c=s.parentNode}return null}function Ia(s){return s=s[rs]||s[ys],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function vo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(r(33))}function yc(s){return s[Aa]||null}var ff=[],yo=-1;function Ks(s){return{current:s}}function Dt(s){0>yo||(s.current=ff[yo],ff[yo]=null,yo--)}function jt(s,o){yo++,ff[yo]=s.current,s.current=o}var Gs={},Dr=Ks(Gs),Jr=Ks(!1),Oi=Gs;function wo(s,o){var c=s.type.contextTypes;if(!c)return Gs;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var m={},w;for(w in c)m[w]=o[w];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function Xr(s){return s=s.childContextTypes,s!=null}function wc(){Dt(Jr),Dt(Dr)}function Km(s,o,c){if(Dr.current!==Gs)throw Error(r(168));jt(Dr,o),jt(Jr,c)}function Gm(s,o,c){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var m in f)if(!(m in o))throw Error(r(108,qe(s)||"Unknown",m));return ae({},c,f)}function bc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Gs,Oi=Dr.current,jt(Dr,s),jt(Jr,Jr.current),!0}function Qm(s,o,c){var f=s.stateNode;if(!f)throw Error(r(169));c?(s=Gm(s,o,Oi),f.__reactInternalMemoizedMergedChildContext=s,Dt(Jr),Dt(Dr),jt(Dr,s)):Dt(Jr),jt(Jr,c)}var ws=null,xc=!1,hf=!1;function Ym(s){ws===null?ws=[s]:ws.push(s)}function xk(s){xc=!0,Ym(s)}function Qs(){if(!hf&&ws!==null){hf=!0;var s=0,o=Et;try{var c=ws;for(Et=1;s<c.length;s++){var f=c[s];do f=f(!0);while(f!==null)}ws=null,xc=!1}catch(m){throw ws!==null&&(ws=ws.slice(s+1)),Jl(ga,Qs),m}finally{Et=o,hf=!1}}return null}var bo=[],xo=0,_c=null,Sc=0,_n=[],Sn=0,Pi=null,bs=1,xs="";function Ni(s,o){bo[xo++]=Sc,bo[xo++]=_c,_c=s,Sc=o}function Zm(s,o,c){_n[Sn++]=bs,_n[Sn++]=xs,_n[Sn++]=Pi,Pi=s;var f=bs;s=xs;var m=32-L(f)-1;f&=~(1<<m),c+=1;var w=32-L(o)+m;if(30<w){var k=m-m%5;w=(f&(1<<k)-1).toString(32),f>>=k,m-=k,bs=1<<32-L(o)+m|c<<m|f,xs=w+s}else bs=1<<w|c<<m|f,xs=s}function pf(s){s.return!==null&&(Ni(s,1),Zm(s,1,0))}function gf(s){for(;s===_c;)_c=bo[--xo],bo[xo]=null,Sc=bo[--xo],bo[xo]=null;for(;s===Pi;)Pi=_n[--Sn],_n[Sn]=null,xs=_n[--Sn],_n[Sn]=null,bs=_n[--Sn],_n[Sn]=null}var ln=null,cn=null,$t=!1,Mn=null;function Jm(s,o){var c=Cn(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=s,o=s.deletions,o===null?(s.deletions=[c],s.flags|=16):o.push(c)}function Xm(s,o){switch(s.tag){case 5:var c=s.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,ln=s,cn=Hs(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,ln=s,cn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=Pi!==null?{id:bs,overflow:xs}:null,s.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=Cn(18,null,null,0),c.stateNode=o,c.return=s,s.child=c,ln=s,cn=null,!0):!1;default:return!1}}function mf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function vf(s){if($t){var o=cn;if(o){var c=o;if(!Xm(s,o)){if(mf(s))throw Error(r(418));o=Hs(c.nextSibling);var f=ln;o&&Xm(s,o)?Jm(f,c):(s.flags=s.flags&-4097|2,$t=!1,ln=s)}}else{if(mf(s))throw Error(r(418));s.flags=s.flags&-4097|2,$t=!1,ln=s}}}function ev(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;ln=s}function kc(s){if(s!==ln)return!1;if(!$t)return ev(s),$t=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!lf(s.type,s.memoizedProps)),o&&(o=cn)){if(mf(s))throw tv(),Error(r(418));for(;o;)Jm(s,o),o=Hs(o.nextSibling)}if(ev(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(o===0){cn=Hs(s.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}s=s.nextSibling}cn=null}}else cn=ln?Hs(s.stateNode.nextSibling):null;return!0}function tv(){for(var s=cn;s;)s=Hs(s.nextSibling)}function _o(){cn=ln=null,$t=!1}function yf(s){Mn===null?Mn=[s]:Mn.push(s)}var _k=A.ReactCurrentBatchConfig;function Da(s,o,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(r(309));var f=c.stateNode}if(!f)throw Error(r(147,s));var m=f,w=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(k){var N=m.refs;k===null?delete N[w]:N[w]=k},o._stringRef=w,o)}if(typeof s!="string")throw Error(r(284));if(!c._owner)throw Error(r(290,s))}return s}function Ec(s,o){throw s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function rv(s){var o=s._init;return o(s._payload)}function nv(s){function o(M,D){if(s){var B=M.deletions;B===null?(M.deletions=[D],M.flags|=16):B.push(D)}}function c(M,D){if(!s)return null;for(;D!==null;)o(M,D),D=D.sibling;return null}function f(M,D){for(M=new Map;D!==null;)D.key!==null?M.set(D.key,D):M.set(D.index,D),D=D.sibling;return M}function m(M,D){return M=ni(M,D),M.index=0,M.sibling=null,M}function w(M,D,B){return M.index=B,s?(B=M.alternate,B!==null?(B=B.index,B<D?(M.flags|=2,D):B):(M.flags|=2,D)):(M.flags|=1048576,D)}function k(M){return s&&M.alternate===null&&(M.flags|=2),M}function N(M,D,B,he){return D===null||D.tag!==6?(D=ch(B,M.mode,he),D.return=M,D):(D=m(D,B),D.return=M,D)}function R(M,D,B,he){var je=B.type;return je===$?oe(M,D,B.props.children,he,B.key):D!==null&&(D.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===fe&&rv(je)===D.type)?(he=m(D,B.props),he.ref=Da(M,D,B),he.return=M,he):(he=Qc(B.type,B.key,B.props,null,M.mode,he),he.ref=Da(M,D,B),he.return=M,he)}function q(M,D,B,he){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=uh(B,M.mode,he),D.return=M,D):(D=m(D,B.children||[]),D.return=M,D)}function oe(M,D,B,he,je){return D===null||D.tag!==7?(D=$i(B,M.mode,he,je),D.return=M,D):(D=m(D,B),D.return=M,D)}function ce(M,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return D=ch(""+D,M.mode,B),D.return=M,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case U:return B=Qc(D.type,D.key,D.props,null,M.mode,B),B.ref=Da(M,null,D),B.return=M,B;case z:return D=uh(D,M.mode,B),D.return=M,D;case fe:var he=D._init;return ce(M,he(D._payload),B)}if(Ar(D)||ue(D))return D=$i(D,M.mode,B,null),D.return=M,D;Ec(M,D)}return null}function se(M,D,B,he){var je=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return je!==null?null:N(M,D,""+B,he);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case U:return B.key===je?R(M,D,B,he):null;case z:return B.key===je?q(M,D,B,he):null;case fe:return je=B._init,se(M,D,je(B._payload),he)}if(Ar(B)||ue(B))return je!==null?null:oe(M,D,B,he,null);Ec(M,B)}return null}function Ee(M,D,B,he,je){if(typeof he=="string"&&he!==""||typeof he=="number")return M=M.get(B)||null,N(D,M,""+he,je);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case U:return M=M.get(he.key===null?B:he.key)||null,R(D,M,he,je);case z:return M=M.get(he.key===null?B:he.key)||null,q(D,M,he,je);case fe:var $e=he._init;return Ee(M,D,B,$e(he._payload),je)}if(Ar(he)||ue(he))return M=M.get(B)||null,oe(D,M,he,je,null);Ec(D,he)}return null}function Oe(M,D,B,he){for(var je=null,$e=null,Fe=D,Ge=D=0,br=null;Fe!==null&&Ge<B.length;Ge++){Fe.index>Ge?(br=Fe,Fe=null):br=Fe.sibling;var wt=se(M,Fe,B[Ge],he);if(wt===null){Fe===null&&(Fe=br);break}s&&Fe&&wt.alternate===null&&o(M,Fe),D=w(wt,D,Ge),$e===null?je=wt:$e.sibling=wt,$e=wt,Fe=br}if(Ge===B.length)return c(M,Fe),$t&&Ni(M,Ge),je;if(Fe===null){for(;Ge<B.length;Ge++)Fe=ce(M,B[Ge],he),Fe!==null&&(D=w(Fe,D,Ge),$e===null?je=Fe:$e.sibling=Fe,$e=Fe);return $t&&Ni(M,Ge),je}for(Fe=f(M,Fe);Ge<B.length;Ge++)br=Ee(Fe,M,Ge,B[Ge],he),br!==null&&(s&&br.alternate!==null&&Fe.delete(br.key===null?Ge:br.key),D=w(br,D,Ge),$e===null?je=br:$e.sibling=br,$e=br);return s&&Fe.forEach(function(si){return o(M,si)}),$t&&Ni(M,Ge),je}function Ne(M,D,B,he){var je=ue(B);if(typeof je!="function")throw Error(r(150));if(B=je.call(B),B==null)throw Error(r(151));for(var $e=je=null,Fe=D,Ge=D=0,br=null,wt=B.next();Fe!==null&&!wt.done;Ge++,wt=B.next()){Fe.index>Ge?(br=Fe,Fe=null):br=Fe.sibling;var si=se(M,Fe,wt.value,he);if(si===null){Fe===null&&(Fe=br);break}s&&Fe&&si.alternate===null&&o(M,Fe),D=w(si,D,Ge),$e===null?je=si:$e.sibling=si,$e=si,Fe=br}if(wt.done)return c(M,Fe),$t&&Ni(M,Ge),je;if(Fe===null){for(;!wt.done;Ge++,wt=B.next())wt=ce(M,wt.value,he),wt!==null&&(D=w(wt,D,Ge),$e===null?je=wt:$e.sibling=wt,$e=wt);return $t&&Ni(M,Ge),je}for(Fe=f(M,Fe);!wt.done;Ge++,wt=B.next())wt=Ee(Fe,M,Ge,wt.value,he),wt!==null&&(s&&wt.alternate!==null&&Fe.delete(wt.key===null?Ge:wt.key),D=w(wt,D,Ge),$e===null?je=wt:$e.sibling=wt,$e=wt);return s&&Fe.forEach(function(tE){return o(M,tE)}),$t&&Ni(M,Ge),je}function Yt(M,D,B,he){if(typeof B=="object"&&B!==null&&B.type===$&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case U:e:{for(var je=B.key,$e=D;$e!==null;){if($e.key===je){if(je=B.type,je===$){if($e.tag===7){c(M,$e.sibling),D=m($e,B.props.children),D.return=M,M=D;break e}}else if($e.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===fe&&rv(je)===$e.type){c(M,$e.sibling),D=m($e,B.props),D.ref=Da(M,$e,B),D.return=M,M=D;break e}c(M,$e);break}else o(M,$e);$e=$e.sibling}B.type===$?(D=$i(B.props.children,M.mode,he,B.key),D.return=M,M=D):(he=Qc(B.type,B.key,B.props,null,M.mode,he),he.ref=Da(M,D,B),he.return=M,M=he)}return k(M);case z:e:{for($e=B.key;D!==null;){if(D.key===$e)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){c(M,D.sibling),D=m(D,B.children||[]),D.return=M,M=D;break e}else{c(M,D);break}else o(M,D);D=D.sibling}D=uh(B,M.mode,he),D.return=M,M=D}return k(M);case fe:return $e=B._init,Yt(M,D,$e(B._payload),he)}if(Ar(B))return Oe(M,D,B,he);if(ue(B))return Ne(M,D,B,he);Ec(M,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,D!==null&&D.tag===6?(c(M,D.sibling),D=m(D,B),D.return=M,M=D):(c(M,D),D=ch(B,M.mode,he),D.return=M,M=D),k(M)):c(M,D)}return Yt}var So=nv(!0),sv=nv(!1),Tc=Ks(null),Cc=null,ko=null,wf=null;function bf(){wf=ko=Cc=null}function xf(s){var o=Tc.current;Dt(Tc),s._currentValue=o}function _f(s,o,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===c)break;s=s.return}}function Eo(s,o){Cc=s,wf=ko=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(en=!0),s.firstContext=null)}function kn(s){var o=s._currentValue;if(wf!==s)if(s={context:s,memoizedValue:o,next:null},ko===null){if(Cc===null)throw Error(r(308));ko=s,Cc.dependencies={lanes:0,firstContext:s}}else ko=ko.next=s;return o}var ji=null;function Sf(s){ji===null?ji=[s]:ji.push(s)}function iv(s,o,c,f){var m=o.interleaved;return m===null?(c.next=c,Sf(o)):(c.next=m.next,m.next=c),o.interleaved=c,_s(s,f)}function _s(s,o){s.lanes|=o;var c=s.alternate;for(c!==null&&(c.lanes|=o),c=s,s=s.return;s!==null;)s.childLanes|=o,c=s.alternate,c!==null&&(c.childLanes|=o),c=s,s=s.return;return c.tag===3?c.stateNode:null}var Ys=!1;function kf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ov(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ss(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Zs(s,o,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(mt&2)!==0){var m=f.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),f.pending=o,_s(s,c)}return m=f.interleaved,m===null?(o.next=o,Sf(f)):(o.next=m.next,m.next=o),f.interleaved=o,_s(s,c)}function Oc(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,Md(s,c)}}function av(s,o){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?m=w=k:w=w.next=k,c=c.next}while(c!==null);w===null?m=w=o:w=w.next=o}else m=w=o;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:f.shared,effects:f.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}function Pc(s,o,c,f){var m=s.updateQueue;Ys=!1;var w=m.firstBaseUpdate,k=m.lastBaseUpdate,N=m.shared.pending;if(N!==null){m.shared.pending=null;var R=N,q=R.next;R.next=null,k===null?w=q:k.next=q,k=R;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,N=oe.lastBaseUpdate,N!==k&&(N===null?oe.firstBaseUpdate=q:N.next=q,oe.lastBaseUpdate=R))}if(w!==null){var ce=m.baseState;k=0,oe=q=R=null,N=w;do{var se=N.lane,Ee=N.eventTime;if((f&se)===se){oe!==null&&(oe=oe.next={eventTime:Ee,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var Oe=s,Ne=N;switch(se=o,Ee=c,Ne.tag){case 1:if(Oe=Ne.payload,typeof Oe=="function"){ce=Oe.call(Ee,ce,se);break e}ce=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ne.payload,se=typeof Oe=="function"?Oe.call(Ee,ce,se):Oe,se==null)break e;ce=ae({},ce,se);break e;case 2:Ys=!0}}N.callback!==null&&N.lane!==0&&(s.flags|=64,se=m.effects,se===null?m.effects=[N]:se.push(N))}else Ee={eventTime:Ee,lane:se,tag:N.tag,payload:N.payload,callback:N.callback,next:null},oe===null?(q=oe=Ee,R=ce):oe=oe.next=Ee,k|=se;if(N=N.next,N===null){if(N=m.shared.pending,N===null)break;se=N,N=se.next,se.next=null,m.lastBaseUpdate=se,m.shared.pending=null}}while(!0);if(oe===null&&(R=ce),m.baseState=R,m.firstBaseUpdate=q,m.lastBaseUpdate=oe,o=m.shared.interleaved,o!==null){m=o;do k|=m.lane,m=m.next;while(m!==o)}else w===null&&(m.shared.lanes=0);Ii|=k,s.lanes=k,s.memoizedState=ce}}function lv(s,o,c){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],m=f.callback;if(m!==null){if(f.callback=null,f=c,typeof m!="function")throw Error(r(191,m));m.call(f)}}}var La={},ns=Ks(La),Ma=Ks(La),$a=Ks(La);function Ri(s){if(s===La)throw Error(r(174));return s}function Ef(s,o){switch(jt($a,o),jt(Ma,s),jt(ns,La),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:le(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=le(o,s)}Dt(ns),jt(ns,o)}function To(){Dt(ns),Dt(Ma),Dt($a)}function cv(s){Ri($a.current);var o=Ri(ns.current),c=le(o,s.type);o!==c&&(jt(Ma,s),jt(ns,c))}function Tf(s){Ma.current===s&&(Dt(ns),Dt(Ma))}var Bt=Ks(0);function Nc(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Cf=[];function Of(){for(var s=0;s<Cf.length;s++)Cf[s]._workInProgressVersionPrimary=null;Cf.length=0}var jc=A.ReactCurrentDispatcher,Pf=A.ReactCurrentBatchConfig,Ai=0,zt=null,ar=null,yr=null,Rc=!1,Fa=!1,Ua=0,Sk=0;function Lr(){throw Error(r(321))}function Nf(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!Ln(s[c],o[c]))return!1;return!0}function jf(s,o,c,f,m,w){if(Ai=w,zt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,jc.current=s===null||s.memoizedState===null?Ck:Ok,s=c(f,m),Fa){w=0;do{if(Fa=!1,Ua=0,25<=w)throw Error(r(301));w+=1,yr=ar=null,o.updateQueue=null,jc.current=Pk,s=c(f,m)}while(Fa)}if(jc.current=Dc,o=ar!==null&&ar.next!==null,Ai=0,yr=ar=zt=null,Rc=!1,o)throw Error(r(300));return s}function Rf(){var s=Ua!==0;return Ua=0,s}function ss(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?zt.memoizedState=yr=s:yr=yr.next=s,yr}function En(){if(ar===null){var s=zt.alternate;s=s!==null?s.memoizedState:null}else s=ar.next;var o=yr===null?zt.memoizedState:yr.next;if(o!==null)yr=o,ar=s;else{if(s===null)throw Error(r(310));ar=s,s={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},yr===null?zt.memoizedState=yr=s:yr=yr.next=s}return yr}function Ba(s,o){return typeof o=="function"?o(s):o}function Af(s){var o=En(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var f=ar,m=f.baseQueue,w=c.pending;if(w!==null){if(m!==null){var k=m.next;m.next=w.next,w.next=k}f.baseQueue=m=w,c.pending=null}if(m!==null){w=m.next,f=f.baseState;var N=k=null,R=null,q=w;do{var oe=q.lane;if((Ai&oe)===oe)R!==null&&(R=R.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),f=q.hasEagerState?q.eagerState:s(f,q.action);else{var ce={lane:oe,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};R===null?(N=R=ce,k=f):R=R.next=ce,zt.lanes|=oe,Ii|=oe}q=q.next}while(q!==null&&q!==w);R===null?k=f:R.next=N,Ln(f,o.memoizedState)||(en=!0),o.memoizedState=f,o.baseState=k,o.baseQueue=R,c.lastRenderedState=f}if(s=c.interleaved,s!==null){m=s;do w=m.lane,zt.lanes|=w,Ii|=w,m=m.next;while(m!==s)}else m===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function If(s){var o=En(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var f=c.dispatch,m=c.pending,w=o.memoizedState;if(m!==null){c.pending=null;var k=m=m.next;do w=s(w,k.action),k=k.next;while(k!==m);Ln(w,o.memoizedState)||(en=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),c.lastRenderedState=w}return[w,f]}function uv(){}function dv(s,o){var c=zt,f=En(),m=o(),w=!Ln(f.memoizedState,m);if(w&&(f.memoizedState=m,en=!0),f=f.queue,Df(pv.bind(null,c,f,s),[s]),f.getSnapshot!==o||w||yr!==null&&yr.memoizedState.tag&1){if(c.flags|=2048,za(9,hv.bind(null,c,f,m,o),void 0,null),wr===null)throw Error(r(349));(Ai&30)!==0||fv(c,o,m)}return m}function fv(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=zt.updateQueue,o===null?(o={lastEffect:null,stores:null},zt.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function hv(s,o,c,f){o.value=c,o.getSnapshot=f,gv(o)&&mv(s)}function pv(s,o,c){return c(function(){gv(o)&&mv(s)})}function gv(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!Ln(s,c)}catch{return!0}}function mv(s){var o=_s(s,1);o!==null&&Bn(o,s,1,-1)}function vv(s){var o=ss();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:s},o.queue=s,s=s.dispatch=Tk.bind(null,zt,s),[o.memoizedState,s]}function za(s,o,c,f){return s={tag:s,create:o,destroy:c,deps:f,next:null},o=zt.updateQueue,o===null?(o={lastEffect:null,stores:null},zt.updateQueue=o,o.lastEffect=s.next=s):(c=o.lastEffect,c===null?o.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,o.lastEffect=s)),s}function yv(){return En().memoizedState}function Ac(s,o,c,f){var m=ss();zt.flags|=s,m.memoizedState=za(1|o,c,void 0,f===void 0?null:f)}function Ic(s,o,c,f){var m=En();f=f===void 0?null:f;var w=void 0;if(ar!==null){var k=ar.memoizedState;if(w=k.destroy,f!==null&&Nf(f,k.deps)){m.memoizedState=za(o,c,w,f);return}}zt.flags|=s,m.memoizedState=za(1|o,c,w,f)}function wv(s,o){return Ac(8390656,8,s,o)}function Df(s,o){return Ic(2048,8,s,o)}function bv(s,o){return Ic(4,2,s,o)}function xv(s,o){return Ic(4,4,s,o)}function _v(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Sv(s,o,c){return c=c!=null?c.concat([s]):null,Ic(4,4,_v.bind(null,o,s),c)}function Lf(){}function kv(s,o){var c=En();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Nf(o,f[1])?f[0]:(c.memoizedState=[s,o],s)}function Ev(s,o){var c=En();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Nf(o,f[1])?f[0]:(s=s(),c.memoizedState=[s,o],s)}function Tv(s,o,c){return(Ai&21)===0?(s.baseState&&(s.baseState=!1,en=!0),s.memoizedState=c):(Ln(c,o)||(c=rm(),zt.lanes|=c,Ii|=c,s.baseState=!0),o)}function kk(s,o){var c=Et;Et=c!==0&&4>c?c:4,s(!0);var f=Pf.transition;Pf.transition={};try{s(!1),o()}finally{Et=c,Pf.transition=f}}function Cv(){return En().memoizedState}function Ek(s,o,c){var f=ti(s);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Ov(s))Pv(o,c);else if(c=iv(s,o,c,f),c!==null){var m=Hr();Bn(c,s,f,m),Nv(c,o,f)}}function Tk(s,o,c){var f=ti(s),m={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ov(s))Pv(o,m);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var k=o.lastRenderedState,N=w(k,c);if(m.hasEagerState=!0,m.eagerState=N,Ln(N,k)){var R=o.interleaved;R===null?(m.next=m,Sf(o)):(m.next=R.next,R.next=m),o.interleaved=m;return}}catch{}c=iv(s,o,m,f),c!==null&&(m=Hr(),Bn(c,s,f,m),Nv(c,o,f))}}function Ov(s){var o=s.alternate;return s===zt||o!==null&&o===zt}function Pv(s,o){Fa=Rc=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function Nv(s,o,c){if((c&4194240)!==0){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,Md(s,c)}}var Dc={readContext:kn,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},Ck={readContext:kn,useCallback:function(s,o){return ss().memoizedState=[s,o===void 0?null:o],s},useContext:kn,useEffect:wv,useImperativeHandle:function(s,o,c){return c=c!=null?c.concat([s]):null,Ac(4194308,4,_v.bind(null,o,s),c)},useLayoutEffect:function(s,o){return Ac(4194308,4,s,o)},useInsertionEffect:function(s,o){return Ac(4,2,s,o)},useMemo:function(s,o){var c=ss();return o=o===void 0?null:o,s=s(),c.memoizedState=[s,o],s},useReducer:function(s,o,c){var f=ss();return o=c!==void 0?c(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=Ek.bind(null,zt,s),[f.memoizedState,s]},useRef:function(s){var o=ss();return s={current:s},o.memoizedState=s},useState:vv,useDebugValue:Lf,useDeferredValue:function(s){return ss().memoizedState=s},useTransition:function(){var s=vv(!1),o=s[0];return s=kk.bind(null,s[1]),ss().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,c){var f=zt,m=ss();if($t){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),wr===null)throw Error(r(349));(Ai&30)!==0||fv(f,o,c)}m.memoizedState=c;var w={value:c,getSnapshot:o};return m.queue=w,wv(pv.bind(null,f,w,s),[s]),f.flags|=2048,za(9,hv.bind(null,f,w,c,o),void 0,null),c},useId:function(){var s=ss(),o=wr.identifierPrefix;if($t){var c=xs,f=bs;c=(f&~(1<<32-L(f)-1)).toString(32)+c,o=":"+o+"R"+c,c=Ua++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=Sk++,o=":"+o+"r"+c.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Ok={readContext:kn,useCallback:kv,useContext:kn,useEffect:Df,useImperativeHandle:Sv,useInsertionEffect:bv,useLayoutEffect:xv,useMemo:Ev,useReducer:Af,useRef:yv,useState:function(){return Af(Ba)},useDebugValue:Lf,useDeferredValue:function(s){var o=En();return Tv(o,ar.memoizedState,s)},useTransition:function(){var s=Af(Ba)[0],o=En().memoizedState;return[s,o]},useMutableSource:uv,useSyncExternalStore:dv,useId:Cv,unstable_isNewReconciler:!1},Pk={readContext:kn,useCallback:kv,useContext:kn,useEffect:Df,useImperativeHandle:Sv,useInsertionEffect:bv,useLayoutEffect:xv,useMemo:Ev,useReducer:If,useRef:yv,useState:function(){return If(Ba)},useDebugValue:Lf,useDeferredValue:function(s){var o=En();return ar===null?o.memoizedState=s:Tv(o,ar.memoizedState,s)},useTransition:function(){var s=If(Ba)[0],o=En().memoizedState;return[s,o]},useMutableSource:uv,useSyncExternalStore:dv,useId:Cv,unstable_isNewReconciler:!1};function $n(s,o){if(s&&s.defaultProps){o=ae({},o),s=s.defaultProps;for(var c in s)o[c]===void 0&&(o[c]=s[c]);return o}return o}function Mf(s,o,c,f){o=s.memoizedState,c=c(f,o),c=c==null?o:ae({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Lc={isMounted:function(s){return(s=s._reactInternals)?be(s)===s:!1},enqueueSetState:function(s,o,c){s=s._reactInternals;var f=Hr(),m=ti(s),w=Ss(f,m);w.payload=o,c!=null&&(w.callback=c),o=Zs(s,w,m),o!==null&&(Bn(o,s,m,f),Oc(o,s,m))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var f=Hr(),m=ti(s),w=Ss(f,m);w.tag=1,w.payload=o,c!=null&&(w.callback=c),o=Zs(s,w,m),o!==null&&(Bn(o,s,m,f),Oc(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=Hr(),f=ti(s),m=Ss(c,f);m.tag=2,o!=null&&(m.callback=o),o=Zs(s,m,f),o!==null&&(Bn(o,s,f,c),Oc(o,s,f))}};function jv(s,o,c,f,m,w,k){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,w,k):o.prototype&&o.prototype.isPureReactComponent?!Oa(c,f)||!Oa(m,w):!0}function Rv(s,o,c){var f=!1,m=Gs,w=o.contextType;return typeof w=="object"&&w!==null?w=kn(w):(m=Xr(o)?Oi:Dr.current,f=o.contextTypes,w=(f=f!=null)?wo(s,m):Gs),o=new o(c,w),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Lc,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=w),o}function Av(s,o,c,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==s&&Lc.enqueueReplaceState(o,o.state,null)}function $f(s,o,c,f){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs={},kf(s);var w=o.contextType;typeof w=="object"&&w!==null?m.context=kn(w):(w=Xr(o)?Oi:Dr.current,m.context=wo(s,w)),m.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Mf(s,o,w,c),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&Lc.enqueueReplaceState(m,m.state,null),Pc(s,c,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function Co(s,o){try{var c="",f=o;do c+=Le(f),f=f.return;while(f);var m=c}catch(w){m=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:o,stack:m,digest:null}}function Ff(s,o,c){return{value:s,source:null,stack:c??null,digest:o??null}}function Uf(s,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var Nk=typeof WeakMap=="function"?WeakMap:Map;function Iv(s,o,c){c=Ss(-1,c),c.tag=3,c.payload={element:null};var f=o.value;return c.callback=function(){Vc||(Vc=!0,th=f),Uf(s,o)},c}function Dv(s,o,c){c=Ss(-1,c),c.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;c.payload=function(){return f(m)},c.callback=function(){Uf(s,o)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Uf(s,o),typeof f!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),c}function Lv(s,o,c){var f=s.pingCache;if(f===null){f=s.pingCache=new Nk;var m=new Set;f.set(o,m)}else m=f.get(o),m===void 0&&(m=new Set,f.set(o,m));m.has(c)||(m.add(c),s=qk.bind(null,s,o,c),o.then(s,s))}function Mv(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function $v(s,o,c,f,m){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Ss(-1,1),o.tag=2,Zs(c,o,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var jk=A.ReactCurrentOwner,en=!1;function Wr(s,o,c,f){o.child=s===null?sv(o,null,c,f):So(o,s.child,c,f)}function Fv(s,o,c,f,m){c=c.render;var w=o.ref;return Eo(o,m),f=jf(s,o,c,f,w,m),c=Rf(),s!==null&&!en?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,ks(s,o,m)):($t&&c&&pf(o),o.flags|=1,Wr(s,o,f,m),o.child)}function Uv(s,o,c,f,m){if(s===null){var w=c.type;return typeof w=="function"&&!lh(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=w,Bv(s,o,w,f,m)):(s=Qc(c.type,null,f,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(w=s.child,(s.lanes&m)===0){var k=w.memoizedProps;if(c=c.compare,c=c!==null?c:Oa,c(k,f)&&s.ref===o.ref)return ks(s,o,m)}return o.flags|=1,s=ni(w,f),s.ref=o.ref,s.return=o,o.child=s}function Bv(s,o,c,f,m){if(s!==null){var w=s.memoizedProps;if(Oa(w,f)&&s.ref===o.ref)if(en=!1,o.pendingProps=f=w,(s.lanes&m)!==0)(s.flags&131072)!==0&&(en=!0);else return o.lanes=s.lanes,ks(s,o,m)}return Bf(s,o,c,f,m)}function zv(s,o,c){var f=o.pendingProps,m=f.children,w=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(Po,un),un|=c;else{if((c&1073741824)===0)return s=w!==null?w.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,jt(Po,un),un|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:c,jt(Po,un),un|=f}else w!==null?(f=w.baseLanes|c,o.memoizedState=null):f=c,jt(Po,un),un|=f;return Wr(s,o,m,c),o.child}function Vv(s,o){var c=o.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Bf(s,o,c,f,m){var w=Xr(c)?Oi:Dr.current;return w=wo(o,w),Eo(o,m),c=jf(s,o,c,f,w,m),f=Rf(),s!==null&&!en?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,ks(s,o,m)):($t&&f&&pf(o),o.flags|=1,Wr(s,o,c,m),o.child)}function qv(s,o,c,f,m){if(Xr(c)){var w=!0;bc(o)}else w=!1;if(Eo(o,m),o.stateNode===null)$c(s,o),Rv(o,c,f),$f(o,c,f,m),f=!0;else if(s===null){var k=o.stateNode,N=o.memoizedProps;k.props=N;var R=k.context,q=c.contextType;typeof q=="object"&&q!==null?q=kn(q):(q=Xr(c)?Oi:Dr.current,q=wo(o,q));var oe=c.getDerivedStateFromProps,ce=typeof oe=="function"||typeof k.getSnapshotBeforeUpdate=="function";ce||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(N!==f||R!==q)&&Av(o,k,f,q),Ys=!1;var se=o.memoizedState;k.state=se,Pc(o,f,k,m),R=o.memoizedState,N!==f||se!==R||Jr.current||Ys?(typeof oe=="function"&&(Mf(o,c,oe,f),R=o.memoizedState),(N=Ys||jv(o,c,N,f,se,R,q))?(ce||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=R),k.props=f,k.state=R,k.context=q,f=N):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{k=o.stateNode,ov(s,o),N=o.memoizedProps,q=o.type===o.elementType?N:$n(o.type,N),k.props=q,ce=o.pendingProps,se=k.context,R=c.contextType,typeof R=="object"&&R!==null?R=kn(R):(R=Xr(c)?Oi:Dr.current,R=wo(o,R));var Ee=c.getDerivedStateFromProps;(oe=typeof Ee=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(N!==ce||se!==R)&&Av(o,k,f,R),Ys=!1,se=o.memoizedState,k.state=se,Pc(o,f,k,m);var Oe=o.memoizedState;N!==ce||se!==Oe||Jr.current||Ys?(typeof Ee=="function"&&(Mf(o,c,Ee,f),Oe=o.memoizedState),(q=Ys||jv(o,c,q,f,se,Oe,R)||!1)?(oe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,Oe,R),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,Oe,R)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||N===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Oe),k.props=f,k.state=Oe,k.context=R,f=q):(typeof k.componentDidUpdate!="function"||N===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),f=!1)}return zf(s,o,c,f,w,m)}function zf(s,o,c,f,m,w){Vv(s,o);var k=(o.flags&128)!==0;if(!f&&!k)return m&&Qm(o,c,!1),ks(s,o,w);f=o.stateNode,jk.current=o;var N=k&&typeof c.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&k?(o.child=So(o,s.child,null,w),o.child=So(o,null,N,w)):Wr(s,o,N,w),o.memoizedState=f.state,m&&Qm(o,c,!0),o.child}function Wv(s){var o=s.stateNode;o.pendingContext?Km(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Km(s,o.context,!1),Ef(s,o.containerInfo)}function Hv(s,o,c,f,m){return _o(),yf(m),o.flags|=256,Wr(s,o,c,f),o.child}var Vf={dehydrated:null,treeContext:null,retryLane:0};function qf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Kv(s,o,c){var f=o.pendingProps,m=Bt.current,w=!1,k=(o.flags&128)!==0,N;if((N=k)||(N=s!==null&&s.memoizedState===null?!1:(m&2)!==0),N?(w=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),jt(Bt,m&1),s===null)return vf(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=f.children,s=f.fallback,w?(f=o.mode,w=o.child,k={mode:"hidden",children:k},(f&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=k):w=Yc(k,f,0,null),s=$i(s,f,c,null),w.return=o,s.return=o,w.sibling=s,o.child=w,o.child.memoizedState=qf(c),o.memoizedState=Vf,s):Wf(o,k));if(m=s.memoizedState,m!==null&&(N=m.dehydrated,N!==null))return Rk(s,o,k,f,N,m,c);if(w){w=f.fallback,k=o.mode,m=s.child,N=m.sibling;var R={mode:"hidden",children:f.children};return(k&1)===0&&o.child!==m?(f=o.child,f.childLanes=0,f.pendingProps=R,o.deletions=null):(f=ni(m,R),f.subtreeFlags=m.subtreeFlags&14680064),N!==null?w=ni(N,w):(w=$i(w,k,c,null),w.flags|=2),w.return=o,f.return=o,f.sibling=w,o.child=f,f=w,w=o.child,k=s.child.memoizedState,k=k===null?qf(c):{baseLanes:k.baseLanes|c,cachePool:null,transitions:k.transitions},w.memoizedState=k,w.childLanes=s.childLanes&~c,o.memoizedState=Vf,f}return w=s.child,s=w.sibling,f=ni(w,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=c),f.return=o,f.sibling=null,s!==null&&(c=o.deletions,c===null?(o.deletions=[s],o.flags|=16):c.push(s)),o.child=f,o.memoizedState=null,f}function Wf(s,o){return o=Yc({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Mc(s,o,c,f){return f!==null&&yf(f),So(o,s.child,null,c),s=Wf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Rk(s,o,c,f,m,w,k){if(c)return o.flags&256?(o.flags&=-257,f=Ff(Error(r(422))),Mc(s,o,k,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(w=f.fallback,m=o.mode,f=Yc({mode:"visible",children:f.children},m,0,null),w=$i(w,m,k,null),w.flags|=2,f.return=o,w.return=o,f.sibling=w,o.child=f,(o.mode&1)!==0&&So(o,s.child,null,k),o.child.memoizedState=qf(k),o.memoizedState=Vf,w);if((o.mode&1)===0)return Mc(s,o,k,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var N=f.dgst;return f=N,w=Error(r(419)),f=Ff(w,f,void 0),Mc(s,o,k,f)}if(N=(k&s.childLanes)!==0,en||N){if(f=wr,f!==null){switch(k&-k){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|k))!==0?0:m,m!==0&&m!==w.retryLane&&(w.retryLane=m,_s(s,m),Bn(f,s,m,-1))}return ah(),f=Ff(Error(r(421))),Mc(s,o,k,f)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=Wk.bind(null,s),m._reactRetry=o,null):(s=w.treeContext,cn=Hs(m.nextSibling),ln=o,$t=!0,Mn=null,s!==null&&(_n[Sn++]=bs,_n[Sn++]=xs,_n[Sn++]=Pi,bs=s.id,xs=s.overflow,Pi=o),o=Wf(o,f.children),o.flags|=4096,o)}function Gv(s,o,c){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),_f(s.return,o,c)}function Hf(s,o,c,f,m){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=c,w.tailMode=m)}function Qv(s,o,c){var f=o.pendingProps,m=f.revealOrder,w=f.tail;if(Wr(s,o,f.children,c),f=Bt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Gv(s,c,o);else if(s.tag===19)Gv(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(jt(Bt,f),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(c=o.child,m=null;c!==null;)s=c.alternate,s!==null&&Nc(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=o.child,o.child=null):(m=c.sibling,c.sibling=null),Hf(o,!1,m,c,w);break;case"backwards":for(c=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&Nc(s)===null){o.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}Hf(o,!0,c,null,w);break;case"together":Hf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function $c(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ks(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),Ii|=o.lanes,(c&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,c=ni(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=ni(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function Ak(s,o,c){switch(o.tag){case 3:Wv(o),_o();break;case 5:cv(o);break;case 1:Xr(o.type)&&bc(o);break;case 4:Ef(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,m=o.memoizedProps.value;jt(Tc,f._currentValue),f._currentValue=m;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(jt(Bt,Bt.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?Kv(s,o,c):(jt(Bt,Bt.current&1),s=ks(s,o,c),s!==null?s.sibling:null);jt(Bt,Bt.current&1);break;case 19:if(f=(c&o.childLanes)!==0,(s.flags&128)!==0){if(f)return Qv(s,o,c);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),jt(Bt,Bt.current),f)break;return null;case 22:case 23:return o.lanes=0,zv(s,o,c)}return ks(s,o,c)}var Yv,Kf,Zv,Jv;Yv=function(s,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Kf=function(){},Zv=function(s,o,c,f){var m=s.memoizedProps;if(m!==f){s=o.stateNode,Ri(ns.current);var w=null;switch(c){case"input":m=er(s,m),f=er(s,f),w=[];break;case"select":m=ae({},m,{value:void 0}),f=ae({},f,{value:void 0}),w=[];break;case"textarea":m=j(s,m),f=j(s,f),w=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=vc)}sn(c,f);var k;c=null;for(q in m)if(!f.hasOwnProperty(q)&&m.hasOwnProperty(q)&&m[q]!=null)if(q==="style"){var N=m[q];for(k in N)N.hasOwnProperty(k)&&(c||(c={}),c[k]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(i.hasOwnProperty(q)?w||(w=[]):(w=w||[]).push(q,null));for(q in f){var R=f[q];if(N=m?.[q],f.hasOwnProperty(q)&&R!==N&&(R!=null||N!=null))if(q==="style")if(N){for(k in N)!N.hasOwnProperty(k)||R&&R.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in R)R.hasOwnProperty(k)&&N[k]!==R[k]&&(c||(c={}),c[k]=R[k])}else c||(w||(w=[]),w.push(q,c)),c=R;else q==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,N=N?N.__html:void 0,R!=null&&N!==R&&(w=w||[]).push(q,R)):q==="children"?typeof R!="string"&&typeof R!="number"||(w=w||[]).push(q,""+R):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(i.hasOwnProperty(q)?(R!=null&&q==="onScroll"&&It("scroll",s),w||N===R||(w=[])):(w=w||[]).push(q,R))}c&&(w=w||[]).push("style",c);var q=w;(o.updateQueue=q)&&(o.flags|=4)}},Jv=function(s,o,c,f){c!==f&&(o.flags|=4)};function Va(s,o){if(!$t)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Mr(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(o)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=c,o}function Ik(s,o,c){var f=o.pendingProps;switch(gf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(o),null;case 1:return Xr(o.type)&&wc(),Mr(o),null;case 3:return f=o.stateNode,To(),Dt(Jr),Dt(Dr),Of(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(kc(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Mn!==null&&(sh(Mn),Mn=null))),Kf(s,o),Mr(o),null;case 5:Tf(o);var m=Ri($a.current);if(c=o.type,s!==null&&o.stateNode!=null)Zv(s,o,c,f,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Mr(o),null}if(s=Ri(ns.current),kc(o)){f=o.stateNode,c=o.type;var w=o.memoizedProps;switch(f[rs]=o,f[Aa]=w,s=(o.mode&1)!==0,c){case"dialog":It("cancel",f),It("close",f);break;case"iframe":case"object":case"embed":It("load",f);break;case"video":case"audio":for(m=0;m<Na.length;m++)It(Na[m],f);break;case"source":It("error",f);break;case"img":case"image":case"link":It("error",f),It("load",f);break;case"details":It("toggle",f);break;case"input":_t(f,w),It("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},It("invalid",f);break;case"textarea":F(f,w),It("invalid",f)}sn(c,w),m=null;for(var k in w)if(w.hasOwnProperty(k)){var N=w[k];k==="children"?typeof N=="string"?f.textContent!==N&&(w.suppressHydrationWarning!==!0&&mc(f.textContent,N,s),m=["children",N]):typeof N=="number"&&f.textContent!==""+N&&(w.suppressHydrationWarning!==!0&&mc(f.textContent,N,s),m=["children",""+N]):i.hasOwnProperty(k)&&N!=null&&k==="onScroll"&&It("scroll",f)}switch(c){case"input":kr(f),An(f,w,!0);break;case"textarea":kr(f),me(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=vc)}f=m,o.updateQueue=f,f!==null&&(o.flags|=4)}else{k=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=pe(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=k.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=k.createElement(c,{is:f.is}):(s=k.createElement(c),c==="select"&&(k=s,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):s=k.createElementNS(s,c),s[rs]=o,s[Aa]=f,Yv(s,o,!1,!1),o.stateNode=s;e:{switch(k=St(c,f),c){case"dialog":It("cancel",s),It("close",s),m=f;break;case"iframe":case"object":case"embed":It("load",s),m=f;break;case"video":case"audio":for(m=0;m<Na.length;m++)It(Na[m],s);m=f;break;case"source":It("error",s),m=f;break;case"img":case"image":case"link":It("error",s),It("load",s),m=f;break;case"details":It("toggle",s),m=f;break;case"input":_t(s,f),m=er(s,f),It("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=ae({},f,{value:void 0}),It("invalid",s);break;case"textarea":F(s,f),m=j(s,f),It("invalid",s);break;default:m=f}sn(c,m),N=m;for(w in N)if(N.hasOwnProperty(w)){var R=N[w];w==="style"?Pt(s,R):w==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Ze(s,R)):w==="children"?typeof R=="string"?(c!=="textarea"||R!=="")&&ht(s,R):typeof R=="number"&&ht(s,""+R):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?R!=null&&w==="onScroll"&&It("scroll",s):R!=null&&O(s,w,R,k))}switch(c){case"input":kr(s),An(s,f,!1);break;case"textarea":kr(s),me(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Ke(f.value));break;case"select":s.multiple=!!f.multiple,w=f.value,w!=null?or(s,!!f.multiple,w,!1):f.defaultValue!=null&&or(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=vc)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Mr(o),null;case 6:if(s&&o.stateNode!=null)Jv(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(c=Ri($a.current),Ri(ns.current),kc(o)){if(f=o.stateNode,c=o.memoizedProps,f[rs]=o,(w=f.nodeValue!==c)&&(s=ln,s!==null))switch(s.tag){case 3:mc(f.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&mc(f.nodeValue,c,(s.mode&1)!==0)}w&&(o.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[rs]=o,o.stateNode=f}return Mr(o),null;case 13:if(Dt(Bt),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if($t&&cn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)tv(),_o(),o.flags|=98560,w=!1;else if(w=kc(o),f!==null&&f.dehydrated!==null){if(s===null){if(!w)throw Error(r(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[rs]=o}else _o(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Mr(o),w=!1}else Mn!==null&&(sh(Mn),Mn=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(Bt.current&1)!==0?lr===0&&(lr=3):ah())),o.updateQueue!==null&&(o.flags|=4),Mr(o),null);case 4:return To(),Kf(s,o),s===null&&ja(o.stateNode.containerInfo),Mr(o),null;case 10:return xf(o.type._context),Mr(o),null;case 17:return Xr(o.type)&&wc(),Mr(o),null;case 19:if(Dt(Bt),w=o.memoizedState,w===null)return Mr(o),null;if(f=(o.flags&128)!==0,k=w.rendering,k===null)if(f)Va(w,!1);else{if(lr!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(k=Nc(s),k!==null){for(o.flags|=128,Va(w,!1),f=k.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=c,c=o.child;c!==null;)w=c,s=f,w.flags&=14680066,k=w.alternate,k===null?(w.childLanes=0,w.lanes=s,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=k.childLanes,w.lanes=k.lanes,w.child=k.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=k.memoizedProps,w.memoizedState=k.memoizedState,w.updateQueue=k.updateQueue,w.type=k.type,s=k.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return jt(Bt,Bt.current&1|2),o.child}s=s.sibling}w.tail!==null&&Ut()>No&&(o.flags|=128,f=!0,Va(w,!1),o.lanes=4194304)}else{if(!f)if(s=Nc(k),s!==null){if(o.flags|=128,f=!0,c=s.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),Va(w,!0),w.tail===null&&w.tailMode==="hidden"&&!k.alternate&&!$t)return Mr(o),null}else 2*Ut()-w.renderingStartTime>No&&c!==1073741824&&(o.flags|=128,f=!0,Va(w,!1),o.lanes=4194304);w.isBackwards?(k.sibling=o.child,o.child=k):(c=w.last,c!==null?c.sibling=k:o.child=k,w.last=k)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=Ut(),o.sibling=null,c=Bt.current,jt(Bt,f?c&1|2:c&1),o):(Mr(o),null);case 22:case 23:return oh(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(un&1073741824)!==0&&(Mr(o),o.subtreeFlags&6&&(o.flags|=8192)):Mr(o),null;case 24:return null;case 25:return null}throw Error(r(156,o.tag))}function Dk(s,o){switch(gf(o),o.tag){case 1:return Xr(o.type)&&wc(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return To(),Dt(Jr),Dt(Dr),Of(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return Tf(o),null;case 13:if(Dt(Bt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));_o()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Dt(Bt),null;case 4:return To(),null;case 10:return xf(o.type._context),null;case 22:case 23:return oh(),null;case 24:return null;default:return null}}var Fc=!1,$r=!1,Lk=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Oo(s,o){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Kt(s,o,f)}else c.current=null}function Gf(s,o,c){try{c()}catch(f){Kt(s,o,f)}}var Xv=!1;function Mk(s,o){if(of=ic,s=jm(),Zd(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var k=0,N=-1,R=-1,q=0,oe=0,ce=s,se=null;t:for(;;){for(var Ee;ce!==c||m!==0&&ce.nodeType!==3||(N=k+m),ce!==w||f!==0&&ce.nodeType!==3||(R=k+f),ce.nodeType===3&&(k+=ce.nodeValue.length),(Ee=ce.firstChild)!==null;)se=ce,ce=Ee;for(;;){if(ce===s)break t;if(se===c&&++q===m&&(N=k),se===w&&++oe===f&&(R=k),(Ee=ce.nextSibling)!==null)break;ce=se,se=ce.parentNode}ce=Ee}c=N===-1||R===-1?null:{start:N,end:R}}else c=null}c=c||{start:0,end:0}}else c=null;for(af={focusedElem:s,selectionRange:c},ic=!1,Ce=o;Ce!==null;)if(o=Ce,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Ce=s;else for(;Ce!==null;){o=Ce;try{var Oe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Ne=Oe.memoizedProps,Yt=Oe.memoizedState,M=o.stateNode,D=M.getSnapshotBeforeUpdate(o.elementType===o.type?Ne:$n(o.type,Ne),Yt);M.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var B=o.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(he){Kt(o,o.return,he)}if(s=o.sibling,s!==null){s.return=o.return,Ce=s;break}Ce=o.return}return Oe=Xv,Xv=!1,Oe}function qa(s,o,c){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var w=m.destroy;m.destroy=void 0,w!==void 0&&Gf(o,c,w)}m=m.next}while(m!==f)}}function Uc(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&s)===s){var f=c.create;c.destroy=f()}c=c.next}while(c!==o)}}function Qf(s){var o=s.ref;if(o!==null){var c=s.stateNode;s.tag,s=c,typeof o=="function"?o(s):o.current=s}}function ey(s){var o=s.alternate;o!==null&&(s.alternate=null,ey(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[rs],delete o[Aa],delete o[df],delete o[wk],delete o[bk])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function ty(s){return s.tag===5||s.tag===3||s.tag===4}function ry(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ty(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Yf(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(s,o):c.insertBefore(s,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(s,c)):(o=c,o.appendChild(s)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=vc));else if(f!==4&&(s=s.child,s!==null))for(Yf(s,o,c),s=s.sibling;s!==null;)Yf(s,o,c),s=s.sibling}function Zf(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(Zf(s,o,c),s=s.sibling;s!==null;)Zf(s,o,c),s=s.sibling}var Tr=null,Fn=!1;function Js(s,o,c){for(c=c.child;c!==null;)ny(s,o,c),c=c.sibling}function ny(s,o,c){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Ti,c)}catch{}switch(c.tag){case 5:$r||Oo(c,o);case 6:var f=Tr,m=Fn;Tr=null,Js(s,o,c),Tr=f,Fn=m,Tr!==null&&(Fn?(s=Tr,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):Tr.removeChild(c.stateNode));break;case 18:Tr!==null&&(Fn?(s=Tr,c=c.stateNode,s.nodeType===8?uf(s.parentNode,c):s.nodeType===1&&uf(s,c),_a(s)):uf(Tr,c.stateNode));break;case 4:f=Tr,m=Fn,Tr=c.stateNode.containerInfo,Fn=!0,Js(s,o,c),Tr=f,Fn=m;break;case 0:case 11:case 14:case 15:if(!$r&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var w=m,k=w.destroy;w=w.tag,k!==void 0&&((w&2)!==0||(w&4)!==0)&&Gf(c,o,k),m=m.next}while(m!==f)}Js(s,o,c);break;case 1:if(!$r&&(Oo(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(N){Kt(c,o,N)}Js(s,o,c);break;case 21:Js(s,o,c);break;case 22:c.mode&1?($r=(f=$r)||c.memoizedState!==null,Js(s,o,c),$r=f):Js(s,o,c);break;default:Js(s,o,c)}}function sy(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new Lk),o.forEach(function(f){var m=Hk.bind(null,s,f);c.has(f)||(c.add(f),f.then(m,m))})}}function Un(s,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];try{var w=s,k=o,N=k;e:for(;N!==null;){switch(N.tag){case 5:Tr=N.stateNode,Fn=!1;break e;case 3:Tr=N.stateNode.containerInfo,Fn=!0;break e;case 4:Tr=N.stateNode.containerInfo,Fn=!0;break e}N=N.return}if(Tr===null)throw Error(r(160));ny(w,k,m),Tr=null,Fn=!1;var R=m.alternate;R!==null&&(R.return=null),m.return=null}catch(q){Kt(m,o,q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)iy(o,s),o=o.sibling}function iy(s,o){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Un(o,s),is(s),f&4){try{qa(3,s,s.return),Uc(3,s)}catch(Ne){Kt(s,s.return,Ne)}try{qa(5,s,s.return)}catch(Ne){Kt(s,s.return,Ne)}}break;case 1:Un(o,s),is(s),f&512&&c!==null&&Oo(c,c.return);break;case 5:if(Un(o,s),is(s),f&512&&c!==null&&Oo(c,c.return),s.flags&32){var m=s.stateNode;try{ht(m,"")}catch(Ne){Kt(s,s.return,Ne)}}if(f&4&&(m=s.stateNode,m!=null)){var w=s.memoizedProps,k=c!==null?c.memoizedProps:w,N=s.type,R=s.updateQueue;if(s.updateQueue=null,R!==null)try{N==="input"&&w.type==="radio"&&w.name!=null&&bn(m,w),St(N,k);var q=St(N,w);for(k=0;k<R.length;k+=2){var oe=R[k],ce=R[k+1];oe==="style"?Pt(m,ce):oe==="dangerouslySetInnerHTML"?Ze(m,ce):oe==="children"?ht(m,ce):O(m,oe,ce,q)}switch(N){case"input":ve(m,w);break;case"textarea":Q(m,w);break;case"select":var se=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!w.multiple;var Ee=w.value;Ee!=null?or(m,!!w.multiple,Ee,!1):se!==!!w.multiple&&(w.defaultValue!=null?or(m,!!w.multiple,w.defaultValue,!0):or(m,!!w.multiple,w.multiple?[]:"",!1))}m[Aa]=w}catch(Ne){Kt(s,s.return,Ne)}}break;case 6:if(Un(o,s),is(s),f&4){if(s.stateNode===null)throw Error(r(162));m=s.stateNode,w=s.memoizedProps;try{m.nodeValue=w}catch(Ne){Kt(s,s.return,Ne)}}break;case 3:if(Un(o,s),is(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{_a(o.containerInfo)}catch(Ne){Kt(s,s.return,Ne)}break;case 4:Un(o,s),is(s);break;case 13:Un(o,s),is(s),m=s.child,m.flags&8192&&(w=m.memoizedState!==null,m.stateNode.isHidden=w,!w||m.alternate!==null&&m.alternate.memoizedState!==null||(eh=Ut())),f&4&&sy(s);break;case 22:if(oe=c!==null&&c.memoizedState!==null,s.mode&1?($r=(q=$r)||oe,Un(o,s),$r=q):Un(o,s),is(s),f&8192){if(q=s.memoizedState!==null,(s.stateNode.isHidden=q)&&!oe&&(s.mode&1)!==0)for(Ce=s,oe=s.child;oe!==null;){for(ce=Ce=oe;Ce!==null;){switch(se=Ce,Ee=se.child,se.tag){case 0:case 11:case 14:case 15:qa(4,se,se.return);break;case 1:Oo(se,se.return);var Oe=se.stateNode;if(typeof Oe.componentWillUnmount=="function"){f=se,c=se.return;try{o=f,Oe.props=o.memoizedProps,Oe.state=o.memoizedState,Oe.componentWillUnmount()}catch(Ne){Kt(f,c,Ne)}}break;case 5:Oo(se,se.return);break;case 22:if(se.memoizedState!==null){ly(ce);continue}}Ee!==null?(Ee.return=se,Ce=Ee):ly(ce)}oe=oe.sibling}e:for(oe=null,ce=s;;){if(ce.tag===5){if(oe===null){oe=ce;try{m=ce.stateNode,q?(w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(N=ce.stateNode,R=ce.memoizedProps.style,k=R!=null&&R.hasOwnProperty("display")?R.display:null,N.style.display=zr("display",k))}catch(Ne){Kt(s,s.return,Ne)}}}else if(ce.tag===6){if(oe===null)try{ce.stateNode.nodeValue=q?"":ce.memoizedProps}catch(Ne){Kt(s,s.return,Ne)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===s)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===s)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===s)break e;oe===ce&&(oe=null),ce=ce.return}oe===ce&&(oe=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:Un(o,s),is(s),f&4&&sy(s);break;case 21:break;default:Un(o,s),is(s)}}function is(s){var o=s.flags;if(o&2){try{e:{for(var c=s.return;c!==null;){if(ty(c)){var f=c;break e}c=c.return}throw Error(r(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(ht(m,""),f.flags&=-33);var w=ry(s);Zf(s,w,m);break;case 3:case 4:var k=f.stateNode.containerInfo,N=ry(s);Yf(s,N,k);break;default:throw Error(r(161))}}catch(R){Kt(s,s.return,R)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function $k(s,o,c){Ce=s,oy(s)}function oy(s,o,c){for(var f=(s.mode&1)!==0;Ce!==null;){var m=Ce,w=m.child;if(m.tag===22&&f){var k=m.memoizedState!==null||Fc;if(!k){var N=m.alternate,R=N!==null&&N.memoizedState!==null||$r;N=Fc;var q=$r;if(Fc=k,($r=R)&&!q)for(Ce=m;Ce!==null;)k=Ce,R=k.child,k.tag===22&&k.memoizedState!==null?cy(m):R!==null?(R.return=k,Ce=R):cy(m);for(;w!==null;)Ce=w,oy(w),w=w.sibling;Ce=m,Fc=N,$r=q}ay(s)}else(m.subtreeFlags&8772)!==0&&w!==null?(w.return=m,Ce=w):ay(s)}}function ay(s){for(;Ce!==null;){var o=Ce;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:$r||Uc(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!$r)if(c===null)f.componentDidMount();else{var m=o.elementType===o.type?c.memoizedProps:$n(o.type,c.memoizedProps);f.componentDidUpdate(m,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&lv(o,w,f);break;case 3:var k=o.updateQueue;if(k!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}lv(o,k,c)}break;case 5:var N=o.stateNode;if(c===null&&o.flags&4){c=N;var R=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&c.focus();break;case"img":R.src&&(c.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var q=o.alternate;if(q!==null){var oe=q.memoizedState;if(oe!==null){var ce=oe.dehydrated;ce!==null&&_a(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}$r||o.flags&512&&Qf(o)}catch(se){Kt(o,o.return,se)}}if(o===s){Ce=null;break}if(c=o.sibling,c!==null){c.return=o.return,Ce=c;break}Ce=o.return}}function ly(s){for(;Ce!==null;){var o=Ce;if(o===s){Ce=null;break}var c=o.sibling;if(c!==null){c.return=o.return,Ce=c;break}Ce=o.return}}function cy(s){for(;Ce!==null;){var o=Ce;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Uc(4,o)}catch(R){Kt(o,c,R)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var m=o.return;try{f.componentDidMount()}catch(R){Kt(o,m,R)}}var w=o.return;try{Qf(o)}catch(R){Kt(o,w,R)}break;case 5:var k=o.return;try{Qf(o)}catch(R){Kt(o,k,R)}}}catch(R){Kt(o,o.return,R)}if(o===s){Ce=null;break}var N=o.sibling;if(N!==null){N.return=o.return,Ce=N;break}Ce=o.return}}var Fk=Math.ceil,Bc=A.ReactCurrentDispatcher,Jf=A.ReactCurrentOwner,Tn=A.ReactCurrentBatchConfig,mt=0,wr=null,nr=null,Cr=0,un=0,Po=Ks(0),lr=0,Wa=null,Ii=0,zc=0,Xf=0,Ha=null,tn=null,eh=0,No=1/0,Es=null,Vc=!1,th=null,Xs=null,qc=!1,ei=null,Wc=0,Ka=0,rh=null,Hc=-1,Kc=0;function Hr(){return(mt&6)!==0?Ut():Hc!==-1?Hc:Hc=Ut()}function ti(s){return(s.mode&1)===0?1:(mt&2)!==0&&Cr!==0?Cr&-Cr:_k.transition!==null?(Kc===0&&(Kc=rm()),Kc):(s=Et,s!==0||(s=window.event,s=s===void 0?16:dm(s.type)),s)}function Bn(s,o,c,f){if(50<Ka)throw Ka=0,rh=null,Error(r(185));va(s,c,f),((mt&2)===0||s!==wr)&&(s===wr&&((mt&2)===0&&(zc|=c),lr===4&&ri(s,Cr)),rn(s,f),c===1&&mt===0&&(o.mode&1)===0&&(No=Ut()+500,xc&&Qs()))}function rn(s,o){var c=s.callbackNode;_S(s,o);var f=vs(s,s===wr?Cr:0);if(f===0)c!==null&&Xl(c),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(c!=null&&Xl(c),o===1)s.tag===0?xk(dy.bind(null,s)):Ym(dy.bind(null,s)),vk(function(){(mt&6)===0&&Qs()}),c=null;else{switch(nm(f)){case 1:c=ga;break;case 4:c=ma;break;case 16:c=Fs;break;case 536870912:c=rc;break;default:c=Fs}c=wy(c,uy.bind(null,s))}s.callbackPriority=o,s.callbackNode=c}}function uy(s,o){if(Hc=-1,Kc=0,(mt&6)!==0)throw Error(r(327));var c=s.callbackNode;if(jo()&&s.callbackNode!==c)return null;var f=vs(s,s===wr?Cr:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||o)o=Gc(s,f);else{o=f;var m=mt;mt|=2;var w=hy();(wr!==s||Cr!==o)&&(Es=null,No=Ut()+500,Li(s,o));do try{zk();break}catch(N){fy(s,N)}while(!0);bf(),Bc.current=w,mt=m,nr!==null?o=0:(wr=null,Cr=0,o=lr)}if(o!==0){if(o===2&&(m=Dd(s),m!==0&&(f=m,o=nh(s,m))),o===1)throw c=Wa,Li(s,0),ri(s,f),rn(s,Ut()),c;if(o===6)ri(s,f);else{if(m=s.current.alternate,(f&30)===0&&!Uk(m)&&(o=Gc(s,f),o===2&&(w=Dd(s),w!==0&&(f=w,o=nh(s,w))),o===1))throw c=Wa,Li(s,0),ri(s,f),rn(s,Ut()),c;switch(s.finishedWork=m,s.finishedLanes=f,o){case 0:case 1:throw Error(r(345));case 2:Mi(s,tn,Es);break;case 3:if(ri(s,f),(f&130023424)===f&&(o=eh+500-Ut(),10<o)){if(vs(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){Hr(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=cf(Mi.bind(null,s,tn,Es),o);break}Mi(s,tn,Es);break;case 4:if(ri(s,f),(f&4194240)===f)break;for(o=s.eventTimes,m=-1;0<f;){var k=31-L(f);w=1<<k,k=o[k],k>m&&(m=k),f&=~w}if(f=m,f=Ut()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Fk(f/1960))-f,10<f){s.timeoutHandle=cf(Mi.bind(null,s,tn,Es),f);break}Mi(s,tn,Es);break;case 5:Mi(s,tn,Es);break;default:throw Error(r(329))}}}return rn(s,Ut()),s.callbackNode===c?uy.bind(null,s):null}function nh(s,o){var c=Ha;return s.current.memoizedState.isDehydrated&&(Li(s,o).flags|=256),s=Gc(s,o),s!==2&&(o=tn,tn=c,o!==null&&sh(o)),s}function sh(s){tn===null?tn=s:tn.push.apply(tn,s)}function Uk(s){for(var o=s;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var m=c[f],w=m.getSnapshot;m=m.value;try{if(!Ln(w(),m))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ri(s,o){for(o&=~Xf,o&=~zc,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var c=31-L(o),f=1<<c;s[c]=-1,o&=~f}}function dy(s){if((mt&6)!==0)throw Error(r(327));jo();var o=vs(s,0);if((o&1)===0)return rn(s,Ut()),null;var c=Gc(s,o);if(s.tag!==0&&c===2){var f=Dd(s);f!==0&&(o=f,c=nh(s,f))}if(c===1)throw c=Wa,Li(s,0),ri(s,o),rn(s,Ut()),c;if(c===6)throw Error(r(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Mi(s,tn,Es),rn(s,Ut()),null}function ih(s,o){var c=mt;mt|=1;try{return s(o)}finally{mt=c,mt===0&&(No=Ut()+500,xc&&Qs())}}function Di(s){ei!==null&&ei.tag===0&&(mt&6)===0&&jo();var o=mt;mt|=1;var c=Tn.transition,f=Et;try{if(Tn.transition=null,Et=1,s)return s()}finally{Et=f,Tn.transition=c,mt=o,(mt&6)===0&&Qs()}}function oh(){un=Po.current,Dt(Po)}function Li(s,o){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,mk(c)),nr!==null)for(c=nr.return;c!==null;){var f=c;switch(gf(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&wc();break;case 3:To(),Dt(Jr),Dt(Dr),Of();break;case 5:Tf(f);break;case 4:To();break;case 13:Dt(Bt);break;case 19:Dt(Bt);break;case 10:xf(f.type._context);break;case 22:case 23:oh()}c=c.return}if(wr=s,nr=s=ni(s.current,null),Cr=un=o,lr=0,Wa=null,Xf=zc=Ii=0,tn=Ha=null,ji!==null){for(o=0;o<ji.length;o++)if(c=ji[o],f=c.interleaved,f!==null){c.interleaved=null;var m=f.next,w=c.pending;if(w!==null){var k=w.next;w.next=m,f.next=k}c.pending=f}ji=null}return s}function fy(s,o){do{var c=nr;try{if(bf(),jc.current=Dc,Rc){for(var f=zt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}Rc=!1}if(Ai=0,yr=ar=zt=null,Fa=!1,Ua=0,Jf.current=null,c===null||c.return===null){lr=1,Wa=o,nr=null;break}e:{var w=s,k=c.return,N=c,R=o;if(o=Cr,N.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var q=R,oe=N,ce=oe.tag;if((oe.mode&1)===0&&(ce===0||ce===11||ce===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var Ee=Mv(k);if(Ee!==null){Ee.flags&=-257,$v(Ee,k,N,w,o),Ee.mode&1&&Lv(w,q,o),o=Ee,R=q;var Oe=o.updateQueue;if(Oe===null){var Ne=new Set;Ne.add(R),o.updateQueue=Ne}else Oe.add(R);break e}else{if((o&1)===0){Lv(w,q,o),ah();break e}R=Error(r(426))}}else if($t&&N.mode&1){var Yt=Mv(k);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),$v(Yt,k,N,w,o),yf(Co(R,N));break e}}w=R=Co(R,N),lr!==4&&(lr=2),Ha===null?Ha=[w]:Ha.push(w),w=k;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var M=Iv(w,R,o);av(w,M);break e;case 1:N=R;var D=w.type,B=w.stateNode;if((w.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Xs===null||!Xs.has(B)))){w.flags|=65536,o&=-o,w.lanes|=o;var he=Dv(w,N,o);av(w,he);break e}}w=w.return}while(w!==null)}gy(c)}catch(je){o=je,nr===c&&c!==null&&(nr=c=c.return);continue}break}while(!0)}function hy(){var s=Bc.current;return Bc.current=Dc,s===null?Dc:s}function ah(){(lr===0||lr===3||lr===2)&&(lr=4),wr===null||(Ii&268435455)===0&&(zc&268435455)===0||ri(wr,Cr)}function Gc(s,o){var c=mt;mt|=2;var f=hy();(wr!==s||Cr!==o)&&(Es=null,Li(s,o));do try{Bk();break}catch(m){fy(s,m)}while(!0);if(bf(),mt=c,Bc.current=f,nr!==null)throw Error(r(261));return wr=null,Cr=0,lr}function Bk(){for(;nr!==null;)py(nr)}function zk(){for(;nr!==null&&!ec();)py(nr)}function py(s){var o=yy(s.alternate,s,un);s.memoizedProps=s.pendingProps,o===null?gy(s):nr=o,Jf.current=null}function gy(s){var o=s;do{var c=o.alternate;if(s=o.return,(o.flags&32768)===0){if(c=Ik(c,o,un),c!==null){nr=c;return}}else{if(c=Dk(c,o),c!==null){c.flags&=32767,nr=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{lr=6,nr=null;return}}if(o=o.sibling,o!==null){nr=o;return}nr=o=s}while(o!==null);lr===0&&(lr=5)}function Mi(s,o,c){var f=Et,m=Tn.transition;try{Tn.transition=null,Et=1,Vk(s,o,c,f)}finally{Tn.transition=m,Et=f}return null}function Vk(s,o,c,f){do jo();while(ei!==null);if((mt&6)!==0)throw Error(r(327));c=s.finishedWork;var m=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0;var w=c.lanes|c.childLanes;if(SS(s,w),s===wr&&(nr=wr=null,Cr=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||qc||(qc=!0,wy(Fs,function(){return jo(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=Tn.transition,Tn.transition=null;var k=Et;Et=1;var N=mt;mt|=4,Jf.current=null,Mk(s,c),iy(c,s),ck(af),ic=!!of,af=of=null,s.current=c,$k(c),tc(),mt=N,Et=k,Tn.transition=w}else s.current=c;if(qc&&(qc=!1,ei=s,Wc=m),w=s.pendingLanes,w===0&&(Xs=null),Er(c.stateNode),rn(s,Ut()),o!==null)for(f=s.onRecoverableError,c=0;c<o.length;c++)m=o[c],f(m.value,{componentStack:m.stack,digest:m.digest});if(Vc)throw Vc=!1,s=th,th=null,s;return(Wc&1)!==0&&s.tag!==0&&jo(),w=s.pendingLanes,(w&1)!==0?s===rh?Ka++:(Ka=0,rh=s):Ka=0,Qs(),null}function jo(){if(ei!==null){var s=nm(Wc),o=Tn.transition,c=Et;try{if(Tn.transition=null,Et=16>s?16:s,ei===null)var f=!1;else{if(s=ei,ei=null,Wc=0,(mt&6)!==0)throw Error(r(331));var m=mt;for(mt|=4,Ce=s.current;Ce!==null;){var w=Ce,k=w.child;if((Ce.flags&16)!==0){var N=w.deletions;if(N!==null){for(var R=0;R<N.length;R++){var q=N[R];for(Ce=q;Ce!==null;){var oe=Ce;switch(oe.tag){case 0:case 11:case 15:qa(8,oe,w)}var ce=oe.child;if(ce!==null)ce.return=oe,Ce=ce;else for(;Ce!==null;){oe=Ce;var se=oe.sibling,Ee=oe.return;if(ey(oe),oe===q){Ce=null;break}if(se!==null){se.return=Ee,Ce=se;break}Ce=Ee}}}var Oe=w.alternate;if(Oe!==null){var Ne=Oe.child;if(Ne!==null){Oe.child=null;do{var Yt=Ne.sibling;Ne.sibling=null,Ne=Yt}while(Ne!==null)}}Ce=w}}if((w.subtreeFlags&2064)!==0&&k!==null)k.return=w,Ce=k;else e:for(;Ce!==null;){if(w=Ce,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:qa(9,w,w.return)}var M=w.sibling;if(M!==null){M.return=w.return,Ce=M;break e}Ce=w.return}}var D=s.current;for(Ce=D;Ce!==null;){k=Ce;var B=k.child;if((k.subtreeFlags&2064)!==0&&B!==null)B.return=k,Ce=B;else e:for(k=D;Ce!==null;){if(N=Ce,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:Uc(9,N)}}catch(je){Kt(N,N.return,je)}if(N===k){Ce=null;break e}var he=N.sibling;if(he!==null){he.return=N.return,Ce=he;break e}Ce=N.return}}if(mt=m,Qs(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Ti,s)}catch{}f=!0}return f}finally{Et=c,Tn.transition=o}}return!1}function my(s,o,c){o=Co(c,o),o=Iv(s,o,1),s=Zs(s,o,1),o=Hr(),s!==null&&(va(s,1,o),rn(s,o))}function Kt(s,o,c){if(s.tag===3)my(s,s,c);else for(;o!==null;){if(o.tag===3){my(o,s,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Xs===null||!Xs.has(f))){s=Co(c,s),s=Dv(o,s,1),o=Zs(o,s,1),s=Hr(),o!==null&&(va(o,1,s),rn(o,s));break}}o=o.return}}function qk(s,o,c){var f=s.pingCache;f!==null&&f.delete(o),o=Hr(),s.pingedLanes|=s.suspendedLanes&c,wr===s&&(Cr&c)===c&&(lr===4||lr===3&&(Cr&130023424)===Cr&&500>Ut()-eh?Li(s,0):Xf|=c),rn(s,o)}function vy(s,o){o===0&&((s.mode&1)===0?o=1:(o=pt,pt<<=1,(pt&130023424)===0&&(pt=4194304)));var c=Hr();s=_s(s,o),s!==null&&(va(s,o,c),rn(s,c))}function Wk(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),vy(s,c)}function Hk(s,o){var c=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(o),vy(s,c)}var yy;yy=function(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps||Jr.current)en=!0;else{if((s.lanes&c)===0&&(o.flags&128)===0)return en=!1,Ak(s,o,c);en=(s.flags&131072)!==0}else en=!1,$t&&(o.flags&1048576)!==0&&Zm(o,Sc,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;$c(s,o),s=o.pendingProps;var m=wo(o,Dr.current);Eo(o,c),m=jf(null,o,f,s,m,c);var w=Rf();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Xr(f)?(w=!0,bc(o)):w=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,kf(o),m.updater=Lc,o.stateNode=m,m._reactInternals=o,$f(o,f,s,c),o=zf(null,o,f,!0,w,c)):(o.tag=0,$t&&w&&pf(o),Wr(null,o,m,c),o=o.child),o;case 16:f=o.elementType;e:{switch($c(s,o),s=o.pendingProps,m=f._init,f=m(f._payload),o.type=f,m=o.tag=Gk(f),s=$n(f,s),m){case 0:o=Bf(null,o,f,s,c);break e;case 1:o=qv(null,o,f,s,c);break e;case 11:o=Fv(null,o,f,s,c);break e;case 14:o=Uv(null,o,f,$n(f.type,s),c);break e}throw Error(r(306,f,""))}return o;case 0:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:$n(f,m),Bf(s,o,f,m,c);case 1:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:$n(f,m),qv(s,o,f,m,c);case 3:e:{if(Wv(o),s===null)throw Error(r(387));f=o.pendingProps,w=o.memoizedState,m=w.element,ov(s,o),Pc(o,f,null,c);var k=o.memoizedState;if(f=k.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){m=Co(Error(r(423)),o),o=Hv(s,o,f,c,m);break e}else if(f!==m){m=Co(Error(r(424)),o),o=Hv(s,o,f,c,m);break e}else for(cn=Hs(o.stateNode.containerInfo.firstChild),ln=o,$t=!0,Mn=null,c=sv(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(_o(),f===m){o=ks(s,o,c);break e}Wr(s,o,f,c)}o=o.child}return o;case 5:return cv(o),s===null&&vf(o),f=o.type,m=o.pendingProps,w=s!==null?s.memoizedProps:null,k=m.children,lf(f,m)?k=null:w!==null&&lf(f,w)&&(o.flags|=32),Vv(s,o),Wr(s,o,k,c),o.child;case 6:return s===null&&vf(o),null;case 13:return Kv(s,o,c);case 4:return Ef(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=So(o,null,f,c):Wr(s,o,f,c),o.child;case 11:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:$n(f,m),Fv(s,o,f,m,c);case 7:return Wr(s,o,o.pendingProps,c),o.child;case 8:return Wr(s,o,o.pendingProps.children,c),o.child;case 12:return Wr(s,o,o.pendingProps.children,c),o.child;case 10:e:{if(f=o.type._context,m=o.pendingProps,w=o.memoizedProps,k=m.value,jt(Tc,f._currentValue),f._currentValue=k,w!==null)if(Ln(w.value,k)){if(w.children===m.children&&!Jr.current){o=ks(s,o,c);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var N=w.dependencies;if(N!==null){k=w.child;for(var R=N.firstContext;R!==null;){if(R.context===f){if(w.tag===1){R=Ss(-1,c&-c),R.tag=2;var q=w.updateQueue;if(q!==null){q=q.shared;var oe=q.pending;oe===null?R.next=R:(R.next=oe.next,oe.next=R),q.pending=R}}w.lanes|=c,R=w.alternate,R!==null&&(R.lanes|=c),_f(w.return,c,o),N.lanes|=c;break}R=R.next}}else if(w.tag===10)k=w.type===o.type?null:w.child;else if(w.tag===18){if(k=w.return,k===null)throw Error(r(341));k.lanes|=c,N=k.alternate,N!==null&&(N.lanes|=c),_f(k,c,o),k=w.sibling}else k=w.child;if(k!==null)k.return=w;else for(k=w;k!==null;){if(k===o){k=null;break}if(w=k.sibling,w!==null){w.return=k.return,k=w;break}k=k.return}w=k}Wr(s,o,m.children,c),o=o.child}return o;case 9:return m=o.type,f=o.pendingProps.children,Eo(o,c),m=kn(m),f=f(m),o.flags|=1,Wr(s,o,f,c),o.child;case 14:return f=o.type,m=$n(f,o.pendingProps),m=$n(f.type,m),Uv(s,o,f,m,c);case 15:return Bv(s,o,o.type,o.pendingProps,c);case 17:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:$n(f,m),$c(s,o),o.tag=1,Xr(f)?(s=!0,bc(o)):s=!1,Eo(o,c),Rv(o,f,m),$f(o,f,m,c),zf(null,o,f,!0,s,c);case 19:return Qv(s,o,c);case 22:return zv(s,o,c)}throw Error(r(156,o.tag))};function wy(s,o){return Jl(s,o)}function Kk(s,o,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(s,o,c,f){return new Kk(s,o,c,f)}function lh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Gk(s){if(typeof s=="function")return lh(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Y)return 11;if(s===ke)return 14}return 2}function ni(s,o){var c=s.alternate;return c===null?(c=Cn(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Qc(s,o,c,f,m,w){var k=2;if(f=s,typeof s=="function")lh(s)&&(k=1);else if(typeof s=="string")k=5;else e:switch(s){case $:return $i(c.children,m,w,o);case J:k=8,m|=8;break;case V:return s=Cn(12,c,o,m|2),s.elementType=V,s.lanes=w,s;case te:return s=Cn(13,c,o,m),s.elementType=te,s.lanes=w,s;case Z:return s=Cn(19,c,o,m),s.elementType=Z,s.lanes=w,s;case Se:return Yc(c,m,w,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:k=10;break e;case ee:k=9;break e;case Y:k=11;break e;case ke:k=14;break e;case fe:k=16,f=null;break e}throw Error(r(130,s==null?s:typeof s,""))}return o=Cn(k,c,o,m),o.elementType=s,o.type=f,o.lanes=w,o}function $i(s,o,c,f){return s=Cn(7,s,f,o),s.lanes=c,s}function Yc(s,o,c,f){return s=Cn(22,s,f,o),s.elementType=Se,s.lanes=c,s.stateNode={isHidden:!1},s}function ch(s,o,c){return s=Cn(6,s,null,o),s.lanes=c,s}function uh(s,o,c){return o=Cn(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function Qk(s,o,c,f,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ld(0),this.expirationTimes=Ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ld(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function dh(s,o,c,f,m,w,k,N,R){return s=new Qk(s,o,c,N,R),o===1?(o=1,w===!0&&(o|=8)):o=0,w=Cn(3,null,null,o),s.current=w,w.stateNode=s,w.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},kf(w),s}function Yk(s,o,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:f==null?null:""+f,children:s,containerInfo:o,implementation:c}}function by(s){if(!s)return Gs;s=s._reactInternals;e:{if(be(s)!==s||s.tag!==1)throw Error(r(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Xr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(r(171))}if(s.tag===1){var c=s.type;if(Xr(c))return Gm(s,c,o)}return o}function xy(s,o,c,f,m,w,k,N,R){return s=dh(c,f,!0,s,m,w,k,N,R),s.context=by(null),c=s.current,f=Hr(),m=ti(c),w=Ss(f,m),w.callback=o??null,Zs(c,w,m),s.current.lanes=m,va(s,m,f),rn(s,f),s}function Zc(s,o,c,f){var m=o.current,w=Hr(),k=ti(m);return c=by(c),o.context===null?o.context=c:o.pendingContext=c,o=Ss(w,k),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=Zs(m,o,k),s!==null&&(Bn(s,m,k,w),Oc(s,m,k)),k}function Jc(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function _y(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function fh(s,o){_y(s,o),(s=s.alternate)&&_y(s,o)}function Zk(){return null}var Sy=typeof reportError=="function"?reportError:function(s){console.error(s)};function hh(s){this._internalRoot=s}Xc.prototype.render=hh.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));Zc(s,o,null,null)},Xc.prototype.unmount=hh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Di(function(){Zc(null,s,null,null)}),o[ys]=null}};function Xc(s){this._internalRoot=s}Xc.prototype.unstable_scheduleHydration=function(s){if(s){var o=om();s={blockedOn:null,target:s,priority:o};for(var c=0;c<Vs.length&&o!==0&&o<Vs[c].priority;c++);Vs.splice(c,0,s),c===0&&cm(s)}};function ph(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function eu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function ky(){}function Jk(s,o,c,f,m){if(m){if(typeof f=="function"){var w=f;f=function(){var q=Jc(k);w.call(q)}}var k=xy(o,f,s,0,null,!1,!1,"",ky);return s._reactRootContainer=k,s[ys]=k.current,ja(s.nodeType===8?s.parentNode:s),Di(),k}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var N=f;f=function(){var q=Jc(R);N.call(q)}}var R=dh(s,0,!1,null,null,!1,!1,"",ky);return s._reactRootContainer=R,s[ys]=R.current,ja(s.nodeType===8?s.parentNode:s),Di(function(){Zc(o,R,c,f)}),R}function tu(s,o,c,f,m){var w=c._reactRootContainer;if(w){var k=w;if(typeof m=="function"){var N=m;m=function(){var R=Jc(k);N.call(R)}}Zc(o,k,s,m)}else k=Jk(c,o,s,m,f);return Jc(k)}sm=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var c=on(o.pendingLanes);c!==0&&(Md(o,c|1),rn(o,Ut()),(mt&6)===0&&(No=Ut()+500,Qs()))}break;case 13:Di(function(){var f=_s(s,1);if(f!==null){var m=Hr();Bn(f,s,1,m)}}),fh(s,1)}},$d=function(s){if(s.tag===13){var o=_s(s,134217728);if(o!==null){var c=Hr();Bn(o,s,134217728,c)}fh(s,134217728)}},im=function(s){if(s.tag===13){var o=ti(s),c=_s(s,o);if(c!==null){var f=Hr();Bn(c,s,o,f)}fh(s,o)}},om=function(){return Et},am=function(s,o){var c=Et;try{return Et=s,o()}finally{Et=c}},Zr=function(s,o,c){switch(o){case"input":if(ve(s,c),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==s&&f.form===s.form){var m=yc(f);if(!m)throw Error(r(90));pr(f),ve(f,m)}}}break;case"textarea":Q(s,c);break;case"select":o=c.value,o!=null&&or(s,!!c.multiple,o,!1)}},vr=ih,tr=Di;var Xk={usingClientEntryPoint:!1,Events:[Ia,vo,yc,At,Mt,ih]},Ga={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eE={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=pa(s),s===null?null:s.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||Zk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{Ti=ru.inject(eE),xn=ru}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xk,nn.createPortal=function(s,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ph(o))throw Error(r(200));return Yk(s,o,null,c)},nn.createRoot=function(s,o){if(!ph(s))throw Error(r(299));var c=!1,f="",m=Sy;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=dh(s,1,!1,null,null,c,!1,f,m),s[ys]=o.current,ja(s.nodeType===8?s.parentNode:s),new hh(o)},nn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=pa(o),s=s===null?null:s.stateNode,s},nn.flushSync=function(s){return Di(s)},nn.hydrate=function(s,o,c){if(!eu(o))throw Error(r(200));return tu(null,s,o,!0,c)},nn.hydrateRoot=function(s,o,c){if(!ph(s))throw Error(r(405));var f=c!=null&&c.hydratedSources||null,m=!1,w="",k=Sy;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),o=xy(o,null,s,1,c??null,m,!1,w,k),s[ys]=o.current,ja(s),f)for(s=0;s<f.length;s++)c=f[s],m=c._getVersion,m=m(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,m]:o.mutableSourceEagerHydrationData.push(c,m);return new Xc(o)},nn.render=function(s,o,c){if(!eu(o))throw Error(r(200));return tu(null,s,o,!1,c)},nn.unmountComponentAtNode=function(s){if(!eu(s))throw Error(r(40));return s._reactRootContainer?(Di(function(){tu(null,null,s,!1,function(){s._reactRootContainer=null,s[ys]=null})}),!0):!1},nn.unstable_batchedUpdates=ih,nn.unstable_renderSubtreeIntoContainer=function(s,o,c,f){if(!eu(c))throw Error(r(200));if(s==null||s._reactInternals===void 0)throw Error(r(38));return tu(s,o,c,!1,f)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var Ry;function Xw(){if(Ry)return vh.exports;Ry=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vh.exports=lE(),vh.exports}var Ay;function cE(){if(Ay)return nu;Ay=1;var t=Xw();return nu.createRoot=t.createRoot,nu.hydrateRoot=t.hydrateRoot,nu}var uE=cE();function dE(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,i,a,l=[],u="",d=t.split("/");for(d[0]||d.shift();i=d.shift();)r=i[0],r==="*"?(l.push(r),u+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=i.indexOf("?",1),a=i.indexOf(".",1),l.push(i.substring(1,~n?n:~a?a:i.length)),u+=~n&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(u+=(~n?"?":"")+"\\"+i.substring(a))):u+="/"+i;return{keys:l,pattern:new RegExp("^"+u+(e?"(?=$|/)":"/?$"),"i")}}var b=rd();const Xe=Jw(b),eb=rE({__proto__:null,default:Xe},[b]);var bh={exports:{}},xh={};var Iy;function fE(){if(Iy)return xh;Iy=1;var t=rd();function e(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function u(v,y){var x=y(),S=n({inst:{value:x,getSnapshot:y}}),_=S[0].inst,E=S[1];return a(function(){_.value=x,_.getSnapshot=y,d(_)&&E({inst:_})},[v,x,y]),i(function(){return d(_)&&E({inst:_}),v(function(){d(_)&&E({inst:_})})},[v]),l(x),x}function d(v){var y=v.getSnapshot;v=v.value;try{var x=y();return!r(v,x)}catch{return!0}}function h(v,y){return y()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return xh.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,xh}var Dy;function hE(){return Dy||(Dy=1,bh.exports=fE()),bh.exports}var pE=hE();const gE=eb.useInsertionEffect,mE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tb=mE?b.useLayoutEffect:b.useEffect,vE=gE||tb,ng=t=>{const e=b.useRef([t,(...r)=>e[0](...r)]).current;return vE(()=>{e[0]=t}),e[1]},yE="popstate",sg="pushState",ig="replaceState",wE="hashchange",Ly=[yE,sg,ig,wE],bE=t=>{for(const e of Ly)addEventListener(e,t);return()=>{for(const e of Ly)removeEventListener(e,t)}},rb=(t,e)=>pE.useSyncExternalStore(bE,t,e),xE=()=>location.search,_E=({ssrSearch:t=""}={})=>rb(xE,()=>t),My=()=>location.pathname,SE=({ssrPath:t}={})=>rb(My,t?()=>t:My),kE=(t,{replace:e=!1,state:r=null}={})=>history[e?ig:sg](r,"",t),EE=(t={})=>[SE(t),kE],$y=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[$y]>"u"){for(const t of[sg,ig]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,$y,{value:!0})}const TE=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",nb=(t="")=>t==="/"?"":t,CE=(t,e)=>t[0]==="~"?t.slice(1):nb(e)+t,OE=(t="",e)=>TE(Fy(nb(t)),Fy(e)),Fy=t=>{try{return decodeURI(t)}catch{return t}},sb={hook:EE,searchHook:_E,parser:dE,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},ib=b.createContext(sb),Wl=()=>b.useContext(ib),ob={},ab=b.createContext(ob),lb=()=>b.useContext(ab),nd=t=>{const[e,r]=t.hook(t);return[OE(t.base,e),ng((n,i)=>r(CE(n,t.base),i))]},oo=()=>nd(Wl()),cb=(t,e,r,n)=>{const{pattern:i,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",n),l=i.exec(r)||[],[u,...d]=l;return u!==void 0?[!0,(()=>{const h=a!==!1?Object.fromEntries(a.map((v,y)=>[v,d[y]])):l.groups;let g={...d};return h&&Object.assign(g,h),g})(),...n?[u]:[]]:[!1,null]},PE=({children:t,...e})=>{const r=Wl(),n=e.hook?sb:r;let i=n;const[a,l]=e.ssrPath?.split("?")??[];l&&(e.ssrSearch=l,e.ssrPath=a),e.hrefs=e.hrefs??e.hook?.hrefs;let u=b.useRef({}),d=u.current,h=d;for(let g in n){const v=g==="base"?n[g]+(e[g]||""):e[g]||n[g];d===h&&v!==h[g]&&(u.current=h={...h}),h[g]=v,v!==n[g]&&(i=h)}return b.createElement(ib.Provider,{value:i,children:t})},Uy=({children:t,component:e},r)=>e?b.createElement(e,{params:r}):typeof t=="function"?t(r):t,NE=t=>{let e=b.useRef(ob),r=e.current;for(const n in t)t[n]!==r[n]&&(r=t);return Object.keys(t).length===0&&(r=t),e.current=r},Ro=({path:t,nest:e,match:r,...n})=>{const i=Wl(),[a]=nd(i),[l,u,d]=r??cb(i.parser,t,a,e),h=NE({...lb(),...u});if(!l)return null;const g=d?b.createElement(PE,{base:d},Uy(n,h)):Uy(n,h);return b.createElement(ab.Provider,{value:h,children:g})},Ao=b.forwardRef((t,e)=>{const r=Wl(),[n,i]=nd(r),{to:a="",href:l=a,onClick:u,asChild:d,children:h,className:g,replace:v,state:y,...x}=t,S=ng(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(u?.(E),E.defaultPrevented||(E.preventDefault(),i(l,t)))}),_=r.hrefs(l[0]==="~"?l.slice(1):r.base+l,r);return d&&b.isValidElement(h)?b.cloneElement(h,{onClick:S,href:_}):b.createElement("a",{...x,onClick:S,href:_,className:g?.call?g(n===l):g,children:h,ref:e})}),ub=t=>Array.isArray(t)?t.flatMap(e=>ub(e&&e.type===b.Fragment?e.props.children:e)):[t],jE=({children:t,location:e})=>{const r=Wl(),[n]=nd(r);for(const i of ub(t)){let a=0;if(b.isValidElement(i)&&(a=cb(r.parser,i.props.path,e||n,i.props.nest))[0])return b.cloneElement(i,{match:a})}return null},db=t=>{const{to:e,href:r=e}=t,[,n]=oo(),i=ng(()=>n(e||r,t));return tb(()=>{i()},[]),null};var ca=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zi=typeof window>"u"||"Deno"in globalThis;function Pn(){}function RE(t,e){return typeof t=="function"?t(e):t}function ip(t){return typeof t=="number"&&t>=0&&t!==1/0}function fb(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Qo(t,e){return typeof t=="function"?t(e):t}function Kn(t,e){return typeof t=="function"?t(e):t}function By(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:l,stale:u}=t;if(l){if(n){if(e.queryHash!==og(l,e.options))return!1}else if(!wl(e.queryKey,l))return!1}if(r!=="all"){const d=e.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||i&&i!==e.state.fetchStatus||a&&!a(e))}function zy(t,e){const{exact:r,status:n,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(Ji(e.options.mutationKey)!==Ji(a))return!1}else if(!wl(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function og(t,e){return(e?.queryKeyHashFn||Ji)(t)}function Ji(t){return JSON.stringify(t,(e,r)=>op(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function wl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!wl(t[r],e[r])):!1}function hb(t,e){if(t===e)return t;const r=Vy(t)&&Vy(e);if(r||op(t)&&op(e)){const n=r?t:Object.keys(t),i=n.length,a=r?e:Object.keys(e),l=a.length,u=r?[]:{};let d=0;for(let h=0;h<l;h++){const g=r?h:a[h];(!r&&n.includes(g)||r)&&t[g]===void 0&&e[g]===void 0?(u[g]=void 0,d++):(u[g]=hb(t[g],e[g]),u[g]===t[g]&&t[g]!==void 0&&d++)}return i===l&&d===i?t:u}return e}function Cu(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Vy(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function op(t){if(!qy(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!qy(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function qy(t){return Object.prototype.toString.call(t)==="[object Object]"}function AE(t){return new Promise(e=>{setTimeout(e,t)})}function ap(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?hb(t,e):e}function IE(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function DE(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var ag=Symbol();function pb(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===ag?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var LE=class extends ca{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Zi&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},lg=new LE,ME=class extends ca{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Zi&&window.addEventListener){const e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},Ou=new ME;function lp(){let t,e;const r=new Promise((i,a)=>{t=i,e=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}function $E(t){return Math.min(1e3*2**t,3e4)}function gb(t){return(t??"online")==="online"?Ou.isOnline():!0}var mb=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function _h(t){return t instanceof mb}function vb(t){let e=!1,r=0,n=!1,i;const a=lp(),l=_=>{n||(y(new mb(_)),t.abort?.())},u=()=>{e=!0},d=()=>{e=!1},h=()=>lg.isFocused()&&(t.networkMode==="always"||Ou.isOnline())&&t.canRun(),g=()=>gb(t.networkMode)&&t.canRun(),v=_=>{n||(n=!0,t.onSuccess?.(_),i?.(),a.resolve(_))},y=_=>{n||(n=!0,t.onError?.(_),i?.(),a.reject(_))},x=()=>new Promise(_=>{i=E=>{(n||h())&&_(E)},t.onPause?.()}).then(()=>{i=void 0,n||t.onContinue?.()}),S=()=>{if(n)return;let _;const E=r===0?t.initialPromise:void 0;try{_=E??t.fn()}catch(C){_=Promise.reject(C)}Promise.resolve(_).then(v).catch(C=>{if(n)return;const T=t.retry??(Zi?0:3),O=t.retryDelay??$E,A=typeof O=="function"?O(r,C):O,U=T===!0||typeof T=="number"&&r<T||typeof T=="function"&&T(r,C);if(e||!U){y(C);return}r++,t.onFail?.(r,C),AE(A).then(()=>h()?void 0:x()).then(()=>{e?y(C):S()})})};return{promise:a,cancel:l,continue:()=>(i?.(),a),cancelRetry:u,continueRetry:d,canStart:g,start:()=>(g()?S():x().then(S),a)}}function FE(){let t=[],e=0,r=u=>{u()},n=u=>{u()},i=u=>setTimeout(u,0);const a=u=>{e?t.push(u):i(()=>{r(u)})},l=()=>{const u=t;t=[],u.length&&i(()=>{n(()=>{u.forEach(d=>{r(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||l()}return d},batchCalls:u=>(...d)=>{a(()=>{u(...d)})},schedule:a,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{i=u}}}var fr=FE(),yb=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ip(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Zi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},UE=class extends yb{#e;#t;#n;#r;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=BE(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const r=ap(this.state.data,t,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),r}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(Pn).catch(Pn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Kn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ag||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!fb(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#i?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(d=>d.options.queryFn);u&&this.setOptions(u.options)}const r=new AbortController,n=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#i=!0,r.signal)})},i=()=>{const u=pb(this.options,e),d={queryKey:this.queryKey,meta:this.meta};return n(d),this.#i=!1,this.options.persister?this.options.persister(u,d,this):u(d)},a={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};n(a),this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta});const l=u=>{_h(u)&&u.silent||this.#s({type:"error",error:u}),_h(u)||(this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this)),this.scheduleGc()};return this.#r=vb({initialPromise:e?.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:u=>{if(u===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(d){l(d);return}this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),this.scheduleGc()},onError:l,onFail:(u,d)=>{this.#s({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#r.start()}#s(t){const e=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...wb(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return _h(n)&&n.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=e(this.state),fr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function wb(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function BE(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var zE=class extends ca{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,r){const n=e.queryKey,i=e.queryHash??og(n,e);let a=this.get(i);return a||(a=new UE({cache:this,queryKey:n,queryHash:i,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){fr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(r=>By(e,r))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(r=>By(t,r)):e}notify(t){fr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){fr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){fr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},VE=class extends yb{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||bb(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=vb({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(n,i)=>{this.#r({type:"failed",failureCount:n,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",r=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:r}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:r})}const n=await this.#n.start();return await this.#t.config.onSuccess?.(n,t,this.state.context,this),await this.options.onSuccess?.(n,t,this.state.context),await this.#t.config.onSettled?.(n,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(n,null,t,this.state.context),this.#r({type:"success",data:n}),n}catch(n){try{throw await this.#t.config.onError?.(n,t,this.state.context,this),await this.options.onError?.(n,t,this.state.context),await this.#t.config.onSettled?.(void 0,n,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,n,t,this.state.context),n}finally{this.#r({type:"error",error:n})}}finally{this.#t.runNext(this)}}#r(t){const e=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),fr.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function bb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qE=class extends ca{constructor(t={}){super(),this.config=t,this.#e=new Map,this.#t=Date.now()}#e;#t;build(t,e,r){const n=new VE({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(e),state:r});return this.add(n),n}add(t){const e=su(t),r=this.#e.get(e)??[];r.push(t),this.#e.set(e,r),this.notify({type:"added",mutation:t})}remove(t){const e=su(t);if(this.#e.has(e)){const r=this.#e.get(e)?.filter(n=>n!==t);r&&(r.length===0?this.#e.delete(e):this.#e.set(e,r))}this.notify({type:"removed",mutation:t})}canRun(t){const e=this.#e.get(su(t))?.find(r=>r.state.status==="pending");return!e||e===t}runNext(t){return this.#e.get(su(t))?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve()}clear(){fr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#e.values()].flat()}find(t){const e={exact:!0,...t};return this.getAll().find(r=>zy(e,r))}findAll(t={}){return this.getAll().filter(e=>zy(t,e))}notify(t){fr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return fr.batch(()=>Promise.all(t.map(e=>e.continue().catch(Pn))))}};function su(t){return t.options.scope?.id??String(t.mutationId)}function Wy(t){return{onFetch:(e,r)=>{const n=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let g=!1;const v=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=pb(e.options,e.fetchOptions),x=async(S,_,E)=>{if(g)return Promise.reject();if(_==null&&S.pages.length)return Promise.resolve(S);const C={queryKey:e.queryKey,pageParam:_,direction:E?"backward":"forward",meta:e.options.meta};v(C);const T=await y(C),{maxPages:O}=e.options,A=E?DE:IE;return{pages:A(S.pages,T,O),pageParams:A(S.pageParams,_,O)}};if(i&&a.length){const S=i==="backward",_=S?WE:Hy,E={pages:a,pageParams:l},C=_(n,E);u=await x(E,C,S)}else{const S=t??a.length;do{const _=d===0?l[0]??n.initialPageParam:Hy(n,u);if(d>0&&_==null)break;u=await x(u,_),d++}while(d<S)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r):e.fetchFn=h}}}function Hy(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function WE(t,{pages:e,pageParams:r}){return e.length>0?t.getPreviousPageParam?.(e[0],e,r[0],r):void 0}var HE=class{#e;#t;#n;#r;#o;#i;#s;#a;constructor(t={}){this.#e=t.queryCache||new zE,this.#t=t.mutationCache||new qE,this.#n=t.defaultOptions||{},this.#r=new Map,this.#o=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#s=lg.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Ou.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=this.#e.build(this,r);return t.revalidateIfStale&&n.isStaleByTime(Qo(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(n.queryHash)?.state.data,l=RE(e,a);if(l!==void 0)return this.#e.build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,e,r){return fr.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;fr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=this.#e,n={type:"active",...t};return fr.batch(()=>(r.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=fr.batch(()=>this.#e.findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(Pn).catch(Pn)}invalidateQueries(t={},e={}){return fr.batch(()=>{if(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:e?.cancelRefetch??!0},n=fr.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(Pn)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Pn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=this.#e.build(this,e);return r.isStaleByTime(Qo(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Pn).catch(Pn)}fetchInfiniteQuery(t){return t.behavior=Wy(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Pn).catch(Pn)}ensureInfiniteQueryData(t){return t.behavior=Wy(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ou.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Ji(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()];let r={};return e.forEach(n=>{wl(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){this.#o.set(Ji(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#o.values()];let r={};return e.forEach(n=>{wl(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=og(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===ag&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},KE=class extends ca{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#s=lp(),this.options.experimental_prefetchInRender||this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#o;#i;#s;#a;#g;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Ky(this.#t,this.options)?this.#d():this.updateResult(),this.#w())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return cp(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return cp(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#x(),this.#t.removeObserver(this)}setOptions(t,e){const r=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Kn(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),r._defaulted&&!Cu(this.options,r)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&Gy(this.#t,n,this.options,r)&&this.#d(),this.updateResult(e),i&&(this.#t!==n||Kn(this.options.enabled,this.#t)!==Kn(r.enabled,this.#t)||Qo(this.options.staleTime,this.#t)!==Qo(r.staleTime,this.#t))&&this.#m();const a=this.#v();i&&(this.#t!==n||Kn(this.options.enabled,this.#t)!==Kn(r.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),r=this.createResult(e,t);return QE(this,r)&&(this.#r=r,this.#i=this.options,this.#o=this.#t.state),r}getCurrentResult(){return this.#r}trackResult(t,e){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),e?.(n),t[n])})}),r}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),r=this.#e.getQueryCache().build(this.#e,e);return r.fetch().then(()=>this.createResult(r,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Pn)),e}#m(){this.#b();const t=Qo(this.options.staleTime,this.#t);if(Zi||this.#r.isStale||!ip(t))return;const r=fb(this.#r.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#x(),this.#l=t,!(Zi||Kn(this.options.enabled,this.#t)===!1||!ip(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||lg.isFocused())&&this.#d()},this.#l))}#w(){this.#m(),this.#y(this.#v())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#x(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const r=this.#t,n=this.options,i=this.#r,a=this.#o,l=this.#i,d=t!==r?t.state:this.#n,{state:h}=t;let g={...h},v=!1,y;if(e._optimisticResults){const $=this.hasListeners(),J=!$&&Ky(t,e),V=$&&Gy(t,r,e,n);(J||V)&&(g={...g,...wb(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:x,errorUpdatedAt:S,status:_}=g;if(e.select&&g.data!==void 0)if(i&&g.data===a?.data&&e.select===this.#g)y=this.#f;else try{this.#g=e.select,y=e.select(g.data),y=ap(i?.data,y,e),this.#f=y,this.#a=null}catch($){this.#a=$}else y=g.data;if(e.placeholderData!==void 0&&y===void 0&&_==="pending"){let $;if(i?.isPlaceholderData&&e.placeholderData===l?.placeholderData)$=i.data;else if($=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,e.select&&$!==void 0)try{$=e.select($),this.#a=null}catch(J){this.#a=J}$!==void 0&&(_="success",y=ap(i?.data,$,e),v=!0)}this.#a&&(x=this.#a,y=this.#f,S=Date.now(),_="error");const E=g.fetchStatus==="fetching",C=_==="pending",T=_==="error",O=C&&E,A=y!==void 0,z={status:_,fetchStatus:g.fetchStatus,isPending:C,isSuccess:_==="success",isError:T,isInitialLoading:O,isLoading:O,data:y,dataUpdatedAt:g.dataUpdatedAt,error:x,errorUpdatedAt:S,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>d.dataUpdateCount||g.errorUpdateCount>d.errorUpdateCount,isFetching:E,isRefetching:E&&!C,isLoadingError:T&&!A,isPaused:g.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:T&&A,isStale:cg(t,e),refetch:this.refetch,promise:this.#s};if(this.options.experimental_prefetchInRender){const $=W=>{z.status==="error"?W.reject(z.error):z.data!==void 0&&W.resolve(z.data)},J=()=>{const W=this.#s=z.promise=lp();$(W)},V=this.#s;switch(V.status){case"pending":t.queryHash===r.queryHash&&$(V);break;case"fulfilled":(z.status==="error"||z.data!==V.value)&&J();break;case"rejected":(z.status!=="error"||z.error!==V.reason)&&J();break}}return z}updateResult(t){const e=this.#r,r=this.createResult(this.#t,this.options);if(this.#o=this.#t.state,this.#i=this.options,this.#o.data!==void 0&&(this.#h=this.#t),Cu(r,e))return;this.#r=r;const n={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!this.#p.size)return!0;const u=new Set(l??this.#p);return this.options.throwOnError&&u.add("error"),Object.keys(this.#r).some(d=>{const h=d;return this.#r[h]!==e[h]&&u.has(h)})};t?.listeners!==!1&&i()&&(n.listeners=!0),this.#S({...n,...t})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#w()}#S(t){fr.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function GE(t,e){return Kn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Ky(t,e){return GE(t,e)||t.state.data!==void 0&&cp(t,e,e.refetchOnMount)}function cp(t,e,r){if(Kn(e.enabled,t)!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&cg(t,e)}return!1}function Gy(t,e,r,n){return(t!==e||Kn(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&cg(t,r)}function cg(t,e){return Kn(e.enabled,t)!==!1&&t.isStaleByTime(Qo(e.staleTime,t))}function QE(t,e){return!Cu(t.getCurrentResult(),e)}var YE=class extends ca{#e;#t=void 0;#n;#r;constructor(e,r){super(),this.#e=e,this.setOptions(r),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const r=this.options;this.options=this.#e.defaultMutationOptions(e),Cu(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),r?.mutationKey&&this.options.mutationKey&&Ji(r.mutationKey)!==Ji(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#o(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#o(),this.#i()}mutate(e,r){return this.#r=r,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#o(){const e=this.#n?.state??bb();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#i(e){fr.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,r,n),this.#r.onSettled?.(e.data,null,r,n)):e?.type==="error"&&(this.#r.onError?.(e.error,r,n),this.#r.onSettled?.(void 0,e.error,r,n))}this.listeners.forEach(r=>{r(this.#t)})})}},xb=b.createContext(void 0),sd=t=>{const e=b.useContext(xb);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ZE=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(xb.Provider,{value:t,children:e})),_b=b.createContext(!1),JE=()=>b.useContext(_b);_b.Provider;function XE(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var eT=b.createContext(XE()),tT=()=>b.useContext(eT);function Sb(t,e){return typeof t=="function"?t(...e):!!t}function up(){}var rT=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},nT=t=>{b.useEffect(()=>{t.clearReset()},[t])},sT=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&Sb(r,[t.error,n]),iT=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},oT=(t,e)=>t.isLoading&&t.isFetching&&!e,aT=(t,e)=>t?.suspense&&e.isPending,Qy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function lT(t,e,r){const n=sd(),i=JE(),a=tT(),l=n.defaultQueryOptions(t);n.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=i?"isRestoring":"optimistic",iT(l),rT(l,a),nT(a);const u=!n.getQueryCache().get(l.queryHash),[d]=b.useState(()=>new e(n,l)),h=d.getOptimisticResult(l);if(b.useSyncExternalStore(b.useCallback(g=>{const v=i?up:d.subscribe(fr.batchCalls(g));return d.updateResult(),v},[d,i]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),b.useEffect(()=>{d.setOptions(l,{listeners:!1})},[l,d]),aT(l,h))throw Qy(l,d,a);if(sT({result:h,errorResetBoundary:a,throwOnError:l.throwOnError,query:n.getQueryCache().get(l.queryHash)}))throw h.error;return n.getDefaultOptions().queries?._experimental_afterQuery?.(l,h),l.experimental_prefetchInRender&&!Zi&&oT(h,i)&&(u?Qy(l,d,a):n.getQueryCache().get(l.queryHash)?.promise)?.catch(up).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?h:d.trackResult(h)}function Pu(t,e){return lT(t,KE)}function Sh(t,e){const r=sd(),[n]=b.useState(()=>new YE(r,t));b.useEffect(()=>{n.setOptions(t)},[n,t]);const i=b.useSyncExternalStore(b.useCallback(l=>n.subscribe(fr.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=b.useCallback((l,u)=>{n.mutate(l,u).catch(up)},[n]);if(i.error&&Sb(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const cT={},uT="auth_token";function dT(t){const e=t.trim();return e?/^https?:\/\//i.test(e)?e.replace(/\/+$/g,""):/^\/\//.test(e)?`https:${e.replace(/\/+$/g,"")}`:e.startsWith("/")?e.replace(/\/+$/g,""):`https://${e.replace(/\/+$/g,"")}`:""}function fT(){const t=cT?.VITE_API_BASE_URL,e=t?dT(t):"";return e||""}const Qr=fT();function hT(){try{return localStorage.getItem(uT)}catch{return null}}function kb(t){const e=hT();return e?{...t,Authorization:`Bearer ${e}`}:t}async function Eb(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function pT(t,e,r){const n=await fetch(Qr+e,{method:t,headers:kb(r?{"Content-Type":"application/json"}:{}),body:r?JSON.stringify(r):void 0});return await Eb(n),n}const gT=({on401:t})=>async({queryKey:e})=>{const r=await fetch(Qr+e.join("/"),{headers:kb({})});return await Eb(r),await r.json()},mT=new HE({defaultOptions:{queries:{queryFn:gT({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),vT=1,yT=1e6;let kh=0;function wT(){return kh=(kh+1)%Number.MAX_SAFE_INTEGER,kh.toString()}const Eh=new Map,Yy=t=>{if(Eh.has(t))return;const e=setTimeout(()=>{Eh.delete(t),fl({type:"REMOVE_TOAST",toastId:t})},yT);Eh.set(t,e)},bT=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,vT)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Yy(r):t.toasts.forEach(n=>{Yy(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},wu=[];let bu={toasts:[]};function fl(t){bu=bT(bu,t),wu.forEach(e=>{e(bu)})}function xT({...t}){const e=wT(),r=i=>fl({type:"UPDATE_TOAST",toast:{...i,id:e}}),n=()=>fl({type:"DISMISS_TOAST",toastId:e});return fl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||n()}}}),{id:e,dismiss:n,update:r}}function ao(){const[t,e]=b.useState(bu);return b.useEffect(()=>(wu.push(e),()=>{const r=wu.indexOf(e);r>-1&&wu.splice(r,1)}),[t]),{...t,toast:xT,dismiss:r=>fl({type:"DISMISS_TOAST",toastId:r})}}var id=Xw();const _T=Jw(id);function ft(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t?.(i),r===!1||!i.defaultPrevented)return e?.(i)}}function Zy(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Tb(...t){return e=>{let r=!1;const n=t.map(i=>{const a=Zy(i,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():Zy(t[i],null)}}}}function _r(...t){return b.useCallback(Tb(...t),t)}function Si(t,e=[]){let r=[];function n(a,l){const u=b.createContext(l),d=r.length;r=[...r,l];const h=v=>{const{scope:y,children:x,...S}=v,_=y?.[t]?.[d]||u,E=b.useMemo(()=>S,Object.values(S));return p.jsx(_.Provider,{value:E,children:x})};h.displayName=a+"Provider";function g(v,y){const x=y?.[t]?.[d]||u,S=b.useContext(x);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[h,g]}const i=()=>{const a=r.map(l=>b.createContext(l));return function(u){const d=u?.[t]||a;return b.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return i.scopeName=t,[n,ST(i,...e)]}function ST(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=n.reduce((u,{useScope:d,scopeName:h})=>{const v=d(a)[`__scope${h}`];return{...u,...v}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return r.scopeName=e.scopeName,r}function Nu(t){const e=kT(t),r=b.forwardRef((n,i)=>{const{children:a,...l}=n,u=b.Children.toArray(a),d=u.find(TT);if(d){const h=d.props.children,g=u.map(v=>v===d?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:v);return p.jsx(e,{...l,ref:i,children:b.isValidElement(h)?b.cloneElement(h,void 0,g):null})}return p.jsx(e,{...l,ref:i,children:a})});return r.displayName=`${t}.Slot`,r}var Cb=Nu("Slot");function kT(t){const e=b.forwardRef((r,n)=>{const{children:i,...a}=r;if(b.isValidElement(i)){const l=OT(i),u=CT(a,i.props);return i.type!==b.Fragment&&(u.ref=n?Tb(n,l):l),b.cloneElement(i,u)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Ob=Symbol("radix.slottable");function ET(t){const e=({children:r})=>p.jsx(p.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=Ob,e}function TT(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ob}function CT(t,e){const r={...e};for(const n in e){const i=t[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...u)=>{a(...u),i(...u)}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}function OT(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Pb(t){const e=t+"CollectionProvider",[r,n]=Si(e),[i,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),l=_=>{const{scope:E,children:C}=_,T=Xe.useRef(null),O=Xe.useRef(new Map).current;return p.jsx(i,{scope:E,itemMap:O,collectionRef:T,children:C})};l.displayName=e;const u=t+"CollectionSlot",d=Nu(u),h=Xe.forwardRef((_,E)=>{const{scope:C,children:T}=_,O=a(u,C),A=_r(E,O.collectionRef);return p.jsx(d,{ref:A,children:T})});h.displayName=u;const g=t+"CollectionItemSlot",v="data-radix-collection-item",y=Nu(g),x=Xe.forwardRef((_,E)=>{const{scope:C,children:T,...O}=_,A=Xe.useRef(null),U=_r(E,A),z=a(g,C);return Xe.useEffect(()=>(z.itemMap.set(A,{ref:A,...O}),()=>{z.itemMap.delete(A)})),p.jsx(y,{[v]:"",ref:U,children:T})});x.displayName=g;function S(_){const E=a(t+"CollectionConsumer",_);return Xe.useCallback(()=>{const T=E.collectionRef.current;if(!T)return[];const O=Array.from(T.querySelectorAll(`[${v}]`));return Array.from(E.itemMap.values()).sort((z,$)=>O.indexOf(z.ref.current)-O.indexOf($.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:l,Slot:h,ItemSlot:x},S,n]}var PT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ct=PT.reduce((t,e)=>{const r=Nu(`Primitive.${e}`),n=b.forwardRef((i,a)=>{const{asChild:l,...u}=i,d=l?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(d,{...u,ref:a})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Nb(t,e){t&&id.flushSync(()=>t.dispatchEvent(e))}function hr(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...r)=>e.current?.(...r),[])}function NT(t,e=globalThis?.document){const r=hr(t);b.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var jT="DismissableLayer",dp="dismissableLayer.update",RT="dismissableLayer.pointerDownOutside",AT="dismissableLayer.focusOutside",Jy,jb=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ug=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:u,...d}=t,h=b.useContext(jb),[g,v]=b.useState(null),y=g?.ownerDocument??globalThis?.document,[,x]=b.useState({}),S=_r(e,$=>v($)),_=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=_.indexOf(E),T=g?_.indexOf(g):-1,O=h.layersWithOutsidePointerEventsDisabled.size>0,A=T>=C,U=DT($=>{const J=$.target,V=[...h.branches].some(W=>W.contains(J));!A||V||(i?.($),l?.($),$.defaultPrevented||u?.())},y),z=LT($=>{const J=$.target;[...h.branches].some(W=>W.contains(J))||(a?.($),l?.($),$.defaultPrevented||u?.())},y);return NT($=>{T===h.layers.size-1&&(n?.($),!$.defaultPrevented&&u&&($.preventDefault(),u()))},y),b.useEffect(()=>{if(g)return r&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Jy=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(g)),h.layers.add(g),Xy(),()=>{r&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Jy)}},[g,y,r,h]),b.useEffect(()=>()=>{g&&(h.layers.delete(g),h.layersWithOutsidePointerEventsDisabled.delete(g),Xy())},[g,h]),b.useEffect(()=>{const $=()=>x({});return document.addEventListener(dp,$),()=>document.removeEventListener(dp,$)},[]),p.jsx(Ct.div,{...d,ref:S,style:{pointerEvents:O?A?"auto":"none":void 0,...t.style},onFocusCapture:ft(t.onFocusCapture,z.onFocusCapture),onBlurCapture:ft(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:ft(t.onPointerDownCapture,U.onPointerDownCapture)})});ug.displayName=jT;var IT="DismissableLayerBranch",Rb=b.forwardRef((t,e)=>{const r=b.useContext(jb),n=b.useRef(null),i=_r(e,n);return b.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),p.jsx(Ct.div,{...t,ref:i})});Rb.displayName=IT;function DT(t,e=globalThis?.document){const r=hr(t),n=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const a=u=>{if(u.target&&!n.current){let d=function(){Ab(RT,r,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function LT(t,e=globalThis?.document){const r=hr(t),n=b.useRef(!1);return b.useEffect(()=>{const i=a=>{a.target&&!n.current&&Ab(AT,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Xy(){const t=new CustomEvent(dp);document.dispatchEvent(t)}function Ab(t,e,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?Nb(i,a):i.dispatchEvent(a)}var MT=ug,$T=Rb,jn=globalThis?.document?b.useLayoutEffect:()=>{},FT="Portal",Ib=b.forwardRef((t,e)=>{const{container:r,...n}=t,[i,a]=b.useState(!1);jn(()=>a(!0),[]);const l=r||i&&globalThis?.document?.body;return l?_T.createPortal(p.jsx(Ct.div,{...n,ref:e}),l):null});Ib.displayName=FT;function UT(t,e){return b.useReducer((r,n)=>e[r][n]??r,t)}var ki=t=>{const{present:e,children:r}=t,n=BT(e),i=typeof r=="function"?r({present:n.isPresent}):b.Children.only(r),a=_r(n.ref,zT(i));return typeof r=="function"||n.isPresent?b.cloneElement(i,{ref:a}):null};ki.displayName="Presence";function BT(t){const[e,r]=b.useState(),n=b.useRef({}),i=b.useRef(t),a=b.useRef("none"),l=t?"mounted":"unmounted",[u,d]=UT(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const h=iu(n.current);a.current=u==="mounted"?h:"none"},[u]),jn(()=>{const h=n.current,g=i.current;if(g!==t){const y=a.current,x=iu(h);t?d("MOUNT"):x==="none"||h?.display==="none"?d("UNMOUNT"):d(g&&y!==x?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),jn(()=>{if(e){let h;const g=e.ownerDocument.defaultView??window,v=x=>{const _=iu(n.current).includes(x.animationName);if(x.target===e&&_&&(d("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},y=x=>{x.target===e&&(a.current=iu(n.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(h),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:b.useCallback(h=>{h&&(n.current=getComputedStyle(h)),r(h)},[])}}function iu(t){return t?.animationName||"none"}function zT(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function dg({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,i]=VT({defaultProp:e,onChange:r}),a=t!==void 0,l=a?t:n,u=hr(r),d=b.useCallback(h=>{if(a){const v=typeof h=="function"?h(t):h;v!==t&&u(v)}else i(h)},[a,t,i,u]);return[l,d]}function VT({defaultProp:t,onChange:e}){const r=b.useState(t),[n]=r,i=b.useRef(n),a=hr(e);return b.useEffect(()=>{i.current!==n&&(a(n),i.current=n)},[n,i,a]),r}var qT="VisuallyHidden",od=b.forwardRef((t,e)=>p.jsx(Ct.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));od.displayName=qT;var WT=od,fg="ToastProvider",[hg,HT,KT]=Pb("Toast"),[Db]=Si("Toast",[KT]),[GT,ad]=Db(fg),Lb=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:l}=t,[u,d]=b.useState(null),[h,g]=b.useState(0),v=b.useRef(!1),y=b.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${fg}\`. Expected non-empty \`string\`.`),p.jsx(hg.Provider,{scope:e,children:p.jsx(GT,{scope:e,label:r,duration:n,swipeDirection:i,swipeThreshold:a,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:b.useCallback(()=>g(x=>x+1),[]),onToastRemove:b.useCallback(()=>g(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:y,children:l})})};Lb.displayName=fg;var Mb="ToastViewport",QT=["F8"],fp="toast.viewportPause",hp="toast.viewportResume",$b=b.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=QT,label:i="Notifications ({hotkey})",...a}=t,l=ad(Mb,r),u=HT(r),d=b.useRef(null),h=b.useRef(null),g=b.useRef(null),v=b.useRef(null),y=_r(e,v,l.onViewportChange),x=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=l.toastCount>0;b.useEffect(()=>{const E=C=>{n.length!==0&&n.every(O=>C[O]||C.code===O)&&v.current?.focus()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[n]),b.useEffect(()=>{const E=d.current,C=v.current;if(S&&E&&C){const T=()=>{if(!l.isClosePausedRef.current){const z=new CustomEvent(fp);C.dispatchEvent(z),l.isClosePausedRef.current=!0}},O=()=>{if(l.isClosePausedRef.current){const z=new CustomEvent(hp);C.dispatchEvent(z),l.isClosePausedRef.current=!1}},A=z=>{!E.contains(z.relatedTarget)&&O()},U=()=>{E.contains(document.activeElement)||O()};return E.addEventListener("focusin",T),E.addEventListener("focusout",A),E.addEventListener("pointermove",T),E.addEventListener("pointerleave",U),window.addEventListener("blur",T),window.addEventListener("focus",O),()=>{E.removeEventListener("focusin",T),E.removeEventListener("focusout",A),E.removeEventListener("pointermove",T),E.removeEventListener("pointerleave",U),window.removeEventListener("blur",T),window.removeEventListener("focus",O)}}},[S,l.isClosePausedRef]);const _=b.useCallback(({tabbingDirection:E})=>{const T=u().map(O=>{const A=O.ref.current,U=[A,...lC(A)];return E==="forwards"?U:U.reverse()});return(E==="forwards"?T.reverse():T).flat()},[u]);return b.useEffect(()=>{const E=v.current;if(E){const C=T=>{const O=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!O){const U=document.activeElement,z=T.shiftKey;if(T.target===E&&z){h.current?.focus();return}const V=_({tabbingDirection:z?"backwards":"forwards"}),W=V.findIndex(ee=>ee===U);Th(V.slice(W+1))?T.preventDefault():z?h.current?.focus():g.current?.focus()}};return E.addEventListener("keydown",C),()=>E.removeEventListener("keydown",C)}},[u,_]),p.jsxs($T,{ref:d,role:"region","aria-label":i.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&p.jsx(pp,{ref:h,onFocusFromOutsideViewport:()=>{const E=_({tabbingDirection:"forwards"});Th(E)}}),p.jsx(hg.Slot,{scope:r,children:p.jsx(Ct.ol,{tabIndex:-1,...a,ref:y})}),S&&p.jsx(pp,{ref:g,onFocusFromOutsideViewport:()=>{const E=_({tabbingDirection:"backwards"});Th(E)}})]})});$b.displayName=Mb;var Fb="ToastFocusProxy",pp=b.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=t,a=ad(Fb,r);return p.jsx(od,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:l=>{const u=l.relatedTarget;!a.viewport?.contains(u)&&n()}})});pp.displayName=Fb;var ld="Toast",YT="toast.swipeStart",ZT="toast.swipeMove",JT="toast.swipeCancel",XT="toast.swipeEnd",Ub=b.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:a,...l}=t,[u=!0,d]=dg({prop:n,defaultProp:i,onChange:a});return p.jsx(ki,{present:r||u,children:p.jsx(rC,{open:u,...l,ref:e,onClose:()=>d(!1),onPause:hr(t.onPause),onResume:hr(t.onResume),onSwipeStart:ft(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ft(t.onSwipeMove,h=>{const{x:g,y:v}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:ft(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ft(t.onSwipeEnd,h=>{const{x:g,y:v}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),d(!1)})})})});Ub.displayName=ld;var[eC,tC]=Db(ld,{onClose(){}}),rC=b.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:a,onClose:l,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:y,onSwipeEnd:x,...S}=t,_=ad(ld,r),[E,C]=b.useState(null),T=_r(e,Z=>C(Z)),O=b.useRef(null),A=b.useRef(null),U=i||_.duration,z=b.useRef(0),$=b.useRef(U),J=b.useRef(0),{onToastAdd:V,onToastRemove:W}=_,ee=hr(()=>{E?.contains(document.activeElement)&&_.viewport?.focus(),l()}),Y=b.useCallback(Z=>{!Z||Z===1/0||(window.clearTimeout(J.current),z.current=new Date().getTime(),J.current=window.setTimeout(ee,Z))},[ee]);b.useEffect(()=>{const Z=_.viewport;if(Z){const ke=()=>{Y($.current),h?.()},fe=()=>{const Se=new Date().getTime()-z.current;$.current=$.current-Se,window.clearTimeout(J.current),d?.()};return Z.addEventListener(fp,fe),Z.addEventListener(hp,ke),()=>{Z.removeEventListener(fp,fe),Z.removeEventListener(hp,ke)}}},[_.viewport,U,d,h,Y]),b.useEffect(()=>{a&&!_.isClosePausedRef.current&&Y(U)},[a,U,_.isClosePausedRef,Y]),b.useEffect(()=>(V(),()=>W()),[V,W]);const te=b.useMemo(()=>E?Kb(E):null,[E]);return _.viewport?p.jsxs(p.Fragment,{children:[te&&p.jsx(nC,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:te}),p.jsx(eC,{scope:r,onClose:ee,children:id.createPortal(p.jsx(hg.ItemSlot,{scope:r,children:p.jsx(MT,{asChild:!0,onEscapeKeyDown:ft(u,()=>{_.isFocusedToastEscapeKeyDownRef.current||ee(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Ct.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":_.swipeDirection,...S,ref:T,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ft(t.onKeyDown,Z=>{Z.key==="Escape"&&(u?.(Z.nativeEvent),Z.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,ee()))}),onPointerDown:ft(t.onPointerDown,Z=>{Z.button===0&&(O.current={x:Z.clientX,y:Z.clientY})}),onPointerMove:ft(t.onPointerMove,Z=>{if(!O.current)return;const ke=Z.clientX-O.current.x,fe=Z.clientY-O.current.y,Se=!!A.current,H=["left","right"].includes(_.swipeDirection),ue=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,ae=H?ue(0,ke):0,I=H?0:ue(0,fe),X=Z.pointerType==="touch"?10:2,Pe={x:ae,y:I},ge={originalEvent:Z,delta:Pe};Se?(A.current=Pe,ou(ZT,v,ge,{discrete:!1})):e0(Pe,_.swipeDirection,X)?(A.current=Pe,ou(YT,g,ge,{discrete:!1}),Z.target.setPointerCapture(Z.pointerId)):(Math.abs(ke)>X||Math.abs(fe)>X)&&(O.current=null)}),onPointerUp:ft(t.onPointerUp,Z=>{const ke=A.current,fe=Z.target;if(fe.hasPointerCapture(Z.pointerId)&&fe.releasePointerCapture(Z.pointerId),A.current=null,O.current=null,ke){const Se=Z.currentTarget,H={originalEvent:Z,delta:ke};e0(ke,_.swipeDirection,_.swipeThreshold)?ou(XT,x,H,{discrete:!0}):ou(JT,y,H,{discrete:!0}),Se.addEventListener("click",ue=>ue.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),nC=t=>{const{__scopeToast:e,children:r,...n}=t,i=ad(ld,e),[a,l]=b.useState(!1),[u,d]=b.useState(!1);return oC(()=>l(!0)),b.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:p.jsx(Ib,{asChild:!0,children:p.jsx(od,{...n,children:a&&p.jsxs(p.Fragment,{children:[i.label," ",r]})})})},sC="ToastTitle",Bb=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return p.jsx(Ct.div,{...n,ref:e})});Bb.displayName=sC;var iC="ToastDescription",zb=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return p.jsx(Ct.div,{...n,ref:e})});zb.displayName=iC;var Vb="ToastAction",qb=b.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?p.jsx(Hb,{altText:r,asChild:!0,children:p.jsx(pg,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Vb}\`. Expected non-empty \`string\`.`),null)});qb.displayName=Vb;var Wb="ToastClose",pg=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,i=tC(Wb,r);return p.jsx(Hb,{asChild:!0,children:p.jsx(Ct.button,{type:"button",...n,ref:e,onClick:ft(t.onClick,i.onClose)})})});pg.displayName=Wb;var Hb=b.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...i}=t;return p.jsx(Ct.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:e})});function Kb(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),aC(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const l=n.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...Kb(n))}}),e}function ou(t,e,r,{discrete:n}){const i=r.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?Nb(i,a):i.dispatchEvent(a)}var e0=(t,e,r=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),a=n>i;return e==="left"||e==="right"?a&&n>r:!a&&i>r};function oC(t=()=>{}){const e=hr(t);jn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function aC(t){return t.nodeType===t.ELEMENT_NODE}function lC(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Th(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var cC=Lb,Gb=$b,Qb=Ub,Yb=Bb,Zb=zb,Jb=qb,Xb=pg;function ex(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=ex(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function tx(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=ex(t))&&(n&&(n+=" "),n+=e);return n}const t0=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,r0=tx,gg=(t,e)=>r=>{var n;if(e?.variants==null)return r0(t,r?.class,r?.className);const{variants:i,defaultVariants:a}=e,l=Object.keys(i).map(h=>{const g=r?.[h],v=a?.[h];if(g===null)return null;const y=t0(g)||t0(v);return i[h][y]}),u=r&&Object.entries(r).reduce((h,g)=>{let[v,y]=g;return y===void 0||(h[v]=y),h},{}),d=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,g)=>{let{class:v,className:y,...x}=g;return Object.entries(x).every(S=>{let[_,E]=S;return Array.isArray(E)?E.includes({...a,...u}[_]):{...a,...u}[_]===E})?[...h,v,y]:h},[]);return r0(t,l,d,r?.class,r?.className)};const uC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rx=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");var dC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fC=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:l,...u},d)=>b.createElement("svg",{ref:d,...dC,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:rx("lucide",i),...u},[...l.map(([h,g])=>b.createElement(h,g)),...Array.isArray(a)?a:[a]]));const Ot=(t,e)=>{const r=b.forwardRef(({className:n,...i},a)=>b.createElement(fC,{ref:a,iconNode:e,className:rx(`lucide-${uC(t)}`,n),...i}));return r.displayName=`${t}`,r};const hC=Ot("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const il=Ot("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const pC=Ot("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const gC=Ot("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const n0=Ot("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const cd=Ot("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);const mC=Ot("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);const vC=Ot("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const nx=Ot("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const xu=Ot("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const gp=Ot("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const yC=Ot("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const wC=Ot("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const bC=Ot("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const xC=Ot("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const _C=Ot("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const sx=Ot("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const s0=Ot("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const SC=Ot("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const ix=Ot("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);const ud=Ot("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const i0=Ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const ox=Ot("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const kC=Ot("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);const EC=Ot("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);const o0=Ot("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const TC=Ot("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);const CC=Ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const OC=Ot("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),mg="-",PC=t=>{const e=jC(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const u=l.split(mg);return u[0]===""&&u.length!==1&&u.shift(),ax(u,e)||NC(l)},getConflictingClassGroupIds:(l,u)=>{const d=r[l]||[];return u&&n[l]?[...d,...n[l]]:d}}},ax=(t,e)=>{if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?ax(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(mg);return e.validators.find(({validator:l})=>l(a))?.classGroupId},a0=/^\[(.+)\]$/,NC=t=>{if(a0.test(t)){const e=a0.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},jC=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return AC(Object.entries(t.classGroups),r).forEach(([a,l])=>{mp(l,n,a,e)}),n},mp=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:l0(e,i);a.classGroupId=r;return}if(typeof i=="function"){if(RC(i)){mp(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,l])=>{mp(l,l0(e,a),r,n)})})},l0=(t,e)=>{let r=t;return e.split(mg).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},RC=t=>t.isThemeGetter,AC=(t,e)=>e?t.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([l,u])=>[e+l,u])):a);return[r,i]}):t,IC=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(a,l)=>{r.set(a,l),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let l=r.get(a);if(l!==void 0)return l;if((l=n.get(a))!==void 0)return i(a,l),l},set(a,l){r.has(a)?r.set(a,l):i(a,l)}}},lx="!",DC=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],a=e.length,l=u=>{const d=[];let h=0,g=0,v;for(let E=0;E<u.length;E++){let C=u[E];if(h===0){if(C===i&&(n||u.slice(E,E+a)===e)){d.push(u.slice(g,E)),g=E+a;continue}if(C==="/"){v=E;continue}}C==="["?h++:C==="]"&&h--}const y=d.length===0?u:u.substring(g),x=y.startsWith(lx),S=x?y.substring(1):y,_=v&&v>g?v-g:void 0;return{modifiers:d,hasImportantModifier:x,baseClassName:S,maybePostfixModifierPosition:_}};return r?u=>r({className:u,parseClassName:l}):l},LC=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},MC=t=>({cache:IC(t.cacheSize),parseClassName:DC(t),...PC(t)}),$C=/\s+/,FC=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,a=[],l=t.trim().split($C);let u="";for(let d=l.length-1;d>=0;d-=1){const h=l[d],{modifiers:g,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:x}=r(h);let S=!!x,_=n(S?y.substring(0,x):y);if(!_){if(!S){u=h+(u.length>0?" "+u:u);continue}if(_=n(y),!_){u=h+(u.length>0?" "+u:u);continue}S=!1}const E=LC(g).join(":"),C=v?E+lx:E,T=C+_;if(a.includes(T))continue;a.push(T);const O=i(_,S);for(let A=0;A<O.length;++A){const U=O[A];a.push(C+U)}u=h+(u.length>0?" "+u:u)}return u};function UC(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=cx(e))&&(n&&(n+=" "),n+=r);return n}const cx=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=cx(t[n]))&&(r&&(r+=" "),r+=e);return r};function BC(t,...e){let r,n,i,a=l;function l(d){const h=e.reduce((g,v)=>v(g),t());return r=MC(h),n=r.cache.get,i=r.cache.set,a=u,u(d)}function u(d){const h=n(d);if(h)return h;const g=FC(d,r);return i(d,g),g}return function(){return a(UC.apply(null,arguments))}}const Lt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},ux=/^\[(?:([a-z-]+):)?(.+)\]$/i,zC=/^\d+\/\d+$/,VC=new Set(["px","full","screen"]),qC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,WC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,HC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,KC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,GC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ts=t=>Yo(t)||VC.has(t)||zC.test(t),ii=t=>ua(t,"length",r2),Yo=t=>!!t&&!Number.isNaN(Number(t)),Ch=t=>ua(t,"number",Yo),Ya=t=>!!t&&Number.isInteger(Number(t)),QC=t=>t.endsWith("%")&&Yo(t.slice(0,-1)),tt=t=>ux.test(t),oi=t=>qC.test(t),YC=new Set(["length","size","percentage"]),ZC=t=>ua(t,YC,dx),JC=t=>ua(t,"position",dx),XC=new Set(["image","url"]),e2=t=>ua(t,XC,s2),t2=t=>ua(t,"",n2),Za=()=>!0,ua=(t,e,r)=>{const n=ux.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},r2=t=>WC.test(t)&&!HC.test(t),dx=()=>!1,n2=t=>KC.test(t),s2=t=>GC.test(t),i2=()=>{const t=Lt("colors"),e=Lt("spacing"),r=Lt("blur"),n=Lt("brightness"),i=Lt("borderColor"),a=Lt("borderRadius"),l=Lt("borderSpacing"),u=Lt("borderWidth"),d=Lt("contrast"),h=Lt("grayscale"),g=Lt("hueRotate"),v=Lt("invert"),y=Lt("gap"),x=Lt("gradientColorStops"),S=Lt("gradientColorStopPositions"),_=Lt("inset"),E=Lt("margin"),C=Lt("opacity"),T=Lt("padding"),O=Lt("saturate"),A=Lt("scale"),U=Lt("sepia"),z=Lt("skew"),$=Lt("space"),J=Lt("translate"),V=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],ee=()=>["auto",tt,e],Y=()=>[tt,e],te=()=>["",Ts,ii],Z=()=>["auto",Yo,tt],ke=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],fe=()=>["solid","dashed","dotted","double","none"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],ue=()=>["","0",tt],ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>[Yo,tt];return{cacheSize:500,separator:":",theme:{colors:[Za],spacing:[Ts,ii],blur:["none","",oi,tt],brightness:I(),borderColor:[t],borderRadius:["none","","full",oi,tt],borderSpacing:Y(),borderWidth:te(),contrast:I(),grayscale:ue(),hueRotate:I(),invert:ue(),gap:Y(),gradientColorStops:[t],gradientColorStopPositions:[QC,ii],inset:ee(),margin:ee(),opacity:I(),padding:Y(),saturate:I(),scale:I(),sepia:ue(),skew:I(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",tt]}],container:["container"],columns:[{columns:[oi]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ke(),tt]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ya,tt]}],basis:[{basis:ee()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tt]}],grow:[{grow:ue()}],shrink:[{shrink:ue()}],order:[{order:["first","last","none",Ya,tt]}],"grid-cols":[{"grid-cols":[Za]}],"col-start-end":[{col:["auto",{span:["full",Ya,tt]},tt]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[Za]}],"row-start-end":[{row:["auto",{span:[Ya,tt]},tt]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tt]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tt,e]}],"min-w":[{"min-w":[tt,e,"min","max","fit"]}],"max-w":[{"max-w":[tt,e,"none","full","min","max","fit","prose",{screen:[oi]},oi]}],h:[{h:[tt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",oi,ii]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ch]}],"font-family":[{font:[Za]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tt]}],"line-clamp":[{"line-clamp":["none",Yo,Ch]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ts,tt]}],"list-image":[{"list-image":["none",tt]}],"list-style-type":[{list:["none","disc","decimal",tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ts,ii]}],"underline-offset":[{"underline-offset":["auto",Ts,tt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ke(),JC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ZC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},e2]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...fe(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:fe()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...fe()]}],"outline-offset":[{"outline-offset":[Ts,tt]}],"outline-w":[{outline:[Ts,ii]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[Ts,ii]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",oi,t2]}],"shadow-color":[{shadow:[Za]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...Se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Se()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",oi,tt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[v]}],saturate:[{saturate:[O]}],sepia:[{sepia:[U]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[O]}],"backdrop-sepia":[{"backdrop-sepia":[U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tt]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",tt]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Ya,tt]}],"translate-x":[{"translate-x":[J]}],"translate-y":[{"translate-y":[J]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ts,ii,Ch]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},o2=BC(i2);function dt(...t){return o2(tx(t))}const a2=cC,fx=b.forwardRef(({className:t,...e},r)=>p.jsx(Gb,{ref:r,className:dt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));fx.displayName=Gb.displayName;const l2=gg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),hx=b.forwardRef(({className:t,variant:e,...r},n)=>p.jsx(Qb,{ref:n,className:dt(l2({variant:e}),t),...r}));hx.displayName=Qb.displayName;const c2=b.forwardRef(({className:t,...e},r)=>p.jsx(Jb,{ref:r,className:dt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));c2.displayName=Jb.displayName;const px=b.forwardRef(({className:t,...e},r)=>p.jsx(Xb,{ref:r,className:dt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(CC,{className:"h-4 w-4"})}));px.displayName=Xb.displayName;const gx=b.forwardRef(({className:t,...e},r)=>p.jsx(Yb,{ref:r,className:dt("text-sm font-semibold",t),...e}));gx.displayName=Yb.displayName;const mx=b.forwardRef(({className:t,...e},r)=>p.jsx(Zb,{ref:r,className:dt("text-sm opacity-90",t),...e}));mx.displayName=Zb.displayName;function u2(){const{toasts:t}=ao();return p.jsxs(a2,{children:[t.map(function({id:e,title:r,description:n,action:i,...a}){return p.jsxs(hx,{...a,children:[p.jsxs("div",{className:"grid gap-1",children:[r&&p.jsx(gx,{children:r}),n&&p.jsx(mx,{children:n})]}),i,p.jsx(px,{})]},e)}),p.jsx(fx,{})]})}var d2=eb[" useId ".trim().toString()]||(()=>{}),f2=0;function vx(t){const[e,r]=b.useState(d2());return jn(()=>{r(n=>n??String(f2++))},[t]),e?`radix-${e}`:""}const h2=["top","right","bottom","left"],mi=Math.min,pn=Math.max,ju=Math.round,au=Math.floor,us=t=>({x:t,y:t}),p2={left:"right",right:"left",bottom:"top",top:"bottom"},g2={start:"end",end:"start"};function vp(t,e,r){return pn(t,mi(e,r))}function Is(t,e){return typeof t=="function"?t(e):t}function Ds(t){return t.split("-")[0]}function da(t){return t.split("-")[1]}function vg(t){return t==="x"?"y":"x"}function yg(t){return t==="y"?"height":"width"}function vi(t){return["top","bottom"].includes(Ds(t))?"y":"x"}function wg(t){return vg(vi(t))}function m2(t,e,r){r===void 0&&(r=!1);const n=da(t),i=wg(t),a=yg(i);let l=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=Ru(l)),[l,Ru(l)]}function v2(t){const e=Ru(t);return[yp(t),e,yp(e)]}function yp(t){return t.replace(/start|end/g,e=>g2[e])}function y2(t,e,r){const n=["left","right"],i=["right","left"],a=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return r?e?i:n:e?n:i;case"left":case"right":return e?a:l;default:return[]}}function w2(t,e,r,n){const i=da(t);let a=y2(Ds(t),r==="start",n);return i&&(a=a.map(l=>l+"-"+i),e&&(a=a.concat(a.map(yp)))),a}function Ru(t){return t.replace(/left|right|bottom|top/g,e=>p2[e])}function b2(t){return{top:0,right:0,bottom:0,left:0,...t}}function yx(t){return typeof t!="number"?b2(t):{top:t,right:t,bottom:t,left:t}}function Au(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function c0(t,e,r){let{reference:n,floating:i}=t;const a=vi(e),l=wg(e),u=yg(l),d=Ds(e),h=a==="y",g=n.x+n.width/2-i.width/2,v=n.y+n.height/2-i.height/2,y=n[u]/2-i[u]/2;let x;switch(d){case"top":x={x:g,y:n.y-i.height};break;case"bottom":x={x:g,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:v};break;case"left":x={x:n.x-i.width,y:v};break;default:x={x:n.x,y:n.y}}switch(da(e)){case"start":x[l]-=y*(r&&h?-1:1);break;case"end":x[l]+=y*(r&&h?-1:1);break}return x}const x2=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:l}=r,u=a.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:g,y:v}=c0(h,n,d),y=n,x={},S=0;for(let _=0;_<u.length;_++){const{name:E,fn:C}=u[_],{x:T,y:O,data:A,reset:U}=await C({x:g,y:v,initialPlacement:n,placement:y,strategy:i,middlewareData:x,rects:h,platform:l,elements:{reference:t,floating:e}});g=T??g,v=O??v,x={...x,[E]:{...x[E],...A}},U&&S<=50&&(S++,typeof U=="object"&&(U.placement&&(y=U.placement),U.rects&&(h=U.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):U.rects),{x:g,y:v}=c0(h,y,d)),_=-1)}return{x:g,y:v,placement:y,strategy:i,middlewareData:x}};async function bl(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:l,elements:u,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:y=!1,padding:x=0}=Is(e,t),S=yx(x),E=u[y?v==="floating"?"reference":"floating":v],C=Au(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(E)))==null||r?E:E.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:h,rootBoundary:g,strategy:d})),T=v==="floating"?{x:n,y:i,width:l.floating.width,height:l.floating.height}:l.reference,O=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),A=await(a.isElement==null?void 0:a.isElement(O))?await(a.getScale==null?void 0:a.getScale(O))||{x:1,y:1}:{x:1,y:1},U=Au(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:T,offsetParent:O,strategy:d}):T);return{top:(C.top-U.top+S.top)/A.y,bottom:(U.bottom-C.bottom+S.bottom)/A.y,left:(C.left-U.left+S.left)/A.x,right:(U.right-C.right+S.right)/A.x}}const _2=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:a,platform:l,elements:u,middlewareData:d}=e,{element:h,padding:g=0}=Is(t,e)||{};if(h==null)return{};const v=yx(g),y={x:r,y:n},x=wg(i),S=yg(x),_=await l.getDimensions(h),E=x==="y",C=E?"top":"left",T=E?"bottom":"right",O=E?"clientHeight":"clientWidth",A=a.reference[S]+a.reference[x]-y[x]-a.floating[S],U=y[x]-a.reference[x],z=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let $=z?z[O]:0;(!$||!await(l.isElement==null?void 0:l.isElement(z)))&&($=u.floating[O]||a.floating[S]);const J=A/2-U/2,V=$/2-_[S]/2-1,W=mi(v[C],V),ee=mi(v[T],V),Y=W,te=$-_[S]-ee,Z=$/2-_[S]/2+J,ke=vp(Y,Z,te),fe=!d.arrow&&da(i)!=null&&Z!==ke&&a.reference[S]/2-(Z<Y?W:ee)-_[S]/2<0,Se=fe?Z<Y?Z-Y:Z-te:0;return{[x]:y[x]+Se,data:{[x]:ke,centerOffset:Z-ke-Se,...fe&&{alignmentOffset:Se}},reset:fe}}}),S2=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:a,rects:l,initialPlacement:u,platform:d,elements:h}=e,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:y,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:_=!0,...E}=Is(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const C=Ds(i),T=vi(u),O=Ds(u)===u,A=await(d.isRTL==null?void 0:d.isRTL(h.floating)),U=y||(O||!_?[Ru(u)]:v2(u)),z=S!=="none";!y&&z&&U.push(...w2(u,_,S,A));const $=[u,...U],J=await bl(e,E),V=[];let W=((n=a.flip)==null?void 0:n.overflows)||[];if(g&&V.push(J[C]),v){const Z=m2(i,l,A);V.push(J[Z[0]],J[Z[1]])}if(W=[...W,{placement:i,overflows:V}],!V.every(Z=>Z<=0)){var ee,Y;const Z=(((ee=a.flip)==null?void 0:ee.index)||0)+1,ke=$[Z];if(ke)return{data:{index:Z,overflows:W},reset:{placement:ke}};let fe=(Y=W.filter(Se=>Se.overflows[0]<=0).sort((Se,H)=>Se.overflows[1]-H.overflows[1])[0])==null?void 0:Y.placement;if(!fe)switch(x){case"bestFit":{var te;const Se=(te=W.filter(H=>{if(z){const ue=vi(H.placement);return ue===T||ue==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(ue=>ue>0).reduce((ue,ae)=>ue+ae,0)]).sort((H,ue)=>H[1]-ue[1])[0])==null?void 0:te[0];Se&&(fe=Se);break}case"initialPlacement":fe=u;break}if(i!==fe)return{reset:{placement:fe}}}return{}}}};function u0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function d0(t){return h2.some(e=>t[e]>=0)}const k2=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=Is(t,e);switch(n){case"referenceHidden":{const a=await bl(e,{...i,elementContext:"reference"}),l=u0(a,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:d0(l)}}}case"escaped":{const a=await bl(e,{...i,altBoundary:!0}),l=u0(a,r.floating);return{data:{escapedOffsets:l,escaped:d0(l)}}}default:return{}}}}};async function E2(t,e){const{placement:r,platform:n,elements:i}=t,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),l=Ds(r),u=da(r),d=vi(r)==="y",h=["left","top"].includes(l)?-1:1,g=a&&d?-1:1,v=Is(e,t);let{mainAxis:y,crossAxis:x,alignmentAxis:S}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof S=="number"&&(x=u==="end"?S*-1:S),d?{x:x*g,y:y*h}:{x:y*h,y:x*g}}const T2=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:a,placement:l,middlewareData:u}=e,d=await E2(e,t);return l===((r=u.offset)==null?void 0:r.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:l}}}}},C2=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:u={fn:E=>{let{x:C,y:T}=E;return{x:C,y:T}}},...d}=Is(t,e),h={x:r,y:n},g=await bl(e,d),v=vi(Ds(i)),y=vg(v);let x=h[y],S=h[v];if(a){const E=y==="y"?"top":"left",C=y==="y"?"bottom":"right",T=x+g[E],O=x-g[C];x=vp(T,x,O)}if(l){const E=v==="y"?"top":"left",C=v==="y"?"bottom":"right",T=S+g[E],O=S-g[C];S=vp(T,S,O)}const _=u.fn({...e,[y]:x,[v]:S});return{..._,data:{x:_.x-r,y:_.y-n,enabled:{[y]:a,[v]:l}}}}}},O2=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:a,middlewareData:l}=e,{offset:u=0,mainAxis:d=!0,crossAxis:h=!0}=Is(t,e),g={x:r,y:n},v=vi(i),y=vg(v);let x=g[y],S=g[v];const _=Is(u,e),E=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(d){const O=y==="y"?"height":"width",A=a.reference[y]-a.floating[O]+E.mainAxis,U=a.reference[y]+a.reference[O]-E.mainAxis;x<A?x=A:x>U&&(x=U)}if(h){var C,T;const O=y==="y"?"width":"height",A=["top","left"].includes(Ds(i)),U=a.reference[v]-a.floating[O]+(A&&((C=l.offset)==null?void 0:C[v])||0)+(A?0:E.crossAxis),z=a.reference[v]+a.reference[O]+(A?0:((T=l.offset)==null?void 0:T[v])||0)-(A?E.crossAxis:0);S<U?S=U:S>z&&(S=z)}return{[y]:x,[v]:S}}}},P2=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:a,platform:l,elements:u}=e,{apply:d=()=>{},...h}=Is(t,e),g=await bl(e,h),v=Ds(i),y=da(i),x=vi(i)==="y",{width:S,height:_}=a.floating;let E,C;v==="top"||v==="bottom"?(E=v,C=y===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(C=v,E=y==="end"?"top":"bottom");const T=_-g.top-g.bottom,O=S-g.left-g.right,A=mi(_-g[E],T),U=mi(S-g[C],O),z=!e.middlewareData.shift;let $=A,J=U;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(J=O),(n=e.middlewareData.shift)!=null&&n.enabled.y&&($=T),z&&!y){const W=pn(g.left,0),ee=pn(g.right,0),Y=pn(g.top,0),te=pn(g.bottom,0);x?J=S-2*(W!==0||ee!==0?W+ee:pn(g.left,g.right)):$=_-2*(Y!==0||te!==0?Y+te:pn(g.top,g.bottom))}await d({...e,availableWidth:J,availableHeight:$});const V=await l.getDimensions(u.floating);return S!==V.width||_!==V.height?{reset:{rects:!0}}:{}}}};function dd(){return typeof window<"u"}function fa(t){return wx(t)?(t.nodeName||"").toLowerCase():"#document"}function yn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gs(t){var e;return(e=(wx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function wx(t){return dd()?t instanceof Node||t instanceof yn(t).Node:!1}function Jn(t){return dd()?t instanceof Element||t instanceof yn(t).Element:!1}function fs(t){return dd()?t instanceof HTMLElement||t instanceof yn(t).HTMLElement:!1}function f0(t){return!dd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yn(t).ShadowRoot}function Hl(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=Xn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(i)}function N2(t){return["table","td","th"].includes(fa(t))}function fd(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function bg(t){const e=xg(),r=Jn(t)?Xn(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function j2(t){let e=yi(t);for(;fs(e)&&!ra(e);){if(bg(e))return e;if(fd(e))return null;e=yi(e)}return null}function xg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ra(t){return["html","body","#document"].includes(fa(t))}function Xn(t){return yn(t).getComputedStyle(t)}function hd(t){return Jn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function yi(t){if(fa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||f0(t)&&t.host||gs(t);return f0(e)?e.host:e}function bx(t){const e=yi(t);return ra(e)?t.ownerDocument?t.ownerDocument.body:t.body:fs(e)&&Hl(e)?e:bx(e)}function xl(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=bx(t),a=i===((n=t.ownerDocument)==null?void 0:n.body),l=yn(i);if(a){const u=wp(l);return e.concat(l,l.visualViewport||[],Hl(i)?i:[],u&&r?xl(u):[])}return e.concat(i,xl(i,[],r))}function wp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function xx(t){const e=Xn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=fs(t),a=i?t.offsetWidth:r,l=i?t.offsetHeight:n,u=ju(r)!==a||ju(n)!==l;return u&&(r=a,n=l),{width:r,height:n,$:u}}function _g(t){return Jn(t)?t:t.contextElement}function Zo(t){const e=_g(t);if(!fs(e))return us(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:a}=xx(e);let l=(a?ju(r.width):r.width)/n,u=(a?ju(r.height):r.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const R2=us(0);function _x(t){const e=yn(t);return!xg()||!e.visualViewport?R2:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function A2(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==yn(t)?!1:e}function Xi(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),a=_g(t);let l=us(1);e&&(n?Jn(n)&&(l=Zo(n)):l=Zo(t));const u=A2(a,r,n)?_x(a):us(0);let d=(i.left+u.x)/l.x,h=(i.top+u.y)/l.y,g=i.width/l.x,v=i.height/l.y;if(a){const y=yn(a),x=n&&Jn(n)?yn(n):n;let S=y,_=wp(S);for(;_&&n&&x!==S;){const E=Zo(_),C=_.getBoundingClientRect(),T=Xn(_),O=C.left+(_.clientLeft+parseFloat(T.paddingLeft))*E.x,A=C.top+(_.clientTop+parseFloat(T.paddingTop))*E.y;d*=E.x,h*=E.y,g*=E.x,v*=E.y,d+=O,h+=A,S=yn(_),_=wp(S)}}return Au({width:g,height:v,x:d,y:h})}function Sg(t,e){const r=hd(t).scrollLeft;return e?e.left+r:Xi(gs(t)).left+r}function Sx(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-(r?0:Sg(t,n)),a=n.top+e.scrollTop;return{x:i,y:a}}function I2(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const a=i==="fixed",l=gs(n),u=e?fd(e.floating):!1;if(n===l||u&&a)return r;let d={scrollLeft:0,scrollTop:0},h=us(1);const g=us(0),v=fs(n);if((v||!v&&!a)&&((fa(n)!=="body"||Hl(l))&&(d=hd(n)),fs(n))){const x=Xi(n);h=Zo(n),g.x=x.x+n.clientLeft,g.y=x.y+n.clientTop}const y=l&&!v&&!a?Sx(l,d,!0):us(0);return{width:r.width*h.x,height:r.height*h.y,x:r.x*h.x-d.scrollLeft*h.x+g.x+y.x,y:r.y*h.y-d.scrollTop*h.y+g.y+y.y}}function D2(t){return Array.from(t.getClientRects())}function L2(t){const e=gs(t),r=hd(t),n=t.ownerDocument.body,i=pn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=pn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let l=-r.scrollLeft+Sg(t);const u=-r.scrollTop;return Xn(n).direction==="rtl"&&(l+=pn(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:l,y:u}}function M2(t,e){const r=yn(t),n=gs(t),i=r.visualViewport;let a=n.clientWidth,l=n.clientHeight,u=0,d=0;if(i){a=i.width,l=i.height;const h=xg();(!h||h&&e==="fixed")&&(u=i.offsetLeft,d=i.offsetTop)}return{width:a,height:l,x:u,y:d}}function $2(t,e){const r=Xi(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,a=fs(t)?Zo(t):us(1),l=t.clientWidth*a.x,u=t.clientHeight*a.y,d=i*a.x,h=n*a.y;return{width:l,height:u,x:d,y:h}}function h0(t,e,r){let n;if(e==="viewport")n=M2(t,r);else if(e==="document")n=L2(gs(t));else if(Jn(e))n=$2(e,r);else{const i=_x(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Au(n)}function kx(t,e){const r=yi(t);return r===e||!Jn(r)||ra(r)?!1:Xn(r).position==="fixed"||kx(r,e)}function F2(t,e){const r=e.get(t);if(r)return r;let n=xl(t,[],!1).filter(u=>Jn(u)&&fa(u)!=="body"),i=null;const a=Xn(t).position==="fixed";let l=a?yi(t):t;for(;Jn(l)&&!ra(l);){const u=Xn(l),d=bg(l);!d&&u.position==="fixed"&&(i=null),(a?!d&&!i:!d&&u.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Hl(l)&&!d&&kx(t,l))?n=n.filter(g=>g!==l):i=u,l=yi(l)}return e.set(t,n),n}function U2(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const l=[...r==="clippingAncestors"?fd(e)?[]:F2(e,this._c):[].concat(r),n],u=l[0],d=l.reduce((h,g)=>{const v=h0(e,g,i);return h.top=pn(v.top,h.top),h.right=mi(v.right,h.right),h.bottom=mi(v.bottom,h.bottom),h.left=pn(v.left,h.left),h},h0(e,u,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function B2(t){const{width:e,height:r}=xx(t);return{width:e,height:r}}function z2(t,e,r){const n=fs(e),i=gs(e),a=r==="fixed",l=Xi(t,!0,a,e);let u={scrollLeft:0,scrollTop:0};const d=us(0);if(n||!n&&!a)if((fa(e)!=="body"||Hl(i))&&(u=hd(e)),n){const y=Xi(e,!0,a,e);d.x=y.x+e.clientLeft,d.y=y.y+e.clientTop}else i&&(d.x=Sg(i));const h=i&&!n&&!a?Sx(i,u):us(0),g=l.left+u.scrollLeft-d.x-h.x,v=l.top+u.scrollTop-d.y-h.y;return{x:g,y:v,width:l.width,height:l.height}}function Oh(t){return Xn(t).position==="static"}function p0(t,e){if(!fs(t)||Xn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return gs(t)===r&&(r=r.ownerDocument.body),r}function Ex(t,e){const r=yn(t);if(fd(t))return r;if(!fs(t)){let i=yi(t);for(;i&&!ra(i);){if(Jn(i)&&!Oh(i))return i;i=yi(i)}return r}let n=p0(t,e);for(;n&&N2(n)&&Oh(n);)n=p0(n,e);return n&&ra(n)&&Oh(n)&&!bg(n)?r:n||j2(t)||r}const V2=async function(t){const e=this.getOffsetParent||Ex,r=this.getDimensions,n=await r(t.floating);return{reference:z2(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function q2(t){return Xn(t).direction==="rtl"}const W2={convertOffsetParentRelativeRectToViewportRelativeRect:I2,getDocumentElement:gs,getClippingRect:U2,getOffsetParent:Ex,getElementRects:V2,getClientRects:D2,getDimensions:B2,getScale:Zo,isElement:Jn,isRTL:q2};function Tx(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function H2(t,e){let r=null,n;const i=gs(t);function a(){var u;clearTimeout(n),(u=r)==null||u.disconnect(),r=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),a();const h=t.getBoundingClientRect(),{left:g,top:v,width:y,height:x}=h;if(u||e(),!y||!x)return;const S=au(v),_=au(i.clientWidth-(g+y)),E=au(i.clientHeight-(v+x)),C=au(g),O={rootMargin:-S+"px "+-_+"px "+-E+"px "+-C+"px",threshold:pn(0,mi(1,d))||1};let A=!0;function U(z){const $=z[0].intersectionRatio;if($!==d){if(!A)return l();$?l(!1,$):n=setTimeout(()=>{l(!1,1e-7)},1e3)}$===1&&!Tx(h,t.getBoundingClientRect())&&l(),A=!1}try{r=new IntersectionObserver(U,{...O,root:i.ownerDocument})}catch{r=new IntersectionObserver(U,O)}r.observe(t)}return l(!0),a}function K2(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,h=_g(t),g=i||a?[...h?xl(h):[],...xl(e)]:[];g.forEach(C=>{i&&C.addEventListener("scroll",r,{passive:!0}),a&&C.addEventListener("resize",r)});const v=h&&u?H2(h,r):null;let y=-1,x=null;l&&(x=new ResizeObserver(C=>{let[T]=C;T&&T.target===h&&x&&(x.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var O;(O=x)==null||O.observe(e)})),r()}),h&&!d&&x.observe(h),x.observe(e));let S,_=d?Xi(t):null;d&&E();function E(){const C=Xi(t);_&&!Tx(_,C)&&r(),_=C,S=requestAnimationFrame(E)}return r(),()=>{var C;g.forEach(T=>{i&&T.removeEventListener("scroll",r),a&&T.removeEventListener("resize",r)}),v?.(),(C=x)==null||C.disconnect(),x=null,d&&cancelAnimationFrame(S)}}const G2=T2,Q2=C2,Y2=S2,Z2=P2,J2=k2,g0=_2,X2=O2,eO=(t,e,r)=>{const n=new Map,i={platform:W2,...r},a={...i.platform,_c:n};return x2(t,e,{...i,platform:a})};var _u=typeof document<"u"?b.useLayoutEffect:b.useEffect;function Iu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Iu(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&t.$$typeof)&&!Iu(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function Cx(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function m0(t,e){const r=Cx(t);return Math.round(e*r)/r}function Ph(t){const e=b.useRef(t);return _u(()=>{e.current=t}),e}function tO(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:l}={},transform:u=!0,whileElementsMounted:d,open:h}=t,[g,v]=b.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[y,x]=b.useState(n);Iu(y,n)||x(n);const[S,_]=b.useState(null),[E,C]=b.useState(null),T=b.useCallback(H=>{H!==z.current&&(z.current=H,_(H))},[]),O=b.useCallback(H=>{H!==$.current&&($.current=H,C(H))},[]),A=a||S,U=l||E,z=b.useRef(null),$=b.useRef(null),J=b.useRef(g),V=d!=null,W=Ph(d),ee=Ph(i),Y=Ph(h),te=b.useCallback(()=>{if(!z.current||!$.current)return;const H={placement:e,strategy:r,middleware:y};ee.current&&(H.platform=ee.current),eO(z.current,$.current,H).then(ue=>{const ae={...ue,isPositioned:Y.current!==!1};Z.current&&!Iu(J.current,ae)&&(J.current=ae,id.flushSync(()=>{v(ae)}))})},[y,e,r,ee,Y]);_u(()=>{h===!1&&J.current.isPositioned&&(J.current.isPositioned=!1,v(H=>({...H,isPositioned:!1})))},[h]);const Z=b.useRef(!1);_u(()=>(Z.current=!0,()=>{Z.current=!1}),[]),_u(()=>{if(A&&(z.current=A),U&&($.current=U),A&&U){if(W.current)return W.current(A,U,te);te()}},[A,U,te,W,V]);const ke=b.useMemo(()=>({reference:z,floating:$,setReference:T,setFloating:O}),[T,O]),fe=b.useMemo(()=>({reference:A,floating:U}),[A,U]),Se=b.useMemo(()=>{const H={position:r,left:0,top:0};if(!fe.floating)return H;const ue=m0(fe.floating,g.x),ae=m0(fe.floating,g.y);return u?{...H,transform:"translate("+ue+"px, "+ae+"px)",...Cx(fe.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ue,top:ae}},[r,u,fe.floating,g.x,g.y]);return b.useMemo(()=>({...g,update:te,refs:ke,elements:fe,floatingStyles:Se}),[g,te,ke,fe,Se])}const rO=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?g0({element:n.current,padding:i}).fn(r):{}:n?g0({element:n,padding:i}).fn(r):{}}}},nO=(t,e)=>({...G2(t),options:[t,e]}),sO=(t,e)=>({...Q2(t),options:[t,e]}),iO=(t,e)=>({...X2(t),options:[t,e]}),oO=(t,e)=>({...Y2(t),options:[t,e]}),aO=(t,e)=>({...Z2(t),options:[t,e]}),lO=(t,e)=>({...J2(t),options:[t,e]}),cO=(t,e)=>({...rO(t),options:[t,e]});var uO="Arrow",Ox=b.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...a}=t;return p.jsx(Ct.svg,{...a,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ox.displayName=uO;var dO=Ox;function fO(t){const[e,r]=b.useState(void 0);return jn(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,u;if("borderBoxSize"in a){const d=a.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,u=h.blockSize}else l=t.offsetWidth,u=t.offsetHeight;r({width:l,height:u})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Px="Popper",[Nx,jx]=Si(Px),[F3,Rx]=Nx(Px),Ax="PopperAnchor",Ix=b.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,a=Rx(Ax,r),l=b.useRef(null),u=_r(e,l);return b.useEffect(()=>{a.onAnchorChange(n?.current||l.current)}),n?null:p.jsx(Ct.div,{...i,ref:u})});Ix.displayName=Ax;var kg="PopperContent",[hO,pO]=Nx(kg),Dx=b.forwardRef((t,e)=>{const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:y=!1,updatePositionStrategy:x="optimized",onPlaced:S,..._}=t,E=Rx(kg,r),[C,T]=b.useState(null),O=_r(e,qe=>T(qe)),[A,U]=b.useState(null),z=fO(A),$=z?.width??0,J=z?.height??0,V=n+(a!=="center"?"-"+a:""),W=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},ee=Array.isArray(h)?h:[h],Y=ee.length>0,te={padding:W,boundary:ee.filter(mO),altBoundary:Y},{refs:Z,floatingStyles:ke,placement:fe,isPositioned:Se,middlewareData:H}=tO({strategy:"fixed",placement:V,whileElementsMounted:(...qe)=>K2(...qe,{animationFrame:x==="always"}),elements:{reference:E.anchor},middleware:[nO({mainAxis:i+J,alignmentAxis:l}),d&&sO({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?iO():void 0,...te}),d&&oO({...te}),aO({...te,apply:({elements:qe,rects:Ke,availableWidth:Me,availableHeight:yt})=>{const{width:kr,height:pr}=Ke.reference,Ft=qe.floating.style;Ft.setProperty("--radix-popper-available-width",`${Me}px`),Ft.setProperty("--radix-popper-available-height",`${yt}px`),Ft.setProperty("--radix-popper-anchor-width",`${kr}px`),Ft.setProperty("--radix-popper-anchor-height",`${pr}px`)}}),A&&cO({element:A,padding:u}),vO({arrowWidth:$,arrowHeight:J}),y&&lO({strategy:"referenceHidden",...te})]}),[ue,ae]=$x(fe),I=hr(S);jn(()=>{Se&&I?.()},[Se,I]);const X=H.arrow?.x,Pe=H.arrow?.y,ge=H.arrow?.centerOffset!==0,[Le,Qe]=b.useState();return jn(()=>{C&&Qe(window.getComputedStyle(C).zIndex)},[C]),p.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...ke,transform:Se?ke.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Le,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(hO,{scope:r,placedSide:ue,onArrowChange:U,arrowX:X,arrowY:Pe,shouldHideArrow:ge,children:p.jsx(Ct.div,{"data-side":ue,"data-align":ae,..._,ref:O,style:{..._.style,animation:Se?void 0:"none"}})})})});Dx.displayName=kg;var Lx="PopperArrow",gO={top:"bottom",right:"left",bottom:"top",left:"right"},Mx=b.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,a=pO(Lx,n),l=gO[a.placedSide];return p.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:p.jsx(dO,{...i,ref:r,style:{...i.style,display:"block"}})})});Mx.displayName=Lx;function mO(t){return t!==null}var vO=t=>({name:"transformOrigin",options:t,fn(e){const{placement:r,rects:n,middlewareData:i}=e,l=i.arrow?.centerOffset!==0,u=l?0:t.arrowWidth,d=l?0:t.arrowHeight,[h,g]=$x(r),v={start:"0%",center:"50%",end:"100%"}[g],y=(i.arrow?.x??0)+u/2,x=(i.arrow?.y??0)+d/2;let S="",_="";return h==="bottom"?(S=l?v:`${y}px`,_=`${-d}px`):h==="top"?(S=l?v:`${y}px`,_=`${n.floating.height+d}px`):h==="right"?(S=`${-d}px`,_=l?v:`${x}px`):h==="left"&&(S=`${n.floating.width+d}px`,_=l?v:`${x}px`),{data:{x:S,y:_}}}});function $x(t){const[e,r="center"]=t.split("-");return[e,r]}var yO=Ix,wO=Dx,bO=Mx,[pd]=Si("Tooltip",[jx]),Eg=jx(),Fx="TooltipProvider",xO=700,v0="tooltip.open",[_O,Ux]=pd(Fx),Bx=t=>{const{__scopeTooltip:e,delayDuration:r=xO,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:a}=t,l=b.useRef(!0),u=b.useRef(!1),d=b.useRef(0);return b.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),p.jsx(_O,{scope:e,isOpenDelayedRef:l,delayDuration:r,onOpen:b.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:u,onPointerInTransitChange:b.useCallback(h=>{u.current=h},[]),disableHoverableContent:i,children:a})};Bx.displayName=Fx;var zx="Tooltip",[U3,gd]=pd(zx),bp="TooltipTrigger",SO=b.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=gd(bp,r),a=Ux(bp,r),l=Eg(r),u=b.useRef(null),d=_r(e,u,i.onTriggerChange),h=b.useRef(!1),g=b.useRef(!1),v=b.useCallback(()=>h.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),p.jsx(yO,{asChild:!0,...l,children:p.jsx(Ct.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:d,onPointerMove:ft(t.onPointerMove,y=>{y.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),g.current=!0)}),onPointerLeave:ft(t.onPointerLeave,()=>{i.onTriggerLeave(),g.current=!1}),onPointerDown:ft(t.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:ft(t.onFocus,()=>{h.current||i.onOpen()}),onBlur:ft(t.onBlur,i.onClose),onClick:ft(t.onClick,i.onClose)})})});SO.displayName=bp;var kO="TooltipPortal",[B3,EO]=pd(kO,{forceMount:void 0}),na="TooltipContent",Vx=b.forwardRef((t,e)=>{const r=EO(na,t.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...a}=t,l=gd(na,t.__scopeTooltip);return p.jsx(ki,{present:n||l.open,children:l.disableHoverableContent?p.jsx(qx,{side:i,...a,ref:e}):p.jsx(TO,{side:i,...a,ref:e})})}),TO=b.forwardRef((t,e)=>{const r=gd(na,t.__scopeTooltip),n=Ux(na,t.__scopeTooltip),i=b.useRef(null),a=_r(e,i),[l,u]=b.useState(null),{trigger:d,onClose:h}=r,g=i.current,{onPointerInTransitChange:v}=n,y=b.useCallback(()=>{u(null),v(!1)},[v]),x=b.useCallback((S,_)=>{const E=S.currentTarget,C={x:S.clientX,y:S.clientY},T=jO(C,E.getBoundingClientRect()),O=RO(C,T),A=AO(_.getBoundingClientRect()),U=DO([...O,...A]);u(U),v(!0)},[v]);return b.useEffect(()=>()=>y(),[y]),b.useEffect(()=>{if(d&&g){const S=E=>x(E,g),_=E=>x(E,d);return d.addEventListener("pointerleave",S),g.addEventListener("pointerleave",_),()=>{d.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",_)}}},[d,g,x,y]),b.useEffect(()=>{if(l){const S=_=>{const E=_.target,C={x:_.clientX,y:_.clientY},T=d?.contains(E)||g?.contains(E),O=!IO(C,l);T?y():O&&(y(),h())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[d,g,l,h,y]),p.jsx(qx,{...t,ref:a})}),[CO,OO]=pd(zx,{isInside:!1}),PO=ET("TooltipContent"),qx=b.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:l,...u}=t,d=gd(na,r),h=Eg(r),{onClose:g}=d;return b.useEffect(()=>(document.addEventListener(v0,g),()=>document.removeEventListener(v0,g)),[g]),b.useEffect(()=>{if(d.trigger){const v=y=>{y.target?.contains(d.trigger)&&g()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[d.trigger,g]),p.jsx(ug,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:v=>v.preventDefault(),onDismiss:g,children:p.jsxs(wO,{"data-state":d.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(PO,{children:n}),p.jsx(CO,{scope:r,isInside:!0,children:p.jsx(WT,{id:d.contentId,role:"tooltip",children:i||n})})]})})});Vx.displayName=na;var Wx="TooltipArrow",NO=b.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=Eg(r);return OO(Wx,r).isInside?null:p.jsx(bO,{...i,...n,ref:e})});NO.displayName=Wx;function jO(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(r,n,i,a)){case a:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function RO(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function AO(t){const{top:e,right:r,bottom:n,left:i}=t;return[{x:i,y:e},{x:r,y:e},{x:r,y:n},{x:i,y:n}]}function IO(t,e){const{x:r,y:n}=t;let i=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const u=e[a].x,d=e[a].y,h=e[l].x,g=e[l].y;d>n!=g>n&&r<(h-u)*(n-d)/(g-d)+u&&(i=!i)}return i}function DO(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),LO(e)}function LO(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const a=e[e.length-1],l=e[e.length-2];if((a.x-l.x)*(i.y-l.y)>=(a.y-l.y)*(i.x-l.x))e.pop();else break}e.push(i)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;r.length>=2;){const a=r[r.length-1],l=r[r.length-2];if((a.x-l.x)*(i.y-l.y)>=(a.y-l.y)*(i.x-l.x))r.pop();else break}r.push(i)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var MO=Bx,Hx=Vx;const $O=MO,FO=b.forwardRef(({className:t,sideOffset:e=4,...r},n)=>p.jsx(Hx,{ref:n,sideOffset:e,className:dt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));FO.displayName=Hx.displayName;var gt;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const a={};for(const l of i)a[l]=l;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),l={};for(const u of a)l[u]=i[u];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.push(l);return a},t.find=(i,a)=>{for(const l of i)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(gt||(gt={}));var xp;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(xp||(xp={}));const Te=gt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ns=t=>{switch(typeof t){case"undefined":return Te.undefined;case"string":return Te.string;case"number":return isNaN(t)?Te.nan:Te.number;case"boolean":return Te.boolean;case"function":return Te.function;case"bigint":return Te.bigint;case"symbol":return Te.symbol;case"object":return Array.isArray(t)?Te.array:t===null?Te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Te.promise:typeof Map<"u"&&t instanceof Map?Te.map:typeof Set<"u"&&t instanceof Set?Te.set:typeof Date<"u"&&t instanceof Date?Te.date:Te.object;default:return Te.unknown}},de=gt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),UO=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class wn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)n._errors.push(r(l));else{let u=n,d=0;for(;d<l.path.length;){const h=l.path[d];d===l.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(r(l))):u[h]=u[h]||{_errors:[]},u=u[h],d++}}};return i(this),n}static assert(e){if(!(e instanceof wn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,gt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}wn.create=t=>new wn(t);const sa=(t,e)=>{let r;switch(t.code){case de.invalid_type:t.received===Te.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case de.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,gt.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:r=`Unrecognized key(s) in object: ${gt.joinValues(t.keys,", ")}`;break;case de.invalid_union:r="Invalid input";break;case de.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${gt.joinValues(t.options)}`;break;case de.invalid_enum_value:r=`Invalid enum value. Expected ${gt.joinValues(t.options)}, received '${t.received}'`;break;case de.invalid_arguments:r="Invalid function arguments";break;case de.invalid_return_type:r="Invalid function return type";break;case de.invalid_date:r="Invalid date";break;case de.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:gt.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case de.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case de.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case de.custom:r="Invalid input";break;case de.invalid_intersection_types:r="Intersection results could not be merged";break;case de.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case de.not_finite:r="Number must be finite";break;default:r=e.defaultError,gt.assertNever(t)}return{message:r}};let Kx=sa;function BO(t){Kx=t}function Du(){return Kx}const Lu=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],l={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let u="";const d=n.filter(h=>!!h).slice().reverse();for(const h of d)u=h(l,{data:e,defaultError:u}).message;return{...i,path:a,message:u}},zO=[];function xe(t,e){const r=Du(),n=Lu({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===sa?void 0:sa].filter(i=>!!i)});t.common.issues.push(n)}class Ur{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return He;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r){const a=await i.key,l=await i.value;n.push({key:a,value:l})}return Ur.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:a,value:l}=i;if(a.status==="aborted"||l.status==="aborted")return He;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(n[a.value]=l.value)}return{status:e.value,value:n}}}const He=Object.freeze({status:"aborted"}),Ko=t=>({status:"dirty",value:t}),Yr=t=>({status:"valid",value:t}),_p=t=>t.status==="aborted",Sp=t=>t.status==="dirty",eo=t=>t.status==="valid",_l=t=>typeof Promise<"u"&&t instanceof Promise;function Mu(t,e,r,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function Gx(t,e,r,n,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var Re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Re||(Re={}));var ol,al;class hs{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const y0=(t,e)=>{if(eo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new wn(t.common.issues);return this._error=r,this._error}}};function et(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,u)=>{var d,h;const{message:g}=t;return l.code==="invalid_enum_value"?{message:g??u.defaultError}:typeof u.data>"u"?{message:(d=g??n)!==null&&d!==void 0?d:u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:(h=g??r)!==null&&h!==void 0?h:u.defaultError}},description:i}}class st{get description(){return this._def.description}_getType(e){return Ns(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ns(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ur,ctx:{common:e.parent.common,data:e.data,parsedType:Ns(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(_l(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ns(e)},a=this._parseSync({data:e,path:i.path,parent:i});return y0(i,a)}"~validate"(e){var r,n;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ns(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:i});return eo(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((n=(r=a?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(a=>eo(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ns(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(_l(i)?i:Promise.resolve(i));return y0(n,a)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const l=e(i),u=()=>a.addIssue({code:de.custom,...n(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new es({schema:this,typeName:Ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ds.create(this,this._def)}nullable(){return _i.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Zn.create(this)}promise(){return oa.create(this,this._def)}or(e){return Tl.create([this,e],this._def)}and(e){return Cl.create(this,e,this._def)}transform(e){return new es({...et(this._def),schema:this,typeName:Ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Rl({...et(this._def),innerType:this,defaultValue:r,typeName:Ve.ZodDefault})}brand(){return new Tg({typeName:Ve.ZodBranded,type:this,...et(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Al({...et(this._def),innerType:this,catchValue:r,typeName:Ve.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Kl.create(this,e)}readonly(){return Il.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const VO=/^c[^\s-]{8,}$/i,qO=/^[0-9a-z]+$/,WO=/^[0-9A-HJKMNP-TV-Z]{26}$/i,HO=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,KO=/^[a-z0-9_-]{21}$/i,GO=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,QO=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,YO=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ZO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Nh;const JO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,XO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,eP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,tP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rP=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nP=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Qx="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sP=new RegExp(`^${Qx}$`);function Yx(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function iP(t){return new RegExp(`^${Yx(t)}$`)}function Zx(t){let e=`${Qx}T${Yx(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function oP(t,e){return!!((e==="v4"||!e)&&JO.test(t)||(e==="v6"||!e)&&eP.test(t))}function aP(t,e){if(!GO.test(t))return!1;try{const[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function lP(t,e){return!!((e==="v4"||!e)&&XO.test(t)||(e==="v6"||!e)&&tP.test(t))}class Yn extends st{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Te.string){const a=this._getOrReturnCtx(e);return xe(a,{code:de.invalid_type,expected:Te.string,received:a.parsedType}),He}const n=new Ur;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),xe(i,{code:de.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),xe(i,{code:de.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(i=this._getOrReturnCtx(e,i),l?xe(i,{code:de.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&xe(i,{code:de.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")YO.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"email",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Nh||(Nh=new RegExp(ZO,"u")),Nh.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"emoji",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")HO.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"uuid",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")KO.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"nanoid",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")VO.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"cuid",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")qO.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"cuid2",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")WO.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"ulid",code:de.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),xe(i,{validation:"url",code:de.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"regex",code:de.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),xe(i,{code:de.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),xe(i,{code:de.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),xe(i,{code:de.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?Zx(a).test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{code:de.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?sP.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{code:de.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?iP(a).test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{code:de.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?QO.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"duration",code:de.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?oP(e.data,a.version)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"ip",code:de.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?aP(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"jwt",code:de.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?lP(e.data,a.version)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"cidr",code:de.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?rP.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"base64",code:de.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?nP.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"base64url",code:de.invalid_string,message:a.message}),n.dirty()):gt.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:de.invalid_string,...Re.errToObj(n)})}_addCheck(e){return new Yn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Re.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Re.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Re.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Re.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Re.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Re.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Re.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Re.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Re.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Re.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Re.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Re.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Re.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Re.errToObj(r)})}nonempty(e){return this.min(1,Re.errToObj(e))}trim(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Yn.create=t=>{var e;return new Yn({checks:[],typeName:Ve.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...et(t)})};function cP(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),l=parseInt(e.toFixed(i).replace(".",""));return a%l/Math.pow(10,i)}class wi extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Te.number){const a=this._getOrReturnCtx(e);return xe(a,{code:de.invalid_type,expected:Te.number,received:a.parsedType}),He}let n;const i=new Ur;for(const a of this._def.checks)a.kind==="int"?gt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),xe(n,{code:de.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),xe(n,{code:de.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),xe(n,{code:de.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?cP(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),xe(n,{code:de.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),xe(n,{code:de.not_finite,message:a.message}),i.dirty()):gt.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Re.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Re.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Re.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Re.toString(r))}setLimit(e,r,n,i){return new wi({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Re.toString(i)}]})}_addCheck(e){return new wi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Re.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Re.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&gt.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}wi.create=t=>new wi({checks:[],typeName:Ve.ZodNumber,coerce:t?.coerce||!1,...et(t)});class bi extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Te.bigint)return this._getInvalidInput(e);let n;const i=new Ur;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),xe(n,{code:de.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),xe(n,{code:de.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),xe(n,{code:de.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):gt.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return xe(r,{code:de.invalid_type,expected:Te.bigint,received:r.parsedType}),He}gte(e,r){return this.setLimit("min",e,!0,Re.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Re.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Re.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Re.toString(r))}setLimit(e,r,n,i){return new bi({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Re.toString(i)}]})}_addCheck(e){return new bi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}bi.create=t=>{var e;return new bi({checks:[],typeName:Ve.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...et(t)})};class Sl extends st{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Te.boolean){const n=this._getOrReturnCtx(e);return xe(n,{code:de.invalid_type,expected:Te.boolean,received:n.parsedType}),He}return Yr(e.data)}}Sl.create=t=>new Sl({typeName:Ve.ZodBoolean,coerce:t?.coerce||!1,...et(t)});class to extends st{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Te.date){const a=this._getOrReturnCtx(e);return xe(a,{code:de.invalid_type,expected:Te.date,received:a.parsedType}),He}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return xe(a,{code:de.invalid_date}),He}const n=new Ur;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),xe(i,{code:de.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),xe(i,{code:de.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):gt.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new to({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Re.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Re.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}to.create=t=>new to({checks:[],coerce:t?.coerce||!1,typeName:Ve.ZodDate,...et(t)});class $u extends st{_parse(e){if(this._getType(e)!==Te.symbol){const n=this._getOrReturnCtx(e);return xe(n,{code:de.invalid_type,expected:Te.symbol,received:n.parsedType}),He}return Yr(e.data)}}$u.create=t=>new $u({typeName:Ve.ZodSymbol,...et(t)});class kl extends st{_parse(e){if(this._getType(e)!==Te.undefined){const n=this._getOrReturnCtx(e);return xe(n,{code:de.invalid_type,expected:Te.undefined,received:n.parsedType}),He}return Yr(e.data)}}kl.create=t=>new kl({typeName:Ve.ZodUndefined,...et(t)});class El extends st{_parse(e){if(this._getType(e)!==Te.null){const n=this._getOrReturnCtx(e);return xe(n,{code:de.invalid_type,expected:Te.null,received:n.parsedType}),He}return Yr(e.data)}}El.create=t=>new El({typeName:Ve.ZodNull,...et(t)});class ia extends st{constructor(){super(...arguments),this._any=!0}_parse(e){return Yr(e.data)}}ia.create=t=>new ia({typeName:Ve.ZodAny,...et(t)});class Gi extends st{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Yr(e.data)}}Gi.create=t=>new Gi({typeName:Ve.ZodUnknown,...et(t)});class Ls extends st{_parse(e){const r=this._getOrReturnCtx(e);return xe(r,{code:de.invalid_type,expected:Te.never,received:r.parsedType}),He}}Ls.create=t=>new Ls({typeName:Ve.ZodNever,...et(t)});class Fu extends st{_parse(e){if(this._getType(e)!==Te.undefined){const n=this._getOrReturnCtx(e);return xe(n,{code:de.invalid_type,expected:Te.void,received:n.parsedType}),He}return Yr(e.data)}}Fu.create=t=>new Fu({typeName:Ve.ZodVoid,...et(t)});class Zn extends st{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Te.array)return xe(r,{code:de.invalid_type,expected:Te.array,received:r.parsedType}),He;if(i.exactLength!==null){const l=r.data.length>i.exactLength.value,u=r.data.length<i.exactLength.value;(l||u)&&(xe(r,{code:l?de.too_big:de.too_small,minimum:u?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(xe(r,{code:de.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(xe(r,{code:de.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((l,u)=>i.type._parseAsync(new hs(r,l,r.path,u)))).then(l=>Ur.mergeArray(n,l));const a=[...r.data].map((l,u)=>i.type._parseSync(new hs(r,l,r.path,u)));return Ur.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new Zn({...this._def,minLength:{value:e,message:Re.toString(r)}})}max(e,r){return new Zn({...this._def,maxLength:{value:e,message:Re.toString(r)}})}length(e,r){return new Zn({...this._def,exactLength:{value:e,message:Re.toString(r)}})}nonempty(e){return this.min(1,e)}}Zn.create=(t,e)=>new Zn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ve.ZodArray,...et(e)});function Vo(t){if(t instanceof Wt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=ds.create(Vo(n))}return new Wt({...t._def,shape:()=>e})}else return t instanceof Zn?new Zn({...t._def,type:Vo(t.element)}):t instanceof ds?ds.create(Vo(t.unwrap())):t instanceof _i?_i.create(Vo(t.unwrap())):t instanceof ps?ps.create(t.items.map(e=>Vo(e))):t}class Wt extends st{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=gt.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Te.object){const h=this._getOrReturnCtx(e);return xe(h,{code:de.invalid_type,expected:Te.object,received:h.parsedType}),He}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ls&&this._def.unknownKeys==="strip"))for(const h in i.data)l.includes(h)||u.push(h);const d=[];for(const h of l){const g=a[h],v=i.data[h];d.push({key:{status:"valid",value:h},value:g._parse(new hs(i,v,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof Ls){const h=this._def.unknownKeys;if(h==="passthrough")for(const g of u)d.push({key:{status:"valid",value:g},value:{status:"valid",value:i.data[g]}});else if(h==="strict")u.length>0&&(xe(i,{code:de.unrecognized_keys,keys:u}),n.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const g of u){const v=i.data[g];d.push({key:{status:"valid",value:g},value:h._parse(new hs(i,v,i.path,g)),alwaysSet:g in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const g of d){const v=await g.key,y=await g.value;h.push({key:v,value:y,alwaysSet:g.alwaysSet})}return h}).then(h=>Ur.mergeObjectSync(n,h)):Ur.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return Re.errToObj,new Wt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,l,u;const d=(l=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&l!==void 0?l:n.defaultError;return r.code==="unrecognized_keys"?{message:(u=Re.errToObj(e).message)!==null&&u!==void 0?u:d}:{message:d}}}:{}})}strip(){return new Wt({...this._def,unknownKeys:"strip"})}passthrough(){return new Wt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Wt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Wt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ve.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Wt({...this._def,catchall:e})}pick(e){const r={};return gt.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Wt({...this._def,shape:()=>r})}omit(e){const r={};return gt.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Wt({...this._def,shape:()=>r})}deepPartial(){return Vo(this)}partial(e){const r={};return gt.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new Wt({...this._def,shape:()=>r})}required(e){const r={};return gt.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof ds;)a=a._def.innerType;r[n]=a}}),new Wt({...this._def,shape:()=>r})}keyof(){return Jx(gt.objectKeys(this.shape))}}Wt.create=(t,e)=>new Wt({shape:()=>t,unknownKeys:"strip",catchall:Ls.create(),typeName:Ve.ZodObject,...et(e)});Wt.strictCreate=(t,e)=>new Wt({shape:()=>t,unknownKeys:"strict",catchall:Ls.create(),typeName:Ve.ZodObject,...et(e)});Wt.lazycreate=(t,e)=>new Wt({shape:t,unknownKeys:"strip",catchall:Ls.create(),typeName:Ve.ZodObject,...et(e)});class Tl extends st{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return r.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new wn(u.ctx.common.issues));return xe(r,{code:de.invalid_union,unionErrors:l}),He}if(r.common.async)return Promise.all(n.map(async a=>{const l={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(i);{let a;const l=[];for(const d of n){const h={...r,common:{...r.common,issues:[]},parent:null},g=d._parseSync({data:r.data,path:r.path,parent:h});if(g.status==="valid")return g;g.status==="dirty"&&!a&&(a={result:g,ctx:h}),h.common.issues.length&&l.push(h.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(d=>new wn(d));return xe(r,{code:de.invalid_union,unionErrors:u}),He}}get options(){return this._def.options}}Tl.create=(t,e)=>new Tl({options:t,typeName:Ve.ZodUnion,...et(e)});const Os=t=>t instanceof Pl?Os(t.schema):t instanceof es?Os(t.innerType()):t instanceof Nl?[t.value]:t instanceof xi?t.options:t instanceof jl?gt.objectValues(t.enum):t instanceof Rl?Os(t._def.innerType):t instanceof kl?[void 0]:t instanceof El?[null]:t instanceof ds?[void 0,...Os(t.unwrap())]:t instanceof _i?[null,...Os(t.unwrap())]:t instanceof Tg||t instanceof Il?Os(t.unwrap()):t instanceof Al?Os(t._def.innerType):[];class md extends st{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.object)return xe(r,{code:de.invalid_type,expected:Te.object,received:r.parsedType}),He;const n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(xe(r,{code:de.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),He)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const a of r){const l=Os(a.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of l){if(i.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);i.set(u,a)}}return new md({typeName:Ve.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...et(n)})}}function kp(t,e){const r=Ns(t),n=Ns(e);if(t===e)return{valid:!0,data:t};if(r===Te.object&&n===Te.object){const i=gt.objectKeys(e),a=gt.objectKeys(t).filter(u=>i.indexOf(u)!==-1),l={...t,...e};for(const u of a){const d=kp(t[u],e[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(r===Te.array&&n===Te.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const l=t[a],u=e[a],d=kp(l,u);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return r===Te.date&&n===Te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Cl extends st{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(a,l)=>{if(_p(a)||_p(l))return He;const u=kp(a.value,l.value);return u.valid?((Sp(a)||Sp(l))&&r.dirty(),{status:r.value,value:u.data}):(xe(n,{code:de.invalid_intersection_types}),He)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,l])=>i(a,l)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Cl.create=(t,e,r)=>new Cl({left:t,right:e,typeName:Ve.ZodIntersection,...et(r)});class ps extends st{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.array)return xe(n,{code:de.invalid_type,expected:Te.array,received:n.parsedType}),He;if(n.data.length<this._def.items.length)return xe(n,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),He;!this._def.rest&&n.data.length>this._def.items.length&&(xe(n,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((l,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new hs(n,l,n.path,u)):null}).filter(l=>!!l);return n.common.async?Promise.all(a).then(l=>Ur.mergeArray(r,l)):Ur.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new ps({...this._def,rest:e})}}ps.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ps({items:t,typeName:Ve.ZodTuple,rest:null,...et(e)})};class Ol extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.object)return xe(n,{code:de.invalid_type,expected:Te.object,received:n.parsedType}),He;const i=[],a=this._def.keyType,l=this._def.valueType;for(const u in n.data)i.push({key:a._parse(new hs(n,u,n.path,u)),value:l._parse(new hs(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?Ur.mergeObjectAsync(r,i):Ur.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof st?new Ol({keyType:e,valueType:r,typeName:Ve.ZodRecord,...et(n)}):new Ol({keyType:Yn.create(),valueType:e,typeName:Ve.ZodRecord,...et(r)})}}class Uu extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.map)return xe(n,{code:de.invalid_type,expected:Te.map,received:n.parsedType}),He;const i=this._def.keyType,a=this._def.valueType,l=[...n.data.entries()].map(([u,d],h)=>({key:i._parse(new hs(n,u,n.path,[h,"key"])),value:a._parse(new hs(n,d,n.path,[h,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of l){const h=await d.key,g=await d.value;if(h.status==="aborted"||g.status==="aborted")return He;(h.status==="dirty"||g.status==="dirty")&&r.dirty(),u.set(h.value,g.value)}return{status:r.value,value:u}})}else{const u=new Map;for(const d of l){const h=d.key,g=d.value;if(h.status==="aborted"||g.status==="aborted")return He;(h.status==="dirty"||g.status==="dirty")&&r.dirty(),u.set(h.value,g.value)}return{status:r.value,value:u}}}}Uu.create=(t,e,r)=>new Uu({valueType:e,keyType:t,typeName:Ve.ZodMap,...et(r)});class ro extends st{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.set)return xe(n,{code:de.invalid_type,expected:Te.set,received:n.parsedType}),He;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(xe(n,{code:de.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(xe(n,{code:de.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function l(d){const h=new Set;for(const g of d){if(g.status==="aborted")return He;g.status==="dirty"&&r.dirty(),h.add(g.value)}return{status:r.value,value:h}}const u=[...n.data.values()].map((d,h)=>a._parse(new hs(n,d,n.path,h)));return n.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(e,r){return new ro({...this._def,minSize:{value:e,message:Re.toString(r)}})}max(e,r){return new ro({...this._def,maxSize:{value:e,message:Re.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}ro.create=(t,e)=>new ro({valueType:t,minSize:null,maxSize:null,typeName:Ve.ZodSet,...et(e)});class Jo extends st{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.function)return xe(r,{code:de.invalid_type,expected:Te.function,received:r.parsedType}),He;function n(u,d){return Lu({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Du(),sa].filter(h=>!!h),issueData:{code:de.invalid_arguments,argumentsError:d}})}function i(u,d){return Lu({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Du(),sa].filter(h=>!!h),issueData:{code:de.invalid_return_type,returnTypeError:d}})}const a={errorMap:r.common.contextualErrorMap},l=r.data;if(this._def.returns instanceof oa){const u=this;return Yr(async function(...d){const h=new wn([]),g=await u._def.args.parseAsync(d,a).catch(x=>{throw h.addIssue(n(d,x)),h}),v=await Reflect.apply(l,this,g);return await u._def.returns._def.type.parseAsync(v,a).catch(x=>{throw h.addIssue(i(v,x)),h})})}else{const u=this;return Yr(function(...d){const h=u._def.args.safeParse(d,a);if(!h.success)throw new wn([n(d,h.error)]);const g=Reflect.apply(l,this,h.data),v=u._def.returns.safeParse(g,a);if(!v.success)throw new wn([i(g,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Jo({...this._def,args:ps.create(e).rest(Gi.create())})}returns(e){return new Jo({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Jo({args:e||ps.create([]).rest(Gi.create()),returns:r||Gi.create(),typeName:Ve.ZodFunction,...et(n)})}}class Pl extends st{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Pl.create=(t,e)=>new Pl({getter:t,typeName:Ve.ZodLazy,...et(e)});class Nl extends st{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return xe(r,{received:r.data,code:de.invalid_literal,expected:this._def.value}),He}return{status:"valid",value:e.data}}get value(){return this._def.value}}Nl.create=(t,e)=>new Nl({value:t,typeName:Ve.ZodLiteral,...et(e)});function Jx(t,e){return new xi({values:t,typeName:Ve.ZodEnum,...et(e)})}class xi extends st{constructor(){super(...arguments),ol.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return xe(r,{expected:gt.joinValues(n),received:r.parsedType,code:de.invalid_type}),He}if(Mu(this,ol)||Gx(this,ol,new Set(this._def.values)),!Mu(this,ol).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return xe(r,{received:r.data,code:de.invalid_enum_value,options:n}),He}return Yr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return xi.create(e,{...this._def,...r})}exclude(e,r=this._def){return xi.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}ol=new WeakMap;xi.create=Jx;class jl extends st{constructor(){super(...arguments),al.set(this,void 0)}_parse(e){const r=gt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Te.string&&n.parsedType!==Te.number){const i=gt.objectValues(r);return xe(n,{expected:gt.joinValues(i),received:n.parsedType,code:de.invalid_type}),He}if(Mu(this,al)||Gx(this,al,new Set(gt.getValidEnumValues(this._def.values))),!Mu(this,al).has(e.data)){const i=gt.objectValues(r);return xe(n,{received:n.data,code:de.invalid_enum_value,options:i}),He}return Yr(e.data)}get enum(){return this._def.values}}al=new WeakMap;jl.create=(t,e)=>new jl({values:t,typeName:Ve.ZodNativeEnum,...et(e)});class oa extends st{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.promise&&r.common.async===!1)return xe(r,{code:de.invalid_type,expected:Te.promise,received:r.parsedType}),He;const n=r.parsedType===Te.promise?r.data:Promise.resolve(r.data);return Yr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}oa.create=(t,e)=>new oa({type:t,typeName:Ve.ZodPromise,...et(e)});class es extends st{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:l=>{xe(n,l),l.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const l=i.transform(n.data,a);if(n.common.async)return Promise.resolve(l).then(async u=>{if(r.value==="aborted")return He;const d=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return d.status==="aborted"?He:d.status==="dirty"||r.value==="dirty"?Ko(d.value):d});{if(r.value==="aborted")return He;const u=this._def.schema._parseSync({data:l,path:n.path,parent:n});return u.status==="aborted"?He:u.status==="dirty"||r.value==="dirty"?Ko(u.value):u}}if(i.type==="refinement"){const l=u=>{const d=i.refinement(u,a);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?He:(u.status==="dirty"&&r.dirty(),l(u.value),{status:r.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?He:(u.status==="dirty"&&r.dirty(),l(u.value).then(()=>({status:r.value,value:u.value}))))}if(i.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!eo(l))return l;const u=i.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>eo(l)?Promise.resolve(i.transform(l.value,a)).then(u=>({status:r.value,value:u})):l);gt.assertNever(i)}}es.create=(t,e,r)=>new es({schema:t,typeName:Ve.ZodEffects,effect:e,...et(r)});es.createWithPreprocess=(t,e,r)=>new es({schema:e,effect:{type:"preprocess",transform:t},typeName:Ve.ZodEffects,...et(r)});class ds extends st{_parse(e){return this._getType(e)===Te.undefined?Yr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ds.create=(t,e)=>new ds({innerType:t,typeName:Ve.ZodOptional,...et(e)});class _i extends st{_parse(e){return this._getType(e)===Te.null?Yr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_i.create=(t,e)=>new _i({innerType:t,typeName:Ve.ZodNullable,...et(e)});class Rl extends st{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Te.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Rl.create=(t,e)=>new Rl({innerType:t,typeName:Ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...et(e)});class Al extends st{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return _l(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new wn(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new wn(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Al.create=(t,e)=>new Al({innerType:t,typeName:Ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...et(e)});class Bu extends st{_parse(e){if(this._getType(e)!==Te.nan){const n=this._getOrReturnCtx(e);return xe(n,{code:de.invalid_type,expected:Te.nan,received:n.parsedType}),He}return{status:"valid",value:e.data}}}Bu.create=t=>new Bu({typeName:Ve.ZodNaN,...et(t)});const uP=Symbol("zod_brand");class Tg extends st{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Kl extends st{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?He:a.status==="dirty"?(r.dirty(),Ko(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?He:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Kl({in:e,out:r,typeName:Ve.ZodPipeline})}}class Il extends st{_parse(e){const r=this._def.innerType._parse(e),n=i=>(eo(i)&&(i.value=Object.freeze(i.value)),i);return _l(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}Il.create=(t,e)=>new Il({innerType:t,typeName:Ve.ZodReadonly,...et(e)});function w0(t,e){const r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function Xx(t,e={},r){return t?ia.create().superRefine((n,i)=>{var a,l;const u=t(n);if(u instanceof Promise)return u.then(d=>{var h,g;if(!d){const v=w0(e,n),y=(g=(h=v.fatal)!==null&&h!==void 0?h:r)!==null&&g!==void 0?g:!0;i.addIssue({code:"custom",...v,fatal:y})}});if(!u){const d=w0(e,n),h=(l=(a=d.fatal)!==null&&a!==void 0?a:r)!==null&&l!==void 0?l:!0;i.addIssue({code:"custom",...d,fatal:h})}}):ia.create()}const dP={object:Wt.lazycreate};var Ve;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ve||(Ve={}));const fP=(t,e={message:`Input not instance of ${t.name}`})=>Xx(r=>r instanceof t,e),e_=Yn.create,t_=wi.create,hP=Bu.create,pP=bi.create,r_=Sl.create,gP=to.create,mP=$u.create,vP=kl.create,yP=El.create,wP=ia.create,bP=Gi.create,xP=Ls.create,_P=Fu.create,SP=Zn.create,kP=Wt.create,EP=Wt.strictCreate,TP=Tl.create,CP=md.create,OP=Cl.create,PP=ps.create,NP=Ol.create,jP=Uu.create,RP=ro.create,AP=Jo.create,IP=Pl.create,DP=Nl.create,LP=xi.create,MP=jl.create,$P=oa.create,b0=es.create,FP=ds.create,UP=_i.create,BP=es.createWithPreprocess,zP=Kl.create,VP=()=>e_().optional(),qP=()=>t_().optional(),WP=()=>r_().optional(),HP={string:(t=>Yn.create({...t,coerce:!0})),number:(t=>wi.create({...t,coerce:!0})),boolean:(t=>Sl.create({...t,coerce:!0})),bigint:(t=>bi.create({...t,coerce:!0})),date:(t=>to.create({...t,coerce:!0}))},KP=He;var bt=Object.freeze({__proto__:null,defaultErrorMap:sa,setErrorMap:BO,getErrorMap:Du,makeIssue:Lu,EMPTY_PATH:zO,addIssueToContext:xe,ParseStatus:Ur,INVALID:He,DIRTY:Ko,OK:Yr,isAborted:_p,isDirty:Sp,isValid:eo,isAsync:_l,get util(){return gt},get objectUtil(){return xp},ZodParsedType:Te,getParsedType:Ns,ZodType:st,datetimeRegex:Zx,ZodString:Yn,ZodNumber:wi,ZodBigInt:bi,ZodBoolean:Sl,ZodDate:to,ZodSymbol:$u,ZodUndefined:kl,ZodNull:El,ZodAny:ia,ZodUnknown:Gi,ZodNever:Ls,ZodVoid:Fu,ZodArray:Zn,ZodObject:Wt,ZodUnion:Tl,ZodDiscriminatedUnion:md,ZodIntersection:Cl,ZodTuple:ps,ZodRecord:Ol,ZodMap:Uu,ZodSet:ro,ZodFunction:Jo,ZodLazy:Pl,ZodLiteral:Nl,ZodEnum:xi,ZodNativeEnum:jl,ZodPromise:oa,ZodEffects:es,ZodTransformer:es,ZodOptional:ds,ZodNullable:_i,ZodDefault:Rl,ZodCatch:Al,ZodNaN:Bu,BRAND:uP,ZodBranded:Tg,ZodPipeline:Kl,ZodReadonly:Il,custom:Xx,Schema:st,ZodSchema:st,late:dP,get ZodFirstPartyTypeKind(){return Ve},coerce:HP,any:wP,array:SP,bigint:pP,boolean:r_,date:gP,discriminatedUnion:CP,effect:b0,enum:LP,function:AP,instanceof:fP,intersection:OP,lazy:IP,literal:DP,map:jP,nan:hP,nativeEnum:MP,never:xP,null:yP,nullable:UP,number:t_,object:kP,oboolean:WP,onumber:qP,optional:FP,ostring:VP,pipeline:zP,preprocess:BP,promise:$P,record:NP,set:RP,strictObject:EP,string:e_,symbol:mP,transformer:b0,tuple:PP,undefined:vP,union:TP,unknown:bP,void:_P,NEVER:KP,ZodIssueCode:de,quotelessJson:UO,ZodError:wn});const ie=Symbol.for("drizzle:entityKind");function Rr(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,ie))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(ie in r&&r[ie]===e[ie])return!0;r=Object.getPrototypeOf(r)}return!1}class Dl{constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[ie]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class GP{static[ie]="ColumnBuilder";config;constructor(e,r,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const Xo=Symbol.for("drizzle:Name");class QP{static[ie]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{const{name:n,columns:i,foreignColumns:a}=e();return{name:n,columns:i,foreignTable:a[0].table,foreignColumns:a}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new YP(e,this)}}class YP{constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[ie]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),i=r.map(u=>u.name),a=n.map(u=>u.name),l=[this.table[Xo],...i,n[0].table[Xo],...a];return e??`${l.join("_")}_fk`}}function ZP(t,...e){return t(...e)}function JP(t,e){return`${t[Xo]}_${e.join("_")}_unique`}function x0(t,e,r){for(let n=e;n<t.length;n++){const i=t[n];if(i==="\\"){n++;continue}if(i==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(i===","||i==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function n_(t,e=0){const r=[];let n=e,i=!1;for(;n<t.length;){const a=t[n];if(a===","){(i||n===e)&&r.push(""),i=!0,n++;continue}if(i=!1,a==="\\"){n+=2;continue}if(a==='"'){const[d,h]=x0(t,n+1,!0);r.push(d),n=h;continue}if(a==="}")return[r,n+1];if(a==="{"){const[d,h]=n_(t,n+1);r.push(d),n=h;continue}const[l,u]=x0(t,n,!1);r.push(l),n=u}return[r,n]}function XP(t){const[e]=n_(t,1);return e}function s_(t){return`{${t.map(e=>Array.isArray(e)?s_(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class vt extends GP{foreignKeyConfigs=[];static[ie]="PgColumnBuilder";array(e){return new tN(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:n,actions:i})=>ZP((a,l)=>{const u=new QP(()=>{const d=a();return{columns:[e],foreignColumns:[d]}});return l.onUpdate&&u.onUpdate(l.onUpdate),l.onDelete&&u.onDelete(l.onDelete),u.build(r)},n,i))}buildExtraConfigColumn(e){return new eN(e,this.config)}}class rt extends Dl{constructor(e,r){r.uniqueName||(r.uniqueName=JP(e,[r.name])),super(e,r),this.table=e}static[ie]="PgColumn"}class eN extends rt{static[ie]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class tN extends vt{static[ie]="PgArrayBuilder";constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new Cg(e,this.config,r)}}class Cg extends rt{constructor(e,r,n,i){super(e,r),this.baseColumn=n,this.range=i,this.size=r.size}size;static[ie]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=XP(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){const n=e.map(i=>i===null?null:Rr(this.baseColumn,Cg)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return r?n:s_(n)}}const _0=Symbol.for("drizzle:isPgEnum");function rN(t){return!!t&&typeof t=="function"&&_0 in t&&t[_0]===!0}class i_{static[ie]="Subquery";constructor(e,r,n,i=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:i}}}const nN={startActiveSpan(t,e){return e()}},ea=Symbol.for("drizzle:ViewBaseConfig"),jh=Symbol.for("drizzle:Schema"),S0=Symbol.for("drizzle:Columns"),k0=Symbol.for("drizzle:ExtraConfigColumns"),Rh=Symbol.for("drizzle:OriginalName"),Ah=Symbol.for("drizzle:BaseName"),zu=Symbol.for("drizzle:IsAlias"),E0=Symbol.for("drizzle:ExtraConfigBuilder"),o_=Symbol.for("drizzle:IsDrizzleTable");let gn=class{static[ie]="Table";static Symbol={Name:Xo,Schema:jh,OriginalName:Rh,Columns:S0,ExtraConfigColumns:k0,BaseName:Ah,IsAlias:zu,ExtraConfigBuilder:E0};[Xo];[Rh];[jh];[S0];[k0];[Ah];[zu]=!1;[o_]=!0;[E0]=void 0;constructor(e,r,n){this[Xo]=this[Rh]=e,this[jh]=r,this[Ah]=n}};function a_(t){return typeof t=="object"&&t!==null&&o_ in t}function sN(t){return t!=null&&typeof t.getSQL=="function"}function iN(t){const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}class qn{static[ie]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new Qt([this])}}class Qt{constructor(e){this.queryChunks=e}static[ie]="SQL";decoder=l_;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return nN.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:l,prepareTyping:u,inlineParams:d,paramStartIndex:h}=n;return iN(e.map(g=>{if(Rr(g,qn))return{sql:g.value.join(""),params:[]};if(Rr(g,Ep))return{sql:a(g.value),params:[]};if(g===void 0)return{sql:"",params:[]};if(Array.isArray(g)){const v=[new qn("(")];for(const[y,x]of g.entries())v.push(x),y<g.length-1&&v.push(new qn(", "));return v.push(new qn(")")),this.buildQueryFromSourceParams(v,n)}if(Rr(g,Qt))return this.buildQueryFromSourceParams(g.queryChunks,{...n,inlineParams:d||g.shouldInlineParams});if(Rr(g,gn)){const v=g[gn.Symbol.Schema],y=g[gn.Symbol.Name];return{sql:v===void 0||g[zu]?a(y):a(v)+"."+a(y),params:[]}}if(Rr(g,Dl)){const v=i.getColumnCasing(g);if(r.invokeSource==="indexes")return{sql:a(v),params:[]};const y=g.table[gn.Symbol.Schema];return{sql:g.table[zu]||y===void 0?a(g.table[gn.Symbol.Name])+"."+a(v):a(y)+"."+a(g.table[gn.Symbol.Name])+"."+a(v),params:[]}}if(Rr(g,oN)){const v=g[ea].schema,y=g[ea].name;return{sql:v===void 0||g[ea].isAlias?a(y):a(v)+"."+a(y),params:[]}}if(Rr(g,u_)){if(Rr(g.value,Tp))return{sql:l(h.value++,g),params:[g],typings:["none"]};const v=g.value===null?null:g.encoder.mapToDriverValue(g.value);if(Rr(v,Qt))return this.buildQueryFromSourceParams([v],n);if(d)return{sql:this.mapInlineParam(v,n),params:[]};let y=["none"];return u&&(y=[u(g.encoder)]),{sql:l(h.value++,v),params:[v],typings:y}}return Rr(g,Tp)?{sql:l(h.value++,g),params:[g],typings:["none"]}:Rr(g,Qt.Aliased)&&g.fieldAlias!==void 0?{sql:a(g.fieldAlias),params:[]}:Rr(g,i_)?g._.isWith?{sql:a(g._.alias),params:[]}:this.buildQueryFromSourceParams([new qn("("),g._.sql,new qn(") "),new Ep(g._.alias)],n):rN(g)?g.schema?{sql:a(g.schema)+"."+a(g.enumName),params:[]}:{sql:a(g.enumName),params:[]}:sN(g)?g.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([g.getSQL()],n):this.buildQueryFromSourceParams([new qn("("),g.getSQL(),new qn(")")],n):d?{sql:this.mapInlineParam(g,n),params:[]}:{sql:l(h.value++,g),params:[g],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Qt.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class Ep{constructor(e){this.value=e}static[ie]="Name";brand;getSQL(){return new Qt([this])}}const l_={mapFromDriverValue:t=>t},c_={mapToDriverValue:t=>t};({...l_,...c_});class u_{constructor(e,r=c_){this.value=e,this.encoder=r}static[ie]="Param";brand;getSQL(){return new Qt([this])}}function Vu(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new qn(t[0]));for(const[n,i]of e.entries())r.push(i,new qn(t[n+1]));return new Qt(r)}(t=>{function e(){return new Qt([])}t.empty=e;function r(d){return new Qt(d)}t.fromList=r;function n(d){return new Qt([new qn(d)])}t.raw=n;function i(d,h){const g=[];for(const[v,y]of d.entries())v>0&&h!==void 0&&g.push(h),g.push(y);return new Qt(g)}t.join=i;function a(d){return new Ep(d)}t.identifier=a;function l(d){return new Tp(d)}t.placeholder=l;function u(d,h){return new u_(d,h)}t.param=u})(Vu||(Vu={}));(t=>{class e{constructor(n,i){this.sql=n,this.fieldAlias=i}static[ie]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(Qt||(Qt={}));class Tp{constructor(e){this.name=e}static[ie]="Placeholder";getSQL(){return new Qt([this])}}const d_=Symbol.for("drizzle:IsDrizzleView");class oN{static[ie]="View";[ea];[d_]=!0;constructor({name:e,schema:r,selectedFields:n,query:i}){this[ea]={name:e,originalName:e,schema:r,selectedFields:n,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new Qt([this])}}function aN(t){return typeof t=="object"&&t!==null&&d_ in t}Dl.prototype.getSQL=function(){return new Qt([this])};gn.prototype.getSQL=function(){return new Qt([this])};i_.prototype.getSQL=function(){return new Qt([this])};function lN(t){return t[gn.Symbol.Columns]}function cN(t){return t[ea].selectedFields}function Sr(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}class vd extends vt{static[ie]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class uN extends vd{static[ie]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new dN(e,this.config)}}class dN extends rt{static[ie]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class fN extends vd{static[ie]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new hN(e,this.config)}}class hN extends rt{static[ie]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function pN(t,e){const{name:r,config:n}=Sr(t,e);return n.mode==="number"?new uN(r):new fN(r)}class gN extends vt{static[ie]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new mN(e,this.config)}}class mN extends rt{static[ie]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class vN extends vt{static[ie]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new yN(e,this.config)}}class yN extends rt{static[ie]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function wN(t,e){const{name:r,config:n}=Sr(t,e);return n.mode==="number"?new gN(r):new vN(r)}class bN extends vt{static[ie]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new xN(e,this.config)}}class xN extends rt{static[ie]="PgBoolean";getSQLType(){return"boolean"}}function f_(t){return new bN(t??"")}class _N extends vt{static[ie]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new SN(e,this.config)}}class SN extends rt{static[ie]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function kN(t,e={}){const{name:r,config:n}=Sr(t,e);return new _N(r,n)}class EN extends vt{static[ie]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new TN(e,this.config)}}class TN extends rt{static[ie]="PgCidr";getSQLType(){return"cidr"}}function CN(t){return new EN(t??"")}class ON extends vt{static[ie]="PgCustomColumnBuilder";constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new PN(e,this.config)}}class PN extends rt{static[ie]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function NN(t){return(e,r)=>{const{name:n,config:i}=Sr(e,r);return new ON(n,i,t)}}class Gl extends vt{static[ie]="PgDateColumnBaseBuilder";defaultNow(){return this.default(Vu`now()`)}}class jN extends Gl{static[ie]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new RN(e,this.config)}}class RN extends rt{static[ie]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class AN extends Gl{static[ie]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new IN(e,this.config)}}class IN extends rt{static[ie]="PgDateString";getSQLType(){return"date"}}function DN(t,e){const{name:r,config:n}=Sr(t,e);return n?.mode==="date"?new jN(r):new AN(r)}class LN extends vt{static[ie]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new MN(e,this.config)}}class MN extends rt{static[ie]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function $N(t){return new LN(t??"")}class FN extends vt{static[ie]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new UN(e,this.config)}}class UN extends rt{static[ie]="PgInet";getSQLType(){return"inet"}}function BN(t){return new FN(t??"")}class zN extends vd{static[ie]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new VN(e,this.config)}}class VN extends rt{static[ie]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function js(t){return new zN(t??"")}class qN extends vt{static[ie]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new WN(e,this.config)}}class WN extends rt{static[ie]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}}function HN(t,e={}){const{name:r,config:n}=Sr(t,e);return new qN(r,n)}class KN extends vt{static[ie]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new GN(e,this.config)}}class GN extends rt{static[ie]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function QN(t){return new KN(t??"")}class YN extends vt{static[ie]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new ZN(e,this.config)}}class ZN extends rt{static[ie]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function JN(t){return new YN(t??"")}class XN extends vt{static[ie]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new ej(e,this.config)}}class ej extends rt{static[ie]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,i]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class tj extends vt{static[ie]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new rj(e,this.config)}}class rj extends rt{static[ie]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function nj(t,e){const{name:r,config:n}=Sr(t,e);return!n?.mode||n.mode==="tuple"?new XN(r):new tj(r)}class sj extends vt{static[ie]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new ij(e,this.config)}}class ij extends rt{static[ie]="PgMacaddr";getSQLType(){return"macaddr"}}function oj(t){return new sj(t??"")}class aj extends vt{static[ie]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new lj(e,this.config)}}class lj extends rt{static[ie]="PgMacaddr8";getSQLType(){return"macaddr8"}}function cj(t){return new aj(t??"")}class uj extends vt{static[ie]="PgNumericBuilder";constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new dj(e,this.config)}}class dj extends rt{static[ie]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function fj(t,e){const{name:r,config:n}=Sr(t,e);return new uj(r,n?.precision,n?.scale)}class hj extends vt{static[ie]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new pj(e,this.config)}}class pj extends rt{static[ie]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class gj extends vt{static[ie]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new mj(e,this.config)}}class mj extends rt{static[ie]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function vj(t,e){const{name:r,config:n}=Sr(t,e);return!n?.mode||n.mode==="tuple"?new hj(r):new gj(r)}function yj(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function T0(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let i=0;i<8;i++)n.setUint8(i,t[e+i]);return n.getFloat64(0,!0)}function h_(t){const e=yj(t);let r=0;const n=e[r];r+=1;const i=new DataView(e.buffer),a=i.getUint32(r,n===1);if(r+=4,a&536870912&&(i.getUint32(r,n===1),r+=4),(a&65535)===1){const l=T0(e,r);r+=8;const u=T0(e,r);return r+=8,[l,u]}throw new Error("Unsupported geometry type")}class wj extends vt{static[ie]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new bj(e,this.config)}}class bj extends rt{static[ie]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return h_(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class xj extends vt{static[ie]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new _j(e,this.config)}}class _j extends rt{static[ie]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=h_(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function Sj(t,e){const{name:r,config:n}=Sr(t,e);return!n?.mode||n.mode==="tuple"?new wj(r):new xj(r)}class kj extends vt{static[ie]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new Ej(e,this.config)}}class Ej extends rt{static[ie]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function Tj(t){return new kj(t??"")}class Cj extends vt{static[ie]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Oj(e,this.config)}}class Oj extends rt{static[ie]="PgSerial";getSQLType(){return"serial"}}function yd(t){return new Cj(t??"")}class Pj extends vd{static[ie]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new Nj(e,this.config)}}class Nj extends rt{static[ie]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function jj(t){return new Pj(t??"")}class Rj extends vt{static[ie]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Aj(e,this.config)}}class Aj extends rt{static[ie]="PgSmallSerial";getSQLType(){return"smallserial"}}function Ij(t){return new Rj(t??"")}class Dj extends vt{static[ie]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new Lj(e,this.config)}}class Lj extends rt{static[ie]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function Qi(t,e={}){const{name:r,config:n}=Sr(t,e);return new Dj(r,n)}class Mj extends Gl{constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}static[ie]="PgTimeBuilder";build(e){return new $j(e,this.config)}}class $j extends rt{static[ie]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Fj(t,e={}){const{name:r,config:n}=Sr(t,e);return new Mj(r,n.withTimezone??!1,n.precision)}class Uj extends Gl{static[ie]="PgTimestampBuilder";constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Bj(e,this.config)}}class Bj extends rt{static[ie]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class zj extends Gl{static[ie]="PgTimestampStringBuilder";constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Vj(e,this.config)}}class Vj extends rt{static[ie]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function qu(t,e={}){const{name:r,config:n}=Sr(t,e);return n?.mode==="string"?new zj(r,n.withTimezone??!1,n.precision):new Uj(r,n?.withTimezone??!1,n?.precision)}class qj extends vt{static[ie]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(Vu`gen_random_uuid()`)}build(e){return new Wj(e,this.config)}}class Wj extends rt{static[ie]="PgUUID";getSQLType(){return"uuid"}}function Hj(t){return new qj(t??"")}class Kj extends vt{static[ie]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Gj(e,this.config)}}class Gj extends rt{static[ie]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function Qj(t,e={}){const{name:r,config:n}=Sr(t,e);return new Kj(r,n)}class Yj extends vt{static[ie]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Zj(e,this.config)}}class Zj extends rt{static[ie]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function Jj(t,e){const{name:r,config:n}=Sr(t,e);return new Yj(r,n)}class Xj extends vt{static[ie]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new eR(e,this.config)}}class eR extends rt{static[ie]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}function tR(t,e){const{name:r,config:n}=Sr(t,e);return new Xj(r,n)}class rR extends vt{static[ie]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new nR(e,this.config)}}class nR extends rt{static[ie]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function sR(t,e){const{name:r,config:n}=Sr(t,e);return new rR(r,n)}class iR extends vt{static[ie]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new oR(e,this.config)}}class oR extends rt{static[ie]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}function aR(t,e){const{name:r,config:n}=Sr(t,e);return new iR(r,n)}function lR(){return{bigint:pN,bigserial:wN,boolean:f_,char:kN,cidr:CN,customType:NN,date:DN,doublePrecision:$N,inet:BN,integer:js,interval:HN,json:QN,jsonb:JN,line:nj,macaddr:oj,macaddr8:cj,numeric:fj,point:vj,geometry:Sj,real:Tj,serial:yd,smallint:jj,smallserial:Ij,text:Qi,time:Fj,timestamp:qu,uuid:Hj,varchar:Qj,bit:Jj,halfvec:tR,sparsevec:sR,vector:aR}}const Cp=Symbol.for("drizzle:PgInlineForeignKeys"),C0=Symbol.for("drizzle:EnableRLS");class O0 extends gn{static[ie]="PgTable";static Symbol=Object.assign({},gn.Symbol,{InlineForeignKeys:Cp,EnableRLS:C0});[Cp]=[];[C0]=!1;[gn.Symbol.ExtraConfigBuilder]=void 0}function cR(t,e,r,n,i=t){const a=new O0(t,n,i),l=typeof e=="function"?e(lR()):e,u=Object.fromEntries(Object.entries(l).map(([g,v])=>{const y=v;y.setName(g);const x=y.build(a);return a[Cp].push(...y.buildForeignKeys(x,a)),[g,x]})),d=Object.fromEntries(Object.entries(l).map(([g,v])=>{const y=v;y.setName(g);const x=y.buildExtraConfigColumn(a);return[g,x]})),h=Object.assign(a,u);return h[gn.Symbol.Columns]=u,h[gn.Symbol.ExtraConfigColumns]=d,Object.assign(h,{enableRLS:()=>(h[O0.Symbol.EnableRLS]=!0,h)})}const Og=(t,e,r)=>cR(t,e,r,void 0),Vt={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Zt(t,e){return e.includes(t.columnType)}function uR(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const dR=bt.union([bt.string(),bt.number(),bt.boolean(),bt.null()]),fR=bt.union([dR,bt.record(bt.any()),bt.array(bt.any())]),hR=bt.custom(t=>t instanceof Buffer);function p_(t,e){const r=e?.zodInstance??bt,n=e?.coerce??{};let i;return uR(t)&&(i=t.enumValues.length?r.enum(t.enumValues):r.string()),i||(Zt(t,["PgGeometry","PgPointTuple"])?i=r.tuple([r.number(),r.number()]):Zt(t,["PgGeometryObject","PgPointObject"])?i=r.object({x:r.number(),y:r.number()}):Zt(t,["PgHalfVector","PgVector"])?(i=r.array(r.number()),i=t.dimensions?i.length(t.dimensions):i):Zt(t,["PgLine"])?i=r.tuple([r.number(),r.number(),r.number()]):Zt(t,["PgLineABC"])?i=r.object({a:r.number(),b:r.number(),c:r.number()}):Zt(t,["PgArray"])?(i=r.array(p_(t.baseColumn,r)),i=t.size?i.length(t.size):i):t.dataType==="array"?i=r.array(r.any()):t.dataType==="number"?i=pR(t,r,n):t.dataType==="bigint"?i=gR(t,r,n):t.dataType==="boolean"?i=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?i=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?i=mR(t,r,n):t.dataType==="json"?i=fR:t.dataType==="custom"?i=r.any():t.dataType==="buffer"&&(i=hR)),i||(i=r.any()),i}function pR(t,e,r){let n=t.getSQLType().includes("unsigned"),i,a,l=!1;Zt(t,["MySqlTinyInt","SingleStoreTinyInt"])?(i=n?0:Vt.INT8_MIN,a=n?Vt.INT8_UNSIGNED_MAX:Vt.INT8_MAX,l=!0):Zt(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(i=n?0:Vt.INT16_MIN,a=n?Vt.INT16_UNSIGNED_MAX:Vt.INT16_MAX,l=!0):Zt(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(i=n?0:Vt.INT24_MIN,a=n?Vt.INT24_UNSIGNED_MAX:Vt.INT24_MAX,l=Zt(t,["MySqlMediumInt","SingleStoreMediumInt"])):Zt(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(i=n?0:Vt.INT32_MIN,a=n?Vt.INT32_UNSIGNED_MAX:Vt.INT32_MAX,l=!0):Zt(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(i=n?0:Vt.INT48_MIN,a=n?Vt.INT48_UNSIGNED_MAX:Vt.INT48_MAX):Zt(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||Zt(t,["MySqlSerial","SingleStoreSerial"]),i=n?0:Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,l=!0):Zt(t,["MySqlYear","SingleStoreYear"])?(i=1901,a=2155,l=!0):(i=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER);let u=r===!0||r?.number?e.coerce.number():e.number();return u=u.min(i).max(a),l?u.int():u}function gR(t,e,r){const n=t.getSQLType().includes("unsigned"),i=n?0n:Vt.INT64_MIN,a=n?Vt.INT64_UNSIGNED_MAX:Vt.INT64_MAX;return(r===!0||r?.bigint?e.coerce.bigint():e.bigint()).min(i).max(a)}function mR(t,e,r){if(Zt(t,["PgUUID"]))return e.string().uuid();let n,i,a=!1;Zt(t,["PgVarchar","SQLiteText"])?n=t.length:Zt(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??Vt.INT16_UNSIGNED_MAX:Zt(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=Vt.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=Vt.INT24_UNSIGNED_MAX:t.textType==="text"?n=Vt.INT16_UNSIGNED_MAX:n=Vt.INT8_UNSIGNED_MAX),Zt(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,a=!0),Zt(t,["PgBinaryVector"])&&(i=/^[01]+$/,n=t.dimensions);let l=r===!0||r?.string?e.coerce.string():e.string();return l=i?l.regex(i):l,n&&a?l.length(n):n?l.max(n):l}function g_(t){return a_(t)?lN(t):cN(t)}function m_(t,e,r,n){const i={};for(const[a,l]of Object.entries(t)){if(!Rr(l,Dl)&&!Rr(l,Qt)&&!Rr(l,Qt.Aliased)&&typeof l=="object"){const v=a_(l)||aN(l)?g_(l):l;i[a]=m_(v,e[a]??{},r,n);continue}const u=e[a];if(u!==void 0&&typeof u!="function"){i[a]=u;continue}const d=Rr(l,Dl)?l:void 0,h=d?p_(d,n):bt.any(),g=typeof u=="function"?u(h):h;r.never(d)||(i[a]=g,d&&(r.nullable(d)&&(i[a]=i[a].nullable()),r.optional(d)&&(i[a]=i[a].optional())))}return bt.object(i)}const vR={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},yR=(t,e)=>{const r=g_(t);return m_(r,{},vR)},wR=Og("users",{id:yd("id").primaryKey(),username:Qi("username").notNull().unique(),password:Qi("password").notNull(),email:Qi("email").unique(),rating:js("rating").default(0),gamesPlayed:js("games_played").default(0),wins:js("wins").default(0),losses:js("losses").default(0),draws:js("draws").default(0)});Og("games",{id:yd("id").primaryKey(),whitePlayerId:js("white_player_id"),blackPlayerId:js("black_player_id"),pgn:Qi("pgn"),result:Qi("result"),createdAt:qu("created_at").defaultNow()});Og("password_resets",{id:yd("id").primaryKey(),userId:js("user_id").notNull(),code:Qi("code").notNull(),expiresAt:qu("expires_at").notNull(),used:f_("used").default(!1).notNull(),createdAt:qu("created_at").defaultNow()});const Op=yR(wR).pick({username:!0,password:!0});bt.object({message:bt.string(),field:bt.string().optional()}),bt.object({message:bt.string()}),bt.object({message:bt.string()});const zn={users:{login:{method:"POST",path:"/api/login",input:Op,responses:{200:bt.custom(),401:bt.object({message:bt.string()})}},register:{method:"POST",path:"/api/register",input:Op,responses:{201:bt.custom(),400:bt.object({message:bt.string()})}},me:{method:"GET",path:"/api/user",responses:{200:bt.custom(),401:bt.object({message:bt.string()})}}},games:{list:{method:"GET",path:"/api/games",responses:{200:bt.array(bt.custom())}}}},Pg="auth_token";function P0(){try{return localStorage.getItem(Pg)}catch{return null}}function N0(t){try{localStorage.setItem(Pg,t)}catch{}}function j0(){try{localStorage.removeItem(Pg)}catch{}}function lo(){const t=sd(),{toast:e}=ao(),[,r]=oo(),{data:n,isLoading:i,error:a}=Pu({queryKey:[zn.users.me.path],queryFn:async()=>{const h=P0();if(!h)return null;const g=await fetch(Qr+zn.users.me.path,{headers:{Authorization:`Bearer ${h}`}});if(g.status===401)return j0(),null;if(!g.ok)throw new Error("Khng th ly thng tin ngi dng");return zn.users.me.responses[200].parse(await g.json())},retry:!1}),l=Sh({mutationFn:async h=>{const g=await fetch(Qr+zn.users.login.path,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!g.ok){if(g.status===401)throw new Error("Sai tn ng nhp hoc mt khu");const v=await g.json();throw new Error(v.message||"ng nhp tht bi")}return zn.users.login.responses[200].parse(await g.json())},onSuccess:h=>{const g=h?.token;typeof g=="string"&&g&&N0(g),t.setQueryData([zn.users.me.path],h),e({title:"Cho mng quay li!",description:`ng nhp vi ti khon ${h.username}`,variant:"default"}),r("/")},onError:h=>{e({title:"ng nhp tht bi",description:h.message,variant:"destructive"})}}),u=Sh({mutationFn:async h=>{const g=await fetch(Qr+zn.users.register.path,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!g.ok){const v=await g.json();throw new Error(v.message||"ng k tht bi")}return zn.users.register.responses[201].parse(await g.json())},onSuccess:h=>{const g=h?.token;typeof g=="string"&&g&&N0(g),t.setQueryData([zn.users.me.path],h),e({title:"To ti khon thnh cng!",description:`Cho mng n vi ChessPro, ${h.username}!`,variant:"default"}),r("/")},onError:h=>{e({title:"ng k tht bi",description:h.message,variant:"destructive"})}}),d=Sh({mutationFn:async()=>{const h=P0();if(!(await fetch(Qr+"/api/logout",{method:"POST",headers:h?{Authorization:`Bearer ${h}`}:{}})).ok)throw new Error("ng xut tht bi");j0(),t.setQueryData([zn.users.me.path],null)},onSuccess:()=>{r("/auth"),e({title:" ng xut",description:"Bn cn ng nhp li  tip tc chi."})},onError:h=>{e({title:"ng xut tht bi",description:h.message,variant:"destructive"})}});return{user:n,isLoading:i,error:a,login:l.mutate,isLoggingIn:l.isPending,register:u.mutate,isRegistering:u.isPending,logout:d.mutate}}const as=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:dt("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));as.displayName="Card";const Rs=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:dt("flex flex-col space-y-1.5 p-6",t),...e}));Rs.displayName="CardHeader";const As=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:dt("text-2xl font-semibold leading-none tracking-tight",t),...e}));As.displayName="CardTitle";const v_=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:dt("text-sm text-muted-foreground",t),...e}));v_.displayName="CardDescription";const ls=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:dt("p-6 pt-0",t),...e}));ls.displayName="CardContent";const bR=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:dt("flex items-center p-6 pt-0",t),...e}));bR.displayName="CardFooter";function xR(){return p.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:p.jsx(as,{className:"w-full max-w-md mx-4",children:p.jsxs(ls,{className:"pt-6",children:[p.jsxs("div",{className:"flex mb-4 gap-2",children:[p.jsx(gC,{className:"h-8 w-8 text-red-500"}),p.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),p.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const _R=gg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ut=b.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...i},a)=>{const l=n?Cb:"button";return p.jsx(l,{className:dt(_R({variant:e,size:r,className:t})),ref:a,...i})});ut.displayName="Button";const os=b.forwardRef(({className:t,type:e,...r},n)=>p.jsx("input",{type:e,className:dt("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));os.displayName="Input";var Ql=t=>t.type==="checkbox",Hi=t=>t instanceof Date,Gr=t=>t==null;const y_=t=>typeof t=="object";var Xt=t=>!Gr(t)&&!Array.isArray(t)&&y_(t)&&!Hi(t),w_=t=>Xt(t)&&t.target?Ql(t.target)?t.target.checked:t.target.value:t,SR=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,b_=(t,e)=>t.has(SR(e)),kR=t=>{const e=t.constructor&&t.constructor.prototype;return Xt(e)&&e.hasOwnProperty("isPrototypeOf")},Ng=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Nr(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Ng&&(t instanceof Blob||n))&&(r||Xt(t)))if(e=r?[]:{},!r&&!kR(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Nr(t[i]));else return t;return e}var wd=t=>Array.isArray(t)?t.filter(Boolean):[],Jt=t=>t===void 0,we=(t,e,r)=>{if(!e||!Xt(t))return r;const n=wd(e.split(/[,[\].]+?/)).reduce((i,a)=>Gr(i)?i:i[a],t);return Jt(n)||n===t?Jt(t[e])?r:t[e]:n},hn=t=>typeof t=="boolean",jg=t=>/^\w*$/.test(t),x_=t=>wd(t.replace(/["|']|\]/g,"").split(/\.|\[/)),xt=(t,e,r)=>{let n=-1;const i=jg(e)?[e]:x_(e),a=i.length,l=a-1;for(;++n<a;){const u=i[n];let d=r;if(n!==l){const h=t[u];d=Xt(h)||Array.isArray(h)?h:isNaN(+i[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=d,t=t[u]}};const Wu={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Gn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Cs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},__=Xe.createContext(null),bd=()=>Xe.useContext(__),ER=t=>{const{children:e,...r}=t;return Xe.createElement(__.Provider,{value:r},e)};var S_=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const l=a;return e._proxyFormState[l]!==Gn.all&&(e._proxyFormState[l]=!n||Gn.all),r&&(r[l]=!0),t[l]}});return i};function TR(t){const e=bd(),{control:r=e.control,disabled:n,name:i,exact:a}=t||{},[l,u]=Xe.useState(r._formState),d=Xe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=Xe.useRef(i);return h.current=i,Xe.useEffect(()=>r._subscribe({name:h.current,formState:d.current,exact:a,callback:g=>{!n&&u({...r._formState,...g})}}),[r,n,a]),Xe.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),Xe.useMemo(()=>S_(l,r,d.current,!1),[l,r])}var cs=t=>typeof t=="string",k_=(t,e,r,n,i)=>cs(t)?(n&&e.watch.add(t),we(r,t,i)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),we(r,a))):(n&&(e.watchAll=!0),r);function CR(t){const e=bd(),{control:r=e.control,name:n,defaultValue:i,disabled:a,exact:l}=t||{},u=Xe.useRef(n),d=Xe.useRef(i);u.current=n,Xe.useEffect(()=>r._subscribe({name:u.current,formState:{values:!0},exact:l,callback:v=>!a&&g(k_(u.current,r._names,v.values||r._formValues,!1,d.current))}),[r,a,l]);const[h,g]=Xe.useState(r._getWatch(n,i));return Xe.useEffect(()=>r._removeUnmounted()),h}function OR(t){const e=bd(),{name:r,disabled:n,control:i=e.control,shouldUnregister:a}=t,l=b_(i._names.array,r),u=CR({control:i,name:r,defaultValue:we(i._formValues,r,we(i._defaultValues,r,t.defaultValue)),exact:!0}),d=TR({control:i,name:r,exact:!0}),h=Xe.useRef(t),g=Xe.useRef(i.register(r,{...t.rules,value:u,...hn(t.disabled)?{disabled:t.disabled}:{}})),v=Xe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!we(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!we(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!we(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!we(d.validatingFields,r)},error:{enumerable:!0,get:()=>we(d.errors,r)}}),[d,r]),y=Xe.useCallback(E=>g.current.onChange({target:{value:w_(E),name:r},type:Wu.CHANGE}),[r]),x=Xe.useCallback(()=>g.current.onBlur({target:{value:we(i._formValues,r),name:r},type:Wu.BLUR}),[r,i._formValues]),S=Xe.useCallback(E=>{const C=we(i._fields,r);C&&E&&(C._f.ref={focus:()=>E.focus(),select:()=>E.select(),setCustomValidity:T=>E.setCustomValidity(T),reportValidity:()=>E.reportValidity()})},[i._fields,r]),_=Xe.useMemo(()=>({name:r,value:u,...hn(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:y,onBlur:x,ref:S}),[r,n,d.disabled,y,x,S,u]);return Xe.useEffect(()=>{const E=i._options.shouldUnregister||a;i.register(r,{...h.current.rules,...hn(h.current.disabled)?{disabled:h.current.disabled}:{}});const C=(T,O)=>{const A=we(i._fields,T);A&&A._f&&(A._f.mount=O)};if(C(r,!0),E){const T=Nr(we(i._options.defaultValues,r));xt(i._defaultValues,r,T),Jt(we(i._formValues,r))&&xt(i._formValues,r,T)}return!l&&i.register(r),()=>{(l?E&&!i._state.action:E)?i.unregister(r):C(r,!1)}},[r,i,l,a]),Xe.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),Xe.useMemo(()=>({field:_,formState:d,fieldState:v}),[_,d,v])}const PR=t=>t.render(OR(t));var E_=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},hl=t=>Array.isArray(t)?t:[t],R0=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},Pp=t=>Gr(t)||!y_(t);function hi(t,e){if(Pp(t)||Pp(e))return t===e;if(Hi(t)&&Hi(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r){const a=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const l=e[i];if(Hi(a)&&Hi(l)||Xt(a)&&Xt(l)||Array.isArray(a)&&Array.isArray(l)?!hi(a,l):a!==l)return!1}}return!0}var Kr=t=>Xt(t)&&!Object.keys(t).length,Rg=t=>t.type==="file",Qn=t=>typeof t=="function",Hu=t=>{if(!Ng)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},T_=t=>t.type==="select-multiple",Ag=t=>t.type==="radio",NR=t=>Ag(t)||Ql(t),Ih=t=>Hu(t)&&t.isConnected;function jR(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Jt(t)?n++:t[e[n++]];return t}function RR(t){for(const e in t)if(t.hasOwnProperty(e)&&!Jt(t[e]))return!1;return!0}function cr(t,e){const r=Array.isArray(e)?e:jg(e)?[e]:x_(e),n=r.length===1?t:jR(t,r),i=r.length-1,a=r[i];return n&&delete n[a],i!==0&&(Xt(n)&&Kr(n)||Array.isArray(n)&&RR(n))&&cr(t,r.slice(0,-1)),t}var C_=t=>{for(const e in t)if(Qn(t[e]))return!0;return!1};function Ku(t,e={}){const r=Array.isArray(t);if(Xt(t)||r)for(const n in t)Array.isArray(t[n])||Xt(t[n])&&!C_(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Ku(t[n],e[n])):Gr(t[n])||(e[n]=!0);return e}function O_(t,e,r){const n=Array.isArray(t);if(Xt(t)||n)for(const i in t)Array.isArray(t[i])||Xt(t[i])&&!C_(t[i])?Jt(e)||Pp(r[i])?r[i]=Array.isArray(t[i])?Ku(t[i],[]):{...Ku(t[i])}:O_(t[i],Gr(e)?{}:e[i],r[i]):r[i]=!hi(t[i],e[i]);return r}var Ja=(t,e)=>O_(t,e,Ku(e));const A0={value:!1,isValid:!1},I0={value:!0,isValid:!0};var P_=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Jt(t[0].attributes.value)?Jt(t[0].value)||t[0].value===""?I0:{value:t[0].value,isValid:!0}:I0:A0}return A0},N_=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Jt(t)?t:e?t===""?NaN:t&&+t:r&&cs(t)?new Date(t):n?n(t):t;const D0={isValid:!1,value:null};var j_=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,D0):D0;function L0(t){const e=t.ref;return Rg(e)?e.files:Ag(e)?j_(t.refs).value:T_(e)?[...e.selectedOptions].map(({value:r})=>r):Ql(e)?P_(t.refs).value:N_(Jt(e.value)?t.ref.value:e.value,t)}var AR=(t,e,r,n)=>{const i={};for(const a of t){const l=we(e,a);l&&xt(i,a,l._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Gu=t=>t instanceof RegExp,Xa=t=>Jt(t)?t:Gu(t)?t.source:Xt(t)?Gu(t.value)?t.value.source:t.value:t,M0=t=>({isOnSubmit:!t||t===Gn.onSubmit,isOnBlur:t===Gn.onBlur,isOnChange:t===Gn.onChange,isOnAll:t===Gn.all,isOnTouch:t===Gn.onTouched});const $0="AsyncFunction";var IR=t=>!!t&&!!t.validate&&!!(Qn(t.validate)&&t.validate.constructor.name===$0||Xt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===$0)),DR=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),F0=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const pl=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const a=we(t,i);if(a){const{_f:l,...u}=a;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],i)&&!n)return!0;if(l.ref&&e(l.ref,l.name)&&!n)return!0;if(pl(u,e))break}else if(Xt(u)&&pl(u,e))break}}};function U0(t,e,r){const n=we(t,r);if(n||jg(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const a=i.join("."),l=we(e,a),u=we(t,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(u&&u.type)return{name:a,error:u};i.pop()}return{name:r}}var LR=(t,e,r,n)=>{r(t);const{name:i,...a}=t;return Kr(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(l=>e[l]===(!n||Gn.all))},MR=(t,e,r)=>!t||!e||t===e||hl(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),$R=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,FR=(t,e)=>!wd(we(t,e)).length&&cr(t,e),UR=(t,e,r)=>{const n=hl(we(t,r));return xt(n,"root",e[r]),xt(t,r,n),t},Su=t=>cs(t);function B0(t,e,r="validate"){if(Su(t)||Array.isArray(t)&&t.every(Su)||hn(t)&&!t)return{type:r,message:Su(t)?t:"",ref:e}}var Io=t=>Xt(t)&&!Gu(t)?t:{value:t,message:""},z0=async(t,e,r,n,i,a)=>{const{ref:l,refs:u,required:d,maxLength:h,minLength:g,min:v,max:y,pattern:x,validate:S,name:_,valueAsNumber:E,mount:C}=t._f,T=we(r,_);if(!C||e.has(_))return{};const O=u?u[0]:l,A=Y=>{i&&O.reportValidity&&(O.setCustomValidity(hn(Y)?"":Y||""),O.reportValidity())},U={},z=Ag(l),$=Ql(l),J=z||$,V=(E||Rg(l))&&Jt(l.value)&&Jt(T)||Hu(l)&&l.value===""||T===""||Array.isArray(T)&&!T.length,W=E_.bind(null,_,n,U),ee=(Y,te,Z,ke=Cs.maxLength,fe=Cs.minLength)=>{const Se=Y?te:Z;U[_]={type:Y?ke:fe,message:Se,ref:l,...W(Y?ke:fe,Se)}};if(a?!Array.isArray(T)||!T.length:d&&(!J&&(V||Gr(T))||hn(T)&&!T||$&&!P_(u).isValid||z&&!j_(u).isValid)){const{value:Y,message:te}=Su(d)?{value:!!d,message:d}:Io(d);if(Y&&(U[_]={type:Cs.required,message:te,ref:O,...W(Cs.required,te)},!n))return A(te),U}if(!V&&(!Gr(v)||!Gr(y))){let Y,te;const Z=Io(y),ke=Io(v);if(!Gr(T)&&!isNaN(T)){const fe=l.valueAsNumber||T&&+T;Gr(Z.value)||(Y=fe>Z.value),Gr(ke.value)||(te=fe<ke.value)}else{const fe=l.valueAsDate||new Date(T),Se=ae=>new Date(new Date().toDateString()+" "+ae),H=l.type=="time",ue=l.type=="week";cs(Z.value)&&T&&(Y=H?Se(T)>Se(Z.value):ue?T>Z.value:fe>new Date(Z.value)),cs(ke.value)&&T&&(te=H?Se(T)<Se(ke.value):ue?T<ke.value:fe<new Date(ke.value))}if((Y||te)&&(ee(!!Y,Z.message,ke.message,Cs.max,Cs.min),!n))return A(U[_].message),U}if((h||g)&&!V&&(cs(T)||a&&Array.isArray(T))){const Y=Io(h),te=Io(g),Z=!Gr(Y.value)&&T.length>+Y.value,ke=!Gr(te.value)&&T.length<+te.value;if((Z||ke)&&(ee(Z,Y.message,te.message),!n))return A(U[_].message),U}if(x&&!V&&cs(T)){const{value:Y,message:te}=Io(x);if(Gu(Y)&&!T.match(Y)&&(U[_]={type:Cs.pattern,message:te,ref:l,...W(Cs.pattern,te)},!n))return A(te),U}if(S){if(Qn(S)){const Y=await S(T,r),te=B0(Y,O);if(te&&(U[_]={...te,...W(Cs.validate,te.message)},!n))return A(te.message),U}else if(Xt(S)){let Y={};for(const te in S){if(!Kr(Y)&&!n)break;const Z=B0(await S[te](T,r),O,te);Z&&(Y={...Z,...W(te,Z.message)},A(Z.message),n&&(U[_]=Y))}if(!Kr(Y)&&(U[_]={ref:O,...Y},!n))return U}}return A(!0),U};const BR={mode:Gn.onSubmit,reValidateMode:Gn.onChange,shouldFocusError:!0};function zR(t={}){let e={...BR,...t},r={submitCount:0,isDirty:!1,isLoading:Qn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let i=Xt(e.defaultValues)||Xt(e.values)?Nr(e.values||e.defaultValues)||{}:{},a=e.shouldUnregister?{}:Nr(i),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...g};const y={array:R0(),state:R0()},x=M0(e.mode),S=M0(e.reValidateMode),_=e.criteriaMode===Gn.all,E=j=>F=>{clearTimeout(h),h=setTimeout(j,F)},C=async j=>{if(!e.disabled&&(g.isValid||v.isValid||j)){const F=e.resolver?Kr((await V()).errors):await ee(n,!0);F!==r.isValid&&y.state.next({isValid:F})}},T=(j,F)=>{!e.disabled&&(g.isValidating||g.validatingFields||v.isValidating||v.validatingFields)&&((j||Array.from(u.mount)).forEach(Q=>{Q&&(F?xt(r.validatingFields,Q,F):cr(r.validatingFields,Q))}),y.state.next({validatingFields:r.validatingFields,isValidating:!Kr(r.validatingFields)}))},O=(j,F=[],Q,me,pe=!0,le=!0)=>{if(me&&Q&&!e.disabled){if(l.action=!0,le&&Array.isArray(we(n,j))){const _e=Q(we(n,j),me.argA,me.argB);pe&&xt(n,j,_e)}if(le&&Array.isArray(we(r.errors,j))){const _e=Q(we(r.errors,j),me.argA,me.argB);pe&&xt(r.errors,j,_e),FR(r.errors,j)}if((g.touchedFields||v.touchedFields)&&le&&Array.isArray(we(r.touchedFields,j))){const _e=Q(we(r.touchedFields,j),me.argA,me.argB);pe&&xt(r.touchedFields,j,_e)}(g.dirtyFields||v.dirtyFields)&&(r.dirtyFields=Ja(i,a)),y.state.next({name:j,isDirty:te(j,F),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else xt(a,j,F)},A=(j,F)=>{xt(r.errors,j,F),y.state.next({errors:r.errors})},U=j=>{r.errors=j,y.state.next({errors:r.errors,isValid:!1})},z=(j,F,Q,me)=>{const pe=we(n,j);if(pe){const le=we(a,j,Jt(Q)?we(i,j):Q);Jt(le)||me&&me.defaultChecked||F?xt(a,j,F?le:L0(pe._f)):fe(j,le),l.mount&&C()}},$=(j,F,Q,me,pe)=>{let le=!1,_e=!1;const Ze={name:j};if(!e.disabled){if(!Q||me){(g.isDirty||v.isDirty)&&(_e=r.isDirty,r.isDirty=Ze.isDirty=te(),le=_e!==Ze.isDirty);const ht=hi(we(i,j),F);_e=!!we(r.dirtyFields,j),ht?cr(r.dirtyFields,j):xt(r.dirtyFields,j,!0),Ze.dirtyFields=r.dirtyFields,le=le||(g.dirtyFields||v.dirtyFields)&&_e!==!ht}if(Q){const ht=we(r.touchedFields,j);ht||(xt(r.touchedFields,j,Q),Ze.touchedFields=r.touchedFields,le=le||(g.touchedFields||v.touchedFields)&&ht!==Q)}le&&pe&&y.state.next(Ze)}return le?Ze:{}},J=(j,F,Q,me)=>{const pe=we(r.errors,j),le=(g.isValid||v.isValid)&&hn(F)&&r.isValid!==F;if(e.delayError&&Q?(d=E(()=>A(j,Q)),d(e.delayError)):(clearTimeout(h),d=null,Q?xt(r.errors,j,Q):cr(r.errors,j)),(Q?!hi(pe,Q):pe)||!Kr(me)||le){const _e={...me,...le&&hn(F)?{isValid:F}:{},errors:r.errors,name:j};r={...r,..._e},y.state.next(_e)}},V=async j=>{T(j,!0);const F=await e.resolver(a,e.context,AR(j||u.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return T(j),F},W=async j=>{const{errors:F}=await V(j);if(j)for(const Q of j){const me=we(F,Q);me?xt(r.errors,Q,me):cr(r.errors,Q)}else r.errors=F;return F},ee=async(j,F,Q={valid:!0})=>{for(const me in j){const pe=j[me];if(pe){const{_f:le,..._e}=pe;if(le){const Ze=u.array.has(le.name),ht=pe._f&&IR(pe._f);ht&&g.validatingFields&&T([me],!0);const ot=await z0(pe,u.disabled,a,_,e.shouldUseNativeValidation&&!F,Ze);if(ht&&g.validatingFields&&T([me]),ot[le.name]&&(Q.valid=!1,F))break;!F&&(we(ot,le.name)?Ze?UR(r.errors,ot,le.name):xt(r.errors,le.name,ot[le.name]):cr(r.errors,le.name))}!Kr(_e)&&await ee(_e,F,Q)}}return Q.valid},Y=()=>{for(const j of u.unMount){const F=we(n,j);F&&(F._f.refs?F._f.refs.every(Q=>!Ih(Q)):!Ih(F._f.ref))&&Me(j)}u.unMount=new Set},te=(j,F)=>!e.disabled&&(j&&F&&xt(a,j,F),!hi(X(),i)),Z=(j,F,Q)=>k_(j,u,{...l.mount?a:Jt(F)?i:cs(j)?{[j]:F}:F},Q,F),ke=j=>wd(we(l.mount?a:i,j,e.shouldUnregister?we(i,j,[]):[])),fe=(j,F,Q={})=>{const me=we(n,j);let pe=F;if(me){const le=me._f;le&&(!le.disabled&&xt(a,j,N_(F,le)),pe=Hu(le.ref)&&Gr(F)?"":F,T_(le.ref)?[...le.ref.options].forEach(_e=>_e.selected=pe.includes(_e.value)):le.refs?Ql(le.ref)?le.refs.length>1?le.refs.forEach(_e=>(!_e.defaultChecked||!_e.disabled)&&(_e.checked=Array.isArray(pe)?!!pe.find(Ze=>Ze===_e.value):pe===_e.value)):le.refs[0]&&(le.refs[0].checked=!!pe):le.refs.forEach(_e=>_e.checked=_e.value===pe):Rg(le.ref)?le.ref.value="":(le.ref.value=pe,le.ref.type||y.state.next({name:j,values:Nr(a)})))}(Q.shouldDirty||Q.shouldTouch)&&$(j,pe,Q.shouldTouch,Q.shouldDirty,!0),Q.shouldValidate&&I(j)},Se=(j,F,Q)=>{for(const me in F){const pe=F[me],le=`${j}.${me}`,_e=we(n,le);(u.array.has(j)||Xt(pe)||_e&&!_e._f)&&!Hi(pe)?Se(le,pe,Q):fe(le,pe,Q)}},H=(j,F,Q={})=>{const me=we(n,j),pe=u.array.has(j),le=Nr(F);xt(a,j,le),pe?(y.array.next({name:j,values:Nr(a)}),(g.isDirty||g.dirtyFields||v.isDirty||v.dirtyFields)&&Q.shouldDirty&&y.state.next({name:j,dirtyFields:Ja(i,a),isDirty:te(j,le)})):me&&!me._f&&!Gr(le)?Se(j,le,Q):fe(j,le,Q),F0(j,u)&&y.state.next({...r}),y.state.next({name:l.mount?j:void 0,values:Nr(a)})},ue=async j=>{l.mount=!0;const F=j.target;let Q=F.name,me=!0;const pe=we(n,Q),le=_e=>{me=Number.isNaN(_e)||Hi(_e)&&isNaN(_e.getTime())||hi(_e,we(a,Q,_e))};if(pe){let _e,Ze;const ht=F.type?L0(pe._f):w_(j),ot=j.type===Wu.BLUR||j.type===Wu.FOCUS_OUT,gr=!DR(pe._f)&&!e.resolver&&!we(r.errors,Q)&&!pe._f.deps||$R(ot,we(r.touchedFields,Q),r.isSubmitted,S,x),zr=F0(Q,u,ot);xt(a,Q,ht),ot?(pe._f.onBlur&&pe._f.onBlur(j),d&&d(0)):pe._f.onChange&&pe._f.onChange(j);const Pt=$(Q,ht,ot),Vr=!Kr(Pt)||zr;if(!ot&&y.state.next({name:Q,type:j.type,values:Nr(a)}),gr)return(g.isValid||v.isValid)&&(e.mode==="onBlur"?ot&&C():ot||C()),Vr&&y.state.next({name:Q,...zr?{}:Pt});if(!ot&&zr&&y.state.next({...r}),e.resolver){const{errors:sn}=await V([Q]);if(le(ht),me){const St=U0(r.errors,n,Q),qr=U0(sn,n,St.name||Q);_e=qr.error,Q=qr.name,Ze=Kr(sn)}}else T([Q],!0),_e=(await z0(pe,u.disabled,a,_,e.shouldUseNativeValidation))[Q],T([Q]),le(ht),me&&(_e?Ze=!1:(g.isValid||v.isValid)&&(Ze=await ee(n,!0)));me&&(pe._f.deps&&I(pe._f.deps),J(Q,Ze,_e,Pt))}},ae=(j,F)=>{if(we(r.errors,F)&&j.focus)return j.focus(),1},I=async(j,F={})=>{let Q,me;const pe=hl(j);if(e.resolver){const le=await W(Jt(j)?j:pe);Q=Kr(le),me=j?!pe.some(_e=>we(le,_e)):Q}else j?(me=(await Promise.all(pe.map(async le=>{const _e=we(n,le);return await ee(_e&&_e._f?{[le]:_e}:_e)}))).every(Boolean),!(!me&&!r.isValid)&&C()):me=Q=await ee(n);return y.state.next({...!cs(j)||(g.isValid||v.isValid)&&Q!==r.isValid?{}:{name:j},...e.resolver||!j?{isValid:Q}:{},errors:r.errors}),F.shouldFocus&&!me&&pl(n,ae,j?pe:u.mount),me},X=j=>{const F={...l.mount?a:i};return Jt(j)?F:cs(j)?we(F,j):j.map(Q=>we(F,Q))},Pe=(j,F)=>({invalid:!!we((F||r).errors,j),isDirty:!!we((F||r).dirtyFields,j),error:we((F||r).errors,j),isValidating:!!we(r.validatingFields,j),isTouched:!!we((F||r).touchedFields,j)}),ge=j=>{j&&hl(j).forEach(F=>cr(r.errors,F)),y.state.next({errors:j?r.errors:{}})},Le=(j,F,Q)=>{const me=(we(n,j,{_f:{}})._f||{}).ref,pe=we(r.errors,j)||{},{ref:le,message:_e,type:Ze,...ht}=pe;xt(r.errors,j,{...ht,...F,ref:me}),y.state.next({name:j,errors:r.errors,isValid:!1}),Q&&Q.shouldFocus&&me&&me.focus&&me.focus()},Qe=(j,F)=>Qn(j)?y.state.subscribe({next:Q=>j(Z(void 0,F),Q)}):Z(j,F,!0),qe=j=>y.state.subscribe({next:F=>{MR(j.name,F.name,j.exact)&&LR(F,j.formState||g,Br,j.reRenderRoot)&&j.callback({values:{...a},...r,...F})}}).unsubscribe,Ke=j=>(l.mount=!0,v={...v,...j.formState},qe({...j,formState:v})),Me=(j,F={})=>{for(const Q of j?hl(j):u.mount)u.mount.delete(Q),u.array.delete(Q),F.keepValue||(cr(n,Q),cr(a,Q)),!F.keepError&&cr(r.errors,Q),!F.keepDirty&&cr(r.dirtyFields,Q),!F.keepTouched&&cr(r.touchedFields,Q),!F.keepIsValidating&&cr(r.validatingFields,Q),!e.shouldUnregister&&!F.keepDefaultValue&&cr(i,Q);y.state.next({values:Nr(a)}),y.state.next({...r,...F.keepDirty?{isDirty:te()}:{}}),!F.keepIsValid&&C()},yt=({disabled:j,name:F})=>{(hn(j)&&l.mount||j||u.disabled.has(F))&&(j?u.disabled.add(F):u.disabled.delete(F))},kr=(j,F={})=>{let Q=we(n,j);const me=hn(F.disabled)||hn(e.disabled);return xt(n,j,{...Q||{},_f:{...Q&&Q._f?Q._f:{ref:{name:j}},name:j,mount:!0,...F}}),u.mount.add(j),Q?yt({disabled:hn(F.disabled)?F.disabled:e.disabled,name:j}):z(j,!0,F.value),{...me?{disabled:F.disabled||e.disabled}:{},...e.progressive?{required:!!F.required,min:Xa(F.min),max:Xa(F.max),minLength:Xa(F.minLength),maxLength:Xa(F.maxLength),pattern:Xa(F.pattern)}:{},name:j,onChange:ue,onBlur:ue,ref:pe=>{if(pe){kr(j,F),Q=we(n,j);const le=Jt(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,_e=NR(le),Ze=Q._f.refs||[];if(_e?Ze.find(ht=>ht===le):le===Q._f.ref)return;xt(n,j,{_f:{...Q._f,..._e?{refs:[...Ze.filter(Ih),le,...Array.isArray(we(i,j))?[{}]:[]],ref:{type:le.type,name:j}}:{ref:le}}}),z(j,!1,void 0,le)}else Q=we(n,j,{}),Q._f&&(Q._f.mount=!1),(e.shouldUnregister||F.shouldUnregister)&&!(b_(u.array,j)&&l.action)&&u.unMount.add(j)}}},pr=()=>e.shouldFocusError&&pl(n,ae,u.mount),Ft=j=>{hn(j)&&(y.state.next({disabled:j}),pl(n,(F,Q)=>{const me=we(n,Q);me&&(F.disabled=me._f.disabled||j,Array.isArray(me._f.refs)&&me._f.refs.forEach(pe=>{pe.disabled=me._f.disabled||j}))},0,!1))},er=(j,F)=>async Q=>{let me;Q&&(Q.preventDefault&&Q.preventDefault(),Q.persist&&Q.persist());let pe=Nr(a);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:le,values:_e}=await V();r.errors=le,pe=_e}else await ee(n);if(u.disabled.size)for(const le of u.disabled)xt(pe,le,void 0);if(cr(r.errors,"root"),Kr(r.errors)){y.state.next({errors:{}});try{await j(pe,Q)}catch(le){me=le}}else F&&await F({...r.errors},Q),pr(),setTimeout(pr);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Kr(r.errors)&&!me,submitCount:r.submitCount+1,errors:r.errors}),me)throw me},_t=(j,F={})=>{we(n,j)&&(Jt(F.defaultValue)?H(j,Nr(we(i,j))):(H(j,F.defaultValue),xt(i,j,Nr(F.defaultValue))),F.keepTouched||cr(r.touchedFields,j),F.keepDirty||(cr(r.dirtyFields,j),r.isDirty=F.defaultValue?te(j,Nr(we(i,j))):te()),F.keepError||(cr(r.errors,j),g.isValid&&C()),y.state.next({...r}))},bn=(j,F={})=>{const Q=j?Nr(j):i,me=Nr(Q),pe=Kr(j),le=pe?i:me;if(F.keepDefaultValues||(i=Q),!F.keepValues){if(F.keepDirtyValues){const _e=new Set([...u.mount,...Object.keys(Ja(i,a))]);for(const Ze of Array.from(_e))we(r.dirtyFields,Ze)?xt(le,Ze,we(a,Ze)):H(Ze,we(le,Ze))}else{if(Ng&&Jt(j))for(const _e of u.mount){const Ze=we(n,_e);if(Ze&&Ze._f){const ht=Array.isArray(Ze._f.refs)?Ze._f.refs[0]:Ze._f.ref;if(Hu(ht)){const ot=ht.closest("form");if(ot){ot.reset();break}}}}for(const _e of u.mount)H(_e,we(le,_e))}a=Nr(le),y.array.next({values:{...le}}),y.state.next({values:{...le}})}u={mount:F.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!g.isValid||!!F.keepIsValid||!!F.keepDirtyValues,l.watch=!!e.shouldUnregister,y.state.next({submitCount:F.keepSubmitCount?r.submitCount:0,isDirty:pe?!1:F.keepDirty?r.isDirty:!!(F.keepDefaultValues&&!hi(j,i)),isSubmitted:F.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:pe?{}:F.keepDirtyValues?F.keepDefaultValues&&a?Ja(i,a):r.dirtyFields:F.keepDefaultValues&&j?Ja(i,j):F.keepDirty?r.dirtyFields:{},touchedFields:F.keepTouched?r.touchedFields:{},errors:F.keepErrors?r.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},ve=(j,F)=>bn(Qn(j)?j(a):j,F),An=(j,F={})=>{const Q=we(n,j),me=Q&&Q._f;if(me){const pe=me.refs?me.refs[0]:me.ref;pe.focus&&(pe.focus(),F.shouldSelect&&Qn(pe.select)&&pe.select())}},Br=j=>{r={...r,...j}},or={control:{register:kr,unregister:Me,getFieldState:Pe,handleSubmit:er,setError:Le,_subscribe:qe,_runSchema:V,_getWatch:Z,_getDirty:te,_setValid:C,_setFieldArray:O,_setDisabledField:yt,_setErrors:U,_getFieldArray:ke,_reset:bn,_resetDefaultValues:()=>Qn(e.defaultValues)&&e.defaultValues().then(j=>{ve(j,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:Y,_disableForm:Ft,_subjects:y,_proxyFormState:g,get _fields(){return n},get _formValues(){return a},get _state(){return l},set _state(j){l=j},get _defaultValues(){return i},get _names(){return u},set _names(j){u=j},get _formState(){return r},get _options(){return e},set _options(j){e={...e,...j}}},subscribe:Ke,trigger:I,register:kr,handleSubmit:er,watch:Qe,setValue:H,getValues:X,reset:ve,resetField:_t,clearErrors:ge,unregister:Me,setError:Le,setFocus:An,getFieldState:Pe};return{...or,formControl:or}}function VR(t={}){const e=Xe.useRef(void 0),r=Xe.useRef(void 0),[n,i]=Xe.useState({isDirty:!1,isValidating:!1,isLoading:Qn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Qn(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:zR(t),formState:n},t.formControl&&t.defaultValues&&!Qn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const a=e.current.control;return a._options=t,Xe.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0}),[a]),Xe.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Xe.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==n.isDirty&&a._subjects.state.next({isDirty:l})}},[a,n.isDirty]),Xe.useEffect(()=>{t.values&&!hi(t.values,r.current)?(a._reset(t.values,a._options.resetOptions),r.current=t.values,i(l=>({...l}))):a._resetDefaultValues()},[t.values,a]),Xe.useEffect(()=>{t.errors&&!Kr(t.errors)&&a._setErrors(t.errors)},[t.errors,a]),Xe.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),Xe.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=S_(n,a),e.current}const V0=(t,e,r)=>{if(t&&"reportValidity"in t){const n=we(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},R_=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?V0(n.ref,r,t):n.refs&&n.refs.forEach(i=>V0(i,r,t))}},qR=(t,e)=>{e.shouldUseNativeValidation&&R_(t,e);const r={};for(const n in t){const i=we(e.fields,n),a=Object.assign(t[n]||{},{ref:i&&i.ref});if(WR(e.names||Object.keys(t),n)){const l=Object.assign({},we(r,n));xt(l,"root",a),xt(r,n,l)}else xt(r,n,a)}return r},WR=(t,e)=>t.some(r=>r.startsWith(e+"."));var HR=function(t,e){for(var r={};t.length;){var n=t[0],i=n.code,a=n.message,l=n.path.join(".");if(!r[l])if("unionErrors"in n){var u=n.unionErrors[0].errors[0];r[l]={message:u.message,type:u.code}}else r[l]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(g){return g.errors.forEach(function(v){return t.push(v)})}),e){var d=r[l].types,h=d&&d[n.code];r[l]=E_(l,e,r,i,h?[].concat(h,n.message):n.message)}t.shift()}return r},KR=function(t,e,r){return r===void 0&&(r={}),function(n,i,a){try{return Promise.resolve((function(l,u){try{var d=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(h){return a.shouldUseNativeValidation&&R_({},a),{errors:{},values:r.raw?n:h}})}catch(h){return u(h)}return d&&d.then?d.then(void 0,u):d})(0,function(l){if((function(u){return Array.isArray(u?.errors)})(l))return{values:{},errors:qR(HR(l.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw l}))}catch(l){return Promise.reject(l)}}},GR="Label",A_=b.forwardRef((t,e)=>p.jsx(Ct.label,{...t,ref:e,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));A_.displayName=GR;var I_=A_;const QR=gg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),D_=b.forwardRef(({className:t,...e},r)=>p.jsx(I_,{ref:r,className:dt(QR(),t),...e}));D_.displayName=I_.displayName;const YR=ER,L_=b.createContext({}),q0=({...t})=>p.jsx(L_.Provider,{value:{name:t.name},children:p.jsx(PR,{...t})}),xd=()=>{const t=b.useContext(L_),e=b.useContext(M_),{getFieldState:r,formState:n}=bd(),i=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},M_=b.createContext({}),Np=b.forwardRef(({className:t,...e},r)=>{const n=b.useId();return p.jsx(M_.Provider,{value:{id:n},children:p.jsx("div",{ref:r,className:dt("space-y-2",t),...e})})});Np.displayName="FormItem";const jp=b.forwardRef(({className:t,...e},r)=>{const{error:n,formItemId:i}=xd();return p.jsx(D_,{ref:r,className:dt(n&&"text-destructive",t),htmlFor:i,...e})});jp.displayName="FormLabel";const Rp=b.forwardRef(({...t},e)=>{const{error:r,formItemId:n,formDescriptionId:i,formMessageId:a}=xd();return p.jsx(Cb,{ref:e,id:n,"aria-describedby":r?`${i} ${a}`:`${i}`,"aria-invalid":!!r,...t})});Rp.displayName="FormControl";const ZR=b.forwardRef(({className:t,...e},r)=>{const{formDescriptionId:n}=xd();return p.jsx("p",{ref:r,id:n,className:dt("text-sm text-muted-foreground",t),...e})});ZR.displayName="FormDescription";const Ap=b.forwardRef(({className:t,children:e,...r},n)=>{const{error:i,formMessageId:a}=xd(),l=i?String(i?.message??""):e;return l?p.jsx("p",{ref:n,id:a,className:dt("text-sm font-medium text-destructive",t),...r,children:l}):null});Ap.displayName="FormMessage";function JR(){const[t,e]=b.useState(!0),[r,n]=b.useState(!1),[i,a]=b.useState(""),[l,u]=b.useState("request"),[d,h]=b.useState(""),[g,v]=b.useState(""),[y,x]=b.useState(!1),{user:S,login:_,register:E,isLoggingIn:C,isRegistering:T}=lo(),{toast:O}=ao(),A=VR({resolver:KR(Op),defaultValues:{username:"",password:""}});if(S)return p.jsx(db,{to:"/"});const U=W=>{t?_(W):E(W)},z=async W=>{if(W.preventDefault(),!i){O({title:"Li",description:"Vui lng nhp email ca bn",variant:"destructive"});return}try{x(!0);const ee=await fetch(Qr+"/api/user/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})});if(!ee.ok){const Y=await ee.json().catch(()=>null);throw new Error(Y?.message||"Gi email t li mt khu tht bi")}O({title:" gi email",description:"Hy kim tra hp th  ly m t li mt khu."}),u("confirm")}catch(ee){const Y=ee instanceof Error?ee.message:"C li xy ra, vui lng th li";O({title:"Li",description:Y,variant:"destructive"})}finally{x(!1)}},$=async W=>{if(W.preventDefault(),!i||!d||!g){O({title:"Thiu thng tin",description:"Vui lng nhp y  email, m v mt khu mi",variant:"destructive"});return}x(!0);try{const ee=await fetch(Qr+"/api/user/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,code:d,newPassword:g})});if(!ee.ok){const Y=await ee.json().catch(()=>null);throw new Error(Y?.message||"t li mt khu tht bi")}O({title:"Thnh cng",description:"Mt khu mi  c cp nht, hy ng nhp li."}),n(!1),u("request"),a(""),h(""),v("")}catch(ee){const Y=ee instanceof Error?ee.message:"C li xy ra, vui lng th li";O({title:"Li",description:Y,variant:"destructive"})}finally{x(!1)}},J=()=>{O({title:"ng nhp Google",description:"Tnh nng ng nhp Google s c tch hp ti y.",variant:"default"})},V=C||T;return r?p.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsx("div",{className:"w-full max-w-md z-10",children:p.jsxs("div",{className:"glass-card p-8 rounded-3xl animate-in zoom-in-95 duration-500",children:[p.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:l==="request"?"Qun mt khu":"Nhp m t li mt khu"}),p.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:l==="request"?"Nhp email  gn vi ti khon  nhn m t li mt khu.":"Kim tra email  ly m, sau  nhp m v mt khu mi bn di."}),l==="request"?p.jsxs("form",{onSubmit:z,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"Email"}),p.jsx(os,{type:"email",placeholder:"ban@example.com",value:i,onChange:W=>a(W.target.value),className:"glass-input h-12 rounded-xl text-lg font-medium"})]}),p.jsx(ut,{type:"submit",className:"w-full h-12 rounded-xl text-lg font-bold btn-primary",disabled:y,children:y?p.jsx(xu,{className:"w-5 h-5 animate-spin"}):"Gi m v email"}),p.jsx(ut,{type:"button",variant:"ghost",onClick:()=>{n(!1),u("request")},className:"w-full text-slate-400 hover:text-white",children:"Quay li ng nhp"})]}):p.jsxs("form",{onSubmit:$,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"Email"}),p.jsx(os,{type:"email",placeholder:"ban@example.com",value:i,onChange:W=>a(W.target.value),className:"glass-input h-11 rounded-xl text-base"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"M t li"}),p.jsx(os,{placeholder:"Nhp m gm 6 s",value:d,onChange:W=>h(W.target.value),className:"glass-input h-11 rounded-xl text-base"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"Mt khu mi"}),p.jsx(os,{type:"password",placeholder:"Mt khu mi",value:g,onChange:W=>v(W.target.value),className:"glass-input h-11 rounded-xl text-base"})]}),p.jsx(ut,{type:"submit",className:"w-full h-12 rounded-xl text-lg font-bold btn-primary",disabled:y,children:y?p.jsx(xu,{className:"w-5 h-5 animate-spin"}):"i mt khu"}),p.jsx(ut,{type:"button",variant:"ghost",onClick:()=>{u("request"),h(""),v("")},className:"w-full text-slate-400 hover:text-white",children:"Quay li bc gi m"})]})]})})]}):p.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsxs("div",{className:"w-full max-w-md z-10",children:[p.jsxs("div",{className:"text-center mb-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[p.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-2xl mx-auto flex items-center justify-center shadow-2xl shadow-indigo-900/40 rotate-12 mb-6",children:p.jsx(cd,{className:"w-8 h-8 text-white"})}),p.jsxs("h1",{className:"text-4xl md:text-5xl font-black italic tracking-tighter text-white drop-shadow-lg mb-1",children:["Chess",p.jsx("span",{className:"text-indigo-500",children:"Pro"})]}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-[0.2em] text-[10px]",children:"c vua ca ngi vit"})]}),p.jsxs("div",{className:"glass-card p-8 rounded-3xl animate-in zoom-in-95 duration-500",children:[p.jsxs("div",{className:"flex w-full mb-8 bg-slate-900/50 p-1 rounded-xl",children:[p.jsx("button",{onClick:()=>e(!0),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${t?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white"}`,children:"NG NHP"}),p.jsx("button",{onClick:()=>e(!1),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${t?"text-slate-400 hover:text-white":"bg-indigo-600 text-white shadow-lg"}`,children:"NG K"})]}),p.jsx(YR,{...A,children:p.jsxs("form",{onSubmit:A.handleSubmit(U),className:"space-y-4",children:[p.jsx(q0,{control:A.control,name:"username",render:({field:W})=>p.jsxs(Np,{children:[p.jsx(jp,{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"Tn ng nhp"}),p.jsx(Rp,{children:p.jsx(os,{placeholder:"Kythu123",...W,className:"glass-input h-12 rounded-xl text-lg font-medium"})}),p.jsx(Ap,{})]})}),p.jsx(q0,{control:A.control,name:"password",render:({field:W})=>p.jsxs(Np,{children:[p.jsx(jp,{className:"text-xs uppercase font-bold text-slate-500 tracking-wider ml-1",children:"Mt khu"}),p.jsx(Rp,{children:p.jsx(os,{type:"password",placeholder:"",...W,className:"glass-input h-12 rounded-xl text-lg font-medium"})}),p.jsx(Ap,{})]})}),t&&p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{type:"button",onClick:()=>n(!0),className:"text-xs text-indigo-400 hover:text-indigo-300 font-bold",children:"Qun mt khu?"})}),p.jsx(ut,{type:"submit",className:"w-full h-12 rounded-xl text-lg font-bold mt-6 btn-primary",disabled:V,children:V?p.jsx(xu,{className:"w-5 h-5 animate-spin"}):p.jsxs(p.Fragment,{children:[t?"Bt u chi":"To ti khon",p.jsx(il,{className:"w-5 h-5 ml-2"})]})}),p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t border-slate-700"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-[#0f172a] px-2 text-slate-500",children:"Hoc tip tc vi"})})]}),p.jsxs(ut,{type:"button",variant:"outline",onClick:J,className:"w-full h-12 rounded-xl border-slate-700 bg-slate-800/50 hover:bg-slate-800 text-white font-bold",children:[p.jsx(gp,{className:"w-4 h-4 mr-2 text-red-500"}),"ng nhp bng Gmail"]})]})})]})]})]})}let $_=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function XR(){const{user:t,logout:e}=lo(),[,r]=oo(),[n,i]=b.useState("");if(!t)return p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx(Ao,{href:"/auth",children:p.jsx(ut,{children:"ng nhp trc"})})});const a=()=>{const u=$_(6).toUpperCase();r(`/game/online/${u}`)},l=()=>{n.length>0&&r(`/game/online/${n.toUpperCase()}`)};return p.jsxs("div",{className:"min-h-screen bg-[#020617] text-white relative overflow-x-hidden",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12 md:py-20 flex flex-col items-center text-center",children:[p.jsxs("div",{className:"mb-12 animate-in fade-in slide-in-from-top-8 duration-700",children:[p.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-[2rem] mx-auto flex items-center justify-center shadow-2xl shadow-indigo-500/30 rotate-12 hover:rotate-6 transition-transform duration-300 mb-6",children:p.jsx(cd,{className:"w-10 h-10 text-white"})}),p.jsxs("h1",{className:"text-5xl md:text-7xl font-black italic tracking-tighter text-white drop-shadow-2xl mb-2",children:["Chess",p.jsx("span",{className:"text-indigo-500",children:"Pro"})]}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-[0.2em] text-xs md:text-sm",children:"c vua ca ngi vit"})]}),p.jsx("div",{className:"w-full max-w-sm mb-12",children:p.jsxs("div",{className:"glass-card p-2 rounded-full flex items-center justify-between pl-6 pr-2",children:[p.jsxs("span",{className:"font-bold text-slate-300",children:["Xin cho, ",t.username]}),p.jsx(ut,{variant:"ghost",size:"sm",onClick:()=>e(),className:"text-red-400 hover:text-red-300 hover:bg-red-950/30 rounded-full px-4",children:"ng xut"})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-4xl animate-in fade-in zoom-in-95 duration-700 delay-150",children:[p.jsxs("div",{className:"glass-card p-8 rounded-[2.5rem] flex flex-col items-center gap-6 group hover:border-indigo-500/30 transition-all duration-300",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-500/20 text-indigo-400 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx(ox,{className:"w-8 h-8"})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-black italic uppercase text-indigo-400 mb-1",children:"nh online"}),p.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"nh xp hng & giao hu"})]}),p.jsxs("div",{className:"w-full space-y-4",children:[p.jsx(Ao,{href:"/game/online/random",children:p.jsx(ut,{className:"w-full h-14 text-lg font-bold rounded-xl btn-primary mb-4",children:"Ghp trn nhanh"})}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t border-slate-700"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-[#0f172a] px-2 text-slate-500 font-bold",children:"Hoc chi vi bn b"})})]}),p.jsxs("div",{className:"flex gap-2 pt-2",children:[p.jsx(ut,{onClick:a,className:"flex-1 bg-slate-800 hover:bg-slate-700 text-indigo-400 border border-indigo-500/20 rounded-xl font-bold",children:"To phng"}),p.jsxs("div",{className:"flex-1 flex gap-2",children:[p.jsx("input",{value:n,onChange:u=>i(u.target.value),placeholder:"M PHNG",className:"glass-input w-full rounded-xl text-center font-bold tracking-widest uppercase text-sm"}),p.jsx(ut,{onClick:l,size:"icon",className:"bg-slate-800 hover:bg-slate-700 text-indigo-400 border border-indigo-500/20 rounded-xl font-bold shrink-0",children:p.jsx(il,{className:"w-4 h-4"})})]})]})]})]}),p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs(Ao,{href:"/game/ai/new",className:"flex-1 glass-card p-6 rounded-[2.5rem] flex items-center gap-6 group hover:border-emerald-500/30 transition-all cursor-pointer",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-emerald-500/20 text-emerald-400 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx(OC,{className:"w-8 h-8"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h2",{className:"text-3xl font-black italic uppercase text-emerald-400 mb-1",children:"nh vi AI"}),p.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Stockfish 15"})]}),p.jsx(il,{className:"ml-auto text-emerald-500/50 group-hover:translate-x-1 transition-transform"})]}),p.jsxs(Ao,{href:"/game/offline/local",className:"flex-1 glass-card p-6 rounded-[2.5rem] flex items-center gap-6 group hover:border-amber-500/30 transition-all cursor-pointer",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-amber-500/20 text-amber-400 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:p.jsx(xC,{className:"w-8 h-8"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h2",{className:"text-3xl font-black italic uppercase text-amber-400 mb-1",children:"Chi trn cng my"}),p.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Chuyn lt & nh lun phin"})]}),p.jsx(il,{className:"ml-auto text-amber-500/50 group-hover:translate-x-1 transition-transform"})]})]})]}),p.jsxs("div",{className:"mt-12 flex gap-4 w-full max-w-4xl",children:[p.jsxs(Ao,{href:"/social",className:"flex-1 glass-card px-8 py-4 rounded-2xl flex items-center justify-between border-indigo-500/10 cursor-pointer hover:bg-white/5 transition-colors group",children:[p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx(ud,{className:"w-5 h-5 text-yellow-500 group-hover:scale-110 transition-transform"}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:"Bng xp hng"}),p.jsx("div",{className:"text-sm font-bold text-white",children:"Xem cao th hng u"})]})]}),p.jsx(il,{className:"text-slate-500 group-hover:translate-x-1 transition-transform"})]}),p.jsxs(Ao,{href:"/profile",className:"glass-card px-8 py-4 rounded-2xl flex items-center gap-6 border-indigo-500/10 cursor-pointer hover:bg-white/5 transition-colors group",children:[p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:"Elo ca bn"}),p.jsx("div",{className:"text-xl font-black text-white group-hover:text-indigo-400 transition-colors",children:t.rating??0})]}),p.jsx("div",{className:"h-8 w-px bg-white/10 mx-2"}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:"Vn  chi"}),p.jsx("div",{className:"text-xl font-black text-white group-hover:text-indigo-400 transition-colors",children:t.gamesPlayed||0})]})]})]})]})]})}function eA(t){return t!==null?{comment:t,variations:[]}:{variations:[]}}function tA(t,e,r,n,i){const a={move:t,variations:i};return e&&(a.suffix=e),r&&(a.nag=r),n!==null&&(a.comment=n),a}function rA(...t){const[e,...r]=t;let n=e;for(const i of r)i!==null&&(n.variations=[i,...i.variations],i.variations=[],n=i);return e}function nA(t,e){if(e.marker&&e.marker.comment){let r=e.root;for(;;){const n=r.variations[0];if(!n){r.comment=e.marker.comment;break}r=n}}return{headers:t,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function sA(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function aa(t,e,r,n){var i=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(i,aa.prototype),i.expected=e,i.found=r,i.location=n,i.name="SyntaxError",i}sA(aa,Error);function Dh(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,r+=r.repeat(e),t+r.slice(0,e))}aa.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var r=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){r=t[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,a=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,l=this.location.source+":"+a.line+":"+a.column;if(r){var u=this.location.end,d=Dh("",a.line.toString().length," "),h=r[i.line-1],g=i.line===u.line?u.column:h.length+1,v=g-i.column||1;e+=`
 --> `+l+`
`+d+` |
`+a.line+" | "+h+`
`+d+" | "+Dh("",i.column-1," ")+Dh("",v,"^")}else e+=`
 at `+l}return e};aa.buildMessage=function(t,e){var r={literal:function(h){return'"'+i(h.text)+'"'},class:function(h){var g=h.parts.map(function(v){return Array.isArray(v)?a(v[0])+"-"+a(v[1]):a(v)});return"["+(h.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(h){return h.description}};function n(h){return h.charCodeAt(0).toString(16).toUpperCase()}function i(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+n(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+n(g)})}function a(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+n(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+n(g)})}function l(h){return r[h.type](h)}function u(h){var g=h.map(l),v,y;if(g.sort(),g.length>0){for(v=1,y=1;v<g.length;v++)g[v-1]!==g[v]&&(g[y]=g[v],y++);g.length=y}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function d(h){return h?'"'+i(h)+'"':"end of input"}return"Expected "+u(t)+" but "+d(e)+" found."};function iA(t,e){e=e!==void 0?e:{};var r={},n=e.grammarSource,i={pgn:ha},a=ha,l="[",u='"',d="]",h=".",g="O-O-O",v="O-O",y="0-0-0",x="0-0",S="$",_="{",E="}",C=";",T="(",O=")",A="1-0",U="0-1",z="1/2-1/2",$="*",J=/^[a-zA-Z]/,V=/^[^"]/,W=/^[0-9]/,ee=/^[.]/,Y=/^[a-zA-Z1-8\-=]/,te=/^[+#]/,Z=/^[!?]/,ke=/^[^}]/,fe=/^[^\r\n]/,Se=/^[ \t\r\n]/,H=ct("tag pair"),ue=nt("[",!1),ae=nt('"',!1),I=nt("]",!1),X=ct("tag name"),Pe=kt([["a","z"],["A","Z"]],!1,!1),ge=ct("tag value"),Le=kt(['"'],!0,!1),Qe=ct("move number"),qe=kt([["0","9"]],!1,!1),Ke=nt(".",!1),Me=kt(["."],!1,!1),yt=ct("standard algebraic notation"),kr=nt("O-O-O",!1),pr=nt("O-O",!1),Ft=nt("0-0-0",!1),er=nt("0-0",!1),_t=kt([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),bn=kt(["+","#"],!1,!1),ve=ct("suffix annotation"),An=kt(["!","?"],!1,!1),Br=ct("NAG"),Ar=nt("$",!1),or=ct("brace comment"),j=nt("{",!1),F=kt(["}"],!0,!1),Q=nt("}",!1),me=ct("rest of line comment"),pe=nt(";",!1),le=kt(["\r",`
`],!0,!1),_e=ct("variation"),Ze=nt("(",!1),ht=nt(")",!1),ot=ct("game termination marker"),gr=nt("1-0",!1),zr=nt("0-1",!1),Pt=nt("1/2-1/2",!1),Vr=nt("*",!1),sn=ct("whitespace"),St=kt([" ","	","\r",`
`],!1,!1),qr=function(L,K){return nA(L,K)},Ir=function(L){return Object.fromEntries(L)},Zr=function(L,K){return[L,K]},mr=function(L,K){return{root:L,marker:K}},lt=function(L,K){return rA(eA(L),...K.flat())},Nt=function(L,K,G,De,Ie){return tA(L,K,G,De,Ie)},At=function(L){return L},Mt=function(L){return L.replace(/[\r\n]+/g," ")},vr=function(L){return L.trim()},tr=function(L){return L},Ht=function(L,K){return{result:L,comment:K}},P=e.peg$currPos|0,ne=[{line:1,column:1}],ye=P,ze=e.peg$maxFailExpected||[],re=e.peg$silentFails|0,it;if(e.startRule){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');a=i[e.startRule]}function nt(L,K){return{type:"literal",text:L,ignoreCase:K}}function kt(L,K,G){return{type:"class",parts:L,inverted:K,ignoreCase:G}}function rr(){return{type:"end"}}function ct(L){return{type:"other",description:L}}function In(L){var K=ne[L],G;if(K)return K;if(L>=ne.length)G=ne.length-1;else for(G=L;!ne[--G];);for(K=ne[G],K={line:K.line,column:K.column};G<L;)t.charCodeAt(G)===10?(K.line++,K.column=1):K.column++,G++;return ne[L]=K,K}function Ei(L,K,G){var De=In(L),Ie=In(K),pt={source:n,start:{offset:L,line:De.line,column:De.column},end:{offset:K,line:Ie.line,column:Ie.column}};return pt}function be(L){P<ye||(P>ye&&(ye=P,ze=[]),ze.push(L))}function Dn(L,K,G){return new aa(aa.buildMessage(L,K),L,K,G)}function ha(){var L,K,G;return L=P,K=Rd(),G=Xl(),L=qr(K,G),L}function Rd(){var L,K,G;for(L=P,K=[],G=pa();G!==r;)K.push(G),G=pa();return G=Er(),L=Ir(K),L}function pa(){var L,K,G,De,Ie,pt,on;return re++,L=P,Er(),t.charCodeAt(P)===91?(K=l,P++):(K=r,re===0&&be(ue)),K!==r?(Er(),G=Zl(),G!==r?(Er(),t.charCodeAt(P)===34?(De=u,P++):(De=r,re===0&&be(ae)),De!==r?(Ie=Jl(),t.charCodeAt(P)===34?(pt=u,P++):(pt=r,re===0&&be(ae)),pt!==r?(Er(),t.charCodeAt(P)===93?(on=d,P++):(on=r,re===0&&be(I)),on!==r?L=Zr(G,Ie):(P=L,L=r)):(P=L,L=r)):(P=L,L=r)):(P=L,L=r)):(P=L,L=r),re--,L===r&&re===0&&be(H),L}function Zl(){var L,K,G;if(re++,L=P,K=[],G=t.charAt(P),J.test(G)?P++:(G=r,re===0&&be(Pe)),G!==r)for(;G!==r;)K.push(G),G=t.charAt(P),J.test(G)?P++:(G=r,re===0&&be(Pe));else K=r;return K!==r?L=t.substring(L,P):L=K,re--,L===r&&(K=r,re===0&&be(X)),L}function Jl(){var L,K,G;for(re++,L=P,K=[],G=t.charAt(P),V.test(G)?P++:(G=r,re===0&&be(Le));G!==r;)K.push(G),G=t.charAt(P),V.test(G)?P++:(G=r,re===0&&be(Le));return L=t.substring(L,P),re--,K=r,re===0&&be(ge),L}function Xl(){var L,K,G;return L=P,K=ec(),Er(),G=xn(),G===r&&(G=null),Er(),L=mr(K,G),L}function ec(){var L,K,G,De;for(L=P,K=Fs(),K===r&&(K=null),G=[],De=tc();De!==r;)G.push(De),De=tc();return L=lt(K,G),L}function tc(){var L,K,G,De,Ie,pt,on,vs;if(L=P,Er(),Ut(),Er(),K=Ad(),K!==r){for(G=ga(),G===r&&(G=null),De=[],Ie=ma();Ie!==r;)De.push(Ie),Ie=ma();for(Ie=Er(),pt=Fs(),pt===r&&(pt=null),on=[],vs=Ti();vs!==r;)on.push(vs),vs=Ti();L=Nt(K,G,De,pt,on)}else P=L,L=r;return L}function Ut(){var L,K,G,De,Ie,pt;for(re++,L=P,K=[],G=t.charAt(P),W.test(G)?P++:(G=r,re===0&&be(qe));G!==r;)K.push(G),G=t.charAt(P),W.test(G)?P++:(G=r,re===0&&be(qe));if(t.charCodeAt(P)===46?(G=h,P++):(G=r,re===0&&be(Ke)),G!==r){for(De=Er(),Ie=[],pt=t.charAt(P),ee.test(pt)?P++:(pt=r,re===0&&be(Me));pt!==r;)Ie.push(pt),pt=t.charAt(P),ee.test(pt)?P++:(pt=r,re===0&&be(Me));K=[K,G,De,Ie],L=K}else P=L,L=r;return re--,L===r&&(K=r,re===0&&be(Qe)),L}function Ad(){var L,K,G,De,Ie,pt;if(re++,L=P,K=P,t.substr(P,5)===g?(G=g,P+=5):(G=r,re===0&&be(kr)),G===r&&(t.substr(P,3)===v?(G=v,P+=3):(G=r,re===0&&be(pr)),G===r&&(t.substr(P,5)===y?(G=y,P+=5):(G=r,re===0&&be(Ft)),G===r&&(t.substr(P,3)===x?(G=x,P+=3):(G=r,re===0&&be(er)),G===r))))if(G=P,De=t.charAt(P),J.test(De)?P++:(De=r,re===0&&be(Pe)),De!==r){if(Ie=[],pt=t.charAt(P),Y.test(pt)?P++:(pt=r,re===0&&be(_t)),pt!==r)for(;pt!==r;)Ie.push(pt),pt=t.charAt(P),Y.test(pt)?P++:(pt=r,re===0&&be(_t));else Ie=r;Ie!==r?(De=[De,Ie],G=De):(P=G,G=r)}else P=G,G=r;return G!==r?(De=t.charAt(P),te.test(De)?P++:(De=r,re===0&&be(bn)),De===r&&(De=null),G=[G,De],K=G):(P=K,K=r),K!==r?L=t.substring(L,P):L=K,re--,L===r&&(K=r,re===0&&be(yt)),L}function ga(){var L,K,G;for(re++,L=P,K=[],G=t.charAt(P),Z.test(G)?P++:(G=r,re===0&&be(An));G!==r;)K.push(G),K.length>=2?G=r:(G=t.charAt(P),Z.test(G)?P++:(G=r,re===0&&be(An)));return K.length<1?(P=L,L=r):L=K,re--,L===r&&(K=r,re===0&&be(ve)),L}function ma(){var L,K,G,De,Ie;if(re++,L=P,Er(),t.charCodeAt(P)===36?(K=S,P++):(K=r,re===0&&be(Ar)),K!==r){if(G=P,De=[],Ie=t.charAt(P),W.test(Ie)?P++:(Ie=r,re===0&&be(qe)),Ie!==r)for(;Ie!==r;)De.push(Ie),Ie=t.charAt(P),W.test(Ie)?P++:(Ie=r,re===0&&be(qe));else De=r;De!==r?G=t.substring(G,P):G=De,G!==r?L=At(G):(P=L,L=r)}else P=L,L=r;return re--,L===r&&re===0&&be(Br),L}function Fs(){var L;return L=Id(),L===r&&(L=rc()),L}function Id(){var L,K,G,De,Ie;if(re++,L=P,t.charCodeAt(P)===123?(K=_,P++):(K=r,re===0&&be(j)),K!==r){for(G=P,De=[],Ie=t.charAt(P),ke.test(Ie)?P++:(Ie=r,re===0&&be(F));Ie!==r;)De.push(Ie),Ie=t.charAt(P),ke.test(Ie)?P++:(Ie=r,re===0&&be(F));G=t.substring(G,P),t.charCodeAt(P)===125?(De=E,P++):(De=r,re===0&&be(Q)),De!==r?L=Mt(G):(P=L,L=r)}else P=L,L=r;return re--,L===r&&(K=r,re===0&&be(or)),L}function rc(){var L,K,G,De,Ie;if(re++,L=P,t.charCodeAt(P)===59?(K=C,P++):(K=r,re===0&&be(pe)),K!==r){for(G=P,De=[],Ie=t.charAt(P),fe.test(Ie)?P++:(Ie=r,re===0&&be(le));Ie!==r;)De.push(Ie),Ie=t.charAt(P),fe.test(Ie)?P++:(Ie=r,re===0&&be(le));G=t.substring(G,P),L=vr(G)}else P=L,L=r;return re--,L===r&&(K=r,re===0&&be(me)),L}function Ti(){var L,K,G,De;return re++,L=P,Er(),t.charCodeAt(P)===40?(K=T,P++):(K=r,re===0&&be(Ze)),K!==r?(G=ec(),G!==r?(Er(),t.charCodeAt(P)===41?(De=O,P++):(De=r,re===0&&be(ht)),De!==r?L=tr(G):(P=L,L=r)):(P=L,L=r)):(P=L,L=r),re--,L===r&&re===0&&be(_e),L}function xn(){var L,K,G;return re++,L=P,t.substr(P,3)===A?(K=A,P+=3):(K=r,re===0&&be(gr)),K===r&&(t.substr(P,3)===U?(K=U,P+=3):(K=r,re===0&&be(zr)),K===r&&(t.substr(P,7)===z?(K=z,P+=7):(K=r,re===0&&be(Pt)),K===r&&(t.charCodeAt(P)===42?(K=$,P++):(K=r,re===0&&be(Vr))))),K!==r?(Er(),G=Fs(),G===r&&(G=null),L=Ht(K,G)):(P=L,L=r),re--,L===r&&(K=r,re===0&&be(ot)),L}function Er(){var L,K;for(re++,L=[],K=t.charAt(P),Se.test(K)?P++:(K=r,re===0&&be(St));K!==r;)L.push(K),K=t.charAt(P),Se.test(K)?P++:(K=r,re===0&&be(St));return re--,K=r,re===0&&be(sn),L}if(it=a(),e.peg$library)return{peg$result:it,peg$currPos:P,peg$FAILED:r,peg$maxFailExpected:ze,peg$maxFailPos:ye};if(it!==r&&P===t.length)return it;throw it!==r&&P<t.length&&be(rr()),Dn(ze,ye<t.length?t.charAt(ye):null,ye<t.length?Ei(ye,ye+1):Ei(ye,ye))}const ku=0xffffffffffffffffn;function Lh(t,e){return(t<<e|t>>64n-e)&0xffffffffffffffffn}function W0(t,e){return t*e&ku}function oA(t){return function(){let e=BigInt(t&ku),r=BigInt(t>>64n&ku);const n=W0(Lh(W0(e,5n),7n),9n);return r^=e,e=(Lh(e,24n)^r^r<<16n)&ku,r=Lh(r,37n),t=r<<64n|e,n}}const _d=oA(0xa187eb39cdcaed8f31c4b365b102e01en),aA=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>_d()))),lA=Array.from({length:8},()=>_d()),cA=Array.from({length:16},()=>_d()),Mh=_d(),Fr="w",dn="b",sr="p",Ip="n",Eu="b",ll="r",di="q",ur="k",$h="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class lu{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,r){const{color:n,piece:i,from:a,to:l,flags:u,captured:d,promotion:h}=r,g=xr(a),v=xr(l);this.color=n,this.piece=i,this.from=g,this.to=v,this.san=e._moveToSan(r,e._moves({legal:!0})),this.lan=g+v,this.before=e.fen(),e._makeMove(r),this.after=e.fen(),e._undoMove(),this.flags="";for(const y in Ye)Ye[y]&u&&(this.flags+=Fi[y]);d&&(this.captured=d),h&&(this.promotion=h,this.lan+=h)}isCapture(){return this.flags.indexOf(Fi.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Fi.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Fi.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Fi.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Fi.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Fi.BIG_PAWN)>-1}}const Or=-1,Fi={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Ye={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Dp={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},uA={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},dA={...Dp,...uA},We={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Fh={b:[16,32,17,15],w:[-16,-32,-17,-15]},H0={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},fA=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],hA=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],pA={p:1,n:2,b:4,r:8,q:16,k:32},gA="pnbrqkPNBRQK",K0=[Ip,Eu,ll,di],mA=7,vA=6,yA=1,wA=0,cu={[ur]:Ye.KSIDE_CASTLE,[di]:Ye.QSIDE_CASTLE},ai={w:[{square:We.a1,flag:Ye.QSIDE_CASTLE},{square:We.h1,flag:Ye.KSIDE_CASTLE}],b:[{square:We.a8,flag:Ye.QSIDE_CASTLE},{square:We.h8,flag:Ye.KSIDE_CASTLE}]},bA={b:yA,w:vA},Uh="--";function Yi(t){return t>>4}function Ll(t){return t&15}function F_(t){return"0123456789".indexOf(t)!==-1}function xr(t){const e=Ll(t),r=Yi(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(r,r+1)}function el(t){return t===Fr?dn:Fr}function xA(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const r=parseInt(e[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(e[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let l=0;l<i.length;l++){let u=0,d=!1;for(let h=0;h<i[l].length;h++)if(F_(i[l][h])){if(d)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};u+=parseInt(i[l][h],10),d=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[l][h]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};u+=1,d=!1}if(u!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const a=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:l,regex:u}of a){if(!u.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${l} king`};if((e[0].match(u)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${l} kings`}}return Array.from(i[0]+i[7]).some(l=>l.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function _A(t,e){const r=t.from,n=t.to,i=t.piece;let a=0,l=0,u=0;for(let d=0,h=e.length;d<h;d++){const g=e[d].from,v=e[d].to,y=e[d].piece;i===y&&r!==g&&n===v&&(a++,Yi(r)===Yi(g)&&l++,Ll(r)===Ll(g)&&u++)}return a>0?l>0&&u>0?xr(r):u>0?xr(r).charAt(1):xr(r).charAt(0):""}function li(t,e,r,n,i,a=void 0,l=Ye.NORMAL){const u=Yi(n);if(i===sr&&(u===mA||u===wA))for(let d=0;d<K0.length;d++){const h=K0[d];t.push({color:e,from:r,to:n,piece:i,captured:a,promotion:h,flags:l|Ye.PROMOTION})}else t.push({color:e,from:r,to:n,piece:i,captured:a,flags:l})}function G0(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:sr:(e=e.toLowerCase(),e==="o"?ur:e)}function Bh(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class ci{_board=new Array(128);_turn=Fr;_header={};_kings={w:Or,b:Or};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=$h,{skipValidation:r=!1}={}){this.load(e,{skipValidation:r})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Or,b:Or},this._turn=Fr,this._castling={w:0,b:0},this._epSquare=Or,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...dA},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:r=!1,preserveHeaders:n=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const u=["-","-","0","1"];e=i.concat(u.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!r){const{ok:u,error:d}=xA(e);if(!u)throw new Error(d)}const a=i[0];let l=0;this.clear({preserveHeaders:n});for(let u=0;u<a.length;u++){const d=a.charAt(u);if(d==="/")l+=8;else if(F_(d))l+=parseInt(d,10);else{const h=d<"a"?Fr:dn;this._put({type:d.toLowerCase(),color:h},xr(l)),l++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=Ye.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=Ye.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=Ye.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=Ye.QSIDE_CASTLE),this._epSquare=i[3]==="-"?Or:We[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let r=0,n="";for(let l=We.a8;l<=We.h1;l++){if(this._board[l]){r>0&&(n+=r,r=0);const{color:u,type:d}=this._board[l];n+=u===Fr?d.toUpperCase():d.toLowerCase()}else r++;l+1&136&&(r>0&&(n+=r),l!==We.h1&&(n+="/"),r=0,l+=8)}let i="";this._castling[Fr]&Ye.KSIDE_CASTLE&&(i+="K"),this._castling[Fr]&Ye.QSIDE_CASTLE&&(i+="Q"),this._castling[dn]&Ye.KSIDE_CASTLE&&(i+="k"),this._castling[dn]&Ye.QSIDE_CASTLE&&(i+="q"),i=i||"-";let a="-";if(this._epSquare!==Or)if(e)a=xr(this._epSquare);else{const l=this._epSquare+(this._turn===Fr?16:-16),u=[l+1,l-1];for(const d of u){if(d&136)continue;const h=this._turn;if(this._board[d]?.color===h&&this._board[d]?.type===sr){this._makeMove({color:h,from:d,to:this._epSquare,piece:sr,captured:sr,flags:Ye.EP_CAPTURE});const g=!this._isKingAttacked(h);if(this._undoMove(),g){a=xr(this._epSquare);break}}}}return[n,this._turn,i,a,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:r,type:n}=this._board[e],i={w:0,b:1}[r],a={p:0,n:1,b:2,r:3,q:4,k:5}[n];return aA[i][a][e]}_epKey(){return this._epSquare===Or?0n:lA[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return cA[e]}_computeHash(){let e=0n;for(let r=We.a8;r<=We.h1;r++){if(r&136){r+=7;continue}this._board[r]&&(e^=this._pieceKey(r))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Mh),e}_updateSetup(e){this._history.length>0||(e!==$h?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load($h)}get(e){return this._board[We[e]]}findPiece(e){const r=[];for(let n=We.a8;n<=We.h1;n++){if(n&136){n+=7;continue}!this._board[n]||this._board[n]?.color!==e.color||this._board[n].color===e.color&&this._board[n].type===e.type&&r.push(xr(n))}return r}put({type:e,color:r},n){return this._put({type:e,color:r},n)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,r){this._hash^=this._pieceKey(e),this._board[e]=r,this._hash^=this._pieceKey(e)}_put({type:e,color:r},n){if(gA.indexOf(e.toLowerCase())===-1||!(n in We))return!1;const i=We[n];if(e==ur&&!(this._kings[r]==Or||this._kings[r]==i))return!1;const a=this._board[i];return a&&a.type===ur&&(this._kings[a.color]=Or),this._set(i,{type:e,color:r}),e===ur&&(this._kings[r]=i),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const r=this.get(e);return this._clear(We[e]),r&&r.type===ur&&(this._kings[r.color]=Or),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),r}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[We.e1]?.type===ur&&this._board[We.e1]?.color===Fr,r=this._board[We.e8]?.type===ur&&this._board[We.e8]?.color===dn;(!e||this._board[We.a1]?.type!==ll||this._board[We.a1]?.color!==Fr)&&(this._castling.w&=-65),(!e||this._board[We.h1]?.type!==ll||this._board[We.h1]?.color!==Fr)&&(this._castling.w&=-33),(!r||this._board[We.a8]?.type!==ll||this._board[We.a8]?.color!==dn)&&(this._castling.b&=-65),(!r||this._board[We.h8]?.type!==ll||this._board[We.h8]?.color!==dn)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Or)return;const e=this._epSquare+(this._turn===Fr?-16:16),r=this._epSquare+(this._turn===Fr?16:-16),n=[r+1,r-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[r]?.color!==el(this._turn)||this._board[r]?.type!==sr){this._hash^=this._epKey(),this._epSquare=Or;return}const i=a=>!(a&136)&&this._board[a]?.color===this._turn&&this._board[a]?.type===sr;n.some(i)||(this._hash^=this._epKey(),this._epSquare=Or)}_attacked(e,r,n){const i=[];for(let a=We.a8;a<=We.h1;a++){if(a&136){a+=7;continue}if(this._board[a]===void 0||this._board[a].color!==e)continue;const l=this._board[a],u=a-r;if(u===0)continue;const d=u+119;if(fA[d]&pA[l.type]){if(l.type===sr){if(u>0&&l.color===Fr||u<=0&&l.color===dn)if(n)i.push(xr(a));else return!0;continue}if(l.type==="n"||l.type==="k")if(n){i.push(xr(a));continue}else return!0;const h=hA[d];let g=a+h,v=!1;for(;g!==r;){if(this._board[g]!=null){v=!0;break}g+=h}if(!v)if(n){i.push(xr(a));continue}else return!0}}return n?i:!1}attackers(e,r){return r?this._attacked(r,We[e],!0):this._attacked(this._turn,We[e],!0)}_isKingAttacked(e){const r=this._kings[e];return r===-1?!1:this._attacked(el(e),r)}hash(){return this._hash.toString(16)}isAttacked(e,r){return this._attacked(r,We[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},r=[];let n=0,i=0;for(let a=We.a8;a<=We.h1;a++){if(i=(i+1)%2,a&136){a+=7;continue}const l=this._board[a];l&&(e[l.type]=l.type in e?e[l.type]+1:1,l.type===Eu&&r.push(i),n++)}if(n===2)return!0;if(n===3&&(e[Eu]===1||e[Ip]===1))return!0;if(n===e[Eu]+2){let a=0;const l=r.length;for(let u=0;u<l;u++)a+=r[u];if(a===0||a===l)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:r=void 0,piece:n=void 0}={}){const i=this._moves({square:r,piece:n});return e?i.map(a=>new lu(this,a)):i.map(a=>this._moveToSan(a,i))}_moves({legal:e=!0,piece:r=void 0,square:n=void 0}={}){const i=n?n.toLowerCase():void 0,a=r?.toLowerCase(),l=[],u=this._turn,d=el(u);let h=We.a8,g=We.h1,v=!1;if(i)if(i in We)h=g=We[i],v=!0;else return[];for(let x=h;x<=g;x++){if(x&136){x+=7;continue}if(!this._board[x]||this._board[x].color===d)continue;const{type:S}=this._board[x];let _;if(S===sr){if(a&&a!==S)continue;_=x+Fh[u][0],this._board[_]||(li(l,u,x,_,sr),_=x+Fh[u][1],bA[u]===Yi(x)&&!this._board[_]&&li(l,u,x,_,sr,void 0,Ye.BIG_PAWN));for(let E=2;E<4;E++)_=x+Fh[u][E],!(_&136)&&(this._board[_]?.color===d?li(l,u,x,_,sr,this._board[_].type,Ye.CAPTURE):_===this._epSquare&&li(l,u,x,_,sr,sr,Ye.EP_CAPTURE))}else{if(a&&a!==S)continue;for(let E=0,C=H0[S].length;E<C;E++){const T=H0[S][E];for(_=x;_+=T,!(_&136);){if(!this._board[_])li(l,u,x,_,S);else{if(this._board[_].color===u)break;li(l,u,x,_,S,this._board[_].type,Ye.CAPTURE);break}if(S===Ip||S===ur)break}}}}if((a===void 0||a===ur)&&(!v||g===this._kings[u])){if(this._castling[u]&Ye.KSIDE_CASTLE){const x=this._kings[u],S=x+2;!this._board[x+1]&&!this._board[S]&&!this._attacked(d,this._kings[u])&&!this._attacked(d,x+1)&&!this._attacked(d,S)&&li(l,u,this._kings[u],S,ur,void 0,Ye.KSIDE_CASTLE)}if(this._castling[u]&Ye.QSIDE_CASTLE){const x=this._kings[u],S=x-2;!this._board[x-1]&&!this._board[x-2]&&!this._board[x-3]&&!this._attacked(d,this._kings[u])&&!this._attacked(d,x-1)&&!this._attacked(d,S)&&li(l,u,this._kings[u],S,ur,void 0,Ye.QSIDE_CASTLE)}}if(!e||this._kings[u]===-1)return l;const y=[];for(let x=0,S=l.length;x<S;x++)this._makeMove(l[x]),this._isKingAttacked(u)||y.push(l[x]),this._undoMove();return y}move(e,{strict:r=!1}={}){let n=null;if(typeof e=="string")n=this._moveFromSan(e,r);else if(e===null)n=this._moveFromSan(Uh,r);else if(typeof e=="object"){const a=this._moves();for(let l=0,u=a.length;l<u;l++)if(e.from===xr(a[l].from)&&e.to===xr(a[l].to)&&(!("promotion"in a[l])||e.promotion===a[l].promotion)){n=a[l];break}}if(!n)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&n.flags&Ye.NULL_MOVE)throw new Error("Null move not allowed when in check");const i=new lu(this,n);return this._makeMove(n),this._incPositionCount(),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,r){this._hash^=this._pieceKey(e),this._board[r]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(r)}_makeMove(e){const r=this._turn,n=el(r);if(this._push(e),e.flags&Ye.NULL_MOVE){r===dn&&this._moveNumber++,this._halfMoves++,this._turn=n,this._epSquare=Or;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&Ye.EP_CAPTURE&&(this._turn===dn?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:r})),this._board[e.to].type===ur){if(this._kings[r]=e.to,e.flags&Ye.KSIDE_CASTLE){const i=e.to-1,a=e.to+1;this._movePiece(a,i)}else if(e.flags&Ye.QSIDE_CASTLE){const i=e.to+1,a=e.to-2;this._movePiece(a,i)}this._castling[r]=0}if(this._castling[r]){for(let i=0,a=ai[r].length;i<a;i++)if(e.from===ai[r][i].square&&this._castling[r]&ai[r][i].flag){this._castling[r]^=ai[r][i].flag;break}}if(this._castling[n]){for(let i=0,a=ai[n].length;i<a;i++)if(e.to===ai[n][i].square&&this._castling[n]&ai[n][i].flag){this._castling[n]^=ai[n][i].flag;break}}if(this._hash^=this._castlingKey(),e.flags&Ye.BIG_PAWN){let i;r===dn?i=e.to-16:i=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===sr&&this._board[e.to-1]?.color===n||!(e.to+1&136)&&this._board[e.to+1]?.type===sr&&this._board[e.to+1]?.color===n?(this._epSquare=i,this._hash^=this._epKey()):this._epSquare=Or}else this._epSquare=Or;e.piece===sr?this._halfMoves=0:e.flags&(Ye.CAPTURE|Ye.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,r===dn&&this._moveNumber++,this._turn=n,this._hash^=Mh}undo(){const e=this._hash,r=this._undoMove();if(r){const n=new lu(this,r);return this._decPositionCount(e),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const r=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Mh;const n=this._turn,i=el(n);if(r.flags&Ye.NULL_MOVE)return r;if(this._movePiece(r.to,r.from),r.piece&&(this._clear(r.from),this._set(r.from,{type:r.piece,color:n})),r.captured)if(r.flags&Ye.EP_CAPTURE){let a;n===dn?a=r.to-16:a=r.to+16,this._set(a,{type:sr,color:i})}else this._set(r.to,{type:r.captured,color:i});if(r.flags&(Ye.KSIDE_CASTLE|Ye.QSIDE_CASTLE)){let a,l;r.flags&Ye.KSIDE_CASTLE?(a=r.to+1,l=r.to-1):(a=r.to-2,l=r.to+1),this._movePiece(l,a)}return r}pgn({newline:e=`
`,maxWidth:r=0}={}){const n=[];let i=!1;for(const y in this._header)this._header[y]&&n.push(`[${y} "${this._header[y]}"]`+e),i=!0;i&&this._history.length&&n.push(e);const a=y=>{const x=this._comments[this.fen()];if(typeof x<"u"){const S=y.length>0?" ":"";y=`${y}${S}{${x}}`}return y},l=[];for(;this._history.length>0;)l.push(this._undoMove());const u=[];let d="";for(l.length===0&&u.push(a(""));l.length>0;){d=a(d);const y=l.pop();if(!y)break;if(!this._history.length&&y.color==="b"){const x=`${this._moveNumber}. ...`;d=d?`${d} ${x}`:x}else y.color==="w"&&(d.length&&u.push(d),d=this._moveNumber+".");d=d+" "+this._moveToSan(y,this._moves({legal:!0})),this._makeMove(y)}if(d.length&&u.push(a(d)),u.push(this._header.Result||"*"),r===0)return n.join("")+u.join(" ");const h=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},g=function(y,x){for(const S of x.split(" "))if(S){if(y+S.length>r){for(;h();)y--;n.push(e),y=0}n.push(S),y+=S.length,n.push(" "),y++}return h()&&y--,y};let v=0;for(let y=0;y<u.length;y++){if(v+u[y].length>r&&u[y].includes("{")){v=g(v,u[y]);continue}v+u[y].length>r&&y!==0?(n[n.length-1]===" "&&n.pop(),n.push(e),v=0):y!==0&&(n.push(" "),v++),n.push(u[y]),v+=u[y].length}return n.join("")}header(...e){for(let r=0;r<e.length;r+=2)typeof e[r]=="string"&&typeof e[r+1]=="string"&&(this._header[e[r]]=e[r+1]);return this._header}setHeader(e,r){return this._header[e]=r??Dp[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=Dp[e]||null,!0):!1}getHeaders(){const e={};for(const[r,n]of Object.entries(this._header))n!==null&&(e[r]=n);return e}loadPgn(e,{strict:r=!1,newlineChar:n=`\r?
`}={}){n!==`\r?
`&&(e=e.replace(new RegExp(n,"g"),`
`));const i=iA(e);this.reset();const a=i.headers;let l="";for(const h in a)h.toLowerCase()==="fen"&&(l=a[h]),this.header(h,a[h]);if(!r)l&&this.load(l,{preserveHeaders:!0});else if(a.SetUp==="1"){if(!("FEN"in a))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(a.FEN,{preserveHeaders:!0})}let u=i.root;for(;u;){if(u.move){const h=this._moveFromSan(u.move,r);if(h==null)throw new Error(`Invalid move in PGN: ${u.move}`);this._makeMove(h),this._incPositionCount()}u.comment!==void 0&&(this._comments[this.fen()]=u.comment),u=u.variations[0]}const d=i.result;d&&Object.keys(this._header).length&&this._header.Result!==d&&this.setHeader("Result",d)}_moveToSan(e,r){let n="";if(e.flags&Ye.KSIDE_CASTLE)n="O-O";else if(e.flags&Ye.QSIDE_CASTLE)n="O-O-O";else{if(e.flags&Ye.NULL_MOVE)return Uh;if(e.piece!==sr){const i=_A(e,r);n+=e.piece.toUpperCase()+i}e.flags&(Ye.CAPTURE|Ye.EP_CAPTURE)&&(e.piece===sr&&(n+=xr(e.from)[0]),n+="x"),n+=xr(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,r=!1){let n=Bh(e);if(r||(n==="0-0"?n="O-O":n==="0-0-0"&&(n="O-O-O")),n==Uh)return{color:this._turn,from:0,to:0,piece:"k",flags:Ye.NULL_MOVE};let i=G0(n),a=this._moves({legal:!0,piece:i});for(let y=0,x=a.length;y<x;y++)if(n===Bh(this._moveToSan(a[y],a)))return a[y];if(r)return null;let l,u,d,h,g,v=!1;if(u=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),u?(l=u[1],d=u[2],h=u[3],g=u[4],d.length==1&&(v=!0)):(u=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),u&&(l=u[1],d=u[2],h=u[3],g=u[4],d.length==1&&(v=!0))),i=G0(n),a=this._moves({legal:!0,piece:l||i}),!h)return null;for(let y=0,x=a.length;y<x;y++)if(d){if((!l||l.toLowerCase()==a[y].piece)&&We[d]==a[y].from&&We[h]==a[y].to&&(!g||g.toLowerCase()==a[y].promotion))return a[y];if(v){const S=xr(a[y].from);if((!l||l.toLowerCase()==a[y].piece)&&We[h]==a[y].to&&(d==S[0]||d==S[1])&&(!g||g.toLowerCase()==a[y].promotion))return a[y]}}else if(n===Bh(this._moveToSan(a[y],a)).replace("x",""))return a[y];return null}ascii(){let e=`   +------------------------+
`;for(let r=We.a8;r<=We.h1;r++){if(Ll(r)===0&&(e+=" "+"87654321"[Yi(r)]+" |"),this._board[r]){const n=this._board[r].type,a=this._board[r].color===Fr?n.toUpperCase():n.toLowerCase();e+=" "+a+" "}else e+=" . ";r+1&136&&(e+=`|
`,r+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const r=this._moves({legal:!1});let n=0;const i=this._turn;for(let a=0,l=r.length;a<l;a++)this._makeMove(r[a]),this._isKingAttacked(i)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let r=[];for(let n=We.a8;n<=We.h1;n++)this._board[n]==null?r.push(null):r.push({square:xr(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(r),r=[],n+=8);return e}squareColor(e){if(e in We){const r=We[e];return(Yi(r)+Ll(r))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const r=[],n=[];for(;this._history.length>0;)r.push(this._undoMove());for(;;){const i=r.pop();if(!i)break;e?n.push(new lu(this,i)):n.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return n}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const r=this._positionCount.get(e)??0;r===1?this._positionCount.delete(e):this._positionCount.set(e,r-1)}_pruneComments(){const e=[],r={},n=i=>{i in this._comments&&(r[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),n(this.fen())}this._comments=r}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const r=this._comments[e];return delete this._comments[e],{fen:e,comment:r}})}setCastlingRights(e,r){for(const i of[ur,di])r[i]!==void 0&&(r[i]?this._castling[e]|=cu[i]:this._castling[e]&=~cu[i]);this._updateCastlingRights();const n=this.getCastlingRights(e);return(r[ur]===void 0||r[ur]===n[ur])&&(r[di]===void 0||r[di]===n[di])}getCastlingRights(e){return{[ur]:(this._castling[e]&cu[ur])!==0,[di]:(this._castling[e]&cu[di])!==0}}moveNumber(){return this._moveNumber}}const SA="https://cdn.jsdelivr.net/npm/stockfish@15.0.0/src/stockfish.min.js";let tl=null;function kA(){return tl||(tl=fetch(SA).then(t=>t.blob()).then(t=>URL.createObjectURL(t)).catch(t=>{throw console.error("Failed to load Stockfish",t),tl=null,t}),tl)}function EA(t,e=10){const[r,n]=b.useState(null),[i,a]=b.useState("0.0"),[l,u]=b.useState(!1),d=b.useRef(null),h=b.useRef("w");b.useEffect(()=>{let v=!1;return kA().then(y=>{if(v)return;const x=new Worker(y);x.onmessage=_=>{const E=_.data;if(typeof E=="string"){if(E.startsWith("bestmove")){const C=E.split(" ")[1];C&&(n({from:C.substring(0,2),to:C.substring(2,4)}),u(!1))}else if(E.includes("score cp")){const C=E.match(/score cp (-?\d+)/);if(C){let T=parseInt(C[1])/100;h.current==="b"&&(T=-T),a(T.toFixed(2))}}else if(E.includes("score mate")){const C=E.match(/score mate (-?\d+)/);if(C){let T=parseInt(C[1]);h.current==="b"&&(T=-T),a(T>0?`M${Math.abs(T)}`:`-M${Math.abs(T)}`)}}}};const S=Math.min(4,navigator.hardwareConcurrency||1);x.postMessage("uci"),x.postMessage(`setoption name Threads value ${S}`),x.postMessage("setoption name Hash value 128"),x.postMessage("setoption name MultiPV value 1"),x.postMessage("setoption name Skill Level value 20"),x.postMessage("setoption name UCI_LimitStrength value false"),x.postMessage("setoption name Ponder value false"),x.postMessage("isready"),d.current=x}).catch(y=>console.error("Failed to load Stockfish",y)),()=>{v=!0,d.current?.terminate(),d.current=null}},[]);const g=b.useCallback(v=>{if(!d.current)return;u(!0),n(null);const y=v.split(" ");y.length>1&&(h.current=y[1]),d.current.postMessage(`position fen ${v}`),d.current.postMessage("go movetime 1500")},[]);return{bestMove:r,evaluation:i,isThinking:l,search:g}}const U_=b.createContext({dragDropManager:void 0});function On(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Q0=typeof Symbol=="function"&&Symbol.observable||"@@observable",Y0=function(){return Math.random().toString(36).substring(7).split("").join(".")},Z0={INIT:"@@redux/INIT"+Y0(),REPLACE:"@@redux/REPLACE"+Y0()};function B_(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(On(0));if(typeof e=="function"&&r===void 0&&(r=e,e=void 0),r!==void 0){if(typeof r!="function")throw new Error(On(1));return r(B_)(t,e)}if(typeof t!="function")throw new Error(On(2));var i=t,a=e,l=[],u=l,d=!1;function h(){u===l&&(u=l.slice())}function g(){if(d)throw new Error(On(3));return a}function v(x){if(typeof x!="function")throw new Error(On(4));if(d)throw new Error(On(5));var S=!0;return h(),u.push(x),function(){if(S){if(d)throw new Error(On(6));S=!1,h();var _=u.indexOf(x);u.splice(_,1),l=null}}}function y(x){if(!(function(E){if(typeof E!="object"||E===null)return!1;for(var C=E;Object.getPrototypeOf(C)!==null;)C=Object.getPrototypeOf(C);return Object.getPrototypeOf(E)===C})(x))throw new Error(On(7));if(x.type===void 0)throw new Error(On(8));if(d)throw new Error(On(9));try{d=!0,a=i(a,x)}finally{d=!1}for(var S=l=u,_=0;_<S.length;_++)(0,S[_])();return x}return y({type:Z0.INIT}),(n={dispatch:y,subscribe:v,getState:g,replaceReducer:function(x){if(typeof x!="function")throw new Error(On(10));i=x,y({type:Z0.REPLACE})}})[Q0]=function(){var x,S=v;return(x={subscribe:function(_){if(typeof _!="object"||_===null)throw new Error(On(11));function E(){_.next&&_.next(g())}return E(),{unsubscribe:S(E)}}})[Q0]=function(){return this},x},n}function Je(t,e,...r){if(typeof process<"u"&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,(function(){return r[i++]}))),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function z_(t){return typeof t=="object"}const Ig="dnd-core/INIT_COORDS",Dg="dnd-core/BEGIN_DRAG",V_="dnd-core/PUBLISH_DRAG_SOURCE",Sd="dnd-core/HOVER",Lg="dnd-core/DROP",Mg="dnd-core/END_DRAG";function J0(t,e){return{type:Ig,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const TA={type:Ig,payload:{clientOffset:null,sourceClientOffset:null}};function CA(t){return function(e=[],r={publishSource:!0}){const{publishSource:n=!0,clientOffset:i,getSourceClientOffset:a}=r,l=t.getMonitor(),u=t.getRegistry();t.dispatch(J0(i)),(function(y,x,S){Je(!x.isDragging(),"Cannot call beginDrag while dragging."),y.forEach((function(_){Je(S.getSource(_),"Expected sourceIds to be registered.")}))})(e,l,u);const d=(function(y,x){let S=null;for(let _=y.length-1;_>=0;_--)if(x.canDragSource(y[_])){S=y[_];break}return S})(e,l);if(d==null)return void t.dispatch(TA);let h=null;if(i){if(!a)throw new Error("getSourceClientOffset must be defined");(function(y){Je(typeof y=="function","When clientOffset is provided, getSourceClientOffset must be a function.")})(a),h=a(d)}t.dispatch(J0(i,h));const g=u.getSource(d).beginDrag(l,d);if(g==null)return;(function(y){Je(z_(y),"Item must be an object.")})(g),u.pinSource(d);const v=u.getSourceType(d);return{type:Dg,payload:{itemType:v,item:g,sourceId:d,clientOffset:i||null,sourceClientOffset:h||null,isSourcePublic:!!n}}}}function OA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})))),n.forEach((function(i){OA(t,i,r[i])}))}return t}function NA(t){return function(e={}){const r=t.getMonitor(),n=t.getRegistry();(function(a){Je(a.isDragging(),"Cannot call drop while not dragging."),Je(!a.didDrop(),"Cannot call drop twice during one drag operation.")})(r),(function(a){const l=a.getTargetIds().filter(a.canDropOnTarget,a);return l.reverse(),l})(r).forEach(((a,l)=>{const u=(function(h,g,v,y){const x=v.getTarget(h);let S=x?x.drop(y,h):void 0;return(function(_){Je(_===void 0||z_(_),"Drop result must either be an object or undefined.")})(S),S===void 0&&(S=g===0?{}:y.getDropResult()),S})(a,l,n,r),d={type:Lg,payload:{dropResult:PA({},e,u)}};t.dispatch(d)}))}}function jA(t){return function(){const e=t.getMonitor(),r=t.getRegistry();(function(i){Je(i.isDragging(),"Cannot call endDrag while not dragging.")})(e);const n=e.getSourceId();return n!=null&&(r.getSource(n,!0).endDrag(e,n),r.unpinSource()),{type:Mg}}}function Lp(t,e){return e===null?t===null:Array.isArray(t)?t.some((r=>r===e)):t===e}function RA(t){return function(e,{clientOffset:r}={}){(function(l){Je(Array.isArray(l),"Expected targetIds to be an array.")})(e);const n=e.slice(0),i=t.getMonitor(),a=t.getRegistry();return(function(l,u,d){for(let h=l.length-1;h>=0;h--){const g=l[h];Lp(u.getTargetType(g),d)||l.splice(h,1)}})(n,a,i.getItemType()),(function(l,u,d){Je(u.isDragging(),"Cannot call hover while not dragging."),Je(!u.didDrop(),"Cannot call hover after drop.");for(let h=0;h<l.length;h++){const g=l[h];Je(l.lastIndexOf(g)===h,"Expected targetIds to be unique in the passed array."),Je(d.getTarget(g),"Expected targetIds to be registered.")}})(n,i,a),(function(l,u,d){l.forEach((function(h){d.getTarget(h).hover(u,h)}))})(n,i,a),{type:Sd,payload:{targetIds:n,clientOffset:r||null}}}}function AA(t){return function(){if(t.getMonitor().isDragging())return{type:V_}}}class IA{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store,n=(function(i){return{beginDrag:CA(i),publishDragSource:AA(i),hover:RA(i),drop:NA(i),endDrag:jA(i)}})(this);return Object.keys(n).reduce(((i,a)=>{const l=n[a];var u;return i[a]=(u=l,(...d)=>{const h=u.apply(e,d);h!==void 0&&r(h)}),i}),{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function X0(t,e){return{x:t.x-e.x,y:t.y-e.y}}const gl=[],$g=[];gl.__IS_NONE__=!0,$g.__IS_ALL__=!0;class DA{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;Je(typeof e=="function","listener must be a function."),Je(n===void 0||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;return this.store.subscribe((()=>{const a=this.store.getState(),l=a.stateId;try{l===i||l===i+1&&!(function(d,h){return d!==gl&&(d===$g||h===void 0||(g=d,h.filter((v=>g.indexOf(v)>-1))).length>0);var g})(a.dirtyHandlerIds,n)||e()}finally{i=l}}))}subscribeToOffsetChange(e){Je(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;return this.store.subscribe((()=>{const n=this.store.getState().dragOffset;n!==r&&(r=n,e())}))}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return Je(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()&&r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);return Je(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop()?!1:Lp(this.registry.getTargetType(e),this.getItemType())&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);return Je(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic()?!1:this.registry.getSourceType(e)===this.getItemType()&&r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!Lp(i,a))return!1;const l=this.getTargetIds();if(!l.length)return!1;const u=l.indexOf(e);return n?u===l.length-1:u>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return(function(e){const{clientOffset:r,initialClientOffset:n,initialSourceClientOffset:i}=e;return r&&n&&i?X0((l=i,{x:(a=r).x+l.x,y:a.y+l.y}),n):null;var a,l})(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return(function(e){const{clientOffset:r,initialClientOffset:n}=e;return r&&n?X0(r,n):null})(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const ew=typeof global<"u"?global:self,tw=ew.MutationObserver||ew.WebKitMutationObserver;function q_(t){return function(){const e=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(e),clearInterval(r),t()}}}const LA=typeof tw=="function"?function(t){let e=1;const r=new tw(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}:q_;class MA{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}const W_=new class{enqueueTask(t){const{queue:e,requestFlush:r}=this;e.length||(r(),this.flushing=!0),e[e.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const e=this.index;if(this.index++,t[e].call(),this.index>this.capacity){for(let r=0,n=t.length-this.index;r<n;r++)t[r]=t[r+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=LA(this.flush),this.requestErrorThrow=q_((()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()}))}},$A=new class{create(t){const e=this.freeTasks,r=e.length?e.pop():new MA(this.onError,(n=>e[e.length]=n));return r.task=t,r}constructor(t){this.onError=t,this.freeTasks=[]}}(W_.registerPendingError),Fg="dnd-core/ADD_SOURCE",Ug="dnd-core/ADD_TARGET",Bg="dnd-core/REMOVE_SOURCE",kd="dnd-core/REMOVE_TARGET";function Mp(t,e){e&&Array.isArray(t)?t.forEach((r=>Mp(r,!1))):Je(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Nn;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Nn||(Nn={}));let FA=0;function UA(t){const e=(FA++).toString();switch(t){case Nn.SOURCE:return`S${e}`;case Nn.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function rw(t){switch(t[0]){case"S":return Nn.SOURCE;case"T":return Nn.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function nw(t,e){const r=t.entries();let n=!1;do{const{done:i,value:[,a]}=r.next();if(a===e)return!0;n=!!i}while(!n);return!1}class BA{addSource(e,r){Mp(e),(function(i){Je(typeof i.canDrag=="function","Expected canDrag to be a function."),Je(typeof i.beginDrag=="function","Expected beginDrag to be a function."),Je(typeof i.endDrag=="function","Expected endDrag to be a function.")})(r);const n=this.addHandler(Nn.SOURCE,e,r);return this.store.dispatch((function(i){return{type:Fg,payload:{sourceId:i}}})(n)),n}addTarget(e,r){Mp(e,!0),(function(i){Je(typeof i.canDrop=="function","Expected canDrop to be a function."),Je(typeof i.hover=="function","Expected hover to be a function."),Je(typeof i.drop=="function","Expected beginDrag to be a function.")})(r);const n=this.addHandler(Nn.TARGET,e,r);return this.store.dispatch((function(i){return{type:Ug,payload:{targetId:i}}})(n)),n}containsHandler(e){return nw(this.dragSources,e)||nw(this.dropTargets,e)}getSource(e,r=!1){return Je(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Je(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Je(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Je(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return rw(e)===Nn.SOURCE}isTargetId(e){return rw(e)===Nn.TARGET}removeSource(e){var r;Je(this.getSource(e),"Expected an existing source."),this.store.dispatch((function(n){return{type:Bg,payload:{sourceId:n}}})(e)),r=()=>{this.dragSources.delete(e),this.types.delete(e)},W_.enqueueTask($A.create(r))}removeTarget(e){Je(this.getTarget(e),"Expected an existing target."),this.store.dispatch((function(r){return{type:kd,payload:{targetId:r}}})(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);Je(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){Je(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const i=UA(e);return this.types.set(i,r),e===Nn.SOURCE?this.dragSources.set(i,n):e===Nn.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const zA=(t,e)=>t===e;function VA(t=gl,e){switch(e.type){case Sd:break;case Fg:case Ug:case kd:case Bg:return gl;default:return $g}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,i=(function(u,d){const h=new Map,g=y=>{h.set(y,h.has(y)?h.get(y)+1:1)};u.forEach(g),d.forEach(g);const v=[];return h.forEach(((y,x)=>{y===1&&v.push(x)})),v})(r,n);if(!(i.length>0||!(function(u,d,h=zA){if(u.length!==d.length)return!1;for(let g=0;g<u.length;++g)if(!h(u[g],d[g]))return!1;return!0})(r,n)))return gl;const a=n[n.length-1],l=r[r.length-1];return a!==l&&(a&&i.push(a),l&&i.push(l)),i}function qA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const sw={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function WA(t=sw,e){const{payload:r}=e;switch(e.type){case Ig:case Dg:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Sd:return n=t.clientOffset,i=r.clientOffset,!n&&!i||n&&i&&n.x===i.x&&n.y===i.y?t:(function(a){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{},d=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(u).filter((function(h){return Object.getOwnPropertyDescriptor(u,h).enumerable})))),d.forEach((function(h){qA(a,h,u[h])}))}return a})({},t,{clientOffset:r.clientOffset});case Mg:case Lg:return sw;default:return t}var n,i}function HA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Do(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})))),n.forEach((function(i){HA(t,i,r[i])}))}return t}const KA={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function GA(t=KA,e){const{payload:r}=e;switch(e.type){case Dg:return Do({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case V_:return Do({},t,{isSourcePublic:!0});case Sd:return Do({},t,{targetIds:r.targetIds});case kd:return t.targetIds.indexOf(r.targetId)===-1?t:Do({},t,{targetIds:(n=t.targetIds,i=r.targetId,n.filter((a=>a!==i)))});case Lg:return Do({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case Mg:return Do({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}var n,i}function QA(t=0,e){switch(e.type){case Fg:case Ug:return t+1;case Bg:case kd:return t-1;default:return t}}function YA(t=0){return t+1}function ZA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})))),n.forEach((function(i){ZA(t,i,r[i])}))}return t}function XA(t={},e){return{dirtyHandlerIds:VA(t.dirtyHandlerIds,{type:e.type,payload:JA({},e.payload,{prevTargetIds:(r=t,n="dragOperation.targetIds",i=[],n.split(".").reduce(((a,l)=>a&&a[l]?a[l]:i||null),r))})}),dragOffset:WA(t.dragOffset,e),refCount:QA(t.refCount,e),dragOperation:GA(t.dragOperation,e),stateId:YA(t.stateId)};var r,n,i}function eI(t,e=void 0,r={},n=!1){const i=(function(d){const h=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return B_(XA,d&&h&&h({name:"dnd-core",instanceId:"dnd-core"}))})(n),a=new DA(i,new BA(i)),l=new IA(i,a),u=t(l,e,r);return l.receiveBackend(u),l}function tI(t,e){if(t==null)return{};var r,n,i=(function(l,u){if(l==null)return{};var d,h,g={},v=Object.keys(l);for(h=0;h<v.length;h++)d=v[h],u.indexOf(d)>=0||(g[d]=l[d]);return g})(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}let iw=0;const uu=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var rI=b.memo((function(t){var{children:e}=t,r=tI(t,["children"]);const[n,i]=(function(a){if("manager"in a)return[{dragDropManager:a.manager},!1];const l=(function(d,h=ow(),g,v){const y=h;return y[uu]||(y[uu]={dragDropManager:eI(d,h,g,v)}),y[uu]})(a.backend,a.context,a.options,a.debugMode),u=!a.context;return[l,u]})(r);return b.useEffect((()=>{if(i){const a=ow();return++iw,()=>{--iw==0&&(a[uu]=null)}}}),[]),p.jsx(U_.Provider,{value:n,children:e})}));function ow(){return typeof global<"u"?global:window}var nI=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(e)){if((n=e.length)!=r.length)return!1;for(i=n;i--!=0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((n=(a=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(i=n;i--!=0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!=0;){var l=a[i];if(!t(e[l],r[l]))return!1}return!0}return e!=e&&r!=r};const no=typeof window<"u"?b.useLayoutEffect:b.useEffect;function H_(t,e,r){const[n,i]=b.useState((()=>e(t))),a=b.useCallback((()=>{const l=e(t);nI(n,l)||(i(l),r&&r())}),[n,t,r]);return no(a),[n,a]}function K_(t,e,r){return(function(n,i,a){const[l,u]=H_(n,i,a);return no((function(){const d=n.getHandlerId();if(d!=null)return n.subscribeToStateChange(u,{handlerIds:[d]})}),[n,u]),l})(e,t||(()=>({})),(()=>r.reconnect()))}function G_(t,e){const r=[...e||[]];return e==null&&typeof t!="function"&&r.push(t),b.useMemo((()=>typeof t=="function"?t():t),r)}function sI(t){return b.useMemo((()=>t.hooks.dragSource()),[t])}function iI(t){return b.useMemo((()=>t.hooks.dragPreview()),[t])}let zh=!1,Vh=!1;class oI{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Je(!zh,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return zh=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{zh=!1}}isDragging(){if(!this.sourceId)return!1;Je(!Vh,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Vh=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Vh=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let qh=!1;class aI{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;Je(!qh,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return qh=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{qh=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function $p(t,e,r,n){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const a=Object.keys(t),l=Object.keys(e);if(a.length!==l.length)return!1;const u=Object.prototype.hasOwnProperty.bind(e);for(let d=0;d<a.length;d++){const h=a[d];if(!u(h))return!1;const g=t[h],v=e[h];if(i=void 0,i===!1||i===void 0&&g!==v)return!1}return!0}function Fp(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function lI(t){return(e=null,r=null)=>{if(!b.isValidElement(e)){const i=e;return t(i,r),i}const n=e;return(function(i){if(typeof i.type=="string")return;const a=i.type.displayName||i.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${a} into a <div>, or turn it into a drag source or a drop target itself.`)})(n),(function(i,a){const l=i.ref;return Je(typeof l!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),b.cloneElement(i,l?{ref:u=>{aw(l,u),aw(a,u)}}:{ref:a})})(n,r?i=>t(i,r):t)}}function Q_(t){const e={};return Object.keys(t).forEach((r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const i=lI(n);e[r]=()=>i}})),e}function aw(t,e){typeof t=="function"?t(e):t.current=e}class cI{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();n&&this.disconnectDragPreview(),this.handlerId&&(r?n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions)):this.lastConnectedDragPreview=r)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!$p(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!$p(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Q_({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Fp(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Fp(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class uI{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;this.handlerId&&(r?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions)):this.lastConnectedDropTarget=r)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!$p(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Q_({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Fp(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function so(){const{dragDropManager:t}=b.useContext(U_);return Je(t!=null,"Expected drag drop context"),t}class dI{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return n=typeof e.item=="object"?e.item:typeof e.item=="function"?e.item(r):{},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag!="function"||e.canDrag(r)}isDragging(e,r){const n=this.spec,i=this.monitor,{isDragging:a}=n;return a?a(i):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:i}=e;i&&i(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function fI(t,e,r){const n=so(),i=(function(l,u,d){const h=b.useMemo((()=>new dI(l,u,d)),[u,d]);return b.useEffect((()=>{h.spec=l}),[l]),h})(t,e,r),a=(function(l){return b.useMemo((()=>{const u=l.type;return Je(u!=null,"spec.type must be defined"),u}),[l])})(t);no((function(){if(a!=null){const[l,u]=(function(d,h,g){const v=g.getRegistry(),y=v.addSource(d,h);return[y,()=>v.removeSource(y)]})(a,i,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),u}}),[n,e,r,i,a])}function hI(t,e){const r=G_(t,e);Je(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=(function(){const a=so();return b.useMemo((()=>new oI(a)),[a])})(),i=(function(a,l){const u=so(),d=b.useMemo((()=>new cI(u.getBackend())),[u]);return no((()=>(d.dragSourceOptions=a||null,d.reconnect(),()=>d.disconnectDragSource())),[d,a]),no((()=>(d.dragPreviewOptions=l||null,d.reconnect(),()=>d.disconnectDragPreview())),[d,l]),d})(r.options,r.previewOptions);return fI(r,n,i),[K_(r.collect,n,i),sI(i),iI(i)]}function pI(t){return b.useMemo((()=>t.hooks.dropTarget()),[t])}class gI{canDrop(){const e=this.spec,r=this.monitor;return!e.canDrop||e.canDrop(r.getItem(),r)}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function mI(t,e,r){const n=so(),i=(function(l,u){const d=b.useMemo((()=>new gI(l,u)),[u]);return b.useEffect((()=>{d.spec=l}),[l]),d})(t,e),a=(function(l){const{accept:u}=l;return b.useMemo((()=>(Je(l.accept!=null,"accept must be defined"),Array.isArray(u)?u:[u])),[u])})(t);no((function(){const[l,u]=(function(d,h,g){const v=g.getRegistry(),y=v.addTarget(d,h);return[y,()=>v.removeTarget(y)]})(a,i,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),u}),[n,e,i,r,a.map((l=>l.toString())).join("|")])}function vI(t,e){const r=G_(t,e),n=(function(){const a=so();return b.useMemo((()=>new aI(a)),[a])})(),i=(function(a){const l=so(),u=b.useMemo((()=>new uI(l.getBackend())),[l]);return no((()=>(u.dropTargetOptions=a||null,u.reconnect(),()=>u.disconnectDropTarget())),[a]),u})(r.options);return mI(r,n,i),[K_(r.collect,n,i),pI(i)]}function Y_(t){let e=null;return()=>(e==null&&(e=t()),e)}class yI{enter(e){const r=this.entered.length;return this.entered=(function(n,i){const a=new Set,l=d=>a.add(d);n.forEach(l),i.forEach(l);const u=[];return a.forEach((d=>u.push(d))),u})(this.entered.filter((n=>this.isNodeInDocument(n)&&(!n.contains||n.contains(e)))),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;var n,i;return this.entered=(n=this.entered.filter(this.isNodeInDocument),i=e,n.filter((a=>a!==i))),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class wI{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach((e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null)})}))}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach((n=>{const i=this.config.exposeProperties[n];i!=null&&(r[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})})),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Z_="__NATIVE_FILE__",J_="__NATIVE_URL__",X_="__NATIVE_TEXT__",e1="__NATIVE_HTML__";var lw=Object.freeze({__proto__:null,FILE:Z_,HTML:e1,TEXT:X_,URL:J_});function Wh(t,e,r){const n=e.reduce(((i,a)=>i||t.getData(a)),"");return n??r}const Up={[Z_]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[e1]:{exposeProperties:{html:(t,e)=>Wh(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[J_]:{exposeProperties:{urls:(t,e)=>Wh(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[X_]:{exposeProperties:{text:(t,e)=>Wh(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Hh(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(Up).filter((r=>{const n=Up[r];return!!n?.matchesTypes&&n.matchesTypes.some((i=>e.indexOf(i)>-1))}))[0]||null}const bI=Y_((()=>/firefox/i.test(navigator.userAgent))),cw=Y_((()=>!!window.safari));class uw{interpolate(e){const{xs:r,ys:n,c1s:i,c2s:a,c3s:l}=this;let u=r.length-1;if(e===r[u])return n[u];let d,h=0,g=l.length-1;for(;h<=g;){d=Math.floor(.5*(h+g));const x=r[d];if(x<e)h=d+1;else{if(!(x>e))return n[d];g=d-1}}u=Math.max(0,g);const v=e-r[u],y=v*v;return n[u]+i[u]*v+a[u]*y+l[u]*v*y}constructor(e,r){const{length:n}=e,i=[];for(let x=0;x<n;x++)i.push(x);i.sort(((x,S)=>e[x]<e[S]?-1:1));const a=[],l=[];let u,d;for(let x=0;x<n-1;x++)u=e[x+1]-e[x],d=r[x+1]-r[x],a.push(u),l.push(d/u);const h=[l[0]];for(let x=0;x<a.length-1;x++){const S=l[x],_=l[x+1];if(S*_<=0)h.push(0);else{u=a[x];const E=a[x+1],C=u+E;h.push(3*C/((C+E)/S+(C+u)/_))}}h.push(l[l.length-1]);const g=[],v=[];let y;for(let x=0;x<h.length-1;x++){y=l[x];const S=h[x],_=1/a[x],E=S+h[x+1]-y-y;g.push((y-S-E)*_),v.push(E*_*_)}this.xs=e,this.ys=r,this.c1s=h,this.c2s=g,this.c3s=v}}const xI=1;function t1(t){const e=t.nodeType===xI?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function du(t){return{x:t.clientX,y:t.clientY}}function _I(t,e,r,n,i){const a=(l=e).nodeName==="IMG"&&(bI()||!(!((u=document.documentElement)===null||u===void 0)&&u.contains(l)));var l,u;const d=t1(a?t:e),h={x:r.x-d.x,y:r.y-d.y},{offsetWidth:g,offsetHeight:v}=t,{anchorX:y,anchorY:x}=n,{dragPreviewWidth:S,dragPreviewHeight:_}=(function(O,A,U,z){let $=O?A.width:U,J=O?A.height:z;return cw()&&O&&(J/=window.devicePixelRatio,$/=window.devicePixelRatio),{dragPreviewWidth:$,dragPreviewHeight:J}})(a,e,g,v),{offsetX:E,offsetY:C}=i,T=C===0||C;return{x:E===0||E?E:new uw([0,.5,1],[h.x,h.x/g*S,h.x+S-g]).interpolate(y),y:T?C:(()=>{let O=new uw([0,.5,1],[h.y,h.y/v*_,h.y+_-v]).interpolate(x);return cw()&&a&&(O+=(window.devicePixelRatio-1)*_),O})()}}let fu;function SI(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})))),n.forEach((function(i){SI(t,i,r[i])}))}return t}class kI{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var r;e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&((r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const i=l=>this.handleDragStart(l,e),a=l=>this.handleSelectStart(l);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",i),r.addEventListener("selectstart",a),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",i),r.removeEventListener("selectstart",a),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=l=>this.handleDragEnter(l,e),i=l=>this.handleDragOver(l,e),a=l=>this.handleDrop(l,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",i),r.addEventListener("drop",a),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",i),r.removeEventListener("drop",a)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return dw({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return dw({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(lw).some((r=>lw[r]===e))}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=(function(n,i){const a=Up[n];if(!a)throw new Error(`native type ${n} has no configuration`);const l=new wI(a);return l.loadDataTransfer(i),l})(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;return this.currentDragSourceNode=null,this.rootElement&&((e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&t1(a)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame((()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null})))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:a}=this;this.dragStartSourceIds=null;const l=du(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:l});const{dataTransfer:u}=i,d=Hh(u);if(this.monitor.isDragging()){if(u&&typeof u.setDragImage=="function"){const g=this.monitor.getSourceId(),v=this.sourceNodes.get(g),y=this.sourcePreviewNodes.get(g)||v;if(y){const{anchorX:x,anchorY:S,offsetX:_,offsetY:E}=this.getCurrentSourcePreviewNodeOptions(),C=_I(v,y,l,{anchorX:x,anchorY:S},{offsetX:_,offsetY:E});u.setDragImage(y,C.x,C.y)}}try{u?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:h}=this.getCurrentSourcePreviewNodeOptions();h?this.actions.publishDragSource():setTimeout((()=>this.actions.publishDragSource()),0)}else if(d)this.beginDragNativeItem(d);else{if(u&&!u.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{var a;if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()&&((a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)),!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:l}=i,u=Hh(l);u&&this.beginDragNativeItem(u,l)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:a}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=i.altKey,a.length>0&&this.actions.hover(a,{clientOffset:du(i)}),a.some((l=>this.monitor.canDropOnTarget(l)))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=i=>{var a;this.dragOverTargetIds=[],this.isDraggingNativeItem()&&((a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer))},this.handleTopDragOver=i=>{const{dragOverTargetIds:a}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return i.preventDefault(),void(i.dataTransfer&&(i.dataTransfer.dropEffect="none"));this.altKeyPressed=i.altKey,this.lastClientOffset=du(i),this.scheduleHover(a),(a||[]).some((l=>this.monitor.canDropOnTarget(l)))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout((()=>this.endDragNativeItem()),0),this.cancelHover())},this.handleTopDropCapture=i=>{var a;this.dropTargetIds=[],this.isDraggingNativeItem()?(i.preventDefault(),(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)):Hh(i.dataTransfer)&&i.preventDefault(),this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:a}=this;this.dropTargetIds=[],this.actions.hover(a,{clientOffset:du(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))},this.options=new class{get window(){return this.globalContext?this.globalContext:typeof window<"u"?window:void 0}get document(){var i;return!((i=this.globalContext)===null||i===void 0)&&i.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var i;return((i=this.optionsArgs)===null||i===void 0?void 0:i.rootElement)||this.window}constructor(i,a){this.ownerDocument=null,this.globalContext=i,this.optionsArgs=a}}(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new yI(this.isNodeInDocument)}}const EI=function(t,e,r){return new kI(t,e,r)};var gi;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(gi||(gi={}));class TI{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0&&e}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0&&e}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0&&e}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0&&e}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)===null||e===void 0||e}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,r,n,i;return(i=(n=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,r,n,i;return(i=(n=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&i!==void 0?i:0}get window(){return this.context&&this.context.window?this.context.window:typeof window<"u"?window:void 0}get document(){var e;return!((e=this.context)===null||e===void 0)&&e.document?this.context.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,r){this.args=e,this.context=r}}const CI=1,OI=0;function Kh(t){return t.button===void 0||t.button===OI}function r1(t){return!!t.targetTouches}function Qu(t,e){return r1(t)?(function(r,n){return r.targetTouches.length===1?Qu(r.targetTouches[0]):n&&r.touches.length===1&&r.touches[0].target===n.target?Qu(r.touches[0]):void 0})(t,e):{x:t.clientX,y:t.clientY}}const fw=(()=>{let t=!1;try{addEventListener("test",(()=>{}),Object.defineProperty({},"passive",{get:()=>(t=!0,!0)}))}catch{}return t})(),rl={[gi.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[gi.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[gi.keyboard]:{keydown:"keydown"}};class ml{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(Je(!ml.isSetUp,"Cannot have two Touch backends at the same time."),ml.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(ml.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,r,n,i=!1){const a=fw?{capture:i,passive:!1}:i;this.listenerTypes.forEach((function(l){const u=rl[l][r];u&&e.addEventListener(u,n,a)}))}removeEventListener(e,r,n,i=!1){const a=fw?{capture:i,passive:!1}:i;this.listenerTypes.forEach((function(l){const u=rl[l][r];u&&e.removeEventListener(u,n,a)}))}connectDragSource(e,r){const n=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,r),this.addEventListener(r,"start",n),()=>{this.sourceNodes.delete(e),this.removeEventListener(r,"start",n)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,r){const n=this.options.rootElement;if(!this.document||!n)return()=>{};const i=a=>{if(!this.document||!n||!this.monitor.isDragging())return;let l;switch(a.type){case rl.mouse.move:l={x:a.clientX,y:a.clientY};break;case rl.touch.move:var u,d;l={x:((u=a.touches[0])===null||u===void 0?void 0:u.clientX)||0,y:((d=a.touches[0])===null||d===void 0?void 0:d.clientY)||0}}const h=l!=null?this.document.elementFromPoint(l.x,l.y):void 0,g=h&&r.contains(h);return h===r||g?this.handleMove(a,e):void 0};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,r),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return this.options.delayTouchStart||this.options.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver((()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())})),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,r,n){this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&(function(l){const u=l.nodeType===1?l:l.parentElement;if(!u)return;const{top:d,left:h}=u.getBoundingClientRect();return{x:h,y:d}})(a)},this.handleTopMoveStartCapture=i=>{Kh(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!Kh(i))return;const a=Qu(i);a&&(r1(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=a),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!Kh(i))return;const a=i.type===rl.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),a),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,a)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(a)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:a,dragOverTargetIds:l}=this,u=this.options.enableHoverOutsideTarget,d=Qu(i,this.lastTargetTouchFallback);if(!d)return;if(this._isScrolling||!this.monitor.isDragging()&&(function(T,O,A,U,z){if(!z)return!1;const $=180*Math.atan2(U-O,A-T)/Math.PI+180;for(let J=0;J<z.length;++J){const V=z[J];if(V&&(V.start==null||$>=V.start)&&(V.end==null||$<=V.end))return!0}return!1})(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,d.x,d.y,this.options.scrollAngleRanges))return void(this._isScrolling=!0);var h,g,v,y;if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&a&&(h=this._mouseClientOffset.x||0,g=this._mouseClientOffset.y||0,v=d.x,y=d.y,Math.sqrt(Math.pow(Math.abs(v-h),2)+Math.pow(Math.abs(y-g),2))>(this.options.touchSlop?this.options.touchSlop:0))&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(a,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const x=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(x),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const S=(l||[]).map((T=>this.targetNodes.get(T))).filter((T=>!!T)),_=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(d.x,d.y,S):this.document.elementsFromPoint(d.x,d.y),E=[];for(const T in _){if(!_.hasOwnProperty(T))continue;let O=_[T];for(O!=null&&E.push(O);O;)O=O.parentElement,O&&E.indexOf(O)===-1&&E.push(O)}const C=E.filter((T=>S.indexOf(T)>-1)).map((T=>this._getDropTargetId(T))).filter((T=>!!T)).filter(((T,O,A)=>A.indexOf(T)===O));if(u)for(const T in this.targetNodes){const O=this.targetNodes.get(T);if(x&&O&&O.contains(x)&&C.indexOf(T)===-1){C.unshift(T);break}}C.reverse(),this.actions.hover(C,{clientOffset:d})},this._getDropTargetId=i=>{const a=this.targetNodes.keys();let l=a.next();for(;l.done===!1;){const u=l.value;if(i===this.targetNodes.get(u))return u;l=a.next()}},this.handleTopMoveEndCapture=i=>{this._isScrolling=!1,this.lastTargetTouchFallback=void 0,(function(a){return a.buttons===void 0||(a.buttons&CI)==0})(i)&&(this.monitor.isDragging()&&!this.monitor.didDrop()?(i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()):this.moveStartSourceIds=void 0)},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new TI(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(gi.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(gi.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(gi.keyboard)}}const PI=function(t,e={},r={}){return new ml(t,e,r)},Ml="abcdefgh".split(""),Tu={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},NI={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},jI={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},RI=[7,6,5,4,3,2,1,0],AI=[0,1,2,3,4,5,6,7],hw={wP:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),p.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),p.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),p.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),p.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),p.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[p.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),p.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),p.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),p.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[p.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),p.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),p.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),p.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),p.jsx("circle",{cx:"6",cy:"12",r:"2"}),p.jsx("circle",{cx:"14",cy:"9",r:"2"}),p.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),p.jsx("circle",{cx:"31",cy:"9",r:"2"}),p.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),p.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),p.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),p.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),p.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),p.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),p.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),p.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),p.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[p.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),p.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),p.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),p.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[p.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),p.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),p.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),p.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),p.jsx("circle",{cx:"6",cy:"12",r:"2"}),p.jsx("circle",{cx:"14",cy:"9",r:"2"}),p.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),p.jsx("circle",{cx:"31",cy:"9",r:"2"}),p.jsx("circle",{cx:"39",cy:"12",r:"2"}),p.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),p.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[p.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),p.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),p.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),p.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:p.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[p.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),p.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),p.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),p.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),p.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function Bp(t,e,r){const n=e/8,i=t==="white"?RI:AI;return{x:(t==="white"?NI:jI)[r[0]]*n+n/2,y:i[parseInt(r[1],10)-1]*n+n/2}}function pw(t){let e=!1;return Object.keys(Tu).forEach((r=>{t[r]!==Tu[r]&&(e=!0)})),Object.keys(t).forEach((r=>{Tu[r]!==t[r]&&(e=!0)})),e}function gw(t){return t==="start"?Tu:typeof t=="string"?(function(e){if(!(function(a){a=a.replace(/ .+$/,""),a=(function(u){return u.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")})(a);const l=a.split("/");if(l.length!==8)return!1;for(let u=0;u<8;u++)if(l[u].length!==8||l[u].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0})(e))return{};const r=(e=e.replace(/ .+$/,"")).split("/"),n={};let i=8;for(let a=0;a<8;a++){const l=r[a].split("");let u=0;for(let d=0;d<l.length;d++)l[d].search(/[1-8]/)!==-1?u+=parseInt(l[d],10):(n[Ml[u]+i]=II(l[d]),u+=1);i-=1}return n})(t):t}function II(t){return t.toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase()}const n1=b.createContext({}),Ms=()=>b.useContext(n1),DI=b.forwardRef((({allowDragOutsideBoard:t=!0,animationDuration:e=300,areArrowsAllowed:r=!0,arePiecesDraggable:n=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:a=!1,boardOrientation:l="white",boardWidth:u,children:d,clearPremovesOnRightClick:h=!0,customArrows:g,customArrowColor:v="rgb(255,170,0)",customBoardStyle:y,customDarkSquareStyle:x={backgroundColor:"#B58863"},customDropSquareStyle:S={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:_={backgroundColor:"#F0D9B5"},customPieces:E,customPremoveDarkSquareStyle:C={backgroundColor:"#A42323"},customPremoveLightSquareStyle:T={backgroundColor:"#BD2828"},customSquare:O="div",customSquareStyles:A,dropOffBoardAction:U="snapback",id:z=0,isDraggablePiece:$=(()=>!0),getPositionObject:J=(()=>{}),onArrowsChange:V=(()=>{}),onDragOverSquare:W=(()=>{}),onMouseOutSquare:ee=(()=>{}),onMouseOverSquare:Y=(()=>{}),onPieceClick:te=(()=>{}),onPieceDragBegin:Z=(()=>{}),onPieceDragEnd:ke=(()=>{}),onPieceDrop:fe=(()=>!0),onPromotionCheck:Se=((Ke,Me,yt)=>(yt==="wP"&&Ke[1]==="7"&&Me[1]==="8"||yt==="bP"&&Ke[1]==="2"&&Me[1]==="1")&&Math.abs(Ke.charCodeAt(0)-Me.charCodeAt(0))<=1),onPromotionPieceSelect:H,onSquareClick:ue=(()=>{}),onSquareRightClick:ae=(()=>{}),position:I="start",promotionDialogVariant:X="default",promotionToSquare:Pe=null,showBoardNotation:ge=!0,showPromotionDialog:Le=!1,snapToCursor:Qe=!0},qe)=>{const[Ke,Me]=b.useState(gw(I)),[yt,kr]=b.useState({removed:{},added:{}}),[pr,Ft]=b.useState(void 0),[er,_t]=b.useState(Le&&!a),[bn,ve]=b.useState(null),[An,Br]=b.useState(Pe),[Ar,or]=b.useState([]),j=b.useRef(Ar),[F,Q]=b.useState(),[me,pe]=b.useState(Object.assign(Object.assign({},hw),E)),[le,_e]=b.useState(!1),[Ze,ht]=b.useState(),[ot,gr]=b.useState(!1);b.useImperativeHandle(qe,(()=>({clearPremoves(lt=!0){Ir(lt)}}))),b.useEffect((()=>{pe(Object.assign(Object.assign({},hw),E))}),[E]),b.useEffect((()=>{_t(Le),Br(Pe)}),[Pe,Le]),b.useEffect((()=>{var lt,Nt,At;Zr();const Mt=gw(I),vr=(function(Ht,P){const ne={removed:{},added:{}};return Object.keys(Ht).forEach((ye=>{P[ye]!==Ht[ye]&&(ne.removed[ye]=Ht[ye])})),Object.keys(P).forEach((ye=>{Ht[ye]!==P[ye]&&(ne.added[ye]=P[ye])})),ne})(Ke,Mt),tr=((lt=Object.keys(vr.added))===null||lt===void 0?void 0:lt.length)<=2?(At=(Nt=Object.entries(vr.added))===null||Nt===void 0?void 0:Nt[0])===null||At===void 0?void 0:At[1][0]:void 0;if(ot)Me(Mt),gr(!1),i&&qr(tr),Ze&&clearTimeout(Ze);else if(le)Me(Mt),gr(!1),i&&qr(tr);else{pw(Mt)&&pr!==void 0?Ft(tr):pw(Mt)?Ft(void 0):Ft("b"),kr(vr),gr(!0);const Ht=setTimeout((()=>{Me(Mt),gr(!1),i&&qr(tr)}),e);ht(Ht)}return _e(!1),J(Mt),Vr(),()=>{clearTimeout(Ze)}}),[I]);const{arrows:zr,newArrow:Pt,clearArrows:Vr,drawNewArrow:sn,onArrowDrawEnd:St}=((lt,Nt=!0,At,Mt)=>{const[vr,tr]=b.useState([]),[Ht,P]=b.useState([]),[ne,ye]=b.useState();b.useEffect((()=>{Array.isArray(lt)&&tr(lt?.filter((re=>re[0]!==re[1])))}),[lt]),b.useEffect((()=>{At?.(Ht)}),[Ht]);const ze=[...Ht,...vr];return{arrows:ze,newArrow:ne,clearArrows:function(){P([]),ye(void 0)},drawNewArrow:(re,it)=>{Nt&&ye([re,it,Mt])},setArrows:P,onArrowDrawEnd:(re,it)=>{if(re===it||!Nt)return;let nt;const kt=[re,it,Mt];nt=ze.every((([rr,ct])=>!(rr===re&&ct===it)))?[...Ht,kt]:Ht.filter((([rr,ct])=>!(rr===re&&ct===it))),ye(void 0),P(nt)}}})(g,r,V,v);function qr(lt){if(j.current.length===0)return;const Nt=j.current[0];if(Nt.piece[0]!==void 0&&Nt.piece[0]!==lt&&fe.length)if(Ft(Nt.piece[0]),_e(!0),fe(Nt.sourceSq,Nt.targetSq,Nt.piece)){const At=[...j.current];At.shift(),j.current=At,or([...At])}else Ir()}function Ir(lt=!0){lt&&Ft(void 0),j.current=[],or([])}function Zr(){ve(null),Br(null),_t(!1)}const mr={animationDuration:e,arePiecesDraggable:n,arePremovesAllowed:i,boardOrientation:l,boardWidth:u,customArrowColor:v,customBoardStyle:y,customDarkSquareStyle:x,customDropSquareStyle:S,customLightSquareStyle:_,customPremoveDarkSquareStyle:C,customPremoveLightSquareStyle:T,customSquare:O,customSquareStyles:A,id:z,isDraggablePiece:$,onDragOverSquare:W,onMouseOutSquare:ee,onMouseOverSquare:Y,onPieceClick:te,onPieceDragBegin:Z,onPieceDragEnd:ke,onPieceDrop:fe,onPromotionCheck:Se,onPromotionPieceSelect:H,onSquareClick:ue,showBoardNotation:ge,snapToCursor:Qe,promotionDialogVariant:X,allowDragOutsideBoard:t,arrows:zr,newArrow:Pt,onArrowDrawEnd:St,chessPieces:me,clearArrows:Vr,drawNewArrow:sn,clearCurrentRightClickDown:function(){Q(void 0)},currentPosition:Ke,handleSetPosition:function(lt,Nt,At,Mt){if(lt===Nt)return;if(Vr(),i&&ot||i&&(pr===At[0]||j.current.filter((tr=>tr.piece[0]===At[0])).length>0)){const tr=[...j.current];return tr.push({sourceSq:lt,targetSq:Nt,piece:At}),j.current=tr,or([...tr]),void Zr()}if(!i&&ot)return;const vr=Object.assign({},Ke);_e(!!Mt),Ft(At[0]),fe.length?fe(lt,Nt,At)||Ir():(U!=="trash"||Nt||delete vr[lt],delete vr[lt],vr[Nt]=At,Me(vr)),Zr(),J(vr)},isWaitingForAnimation:ot,lastPieceColour:pr,onRightClickDown:function(lt){Q(lt)},onRightClickUp:function(lt){if(F){if(F===lt)return Q(void 0),h&&Ir(!1),void ae(lt)}else Q(void 0)},positionDifferences:yt,promoteFromSquare:bn,promoteToSquare:An,premoves:Ar,setPromoteFromSquare:ve,setPromoteToSquare:Br,setShowPromoteDialog:_t,showPromoteDialog:er,autoPromoteToQueen:a,currentRightClickDown:F};return p.jsx(n1.Provider,Object.assign({value:mr},{children:d}))}));function LI({row:t,col:e}){const{boardOrientation:r,boardWidth:n,customDarkSquareStyle:i,customLightSquareStyle:a}=Ms(),l=a.backgroundColor,u=i.backgroundColor,d=e===0,h=t===7;function g(){return r==="white"?8-t:t+1}function v(){return r==="black"?Ml[7-e]:Ml[e]}return d&&h?p.jsxs(p.Fragment,{children:[p.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:l}),vw(n))},{children:g()})),p.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:l}),mw(n))},{children:v()}))]}):h?p.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!=0?u:l}),mw(n))},{children:v()})):d?p.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:t%2==0?u:l}),vw(n))},{children:g()})):null}const mw=t=>({alignSelf:"flex-end",paddingLeft:t/8-t/48,fontSize:t/48}),vw=t=>({alignSelf:"flex-start",paddingRight:t/8-t/48,fontSize:t/48});function yw({isPremovedPiece:t=!1,piece:e,square:r,squares:n}){const{animationDuration:i,arePiecesDraggable:a,arePremovesAllowed:l,boardWidth:u,boardOrientation:d,chessPieces:h,currentPosition:g,id:v,isDraggablePiece:y,isWaitingForAnimation:x,onPieceClick:S,onPieceDragBegin:_,onPieceDragEnd:E,positionDifferences:C,premoves:T,onPromotionCheck:O}=Ms(),[A,U]=b.useState({opacity:1,zIndex:5,touchAction:"none",cursor:a&&y({piece:e,sourceSquare:r})?"-webkit-grab":"default"}),[{canDrag:z,isDragging:$},J,V]=hI((()=>({type:"piece",item:()=>(_(e,r),{piece:e,square:r,id:v}),end:()=>E(e,r),collect:W=>({canDrag:y({piece:e,sourceSquare:r}),isDragging:!!W.isDragging()})})),[e,r,g,v]);return V((fu||(fu=new Image,fu.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),fu),{captureDraggingState:!0}),b.useEffect((()=>{U((W=>Object.assign(Object.assign({},W),{opacity:$?0:1})))}),[$]),b.useEffect((()=>{if(!l)return;let W=!1;!t&&T.find((ee=>ee.targetSq===r))&&(W=!0),T.find((ee=>ee.sourceSq===r&&ee.piece===e))&&(W=!0),U((ee=>Object.assign(Object.assign({},ee),{display:W?"none":"unset"})))}),[g,T]),b.useEffect((()=>{var W;const ee=(W=C.removed)===null||W===void 0?void 0:W[r];if(!C.added||!ee)return;const Y=Object.entries(C.added).find((([te,Z])=>Z===ee||O(r,te,ee)));if(x&&ee&&Y&&!t){const te=r,Z=Y[0];if(te&&Z){const ke=u/8;U((fe=>Object.assign(Object.assign({},fe),{transform:`translate(${(d==="black"?-1:1)*(Z.charCodeAt(0)-te.charCodeAt(0))*ke}px, ${(d==="black"?-1:1)*(Number(te[1])-Number(Z[1]))*ke}px)`,transition:`transform ${i}ms`,zIndex:6})))}}}),[C]),b.useEffect((()=>{const{sourceSq:W}={sourceSq:n[r]};W&&U((ee=>Object.assign(Object.assign({},ee),{transform:"translate(0px, 0px)",transition:"transform 0ms"})))}),[g]),b.useEffect((()=>{U((W=>Object.assign(Object.assign({},W),{cursor:a&&y({piece:e,sourceSquare:r})?"-webkit-grab":"default"})))}),[r,g,a]),p.jsx("div",Object.assign({ref:a&&z?J:null,onClick:()=>S(e),"data-piece":e,style:A},{children:typeof h[e]=="function"?h[e]({squareWidth:u/8,isDragging:$,square:r}):p.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:u/8,height:u/8},{children:p.jsx("g",{children:h[e]})}))}))}function MI({square:t,squareColor:e,setSquares:r,squareHasPremove:n,children:i}){const a=b.useRef(null),{autoPromoteToQueen:l,boardWidth:u,boardOrientation:d,clearArrows:h,currentPosition:g,currentRightClickDown:v,customBoardStyle:y,customDarkSquareStyle:x,customDropSquareStyle:S,customLightSquareStyle:_,customPremoveDarkSquareStyle:E,customPremoveLightSquareStyle:C,customSquare:T,customSquareStyles:O,drawNewArrow:A,handleSetPosition:U,isWaitingForAnimation:z,lastPieceColour:$,onArrowDrawEnd:J,onDragOverSquare:V,onMouseOutSquare:W,onMouseOverSquare:ee,onPieceDrop:Y,onPromotionCheck:te,onRightClickDown:Z,onRightClickUp:ke,onSquareClick:fe,setPromoteFromSquare:Se,setPromoteToSquare:H,setShowPromoteDialog:ue}=Ms(),[{isOver:ae},I]=vI((()=>({accept:"piece",drop:X,collect:ge=>({isOver:!!ge.isOver()})})),[t,g,Y,z,$]);function X(ge){te(ge.square,t,ge.piece)?l?U(ge.square,t,ge.piece[0]==="w"?"wQ":"bQ"):(Se(ge.square),H(t),ue(!0)):U(ge.square,t,ge.piece,!0)}b.useEffect((()=>{if(a.current){const{x:ge,y:Le}=a.current.getBoundingClientRect();r((Qe=>Object.assign(Object.assign({},Qe),{[t]:{x:ge,y:Le}})))}}),[u,d]);const Pe=Object.assign(Object.assign(Object.assign(Object.assign({},$I(t,d,y)),e==="black"?x:_),n&&(e==="black"?E:C)),ae&&S);return p.jsx("div",Object.assign({ref:I,style:Pe,"data-square-color":e,"data-square":t,onMouseOver:ge=>{ge.buttons===2&&v&&A(v,t),ge.relatedTarget&&ge.currentTarget.contains(ge.relatedTarget)||ee(t)},onMouseOut:ge=>{ge.relatedTarget&&ge.currentTarget.contains(ge.relatedTarget)||W(t)},onMouseDown:ge=>{ge.button===2&&Z(t)},onMouseUp:ge=>{ge.button===2&&(v&&J(v,t),ke(t))},onDragEnter:()=>V(t),onClick:()=>{fe(t),h()},onContextMenu:ge=>{ge.preventDefault()}},{children:p.jsx(T,typeof T=="string"?Object.assign({ref:a,style:Object.assign(Object.assign(Object.assign({},bw(u)),ww),!n&&O?.[t])},{children:i}):Object.assign({ref:a,square:t,squareColor:e,style:Object.assign(Object.assign(Object.assign({},bw(u)),ww),!n&&O?.[t])},{children:i}))}))}const ww={display:"flex",justifyContent:"center"},bw=t=>({width:t/8,height:t/8}),$I=(t,e,r)=>r?.borderRadius?t==="a1"?e==="white"?{borderBottomLeftRadius:r.borderRadius}:{borderTopRightRadius:r.borderRadius}:t==="a8"?e==="white"?{borderTopLeftRadius:r.borderRadius}:{borderBottomRightRadius:r.borderRadius}:t==="h1"?e==="white"?{borderBottomRightRadius:r.borderRadius}:{borderTopLeftRadius:r.borderRadius}:t==="h8"?e==="white"?{borderTopRightRadius:r.borderRadius}:{borderBottomLeftRadius:r.borderRadius}:{}:{};function FI(){const[t,e]=b.useState({}),{boardOrientation:r,boardWidth:n,currentPosition:i,id:a,premoves:l,showBoardNotation:u}=Ms();return p.jsx("div",Object.assign({"data-boardid":a},{children:[...Array(8)].map(((d,h)=>p.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:n}},{children:[...Array(8)].map(((g,v)=>{const y=r==="black"?Ml[7-v]+(h+1):Ml[v]+(8-h),x=v%2==h%2?"white":"black",S=l.find((E=>E.sourceSq===y||E.targetSq===y)),_=l.find((E=>E.targetSq===y));return p.jsxs(MI,Object.assign({square:y,squareColor:x,setSquares:e,squareHasPremove:!!S},{children:[i[y]&&p.jsx(yw,{piece:i[y],square:y,squares:t}),_&&p.jsx(yw,{isPremovedPiece:!0,piece:_.piece,square:y,squares:t}),u&&p.jsx(LI,{row:h,col:v})]}),`${v}${h}`)}))}),h.toString())))}))}const UI=()=>{const{arrows:t,newArrow:e,boardOrientation:r,boardWidth:n,customArrowColor:i}=Ms(),a=[...t,e].filter(Boolean);return p.jsx("svg",Object.assign({width:n,height:n,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:a.map(((l,u)=>{const[d,h,g]=l;if(d===h)return null;const v=Bp(r,n,d),y=Bp(r,n,h);let x=n/32;const S=u===t.length;t.some((O=>O[0]!==d&&O[1]===h))&&!S&&(x=n/16);const _=y.x-v.x,E=y.y-v.y,C=Math.hypot(E,_),T={x:v.x+_*(C-x)/C,y:v.y+E*(C-x)/C};return p.jsxs(b.Fragment,{children:[p.jsx("marker",Object.assign({id:`arrowhead-${u}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:p.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:g??i})})),p.jsx("line",{x1:v.x,y1:v.y,x2:T.x,y2:T.y,opacity:S?"0.5":"0.65",stroke:g??i,strokeWidth:S?.9*n/40:n/40,markerEnd:`url(#arrowhead-${u})`})]},`${d}-${h}${S?"-active":""}`)}))}))};function BI({option:t}){const[e,r]=b.useState(!1),{boardWidth:n,chessPieces:i,customDarkSquareStyle:a,customLightSquareStyle:l,handleSetPosition:u,onPromotionPieceSelect:d,promoteFromSquare:h,promoteToSquare:g,promotionDialogVariant:v}=Ms(),y=()=>{switch(t[1]){case"Q":return a.backgroundColor;case"R":return l.backgroundColor;case"N":return v==="default"?l.backgroundColor:a.backgroundColor;case"B":return v==="default"?a.backgroundColor:l.backgroundColor}};return p.jsx("div",Object.assign({onClick:()=>{d?.length?d(t):u(h,g,t,!0)},onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),"data-piece":t,style:{cursor:"pointer",backgroundColor:e?y():`${y()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[t]=="function"?p.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[t]({squareWidth:n/8,isDragging:!1})})):p.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:n/8,height:n/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:p.jsx("g",{children:i[t]})}))}))}function zI(){const{boardOrientation:t,boardWidth:e,promotionDialogVariant:r,promoteToSquare:n}=Ms(),i=n?.[1]==="1"?"b":"w",a=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],l={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:e/4+"px",top:0,backgroundColor:"white",left:0}},u=Bp(t,e,n||"a8");return p.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${u?.y}px`,left:`${u?.x}px`,zIndex:1e3},l[r]),title:"Choose promotion piece"},{children:a.map((d=>p.jsx(BI,{option:d},d)))}))}const VI={whiteKing:p.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:p.jsx("g",{children:p.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function qI({children:t}){try{return p.jsx(p.Fragment,{children:t})}catch(e){return console.log(e),p.jsx(s1,{showError:!0})}}function s1({showError:t=!1}){return p.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[p.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:VI.whiteKing})),t&&p.jsx("h1",{children:"Something went wrong"})]}))}function WI(){const t=b.useRef(null),{boardWidth:e,clearCurrentRightClickDown:r,onPromotionPieceSelect:n,setShowPromoteDialog:i,showPromoteDialog:a,customBoardStyle:l}=Ms();return b.useEffect((()=>{function u(d){t.current&&!t.current.contains(d.target)&&r()}return document.addEventListener("mouseup",u),()=>{document.removeEventListener("mouseup",u)}}),[]),e?p.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:p.jsxs("div",Object.assign({ref:t,style:Object.assign(Object.assign({position:"relative"},HI(e)),l)},{children:[p.jsx(FI,{}),p.jsx(UI,{}),a&&p.jsxs(p.Fragment,{children:[p.jsx("div",{onClick:()=>{i(!1),n?.()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),p.jsx(zI,{})]})]}))})):p.jsx(s1,{})}const HI=t=>({cursor:"default",height:t,width:t});function KI({boardContainer:t}){const{boardWidth:e,chessPieces:r,id:n,snapToCursor:i,allowDragOutsideBoard:a}=Ms(),l=(function(y){const x=so().getMonitor(),[S,_]=H_(x,y);return b.useEffect((()=>x.subscribeToOffsetChange(_))),b.useEffect((()=>x.subscribeToStateChange(_))),S})((y=>({item:y.getItem(),clientOffset:y.getClientOffset(),sourceClientOffset:y.getSourceClientOffset(),isDragging:y.isDragging()}))),{isDragging:u,item:d,clientOffset:h,sourceClientOffset:g}=l,v=b.useCallback(((y,x)=>{if(!y||!x)return{display:"none"};let{x:S,y:_}=i?y:x;const E=e/8/2;if(i&&(S-=E,_-=E),!a){const{left:T,top:O}=t,A=T-E,U=O-E,z=T+e-E,$=O+e-E;S=Math.max(A,Math.min(S,z)),_=Math.max(U,Math.min(_,$))}const C=`translate(${S}px, ${_}px)`;return{transform:C,WebkitTransform:C,touchAction:"none"}}),[e,a,i,t]);return u&&d.id===n?p.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:p.jsx("div",Object.assign({style:v(h,g)},{children:typeof r[d.piece]=="function"?r[d.piece]({squareWidth:e/8,isDragging:!0}):p.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:p.jsx("g",{children:r[d.piece]})}))}))})):null}const GI=b.forwardRef(((t,e)=>{var r;const{customDndBackend:n,customDndBackendOptions:i}=t,a=(function(A,U){var z={};for(var $ in A)Object.prototype.hasOwnProperty.call(A,$)&&U.indexOf($)<0&&(z[$]=A[$]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function"){var J=0;for($=Object.getOwnPropertySymbols(A);J<$.length;J++)U.indexOf($[J])<0&&Object.prototype.propertyIsEnumerable.call(A,$[J])&&(z[$[J]]=A[$[J]])}return z})(t,["customDndBackend","customDndBackendOptions"]),[l,u]=b.useState(),[d,h]=b.useState(!1),[g,v]=b.useState(!1),[y,x]=b.useState(t.boardWidth),S=b.useRef(null),_=b.useRef(null),[E,C]=b.useState({left:0,top:0}),T=(r=S.current)===null||r===void 0?void 0:r.getBoundingClientRect();b.useEffect((()=>{C({left:T?.left?T?.left:0,top:T?.top?T?.top:0})}),[T]),b.useEffect((()=>{v("ontouchstart"in window),h(!0),u(window)}),[]),b.useEffect((()=>{var A;if(t.boardWidth===void 0&&(!((A=S.current)===null||A===void 0)&&A.offsetWidth)){const U=new ResizeObserver((()=>{var z;x((z=S.current)===null||z===void 0?void 0:z.offsetWidth)}));return U.observe(S.current),()=>{U.disconnect()}}}),[S.current,l]);const O=n||(g?PI:EI);return d&&l?p.jsx(qI,{children:p.jsxs("div",Object.assign({ref:_,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[p.jsx("div",{ref:S,style:{width:"100%"}}),p.jsx(rI,Object.assign({backend:O,context:l,options:n?i:void 0},{children:y&&p.jsxs(DI,Object.assign({boardWidth:y},a,{ref:e},{children:[p.jsx(KI,{boardContainer:E}),p.jsx(WI,{})]}))}))]}))}):null})),QI=b.memo(function({game:e,onMove:r,orientation:n="white",isThinking:i=!1,disabled:a=!1,lastMove:l,onReset:u}){const d=b.useRef(null),[h,g]=b.useState(320),[v,y]=b.useState(null),[x,S]=b.useState({}),[_,E]=b.useState({}),[C,T]=b.useState(null);b.useEffect(()=>{const V=()=>{if(d.current){const ee=Math.min(d.current.clientWidth,600);g(ee)}},W=new ResizeObserver(V);return d.current&&W.observe(d.current),V(),()=>W.disconnect()},[]),b.useEffect(()=>{if(e.inCheck()){const V=e.board();let W="";const ee="abcdefgh";for(let Y=0;Y<8;Y++){for(let te=0;te<8;te++){const Z=V[Y][te];if(Z&&Z.type==="k"&&Z.color===e.turn()){const ke=ee[te],fe=8-Y;W=`${ke}${fe}`;break}}if(W)break}if(W){E({[W]:{background:"radial-gradient(circle, rgba(255,0,0,0.8) 0%, transparent 80%)",boxShadow:"inset 0 0 10px 2px rgba(255,0,0,0.8)"}});return}}E({})},[e]);function O(V){const W=e.moves({square:V,verbose:!0});if(W.length===0)return;const ee={};W.forEach(Y=>{const te=e.get(Y.to),Z=e.get(V);ee[Y.to]={background:te&&Z&&te.color!==Z.color?"radial-gradient(circle, rgba(255, 215, 0, 0.6) 40%, transparent 40%)":"radial-gradient(circle, rgba(255, 215, 0, 0.3) 25%, transparent 25%)",borderRadius:"50%"}}),ee[V]={background:"rgba(255, 215, 0, 0.4)"},S(ee)}function A(V){if(C&&!a){if(V){const W=V[1]?.toLowerCase();if(!W||!"qrbn".includes(W)||!r(C.from,C.to,W))return}T(null),y(null),S({})}}function U(V){if(!(a||i||e.isGameOver()))if(v){if(v===V){y(null),S({});return}const W=e.get(v);if(W?.type==="p"&&(W.color==="w"&&V[1]==="8"||W.color==="b"&&V[1]==="1")&&e.moves({square:v,verbose:!0}).find(fe=>fe.to===V)){T({from:v,to:V});return}if(r(v,V)){y(null),S({});return}const te=e.get(V);if(te&&te.color===e.turn()){y(V),O(V);return}y(null),S({})}else{const W=e.get(V);W&&W.color===e.turn()&&(y(V),O(V))}}const z={...l?{[l.from]:{background:"rgba(255, 215, 0, 0.3)"},[l.to]:{background:"rgba(255, 215, 0, 0.3)"}}:{},...x,..._},$=e.isGameOver(),J=$?e.isCheckmate()?e.turn()==="w"?"en thng":"Trng thng":"Ha":"";return p.jsxs("div",{ref:d,className:`
        w-full aspect-square max-w-[600px] mx-auto 
        bg-slate-900 rounded-lg shadow-2xl overflow-hidden 
        border-[6px] border-slate-800
        transition-all duration-300
        ${i?"ring-4 ring-indigo-500/30":""}
        relative
      `,children:[p.jsx(GI,{position:e.fen(),onPieceDrop:(V,W,ee)=>{if(a||i||e.isGameOver())return!1;if(ee[1]==="P"&&V[1]==="7"&&W[1]==="8"||ee[1]==="p"&&V[1]==="2"&&W[1]==="1")return a||T({from:V,to:W}),!1;const te=r(V,W);return te&&(y(null),S({})),te},onSquareClick:U,customSquareStyles:z,boardOrientation:n,boardWidth:h,customDarkSquareStyle:{backgroundColor:"#312e81"},customLightSquareStyle:{backgroundColor:"#e2e8f0"},customDropSquareStyle:{boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.2)"},animationDuration:300}),C&&p.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-lg",children:p.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl flex flex-col gap-4 shadow-2xl border border-white/10 animate-in zoom-in-95",children:[p.jsx("div",{className:"text-white text-sm font-bold text-center uppercase tracking-widest opacity-50",children:"Select Promotion"}),p.jsx("div",{className:"flex gap-3",children:["q","r","b","n"].map(V=>p.jsx("div",{className:"w-16 h-16 cursor-pointer bg-slate-700 hover:bg-indigo-600 rounded-xl p-2 transition-all hover:scale-110 active:scale-95",onClick:()=>A(`${e.turn()}${V.toUpperCase()}`),children:p.jsx("img",{src:`https://images.chesscomfiles.com/chess-themes/pieces/neo/150/${e.turn()}${V}.png`,alt:V,className:"w-full h-full object-contain"})},V))}),p.jsx(ut,{variant:"ghost",className:"text-slate-400 hover:text-white hover:bg-white/5",onClick:()=>A(void 0),children:"Cancel"})]})}),$&&p.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-black/70 backdrop-blur-md animate-in fade-in duration-500",children:p.jsxs("div",{className:"text-center p-8",children:[p.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-indigo-500/50 animate-bounce",children:p.jsx(ud,{className:"w-10 h-10 text-white"})}),p.jsx("h2",{className:"text-4xl font-black italic text-white mb-2 tracking-tighter",children:"GAME OVER"}),p.jsx("div",{className:"text-xl font-bold text-indigo-400 uppercase tracking-[0.2em] mb-8",children:J}),p.jsx("div",{className:"flex gap-4 justify-center",children:p.jsxs(ut,{onClick:u,className:"bg-white text-black hover:bg-slate-200 font-bold px-8 h-12 rounded-xl",children:[p.jsx(sx,{className:"w-4 h-4 mr-2"}),"Play Again"]})})]})})]})});function YI({onFlip:t,onResign:e,onDraw:r,onReset:n,gameMode:i,disabled:a=!1}){return p.jsxs("div",{className:"flex flex-wrap gap-3 justify-center md:justify-start",children:[p.jsx(ut,{variant:"secondary",size:"icon",onClick:t,className:"bg-slate-800 hover:bg-slate-700 text-slate-200 border border-white/10",title:"Flip Board",children:p.jsx(_C,{className:"w-5 h-5"})}),i==="ai"&&p.jsxs(ut,{variant:"secondary",onClick:n,className:"bg-emerald-600/20 hover:bg-emerald-600/30 text-emerald-400 border border-emerald-500/20",children:[p.jsx(sx,{className:"w-4 h-4 mr-2"}),"Vn mi"]}),i==="online"&&p.jsxs(p.Fragment,{children:[p.jsxs(ut,{variant:"destructive",onClick:e,disabled:a,className:"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20",children:[p.jsx(mC,{className:"w-4 h-4 mr-2"}),"Xin thua"]}),p.jsxs(ut,{variant:"secondary",onClick:r,disabled:a,className:"bg-amber-500/10 hover:bg-amber-500/20 text-amber-400 border border-amber-500/20",children:[p.jsx(yC,{className:"w-4 h-4 mr-2"}),"Xin ha"]})]})]})}var ZI=b.createContext(void 0);function zg(t){const e=b.useContext(ZI);return t||e||"ltr"}function JI(t,[e,r]){return Math.min(r,Math.max(e,t))}function XI(t,e){return b.useReducer((r,n)=>e[r][n]??r,t)}var Vg="ScrollArea",[i1]=Si(Vg),[e5,Rn]=i1(Vg),o1=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:a=600,...l}=t,[u,d]=b.useState(null),[h,g]=b.useState(null),[v,y]=b.useState(null),[x,S]=b.useState(null),[_,E]=b.useState(null),[C,T]=b.useState(0),[O,A]=b.useState(0),[U,z]=b.useState(!1),[$,J]=b.useState(!1),V=_r(e,ee=>d(ee)),W=zg(i);return p.jsx(e5,{scope:r,type:n,dir:W,scrollHideDelay:a,scrollArea:u,viewport:h,onViewportChange:g,content:v,onContentChange:y,scrollbarX:x,onScrollbarXChange:S,scrollbarXEnabled:U,onScrollbarXEnabledChange:z,scrollbarY:_,onScrollbarYChange:E,scrollbarYEnabled:$,onScrollbarYEnabledChange:J,onCornerWidthChange:T,onCornerHeightChange:A,children:p.jsx(Ct.div,{dir:W,...l,ref:V,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":O+"px",...t.style}})})});o1.displayName=Vg;var a1="ScrollAreaViewport",l1=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:i,...a}=t,l=Rn(a1,r),u=b.useRef(null),d=_r(e,u,l.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(Ct.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});l1.displayName=a1;var ms="ScrollAreaScrollbar",qg=b.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Rn(ms,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=i,u=t.orientation==="horizontal";return b.useEffect(()=>(u?a(!0):l(!0),()=>{u?a(!1):l(!1)}),[u,a,l]),i.type==="hover"?p.jsx(t5,{...n,ref:e,forceMount:r}):i.type==="scroll"?p.jsx(r5,{...n,ref:e,forceMount:r}):i.type==="auto"?p.jsx(c1,{...n,ref:e,forceMount:r}):i.type==="always"?p.jsx(Wg,{...n,ref:e}):null});qg.displayName=ms;var t5=b.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Rn(ms,t.__scopeScrollArea),[a,l]=b.useState(!1);return b.useEffect(()=>{const u=i.scrollArea;let d=0;if(u){const h=()=>{window.clearTimeout(d),l(!0)},g=()=>{d=window.setTimeout(()=>l(!1),i.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",g),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",g)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx(ki,{present:r||a,children:p.jsx(c1,{"data-state":a?"visible":"hidden",...n,ref:e})})}),r5=b.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Rn(ms,t.__scopeScrollArea),a=t.orientation==="horizontal",l=Td(()=>d("SCROLL_END"),100),[u,d]=XI("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,i.scrollHideDelay,d]),b.useEffect(()=>{const h=i.viewport,g=a?"scrollLeft":"scrollTop";if(h){let v=h[g];const y=()=>{const x=h[g];v!==x&&(d("SCROLL"),l()),v=x};return h.addEventListener("scroll",y),()=>h.removeEventListener("scroll",y)}},[i.viewport,a,d,l]),p.jsx(ki,{present:r||u!=="hidden",children:p.jsx(Wg,{"data-state":u==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:ft(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:ft(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),c1=b.forwardRef((t,e)=>{const r=Rn(ms,t.__scopeScrollArea),{forceMount:n,...i}=t,[a,l]=b.useState(!1),u=t.orientation==="horizontal",d=Td(()=>{if(r.viewport){const h=r.viewport.offsetWidth<r.viewport.scrollWidth,g=r.viewport.offsetHeight<r.viewport.scrollHeight;l(u?h:g)}},10);return la(r.viewport,d),la(r.content,d),p.jsx(ki,{present:n||a,children:p.jsx(Wg,{"data-state":a?"visible":"hidden",...i,ref:e})})}),Wg=b.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,i=Rn(ms,t.__scopeScrollArea),a=b.useRef(null),l=b.useRef(0),[u,d]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=p1(u.viewport,u.content),g={...n,sizes:u,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:y=>a.current=y,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:y=>l.current=y};function v(y,x){return l5(y,l.current,u,x)}return r==="horizontal"?p.jsx(n5,{...g,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const y=i.viewport.scrollLeft,x=xw(y,u,i.dir);a.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollLeft=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollLeft=v(y,i.dir))}}):r==="vertical"?p.jsx(s5,{...g,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const y=i.viewport.scrollTop,x=xw(y,u);a.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollTop=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollTop=v(y))}}):null}),n5=b.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,a=Rn(ms,t.__scopeScrollArea),[l,u]=b.useState(),d=b.useRef(null),h=_r(e,d,a.onScrollbarXChange);return b.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),p.jsx(d1,{"data-orientation":"horizontal",...i,ref:h,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ed(r)+"px",...t.style},onThumbPointerDown:g=>t.onThumbPointerDown(g.x),onDragScroll:g=>t.onDragScroll(g.x),onWheelScroll:(g,v)=>{if(a.viewport){const y=a.viewport.scrollLeft+g.deltaX;t.onWheelScroll(y),m1(y,v)&&g.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Zu(l.paddingLeft),paddingEnd:Zu(l.paddingRight)}})}})}),s5=b.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,a=Rn(ms,t.__scopeScrollArea),[l,u]=b.useState(),d=b.useRef(null),h=_r(e,d,a.onScrollbarYChange);return b.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),p.jsx(d1,{"data-orientation":"vertical",...i,ref:h,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ed(r)+"px",...t.style},onThumbPointerDown:g=>t.onThumbPointerDown(g.y),onDragScroll:g=>t.onDragScroll(g.y),onWheelScroll:(g,v)=>{if(a.viewport){const y=a.viewport.scrollTop+g.deltaY;t.onWheelScroll(y),m1(y,v)&&g.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Zu(l.paddingTop),paddingEnd:Zu(l.paddingBottom)}})}})}),[i5,u1]=i1(ms),d1=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:a,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:g,onResize:v,...y}=t,x=Rn(ms,r),[S,_]=b.useState(null),E=_r(e,V=>_(V)),C=b.useRef(null),T=b.useRef(""),O=x.viewport,A=n.content-n.viewport,U=hr(g),z=hr(d),$=Td(v,10);function J(V){if(C.current){const W=V.clientX-C.current.left,ee=V.clientY-C.current.top;h({x:W,y:ee})}}return b.useEffect(()=>{const V=W=>{const ee=W.target;S?.contains(ee)&&U(W,A)};return document.addEventListener("wheel",V,{passive:!1}),()=>document.removeEventListener("wheel",V,{passive:!1})},[O,S,A,U]),b.useEffect(z,[n,z]),la(S,$),la(x.content,$),p.jsx(i5,{scope:r,scrollbar:S,hasThumb:i,onThumbChange:hr(a),onThumbPointerUp:hr(l),onThumbPositionChange:z,onThumbPointerDown:hr(u),children:p.jsx(Ct.div,{...y,ref:E,style:{position:"absolute",...y.style},onPointerDown:ft(t.onPointerDown,V=>{V.button===0&&(V.target.setPointerCapture(V.pointerId),C.current=S.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),J(V))}),onPointerMove:ft(t.onPointerMove,J),onPointerUp:ft(t.onPointerUp,V=>{const W=V.target;W.hasPointerCapture(V.pointerId)&&W.releasePointerCapture(V.pointerId),document.body.style.webkitUserSelect=T.current,x.viewport&&(x.viewport.style.scrollBehavior=""),C.current=null})})})}),Yu="ScrollAreaThumb",f1=b.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=u1(Yu,t.__scopeScrollArea);return p.jsx(ki,{present:r||i.hasThumb,children:p.jsx(o5,{ref:e,...n})})}),o5=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...i}=t,a=Rn(Yu,r),l=u1(Yu,r),{onThumbPositionChange:u}=l,d=_r(e,v=>l.onThumbChange(v)),h=b.useRef(void 0),g=Td(()=>{h.current&&(h.current(),h.current=void 0)},100);return b.useEffect(()=>{const v=a.viewport;if(v){const y=()=>{if(g(),!h.current){const x=c5(v,u);h.current=x,u()}};return u(),v.addEventListener("scroll",y),()=>v.removeEventListener("scroll",y)}},[a.viewport,g,u]),p.jsx(Ct.div,{"data-state":l.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ft(t.onPointerDownCapture,v=>{const x=v.target.getBoundingClientRect(),S=v.clientX-x.left,_=v.clientY-x.top;l.onThumbPointerDown({x:S,y:_})}),onPointerUp:ft(t.onPointerUp,l.onThumbPointerUp)})});f1.displayName=Yu;var Hg="ScrollAreaCorner",h1=b.forwardRef((t,e)=>{const r=Rn(Hg,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?p.jsx(a5,{...t,ref:e}):null});h1.displayName=Hg;var a5=b.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,i=Rn(Hg,r),[a,l]=b.useState(0),[u,d]=b.useState(0),h=!!(a&&u);return la(i.scrollbarX,()=>{const g=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(g),d(g)}),la(i.scrollbarY,()=>{const g=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(g),l(g)}),h?p.jsx(Ct.div,{...n,ref:e,style:{width:a,height:u,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Zu(t){return t?parseInt(t,10):0}function p1(t,e){const r=t/e;return isNaN(r)?0:r}function Ed(t){const e=p1(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function l5(t,e,r,n="ltr"){const i=Ed(r),a=i/2,l=e||a,u=i-l,d=r.scrollbar.paddingStart+l,h=r.scrollbar.size-r.scrollbar.paddingEnd-u,g=r.content-r.viewport,v=n==="ltr"?[0,g]:[g*-1,0];return g1([d,h],v)(t)}function xw(t,e,r="ltr"){const n=Ed(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,l=e.content-e.viewport,u=a-n,d=r==="ltr"?[0,l]:[l*-1,0],h=JI(t,d);return g1([0,l],[0,u])(h)}function g1(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function m1(t,e){return t>0&&t<e}var c5=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return(function i(){const a={left:t.scrollLeft,top:t.scrollTop},l=r.left!==a.left,u=r.top!==a.top;(l||u)&&e(),r=a,n=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(n)};function Td(t,e){const r=hr(t),n=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(n.current),[]),b.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function la(t,e){const r=hr(e);jn(()=>{let n=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(n),i.unobserve(t)}}},[t,r])}var v1=o1,u5=l1,d5=h1;const Kg=b.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(v1,{ref:n,className:dt("relative overflow-hidden",t),...r,children:[p.jsx(u5,{className:"h-full w-full rounded-[inherit]",children:e}),p.jsx(y1,{}),p.jsx(d5,{})]}));Kg.displayName=v1.displayName;const y1=b.forwardRef(({className:t,orientation:e="vertical",...r},n)=>p.jsx(qg,{ref:n,orientation:e,className:dt("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:p.jsx(f1,{className:"relative flex-1 rounded-full bg-border"})}));y1.displayName=qg.displayName;function f5({history:t}){const e=b.useRef(null);b.useEffect(()=>{if(e.current){const n=e.current.querySelector("[data-radix-scroll-area-viewport]");n&&(n.scrollTop=n.scrollHeight)}},[t]);const r=[];for(let n=0;n<t.length;n+=2)r.push({number:Math.floor(n/2)+1,white:t[n],black:t[n+1]||""});return p.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden flex flex-col h-full shadow-lg",children:[p.jsxs("div",{className:"px-4 py-3 bg-white/5 border-b border-white/5 flex justify-between items-center",children:[p.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Move History"}),p.jsxs("span",{className:"text-[10px] bg-indigo-500/20 text-indigo-300 px-2 py-0.5 rounded-full font-mono",children:[t.length," moves"]})]}),p.jsx(Kg,{className:"flex-1 p-4 h-[200px]",ref:e,children:p.jsx("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-y-1 gap-x-2 text-sm font-medium",children:r.map((n,i)=>p.jsxs("div",{className:"contents group",children:[p.jsxs("div",{className:"text-slate-600 font-mono py-1 text-right pr-1 group-hover:text-slate-400 transition-colors",children:[n.number,"."]}),p.jsx("div",{className:"bg-indigo-500/5 text-indigo-200 py-1 px-2 rounded hover:bg-indigo-500/10 transition-colors cursor-default text-center",children:n.white}),p.jsx("div",{className:`py-1 px-2 rounded transition-colors text-center cursor-default ${n.black?"bg-indigo-500/5 text-indigo-200 hover:bg-indigo-500/10":""}`,children:n.black})]},i))})})]})}function h5({messages:t,onSendMessage:e,disabled:r}){const[n,i]=b.useState(""),a=b.useRef(null);b.useEffect(()=>{if(a.current){const u=a.current.querySelector("[data-radix-scroll-area-viewport]");u&&(u.scrollTop=u.scrollHeight)}},[t]);const l=u=>{u.preventDefault(),n.trim()&&(e(n),i(""))};return p.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden flex flex-col h-[300px] lg:h-full",children:[p.jsx("div",{className:"px-4 py-3 bg-white/5 border-b border-white/5",children:p.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest text-indigo-400",children:"Tr chuyn trc tip"})}),p.jsx(Kg,{className:"flex-1 p-4",ref:a,children:p.jsxs("div",{className:"space-y-4",children:[t.length===0&&p.jsx("div",{className:"text-center text-slate-600 text-xs mt-4 italic",children:"Cha c tin nhn no. Hy ni xin cho!"}),t.map((u,d)=>p.jsxs("div",{className:`flex flex-col ${u.isMe?"items-end":"items-start"}`,children:[!u.isMe&&p.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 ml-1",children:u.sender}),p.jsx("div",{className:`
                  px-3 py-2 rounded-xl text-sm max-w-[85%] shadow-sm
                  ${u.isMe?"bg-indigo-600 text-white rounded-tr-sm":"bg-slate-800 text-slate-200 border border-white/5 rounded-tl-sm"}
                `,children:u.text})]},d))]})}),p.jsxs("form",{onSubmit:l,className:"p-3 bg-slate-900/50 border-t border-white/5 flex gap-2",children:[p.jsx(os,{value:n,onChange:u=>i(u.target.value),placeholder:"Nhp tin nhn...",className:"bg-slate-800 border-none focus-visible:ring-indigo-500/50",disabled:r}),p.jsx(ut,{type:"submit",size:"icon",disabled:r||!n.trim(),className:"bg-indigo-600 hover:bg-indigo-500",children:p.jsx(SC,{className:"w-4 h-4"})})]})]})}function p5({evaluation:t,orientation:e}){const[r,n]=b.useState(50);b.useEffect(()=>{let a=0;if(t.startsWith("M")||t.startsWith("-M"))a=!t.startsWith("-")?100:-100;else{const u=parseFloat(t);isNaN(u)||(a=u)}let l=50+a*5;t.includes("M")&&(t.startsWith("-")?l=0:l=100),l=Math.max(2,Math.min(98,l)),n(l)},[t]);const i=e==="white";return p.jsxs("div",{className:"w-6 h-[400px] md:h-[500px] bg-slate-700 rounded-sm overflow-hidden flex flex-col relative border border-slate-600 shadow-inner",children:[p.jsx("div",{className:"absolute inset-0 bg-[#403d39] w-full h-full"}),p.jsx("div",{className:"absolute w-full bg-white transition-all duration-700 ease-in-out",style:{height:`${r}%`,[i?"bottom":"top"]:0}}),p.jsx("div",{className:`absolute w-full text-center text-[10px] font-bold z-10 
          ${i?r>50?"bottom-1 text-slate-800":"top-1 text-white":r>50?"top-1 text-slate-800":"bottom-1 text-white"}
      `,children:t})]})}function g5({fen:t}){const e=b.useMemo(()=>{const n={p:8,n:2,b:2,r:2,q:1},i={w:{p:0,n:0,b:0,r:0,q:0},b:{p:0,n:0,b:0,r:0,q:0}},a=t.split(" ")[0];for(const d of a){if(d==="/"||!isNaN(parseInt(d)))continue;const h=d===d.toUpperCase()?"w":"b",g=d.toLowerCase();i[h][g]!==void 0&&i[h][g]++}const l=[],u=[];return Object.keys(n).forEach(d=>{for(let h=0;h<n[d]-i.w[d];h++)l.push(`w${d.toUpperCase()}`);for(let h=0;h<n[d]-i.b[d];h++)u.push(`b${d.toUpperCase()}`)}),{whiteCaptured:l,blackCaptured:u}},[t]),r=n=>p.jsx("div",{className:"flex flex-wrap gap-0.5 min-h-[24px]",children:n.map((i,a)=>p.jsx("img",{src:`https://images.chesscomfiles.com/chess-themes/pieces/neo/150/${i.toLowerCase()}.png`,alt:i,className:"w-5 h-5 md:w-6 md:h-6 object-contain opacity-80"},a))});return p.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[p.jsxs("div",{className:"flex justify-between items-center bg-white/5 rounded-lg p-2 border border-white/10",children:[p.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"Captured by Black"}),r(e.whiteCaptured)]}),p.jsxs("div",{className:"flex justify-between items-center bg-white/5 rounded-lg p-2 border border-white/10",children:[p.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"Captured by White"}),r(e.blackCaptured)]})]})}function Cd(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function m5(t,e,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(g){try{h(n.next(g))}catch(v){l(v)}}function d(g){try{h(n.throw(g))}catch(v){l(v)}}function h(g){g.done?a(g.value):i(g.value).then(u,d)}h((n=n.apply(t,e||[])).next())})}const v5=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Gg extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class y5 extends Gg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _w extends Gg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Sw extends Gg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(zp||(zp={}));class w5{constructor(e,{headers:r={},customFetch:n,region:i=zp.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=v5(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return m5(this,arguments,void 0,function*(r,n={}){var i;let a,l;try{const{headers:u,method:d,body:h,signal:g,timeout:v}=n;let y={},{region:x}=n;x||(x=this.region);const S=new URL(`${this.url}/${r}`);x&&x!=="any"&&(y["x-region"]=x,S.searchParams.set("forceFunctionRegion",x));let _;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",_=h):typeof h=="string"?(y["Content-Type"]="text/plain",_=h):typeof FormData<"u"&&h instanceof FormData?_=h:(y["Content-Type"]="application/json",_=JSON.stringify(h)):_=h;let E=g;v&&(l=new AbortController,a=setTimeout(()=>l.abort(),v),g?(E=l.signal,g.addEventListener("abort",()=>l.abort())):E=l.signal);const C=yield this.fetch(S.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:_,signal:E}).catch(U=>{throw new y5(U)}),T=C.headers.get("x-relay-error");if(T&&T==="true")throw new _w(C);if(!C.ok)throw new Sw(C);let O=((i=C.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),A;return O==="application/json"?A=yield C.json():O==="application/octet-stream"||O==="application/pdf"?A=yield C.blob():O==="text/event-stream"?A=C:O==="multipart/form-data"?A=yield C.formData():A=yield C.text(),{data:A,error:null,response:C}}catch(u){return{data:null,error:u,response:u instanceof Sw||u instanceof _w?u.context:void 0}}finally{a&&clearTimeout(a)}})}}var b5=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},x5=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,u=null,d=null,h=a.status,g=a.statusText;if(a.ok){var v,y;if(r.method!=="HEAD"){var x;const C=await a.text();C===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?u=C:u=JSON.parse(C))}const _=(v=r.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),E=(y=a.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");_&&E&&E.length>1&&(d=parseInt(E[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var S;const _=await a.text();try{l=JSON.parse(_),Array.isArray(l)&&a.status===404&&(u=[],l=null,h=200,g="OK")}catch{a.status===404&&_===""?(h=204,g="No Content"):l={message:_}}if(l&&r.isMaybeSingle&&(!(l==null||(S=l.details)===null||S===void 0)&&S.includes("0 rows"))&&(l=null,h=200,g="OK"),l&&r.shouldThrowOnError)throw new b5(l)}return{error:l,data:u,count:d,status:h,statusText:g}});return this.shouldThrowOnError||(i=i.catch(a=>{var l;let u="";const d=a?.cause;if(d){var h,g,v,y;const S=(h=d?.message)!==null&&h!==void 0?h:"",_=(g=d?.code)!==null&&g!==void 0?g:"";u=`${(v=a?.name)!==null&&v!==void 0?v:"FetchError"}: ${a?.message}`,u+=`

Caused by: ${(y=d?.name)!==null&&y!==void 0?y:"Error"}: ${S}`,_&&(u+=` (${_})`),d?.stack&&(u+=`
${d.stack}`)}else{var x;u=(x=a?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(l=a?.name)!==null&&l!==void 0?l:"FetchError"}: ${a?.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},_5=class extends x5{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var l;const u=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${u};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const kw=new RegExp("[,()]");var qo=class extends _5{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&kw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&kw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},S5=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}select(t,e){const{head:r=!1,count:n}=e??{},i=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new qo({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new qo({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new qo({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:e}={}){var r;const n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new qo({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new qo({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},k5=class w1{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new S5(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new w1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:a}={}){var l;let u;const d=new URL(`${this.url}/rpc/${e}`);let h;n||i?(u=n?"HEAD":"GET",Object.entries(r).filter(([v,y])=>y!==void 0).map(([v,y])=>[v,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([v,y])=>{d.searchParams.append(v,y)})):(u="POST",h=r);const g=new Headers(this.headers);return a&&g.set("Prefer",`count=${a}`),new qo({method:u,url:d,headers:g,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class E5{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const T5="2.89.0",C5=`realtime-js/${T5}`,b1="1.0.0",O5="2.0.0",Ew=b1,Vp=1e4,P5=1e3,N5=100;var fi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(fi||(fi={}));var dr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(dr||(dr={}));var Hn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Hn||(Hn={}));var qp;(function(t){t.websocket="websocket"})(qp||(qp={}));var qi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(qi||(qi={}));class j5{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,r,n){var i,a;const l=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",d=(a=e.join_ref)!==null&&a!==void 0?a:"",h=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(g).length===0?"":JSON.stringify(g);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+h.length+v.length,x=new ArrayBuffer(this.HEADER_LENGTH+y);let S=new DataView(x),_=0;S.setUint8(_++,this.KINDS.userBroadcastPush),S.setUint8(_++,d.length),S.setUint8(_++,u.length),S.setUint8(_++,l.length),S.setUint8(_++,h.length),S.setUint8(_++,v.length),S.setUint8(_++,r),Array.from(d,C=>S.setUint8(_++,C.charCodeAt(0))),Array.from(u,C=>S.setUint8(_++,C.charCodeAt(0))),Array.from(l,C=>S.setUint8(_++,C.charCodeAt(0))),Array.from(h,C=>S.setUint8(_++,C.charCodeAt(0))),Array.from(v,C=>S.setUint8(_++,C.charCodeAt(0)));var E=new Uint8Array(x.byteLength+n.byteLength);return E.set(new Uint8Array(x),0),E.set(new Uint8Array(n),x.byteLength),E.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,a,l,u,d]=n;return r({join_ref:i,ref:a,topic:l,event:u,payload:d})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,r,i)}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2),l=r.getUint8(3),u=r.getUint8(4);let d=this.HEADER_LENGTH+4;const h=n.decode(e.slice(d,d+i));d=d+i;const g=n.decode(e.slice(d,d+a));d=d+a;const v=n.decode(e.slice(d,d+l));d=d+l;const y=e.slice(d,e.byteLength),x=u===this.JSON_ENCODING?JSON.parse(n.decode(y)):y,S={type:this.BROADCAST_EVENT,event:g,payload:x};return l>0&&(S.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class x1{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Rt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Rt||(Rt={}));const Tw=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=R5(l,t,e,i),a),{}):{}},R5=(t,e,r,n)=>{const i=e.find(u=>u.name===t),a=i?.type,l=r[t];return a&&!n.includes(a)?_1(a,l):Wp(l)},_1=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return L5(e,r)}switch(t){case Rt.bool:return A5(e);case Rt.float4:case Rt.float8:case Rt.int2:case Rt.int4:case Rt.int8:case Rt.numeric:case Rt.oid:return I5(e);case Rt.json:case Rt.jsonb:return D5(e);case Rt.timestamp:return M5(e);case Rt.abstime:case Rt.date:case Rt.daterange:case Rt.int4range:case Rt.int8range:case Rt.money:case Rt.reltime:case Rt.text:case Rt.time:case Rt.timestamptz:case Rt.timetz:case Rt.tsrange:case Rt.tstzrange:return Wp(e);default:return Wp(e)}},Wp=t=>t,A5=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},I5=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},D5=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},L5=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const l=t.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>_1(e,u))}return t},M5=t=>typeof t=="string"?t.replace(" ","T"):t,S1=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Gh{constructor(e,r,n={},i=Vp){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Cw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Cw||(Cw={}));class vl{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vl.syncState(this.state,i,a,l),this.pendingDiffs.forEach(d=>{this.state=vl.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=vl.syncDiff(this.state,i,a,l),u())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),l=this.transformState(r),u={},d={};return this.map(a,(h,g)=>{l[h]||(d[h]=g)}),this.map(l,(h,g)=>{const v=a[h];if(v){const y=g.map(E=>E.presence_ref),x=v.map(E=>E.presence_ref),S=g.filter(E=>x.indexOf(E.presence_ref)<0),_=v.filter(E=>y.indexOf(E.presence_ref)<0);S.length>0&&(u[h]=S),_.length>0&&(d[h]=_)}else u[h]=g}),this.syncDiff(a,{joins:u,leaves:d},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(u,d)=>{var h;const g=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(d),g.length>0){const v=e[u].map(x=>x.presence_ref),y=g.filter(x=>v.indexOf(x.presence_ref)<0);e[u].unshift(...y)}n(u,g,d)}),this.map(l,(u,d)=>{let h=e[u];if(!h)return;const g=d.map(v=>v.presence_ref);h=h.filter(v=>g.indexOf(v.presence_ref)<0),e[u]=h,i(u,h,d),h.length===0&&delete e[u]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ow;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ow||(Ow={}));var yl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(yl||(yl={}));var Ps;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ps||(Ps={}));class Go{constructor(e,r={config:{}},n){var i,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=dr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gh(this,Hn.join,this.params,this.timeout),this.rejoinTimer=new x1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=dr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=dr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hn.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new vl(this),this.broadcastEndpointURL=S1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==dr.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,h=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[yl.PRESENCE]&&this.bindings[yl.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,v={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(x=>e?.(Ps.CHANNEL_ERROR,x)),this._onClose(()=>e?.(Ps.CLOSED)),this.updateJoinPayload(Object.assign({config:y},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){e?.(Ps.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,E=(S=_?.length)!==null&&S!==void 0?S:0,C=[];for(let T=0;T<E;T++){const O=_[T],{filter:{event:A,schema:U,table:z,filter:$}}=O,J=x&&x[T];if(J&&J.event===A&&Go.isFilterValueEqual(J.schema,U)&&Go.isFilterValueEqual(J.table,z)&&Go.isFilterValueEqual(J.filter,$))C.push(Object.assign(Object.assign({},O),{id:J.id}));else{this.unsubscribe(),this.state=dr.errored,e?.(Ps.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Ps.SUBSCRIBED);return}}).receive("error",x=>{this.state=dr.errored,e?.(Ps.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ps.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===dr.joined&&e===yl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const h=await u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const h=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),h.receive("ok",()=>a("ok")),h.receive("error",()=>a("error")),h.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=dr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Gh(this,Hn.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),l}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Gh(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>N5){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:h,join:g}=Hn;if(n&&[u,d,h,g].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var S,_,E;return((S=x.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(_=x.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(x=>x.callback(y,n)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var S,_,E,C,T,O;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const A=x.id,U=(S=x.filter)===null||S===void 0?void 0:S.event;return A&&((_=r.ids)===null||_===void 0?void 0:_.includes(A))&&(U==="*"||U?.toLocaleLowerCase()===((E=r.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const A=(T=(C=x?.filter)===null||C===void 0?void 0:C.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return A==="*"||A===((O=r?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const S=y.data,{schema:_,table:E,commit_timestamp:C,type:T,errors:O}=S;y=Object.assign(Object.assign({},{schema:_,table:E,commit_timestamp:C,eventType:T,new:{},old:{},errors:O}),this._getPayloadRecords(S))}x.callback(y,n)})}_isClosed(){return this.state===dr.closed}_isJoined(){return this.state===dr.joined}_isJoining(){return this.state===dr.joining}_isLeaving(){return this.state===dr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Go.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hn.close,{},e)}_onError(e){this._on(Hn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Tw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Tw(e.columns,e.old_record)),r}}const Qh=()=>{},hu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$5=[1e3,2e3,5e3,1e4],F5=1e4,U5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class B5{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Vp,this.transport=null,this.heartbeatIntervalMs=hu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qh,this.ref=0,this.reconnectTimer=null,this.vsn=Ew,this.logger=Qh,this.conn=null,this.sendBuffer=[],this.serializer=new j5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${qp.websocket}`,this.httpEndpoint=S1(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=E5.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case fi.connecting:return qi.Connecting;case fi.open:return qi.Open;case fi.closing:return qi.Closing;default:return qi.Closed}}isConnected(){return this.connectionState()===qi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Go(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(P5,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},hu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:l}=r,u=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${i} ${u}`.trim(),a),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(i,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===fi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===fi.open||this.conn.readyState===fi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([U5],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const a={access_token:r,version:C5};r&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Hn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new x1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,a,l,u,d,h,g,v,y,x;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:Vp,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:hu.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:Qh,this.vsn=(d=e?.vsn)!==null&&d!==void 0?d:Ew,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(S=>$5[S-1]||F5),this.vsn){case b1:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((S,_)=>_(JSON.stringify(S))),this.decode=(v=e?.decode)!==null&&v!==void 0?v:((S,_)=>_(JSON.parse(S)));break;case O5:this.encode=(y=e?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var $l=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function z5(t,e,r){const n=new URL(e,t);if(r)for(const[i,a]of Object.entries(r))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function V5(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function q5(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:l}){const u=z5(t.baseUrl,n,i),d=await V5(t.auth),h=await e(u,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...d,...l},body:a?JSON.stringify(a):void 0}),g=await h.text(),v=(h.headers.get("content-type")||"").includes("application/json"),y=v&&g?JSON.parse(g):g;if(!h.ok){const x=v?y:void 0,S=x?.error;throw new $l(S?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:S?.type,icebergCode:S?.code,details:x})}return{status:h.status,headers:h.headers,data:y}}}}function pu(t){return t.join("")}var W5=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:pu(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pu(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pu(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pu(t.namespace)}`}),!0}catch(e){if(e instanceof $l&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof $l&&r.status===409)return;throw r}}};function Lo(t){return t.join("")}var H5=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Lo(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Lo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Lo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Lo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof $l&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof $l&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},K5=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=q5({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new W5(this.client,e),this.tableOps=new H5(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Od=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function qt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var G5=class extends Od{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Hp=class extends Od{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Qg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Q5=()=>Response,Kp=t=>{if(Array.isArray(t))return t.map(r=>Kp(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Kp(n)}),e},Y5=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Z5=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Fl(t){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fl(t)}function J5(t,e){if(Fl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X5(t){var e=J5(t,"string");return Fl(e)=="symbol"?e:e+""}function eD(t,e,r){return(e=X5(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Be(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pw(Object(r),!0).forEach(function(n){eD(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const Yh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},tD=async(t,e,r)=>{t instanceof await Q5()&&!r?.noResolveJson?t.json().then(n=>{const i=t.status||500,a=n?.statusCode||i+"";e(new G5(Yh(n),i,a))}).catch(n=>{e(new Hp(Yh(n),n))}):e(new Hp(Yh(t),t))},rD=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!n?i:(Y5(n)?(i.headers=Be({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),Be(Be({},i),r))};async function Yl(t,e,r,n,i,a){return new Promise((l,u)=>{t(r,rD(e,n,i,a)).then(d=>{if(!d.ok)throw d;return n?.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>tD(d,u,n))})}async function Ul(t,e,r,n){return Yl(t,"GET",e,r,n)}async function Wn(t,e,r,n,i){return Yl(t,"POST",e,n,i,r)}async function Gp(t,e,r,n,i){return Yl(t,"PUT",e,n,i,r)}async function nD(t,e,r,n){return Yl(t,"HEAD",e,Be(Be({},r),{},{noResolveJson:!0}),n)}async function Yg(t,e,r,n,i){return Yl(t,"DELETE",e,n,i,r)}var sD=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(qt(e))return{data:null,error:e};throw e}}};let k1;k1=Symbol.toStringTag;var iD=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[k1]="BlobDownloadBuilder",this.promise=null}asStream(){return new sD(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(qt(e))return{data:null,error:e};throw e}}};const oD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Nw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var aD=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=Qg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var i=this;try{let a;const l=Be(Be({},Nw),n);let u=Be(Be({},i.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",i.encodeMetadata(d)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),d&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(d))):(a=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=i.toBase64(i.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),n?.headers&&(u=Be(Be({},u),n.headers));const h=i._removeEmptyFolders(e),g=i._getFinalPath(h),v=await(t=="PUT"?Gp:Wn)(i.fetch,`${i.url}/object/${g}`,a,Be({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:v.Id,fullPath:v.Key},error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(qt(a))return{data:null,error:a};throw a}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var i=this;const a=i._removeEmptyFolders(t),l=i._getFinalPath(a),u=new URL(i.url+`/object/upload/sign/${l}`);u.searchParams.set("token",e);try{let d;const h=Be({upsert:Nw.upsert},n),g=Be(Be({},i.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType),{data:{path:a,fullPath:(await Gp(i.fetch,u.toString(),d,{headers:g})).Key},error:null}}catch(d){if(i.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const i=Be({},r.headers);e?.upsert&&(i["x-upsert"]="true");const a=await Wn(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),l=new URL(r.url+a.url),u=l.searchParams.get("token");if(!u)throw new Od("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await Wn(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}}async copy(t,e,r){var n=this;try{return{data:{path:(await Wn(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,r){var n=this;try{let i=n._getFinalPath(t),a=await Wn(n.fetch,`${n.url}/object/sign/${i}`,Be({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${n.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,r){var n=this;try{const i=await Wn(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Be(Be({},l),{},{signedUrl:l.signedURL?encodeURI(`${n.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}}download(t,e){const r=typeof e?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(e?.transform||{}),i=n?`?${n}`:"",a=this._getFinalPath(t),l=()=>Ul(this.fetch,`${this.url}/${r}/${a}${i}`,{headers:this.headers,noResolveJson:!0});return new iD(l,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:Kp(await Ul(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await nD(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(qt(n)&&n instanceof Hp){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}async remove(t){var e=this;try{return{data:await Yg(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const i=Be(Be(Be({},oD),e),{},{prefix:t||""});return{data:await Wn(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}}async listV2(t,e){var r=this;try{const n=Be({},t);return{data:await Wn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const E1="2.89.0",T1={"X-Client-Info":`storage-js/${E1}`};var lD=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const i=new URL(t);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Be(Be({},T1),e),this.fetch=Qg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await Ul(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Ul(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await Wn(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await Gp(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await Wn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Yg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},cD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},T1),e),this.fetch=Qg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Wn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const n=r.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await Ul(e.fetch,i,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Yg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!Z5(t))throw new Od("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new K5({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,a){const l=i[a];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(i,u),error:null}}catch(d){if(n)throw d;return{data:null,error:d}}}}})}};const Zg={"X-Client-Info":`storage-js/${E1}`,"Content-Type":"application/json"};var C1=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function mn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Zh=class extends C1{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},uD=class extends C1{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Jg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),dD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},jw=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fD=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const n=t.status||500,i=t;if(typeof i.json=="function")i.json().then(a=>{const l=a?.statusCode||a?.code||n+"";e(new Zh(jw(a),n,l))}).catch(()=>{const a=n+"";e(new Zh(i.statusText||`HTTP ${n} error`,n,a))});else{const a=n+"";e(new Zh(i.statusText||`HTTP ${n} error`,n,a))}}else e(new uD(jw(t),t))},hD=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return n?(dD(n)?(i.headers=Be({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,Be(Be({},i),r)):i};async function pD(t,e,r,n,i,a){return new Promise((l,u)=>{t(r,hD(e,n,i,a)).then(d=>{if(!d.ok)throw d;if(n?.noResolveJson)return d;const h=d.headers.get("content-type");return!h||!h.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>fD(d,u,n))})}async function vn(t,e,r,n,i){return pD(t,"POST",e,n,i,r)}var gD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},Zg),e),this.fetch=Jg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await vn(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await vn(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await vn(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await vn(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}}},mD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},Zg),e),this.fetch=Jg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await vn(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await vn(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await vn(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await vn(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await vn(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}},vD=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},Zg),e),this.fetch=Jg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await vn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await vn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await vn(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await vn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}}},yD=class extends vD{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new wD(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},wD=class extends gD{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,Be(Be({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,Be(Be({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new bD(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},bD=class extends mD{constructor(t,e,r,n,i){super(t,e,i),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,Be(Be({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,Be(Be({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,Be(Be({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,Be(Be({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,Be(Be({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},xD=class extends lD{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new aD(this.url,this.headers,t,this.fetch)}get vectors(){return new yD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new cD(this.url+"/iceberg",this.headers,this.fetch)}};const O1="2.89.0",Wo=30*1e3,Qp=3,Jh=Qp*Wo,_D="http://localhost:9999",SD="supabase.auth.token",kD={"X-Client-Info":`gotrue-js/${O1}`},Yp="X-Supabase-Api-Version",P1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ED=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,TD=600*1e3;class Bl extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ae(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class CD extends Bl{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function OD(t){return Ae(t)&&t.name==="AuthApiError"}class Wi extends Bl{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class $s extends Bl{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class fn extends $s{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function PD(t){return Ae(t)&&t.name==="AuthSessionMissingError"}class Mo extends $s{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gu extends $s{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mu extends $s{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ND(t){return Ae(t)&&t.name==="AuthImplicitGrantRedirectError"}class Rw extends $s{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jD extends $s{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Zp extends $s{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Xh(t){return Ae(t)&&t.name==="AuthRetryableFetchError"}class Aw extends $s{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Jp extends $s{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Iw=` 	
\r=`.split(""),RD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Iw.length;e+=1)t[Iw[e].charCodeAt(0)]=-2;for(let e=0;e<Ju.length;e+=1)t[Ju[e].charCodeAt(0)]=e;return t})();function Dw(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ju[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ju[n]),e.queuedBits-=6}}function N1(t,e,r){const n=RD[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Lw(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{DD(l,n,r)};for(let l=0;l<t.length;l+=1)N1(t.charCodeAt(l),i,a);return e.join("")}function AD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function ID(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}AD(n,e)}}function DD(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ta(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)N1(t.charCodeAt(i),r,n);return new Uint8Array(e)}function LD(t){const e=[];return ID(t,r=>e.push(r)),new Uint8Array(e)}function Ki(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>Dw(i,r,n)),Dw(null,r,n),e.join("")}function MD(t){return Math.round(Date.now()/1e3)+t}function $D(){return Symbol("auth-callback")}const jr=()=>typeof window<"u"&&typeof document<"u",Ui={tested:!1,writable:!1},j1=()=>{if(!jr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ui.tested)return Ui.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ui.tested=!0,Ui.writable=!0}catch{Ui.tested=!0,Ui.writable=!1}return Ui.writable};function FD(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const R1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),UD=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ho=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Bi=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Pr=async(t,e)=>{await t.removeItem(e)};class Pd{constructor(){this.promise=new Pd.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Pd.promiseConstructor=Promise;function ep(t){const e=t.split(".");if(e.length!==3)throw new Jp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!ED.test(e[n]))throw new Jp("JWT not in base64url format");return{header:JSON.parse(Lw(e[0])),payload:JSON.parse(Lw(e[1])),signature:ta(e[2]),raw:{header:e[0],payload:e[1]}}}async function BD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function zD(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){n(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function VD(t){return("0"+t.toString(16)).substr(-2)}function qD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,VD).join("")}async function WD(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function HD(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await WD(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $o(t,e,r=!1){const n=qD();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Ho(t,`${e}-code-verifier`,i);const a=await HD(n);return[a,n===a?"plain":"s256"]}const KD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function GD(t){const e=t.headers.get(Yp);if(!e||!e.match(KD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function QD(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function YD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ZD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fo(t){if(!ZD.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tp(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function JD(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function Mw(t){return JSON.parse(JSON.stringify(t))}const zi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),XD=[502,503,504];async function $w(t){var e;if(!UD(t))throw new Zp(zi(t),0);if(XD.includes(t.status))throw new Zp(zi(t),t.status);let r;try{r=await t.json()}catch(a){throw new Wi(zi(a),a)}let n;const i=GD(t);if(i&&i.getTime()>=P1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Aw(zi(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new fn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Aw(zi(r),t.status,r.weak_password.reasons);throw new CD(zi(r),t.status||500,n)}const eL=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function Ue(t,e,r,n){var i;const a=Object.assign({},n?.headers);a[Yp]||(a[Yp]=P1["2024-01-01"].name),n?.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await tL(t,e,r+u,{headers:a,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(d):{data:Object.assign({},d),error:null}}async function tL(t,e,r,n,i,a){const l=eL(e,n,i,a);let u;try{u=await t(r,Object.assign({},l))}catch(d){throw console.error(d),new Zp(zi(d),0)}if(u.ok||await $w(u),n?.noResolveJson)return u;try{return await u.json()}catch(d){await $w(d)}}function Vn(t){var e;let r=null;sL(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=MD(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Fw(t){const e=Vn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function pi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function rL(t){return{data:t,error:null}}function nL(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,l=Cd(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function Uw(t){return t}function sL(t){return t.access_token&&t.refresh_token&&t.expires_in}const rp=["global","local","others"];class iL{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=R1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=rp[0]){if(rp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rp.join(", ")}`);try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:pi})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Cd(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:nL,redirectTo:r?.redirectTo})}catch(r){if(Ae(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:pi})}catch(r){if(Ae(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Uw});if(g.error)throw g.error;const v=await g.json(),y=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);h[`${E}Page`]=_}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(Ae(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Fo(e);try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:pi})}catch(r){if(Ae(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Fo(e);try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:pi})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Fo(e);try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:pi})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Fo(e.userId);try{const{data:r,error:n}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Fo(e.userId),Fo(e.id);try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,a,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Uw});if(g.error)throw g.error;const v=await g.json(),y=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);h[`${E}Page`]=_}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(Ae(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ae(r))return{data:null,error:r};throw r}}}function Bw(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Uo={debug:!!(globalThis&&j1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class A1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class oL extends A1{}async function aL(t,e,r){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new oL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Uo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function lL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function I1(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function cL(t){return parseInt(t,16)}function uL(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function dL(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:d,resources:h,scheme:g,uri:v,version:y}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const x=I1(t.address),S=g?`${g}://${n}`:n,_=t.statement?`${t.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${x}

${_}`;let C=`URI: ${v}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),u&&(C+=`
Not Before: ${u.toISOString()}`),d&&(C+=`
Request ID: ${d}`),h){let T=`
Resources:`;for(const O of h){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);T+=`
- ${O}`}C+=T}return`${E}
${C}`}class ir extends Error{constructor({message:e,code:r,cause:n,name:i}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Xu extends ir{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function fL({error:t,options:e}){var r,n,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ir({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ir({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ir({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ir({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ir({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ir({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new ir({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ir({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(D1(l)){if(a.rp.id!==l)return new ir({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ir({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ir({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ir({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ir({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function hL({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ir({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ir({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(D1(n)){if(r.rpId!==n)return new ir({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ir({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ir({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ir({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class pL{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const gL=new pL;function mL(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Cd(t,["challenge","user","excludeCredentials"]),a=ta(e).buffer,l=Object.assign(Object.assign({},r),{id:ta(r.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:a,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const h=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},h),{id:ta(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function vL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Cd(t,["challenge","allowCredentials"]),i=ta(e).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:ta(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function yL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ki(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ki(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function wL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ki(new Uint8Array(i.authenticatorData)),clientDataJSON:Ki(new Uint8Array(i.clientDataJSON)),signature:Ki(new Uint8Array(i.signature)),userHandle:i.userHandle?Ki(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function D1(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function zw(){var t,e;return!!(jr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function bL(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Xu("Browser returned unexpected credential type",e)}:{data:null,error:new Xu("Empty credential response",e)}}catch(e){return{data:null,error:fL({error:e,options:t})}}}async function xL(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Xu("Browser returned unexpected credential type",e)}:{data:null,error:new Xu("Empty credential response",e)}}catch(e){return{data:null,error:hL({error:e,options:t})}}}const _L={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},SL={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ed(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const a in i){const l=i[a];if(l!==void 0)if(Array.isArray(l))n[a]=l;else if(r(l))n[a]=l;else if(e(l)){const u=n[a];e(u)?n[a]=ed(u,l):n[a]=ed(l)}else n[a]=l}return n}function kL(t,e){return ed(_L,t,e||{})}function EL(t,e){return ed(SL,t,e||{})}class TL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:u};const d=i??gL.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${n}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=kL(l.webauthn.credential_options.publicKey,a?.create),{data:g,error:v}=await bL({publicKey:h,signal:d});return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}case"request":{const h=EL(l.webauthn.credential_options.publicKey,a?.request),{data:g,error:v}=await xL(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:d}));return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}}}catch(l){return Ae(l)?{data:null,error:l}:{data:null,error:new Wi("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Bl("rpId is required for WebAuthn authentication")};try{if(!zw())return{data:null,error:new Wi("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return Ae(l)?{data:null,error:l}:{data:null,error:new Wi("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Bl("rpId is required for WebAuthn registration")};try{if(!zw())return{data:null,error:new Wi("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(g=>{var v;return(v=g.data)===null||v===void 0?void 0:v.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:u};const{data:d,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(l){return Ae(l)?{data:null,error:l}:{data:null,error:new Wi("Unexpected error in register",l)}}}}lL();const CL={url:_D,storageKey:SD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:kD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Vw(t,e,r){return await r()}const Bo={};class zl{get jwks(){var e,r;return(r=(e=Bo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Bo[this.storageKey]=Object.assign(Object.assign({},Bo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Bo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Bo[this.storageKey]=Object.assign(Object.assign({},Bo[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},CL),e);if(this.storageKey=a.storageKey,this.instanceID=(r=zl.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,zl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&jr()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new iL({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=R1(a.fetch),this.lock=a.lock||Vw,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&jr()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=aL:this.lock=Vw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new TL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:j1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bw(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Bw(this.memoryStorage)),jr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${O1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(jr()&&(r=FD(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),jr()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),ND(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ae(r)?this._returnResult({error:r}):this._returnResult({error:new Wi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Vn}),{data:l,error:u}=a;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(a){if(Ae(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:g,password:v,options:y}=e;let x=null,S=null;this.flowType==="pkce"&&([x,S]=await $o(this.storage,this.storageKey)),a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:g,password:v,data:(r=y?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:x,code_challenge_method:S},xform:Vn})}else if("phone"in e){const{phone:g,password:v,options:y}=e;a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(n=y?.data)!==null&&n!==void 0?n:{},channel:(i=y?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:Vn})}else throw new gu("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return await Pr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(a){if(await Pr(this.storage,`${this.storageKey}-code-verifier`),Ae(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:l,options:u}=e;r=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Fw})}else if("phone"in e){const{phone:a,password:l,options:u}=e;r=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Fw})}else throw new gu("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new Mo;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,a,l,u,d,h,g,v,y;let x,S;if("message"in e)x=e.message,S=e.signature;else{const{chain:_,wallet:E,statement:C,options:T}=e;let O;if(jr())if(typeof E=="object")O=E;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")O=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=E}const A=new URL((r=T?.url)!==null&&r!==void 0?r:window.location.href),U=await O.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=I1(U[0]);let $=(n=T?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!$){const V=await O.request({method:"eth_chainId"});$=cL(V)}const J={domain:A.host,address:z,statement:C,uri:A.href,version:"1",chainId:$,nonce:(i=T?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(a=T?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=T?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=T?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=T?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(g=T?.signInWithEthereum)===null||g===void 0?void 0:g.resources};x=dL(J),S=await O.request({method:"personal_sign",params:[uL(x),z]})}try{const{data:_,error:E}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:S},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Vn});if(E)throw E;if(!_||!_.session||!_.user){const C=new Mo;return this._returnResult({data:{user:null,session:null},error:C})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:E})}catch(_){if(Ae(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var r,n,i,a,l,u,d,h,g,v,y,x;let S,_;if("message"in e)S=e.message,_=e.signature;else{const{chain:E,wallet:C,statement:T,options:O}=e;let A;if(jr())if(typeof C=="object")A=C;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))A=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=C}const U=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const z=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),T?{statement:T}:null));let $;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")$=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)$=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)S=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),_=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${U.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(i=(n=O?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=O?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((l=O?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((u=O?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((d=O?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((h=O?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((v=(g=O?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...O.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const z=await A.signMessage(new TextEncoder().encode(S),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=z}}try{const{data:E,error:C}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Ki(_)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Vn});if(C)throw C;if(!E||!E.session||!E.user){const T=new Mo;return this._returnResult({data:{user:null,session:null},error:T})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(Ae(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const r=await Bi(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new jD;const{data:a,error:l}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Vn});if(await Pr(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const u=new Mo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(await Pr(this.storage,`${this.storageKey}-code-verifier`),Ae(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:l}=e,u=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Vn}),{data:d,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d||!d.session||!d.user){const g=new Mo;return this._returnResult({data:{user:null,session:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:h})}catch(r){if(Ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,a,l;try{if("email"in e){const{email:u,options:d}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await $o(this.storage,this.storageKey));const{error:v}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(n=d?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:u,options:d}=e,{data:h,error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:g})}throw new gu("You must provide either an email or phone number.")}catch(u){if(await Pr(this.storage,`${this.storageKey}-code-verifier`),Ae(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Vn});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,h=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(i){if(Ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,a,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await $o(this.storage,this.storageKey));const h=await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:rL});return!((a=h.data)===null||a===void 0)&&a.url&&jr()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await Pr(this.storage,`${this.storageKey}-code-verifier`),Ae(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new fn;const{error:i}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Ae(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:l}=await Ue(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:l,error:u}=await Ue(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:u})}throw new gu("You must provide either an email or phone number and a type")}catch(r){if(Ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Bi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Jh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await Bi(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=tp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=JD(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:pi}):await this._useSession(async r=>{var n,i,a;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fn}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:pi})})}catch(r){if(Ae(r))return PD(r)&&(await this._removeSession(),await Pr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new fn;const l=i.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await $o(this.storage,this.storageKey));const{data:h,error:g}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:pi});if(g)throw g;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(await Pr(this.storage,`${this.storageKey}-code-verifier`),Ae(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fn;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:l}=ep(e.access_token);if(l.exp&&(n=l.exp,i=n<=r),i){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(Ae(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:l,error:u}=r;if(u)throw u;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new fn;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!jr())throw new mu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Rw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Rw("No code detected.");const{data:T,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:h}=e;if(!a||!u||!l||!h)throw new mu("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(u);let y=g+v;d&&(y=parseInt(d));const x=y-g;x*1e3<=Wo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${v}s`);const S=y-v;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,y,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,y,g);const{data:_,error:E}=await this._getUser(a);if(E)throw E;const C={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:v,expires_at:y,refresh_token:l,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(n){if(Ae(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Bi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({error:a});const l=(n=i.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(OD(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Pr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=$D(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await $o(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Pr(this.storage,`${this.storageKey}-code-verifier`),Ae(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var l,u,d,h,g;const{data:v,error:y}=a;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",x,{headers:this.headers,jwt:(g=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return jr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(Ae(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:l,provider:u,token:d,access_token:h,nonce:g}=e,v=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:h,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Vn}),{data:y,error:x}=v;return x?this._returnResult({data:{user:null,session:null},error:x}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Mo}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:x}))}catch(i){if(await Pr(this.storage,`${this.storageKey}-code-verifier`),Ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:l}=r;if(l)throw l;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await zD(async i=>(i>0&&await BD(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Vn})),(i,a)=>{const l=200*Math.pow(2,i);return a&&Xh(a)&&Date.now()+l-n<Wo})}catch(n){if(this._debug(r,"error",n),Ae(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),jr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Bi(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Bi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Ho(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:tp()}else if(i&&!i.user&&!i.user){const l=await Bi(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await Pr(this.storage,this.storageKey+"-user"),await Ho(this.storage,this.storageKey,i)):i.user=tp()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Jh;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Jh}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Xh(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Pd;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new fn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(i,"error",a),Ae(a)){const l={data:null,error:a};return Xh(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,r)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Pr(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ho(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=Mw(i);await Ho(this.storage,this.storageKey,a)}else{const i=Mw(r);await Ho(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Pr(this.storage,this.storageKey),await Pr(this.storage,this.storageKey+"-code-verifier"),await Pr(this.storage,this.storageKey+"-user"),this.userStorage&&await Pr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Wo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Wo}ms, refresh threshold is ${Qp} ticks`),i<=Qp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof A1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await $o(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(n?.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:h}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&d.type==="totp"&&(!((i=d?.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?yL(e.webauthn.credential_response):wL(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:mL(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:vL(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ep(n.access_token);let l=null;a.aal&&(l=a.aal);let u=l;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const h=a.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await Ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new fn})})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new fn});const l=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&jr()&&!r?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new fn});const l=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&jr()&&!r?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await Ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new fn})})}catch(e){if(Ae(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await Ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new fn})})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(u=>u.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(u=>u.kid===e),n&&this.jwks_cached_at+TD>i)return n;const{data:a,error:l}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(u=>u.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:x,error:S}=await this.getSession();if(S||!x.session)return this._returnResult({data:null,error:S});n=x.session.access_token}const{header:i,payload:a,signature:l,raw:{header:u,payload:d}}=ep(n);r?.allowExpired||QD(a.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!h){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:a,header:i,signature:l},error:null}}const g=YD(i.alg),v=await crypto.subtle.importKey("jwk",h,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,l,LD(`${u}.${d}`)))throw new Jp("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}}zl.nextInstanceID={};const OL=zl,PL="2.89.0";let cl="";typeof Deno<"u"?cl="deno":typeof document<"u"?cl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cl="react-native":cl="node";const NL={"X-Client-Info":`supabase-js-${cl}/${PL}`},jL={headers:NL},RL={schema:"public"},AL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},IL={};function Vl(t){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(t)}function DL(t,e){if(Vl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LL(t){var e=DL(t,"string");return Vl(e)=="symbol"?e:e+""}function ML(t,e,r){return(e=LL(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Gt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qw(Object(r),!0).forEach(function(n){ML(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const $L=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),FL=()=>Headers,UL=(t,e,r)=>{const n=$L(r),i=FL();return async(a,l)=>{var u;const d=(u=await e())!==null&&u!==void 0?u:t;let h=new i(l?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),n(a,Gt(Gt({},l),{},{headers:h}))}};function BL(t){return t.endsWith("/")?t:t+"/"}function zL(t,e){var r,n;const{db:i,auth:a,realtime:l,global:u}=t,{db:d,auth:h,realtime:g,global:v}=e,y={db:Gt(Gt({},d),i),auth:Gt(Gt({},h),a),realtime:Gt(Gt({},g),l),storage:{},global:Gt(Gt(Gt({},v),u),{},{headers:Gt(Gt({},(r=v?.headers)!==null&&r!==void 0?r:{}),(n=u?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function VL(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(BL(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var qL=class extends OL{constructor(t){super(t)}},WL=class{constructor(t,e,r){var n,i;this.supabaseUrl=t,this.supabaseKey=e;const a=VL(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:RL,realtime:IL,auth:Gt(Gt({},AL),{},{storageKey:l}),global:jL},d=zL(r??{},u);if(this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=d.auth)!==null&&h!==void 0?h:{},this.headers,d.global.fetch)}this.fetch=UL(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Gt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new k5(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new xD(this.storageUrl.href,this.headers,this.fetch,r?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new w5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:a,flowType:l,lock:u,debug:d,throwOnError:h},g,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qL({url:this.authUrl.href,headers:Gt(Gt({},y),g),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,flowType:l,lock:u,debug:d,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new B5(this.realtimeUrl.href,Gt(Gt({},t),{},{params:Gt(Gt({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const HL=(t,e,r)=>new WL(t,e,r);function KL(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}KL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const L1={},GL=L1?.VITE_SUPABASE_URL||"https://fersigqisuhgyidehkci.supabase.co",QL=L1?.VITE_SUPABASE_ANON_KEY||"sb_publishable_ULaZnmy69ARyAKDqdoQRMg_PmhnpYdF",YL=HL(GL,QL,{auth:{persistSession:!1},realtime:{params:{eventsPerSecond:10}}});function ZL(){const{mode:t,id:e}=lb(),[r,n]=oo(),{user:i}=lo(),{toast:a}=ao(),[l,u]=b.useState(new ci),[d,h]=b.useState(l.fen()),[g,v]=b.useState([]),[y,x]=b.useState("white"),[S,_]=b.useState(null),[E,C]=b.useState([]),[T,O]=b.useState(!1),[A,U]=b.useState(!0),[z,$]=b.useState(null),[J,V]=b.useState(!1),[W,ee]=b.useState(null),[Y,te]=b.useState(t==="online"),[Z,ke]=b.useState(null),[fe,Se]=b.useState(null),[H,ue]=b.useState(!1),[ae,I]=b.useState(!1),[X,Pe]=b.useState(typeof navigator<"u"?!navigator.onLine:!1),[ge,Le]=b.useState(6e5),[Qe,qe]=b.useState(6e5),[Ke,Me]=b.useState(null),[yt,kr]=b.useState(null),[pr,Ft]=b.useState(null),er=b.useRef(null),[_t,bn]=b.useState(!1),[ve,An]=b.useState(null),Br=b.useRef(null),{bestMove:Ar,evaluation:or,isThinking:j,search:F}=EA(),[Q,me]=b.useState(t==="online"&&e==="random"),[pe,le]=b.useState(!1),[_e,Ze]=b.useState(!1),ht=b.useRef(0),ot=b.useRef(null),gr=b.useRef(null),zr=b.useRef(null),Pt=b.useCallback(P=>{const ne=Br.current;ne&&ne.send({type:"broadcast",event:"message",payload:P})},[]),Vr=b.useCallback(()=>{if(er.current&&er.current.state==="running")return er.current;const P=window.AudioContext||window.webkitAudioContext;if(!P)return null;er.current||(er.current=new P);const ne=er.current;return ne&&ne.state==="suspended"&&ne.resume().catch(()=>{}),ne},[]);b.useEffect(()=>{const P=()=>{Vr(),window.removeEventListener("click",P),window.removeEventListener("keydown",P)};return window.addEventListener("click",P),window.addEventListener("keydown",P),()=>{window.removeEventListener("click",P),window.removeEventListener("keydown",P),ot.current&&(ot.current.pause(),ot.current.src="",ot.current.load(),ot.current=null),er.current&&(er.current.close().catch(console.error),er.current=null)}},[Vr]);const sn=b.useCallback(P=>{try{const ne=Vr();if(!ne)return;const ye=ne.createOscillator(),ze=ne.createGain();let re=1040,it=.12;switch(P){case"capture":re=720;break;case"check":re=1280,it=.2;break;case"start":re=960,it=.3;break;case"end":re=560,it=.5;break;default:re=1040}ye.frequency.value=re,ze.gain.value=.3,ze.gain.setValueAtTime(0,ne.currentTime),ze.gain.linearRampToValueAtTime(.3,ne.currentTime+.02),ze.gain.exponentialRampToValueAtTime(.01,ne.currentTime+it),ye.connect(ze),ze.connect(ne.destination),ye.start(ne.currentTime),ye.stop(ne.currentTime+it+.1)}catch(ne){console.error("Audio playback failed",ne)}},[Vr]),St=b.useCallback((P,ne=!1)=>{const ye=typeof performance<"u"?performance.now():Date.now();!ne&&ye-ht.current<200||(ht.current=ye,!(!A&&!ne)&&sn(P))},[A,sn]),qr=P=>{const ne=Math.max(0,Math.floor(P/1e3)),ye=Math.floor(ne/60).toString().padStart(2,"0"),ze=(ne%60).toString().padStart(2,"0");return`${ye}:${ze}`},Ir=b.useCallback(()=>{const P=new ci;u(P),h(P.fen()),v([]),$(null),V(!1),ee(null),Le(6e5),qe(6e5),Me(Date.now()),I(!1),gr.current=null,ht.current=0},[]);b.useEffect(()=>{const P=()=>{Pe(!1),a({title:" kt ni li mng",description:"Bn c th tip tc vn u."})},ne=()=>{Pe(!0),a({title:"Mt kt ni mng",description:"Vui lng kim tra li internet ca bn.",variant:"destructive"})};return window.addEventListener("online",P),window.addEventListener("offline",ne),()=>{window.removeEventListener("online",P),window.removeEventListener("offline",ne)}},[a]),b.useEffect(()=>{if(t!=="online"||!e||!i)return;const P=e==="random"?"global:matchmaking":`room:${e}`,ne=YL.channel(P);Br.current=ne,ne.on("broadcast",{event:"message"},ze=>{An(ze.payload)}),ne.on("presence",{event:"sync"},()=>{const ze=ne.presenceState(),re=Object.values(ze).flat();ke(re.length)});const ye=()=>{ne.send({type:"broadcast",event:"message",payload:{type:"join",roomId:e,userId:i.id,username:i.username}})};return ne.subscribe(async ze=>{ze==="SUBSCRIBED"&&(bn(!0),await ne.track({userId:i.id,username:i.username,online_at:new Date().toISOString()}),ye(),zr.current=window.setInterval(()=>{fe||ye()},2e3))}),()=>{bn(!1),Br.current=null,ne.unsubscribe(),zr.current!=null&&(window.clearInterval(zr.current),zr.current=null)}},[t,e,i,fe]);const Zr=b.useCallback((P,ne,ye="q")=>{try{const ze=l.fen();if(!new ci(ze).moves({verbose:!0}).some(ct=>ct.from===P&&ct.to===ne&&(ct.promotion?ct.promotion===ye:!0)))return!1;const kt=new ci(ze),rr=kt.move({from:P,to:ne,promotion:ye});if(!rr)return!1;if(u(kt),h(kt.fen()),v(ct=>{const In=`${P}-${ne}`;return ct[ct.length-1]===In?ct:[...ct,In]}),$({from:P,to:ne}),Me(Date.now()),kt.isGameOver()){V(!0);let ct="Ha";kt.isCheckmate()&&(ct=kt.turn()==="w"?"en thng":"Trng thng"),ee(ct),St("end"),t==="online"&&(a({title:"Vn u kt thc",description:`${ct}. ang tr v snh chnh...`}),setTimeout(()=>{n("/")},3500))}else if(kt.inCheck())St("check");else if(rr.captured)St("capture");else{const ct=`${P}-${ne}`;gr.current!==ct&&(St("move"),gr.current=ct)}return!0}catch(ze){return console.error("Li khi thc hin nc i:",ze),!1}},[l,St,t,a,n]);b.useEffect(()=>{ke(null),Se(null),C([]),V(!1),ee(null),_(t==="ai"?"w":null),x("white"),te(t==="online"),me(t==="online"&&e==="random"),ue(!1),I(!1),Le(6e5),qe(6e5),Me(null),Ze(!1),Ir()},[e,t,Ir]),b.useEffect(()=>{!i&&t==="online"&&n("/auth")},[i,t,n]),b.useEffect(()=>{t==="ai"&&(_("w"),te(!1),ue(!0))},[t,e,i,_t,pe,n,Pt]),b.useEffect(()=>{if(!(!ve||t!=="online"))switch(ve.type){case"join":if(ve.userId===i?.id)break;if(e==="random"){if(i?.id&&i.id<ve.userId){const P=Math.random().toString(36).slice(2,9).toUpperCase();Pt({type:"match_found",roomId:P,targetUserId:ve.userId,creatorId:i.id}),n(`/game/online/${P}`)}break}Se({id:ve.userId,username:ve.username||"i th"}),i?.id&&i.id<ve.userId?(_("w"),x("white")):(_("b"),x("black")),te(!1),ue(!0),me(!1),a({title:"i th  kt ni",description:`${ve.username}  tham gia vn u!`}),i&&Pt({type:"opponent_info",id:i.id,username:i.username,color:i.id<ve.userId?"b":"w"});break;case"match_found":if(ve.targetUserId!==i?.id)break;me(!1),ve.roomId&&n(`/game/online/${ve.roomId}`);break;case"move":if(ve?.from&&ve?.to&&ve.fen){const P=`${ve.from}-${ve.to}-${ve.fen}`;if(gr.current===P||ve.fen===l.fen())break;try{const ne=new ci(ve.fen);u(ne),h(ne.fen()),$({from:ve.from,to:ve.to}),v(ye=>{const ze=`${ve.from}-${ve.to}`;return ye[ye.length-1]===ze?ye:[...ye,ze]}),typeof ve.whiteTimeMs=="number"&&Le(ve.whiteTimeMs),typeof ve.blackTimeMs=="number"&&qe(ve.blackTimeMs),Me(Date.now()),ne.isGameOver()?St("end"):ne.inCheck()?St("check"):ne.history({verbose:!0}).pop()?.captured?St("capture"):St("move"),gr.current=P}catch(ne){console.error("Failed to apply remote move",ne)}}break;case"chat":if(!ve.text||ve.sender===i?.username)break;C(P=>{const ne=P[P.length-1];return ne&&!ne.isMe&&ne.sender===ve.sender&&ne.text===ve.text&&Date.now()-ne._ts<500?P:[...P,{sender:ve.sender,text:ve.text,isMe:!1,_ts:Date.now()}]});break;case"draw_request":if(ve.sender===i?.username||ae)break;I(!0),a({title:"Li mi ha",description:`${ve.sender} mun xin ha vn u.`,action:p.jsxs("div",{className:"flex gap-2",children:[p.jsx(ut,{size:"sm",onClick:()=>Pt({type:"draw_respond",roomId:e,accepted:!0}),children:"ng "}),p.jsx(ut,{size:"sm",variant:"outline",onClick:()=>Pt({type:"draw_respond",roomId:e,accepted:!1}),children:"T chi"})]}),duration:15e3});break;case"draw_respond":ve.accepted?(V(!0),ee("Ha (tha thun)"),St("end"),mr("Ha (tha thun)"),a({title:"Vn u kt thc",description:"Hai bn  ng  ha. ang tr v snh chnh..."}),setTimeout(()=>{n("/")},3500)):a({title:"Li mi b t chi",description:"i th mun tip tc nh."}),I(!1);break;case"voice_signal":if(ve.senderId===i?.id)break;if(ve.signal&&ve.signal.type==="audio")try{const P=Vr();if(!P)break;const ne=ve.signal.data.split(",")[1],ye=window.atob(ne),ze=ye.length,re=new Uint8Array(ze);for(let it=0;it<ze;it++)re[it]=ye.charCodeAt(it);P.decodeAudioData(re.buffer).then(it=>{const nt=P.createBufferSource();nt.buffer=it,nt.connect(P.destination),nt.start(0)}).catch(it=>{console.debug("AudioContext decode failed, falling back to Audio element",it),ot.current||(ot.current=new Audio);const nt=ot.current,kt=nt.src;nt.src=ve.signal.data,nt.play().catch(()=>{}),kt.startsWith("blob:")&&URL.revokeObjectURL(kt)})}catch(P){console.warn("Voice play failed",P)}break;case"start_game":if(H)break;ue(!0),te(!1),_(ve.color),x(ve.color==="w"?"white":"black"),Ir(),St("start"),a({title:"Vn u bt u",description:`Bn cm qun ${ve.color==="w"?"Trng":"en"}`});break;case"game_over":if(J)break;V(!0),ee(ve.result),St("end"),mr(ve.result,ve.winnerColor),a({title:"Vn u kt thc",description:`Kt qu: ${ve.result}. ang tr v snh chnh...`}),I(!1),setTimeout(()=>{n("/")},3500);break;case"state":if(ve.fen){const P=new ci(ve.fen);u(P),h(P.fen()),v([]),$(null),te(!1),ue(!0),typeof ve.whiteTimeMs=="number"&&Le(ve.whiteTimeMs),typeof ve.blackTimeMs=="number"&&qe(ve.blackTimeMs),Me(Date.now())}break;case"role":{const P=ve.role;P==="w"||P==="b"?(_(P),x(P==="w"?"white":"black")):_(null),typeof ve.waiting=="boolean"?te(ve.waiting):te(!1);break}case"stats":typeof ve.count=="number"&&ke(ve.count);break;case"opponent_info":typeof ve.id=="number"&&Se({id:ve.id,username:ve.username||"i th"});break}},[ve,t]),b.useEffect(()=>{t==="ai"&&l.turn()==="b"&&!l.isGameOver()&&F(l.fen())},[d,t,l,F]),b.useEffect(()=>{t==="ai"&&Ar&&l.turn()==="b"&&Zr(Ar.from,Ar.to,"q")},[Ar,l,Zr]),b.useEffect(()=>{if(!T||!_t||t!=="online"){yt&&(yt.state!=="inactive"&&yt.stop(),kr(null)),pr&&(pr.getTracks().forEach(P=>P.stop()),Ft(null));return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){O(!1),a({title:"Mic khng c h tr",description:"Trnh duyt ca bn khng h tr m mic.",variant:"destructive"});return}return navigator.mediaDevices.getUserMedia({audio:!0}).then(P=>{const ne=new MediaRecorder(P);return Ft(P),ne.ondataavailable=async ye=>{if(ye.data.size>0&&_t){const ze=new FileReader;ze.onloadend=()=>{const re=ze.result;Pt({type:"voice_signal",roomId:e,senderId:i?.id,signal:{type:"audio",data:re}})},ze.readAsDataURL(ye.data)}},ne.start(500),kr(ne),()=>{ne&&ne.state!=="inactive"&&ne.stop(),P.getTracks().forEach(ye=>ye.stop())}}).then(P=>{}).catch(P=>{console.error("Mic access error",P),O(!1),a({title:"Li truy cp Mic",description:"Vui lng cho php truy cp micro  s dng tnh nng ny.",variant:"destructive"})}),()=>{yt&&yt.state!=="inactive"&&yt.stop(),pr&&pr.getTracks().forEach(P=>P.stop())}},[T,_t,e,i,Pt,a,t]),b.useEffect(()=>{if(t!=="online"||J||Y||!H||!_t){Me(null);return}Ke||Me(Date.now());const P=setInterval(()=>{Me(ne=>{const ye=Date.now(),re=ye-(ne??ye),it=Math.min(re,2e3);return it<=0||(l.turn()==="w"?Le(nt=>Math.max(0,nt-it)):qe(nt=>Math.max(0,nt-it))),ye})},100);return()=>clearInterval(P)},[t,J,Y,H,_t,l,Ke]);const mr=b.useCallback(async(P,ne)=>{if(!(t!=="online"||!e||!i||!fe)&&S==="w")try{await pT("POST","/api/game/over",{roomId:e,result:P,winnerColor:ne,opponentId:fe.id})}catch(ye){console.error("Failed to record game over",ye)}},[t,e,i,fe,S]);b.useEffect(()=>{if(!(t!=="online"||J||Y||!H)){if(ge<=0){const P="en thng (ht gi)";V(!0),ee(P),St("end"),S==="w"&&(Pt({type:"game_over",roomId:e,result:P,winnerColor:"b"}),mr(P,"b"))}else if(Qe<=0){const P="Trng thng (ht gi)";V(!0),ee(P),St("end"),S==="b"&&Pt({type:"game_over",roomId:e,result:P,winnerColor:"w"})}}},[ge,Qe,t,J,Y,H,S,Pt,e,St,mr]);const lt=b.useCallback((P,ne,ye)=>{if(l.isGameOver()||Y)return!1;try{if(t==="online"){if(!S||l.turn()!==S)return!1;if(!_t||!e)return a({title:"Mt kt ni",description:"ang c gng kt ni li...",variant:"destructive"}),!1;const re=l.fen();if(!new ci(re).moves({verbose:!0}).some(be=>be.from===P&&be.to===ne&&(ye?be.promotion===ye:!0)))return!1;const rr=new ci(re);if(!rr.move({from:P,to:ne,promotion:ye}))return!1;const In=rr.fen();u(rr),h(In),$({from:P,to:ne}),v(be=>{const Dn=`${P}-${ne}`;return be[be.length-1]===Dn?be:[...be,Dn]}),Me(Date.now());const Ei=`${P}-${ne}-${In}`;if(gr.current!==Ei&&(St("move"),gr.current=Ei),Pt({type:"move",roomId:e,move:{from:P,to:ne},fen:In,promotion:ye}),rr.isGameOver()){let be="Ha",Dn;rr.isCheckmate()&&(be=rr.turn()==="w"?"en thng":"Trng thng",Dn=rr.turn()==="w"?"b":"w"),Pt({type:"game_over",roomId:e,result:be,winnerColor:Dn}),mr(be,Dn)}return!0}return t==="ai"&&l.turn()==="b"?!1:Zr(P,ne,ye)}catch(ze){return console.error("Li khi ko th nc i:",ze),!1}},[l,t,S,_t,Pt,Zr,e,Y,a,St,mr]);if(Q)return p.jsxs("div",{className:"min-h-screen bg-[#020617] flex items-center justify-center overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(79,70,229,0.15)_0%,transparent_70%)]"}),p.jsxs("div",{className:"text-center relative z-10 p-12 glass-card rounded-3xl border border-white/10 animate-in zoom-in-95 duration-500",children:[p.jsx("div",{className:"w-24 h-24 border-8 border-indigo-500/20 border-t-indigo-500 rounded-full animate-spin mx-auto mb-8 shadow-[0_0_40px_rgba(79,70,229,0.3)]"}),p.jsx("h2",{className:"text-4xl font-black italic text-white mb-4 tracking-tighter uppercase",children:"ang tm i th"}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-sm animate-pulse",children:"ang ghp trn vi k th xng tm..."}),p.jsx(ut,{variant:"ghost",className:"mt-8 text-slate-500 hover:text-white",onClick:()=>n("/"),children:"Hy tm kim"})]})]});const Nt=b.useCallback(P=>{const ne=P.trim();if(ne)if(t==="online"){const ye=i?.username||"Ti";C(ze=>[...ze,{sender:ye,text:ne,isMe:!0}]),Pt({type:"chat",roomId:e,text:ne,sender:ye})}else C(ye=>[...ye,{sender:"Ti",text:ne,isMe:!0}])},[t,Pt,i,e,C]),At=b.useCallback(()=>{navigator.clipboard.writeText(e||""),a({title:" sao chp",description:"M phng  c sao chp."})},[e,a]);b.useMemo(()=>t==="ai"?"Bn u vi AI":t==="offline"?"Chi Offline":S?S==="w"?"Bn cm qun Trng":"Bn cm qun en":"ang xem trn",[t,S]);const Mt=t==="online"&&!S,vr=t==="online"?!S||Y:!1,tr=Z!==null?Math.min(Z,2):null,Ht=Z!==null?Math.max(Z-2,0):null;return p.jsxs("div",{className:"min-h-screen bg-[#020617] text-white p-4 md:p-6 lg:p-8 relative",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsxs("header",{className:"max-w-7xl mx-auto mb-6 flex items-center justify-between glass-card p-4 rounded-2xl",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(ut,{variant:"ghost",size:"icon",onClick:()=>n("/"),className:"hover:bg-white/10 rounded-xl",children:p.jsx(nx,{className:"w-5 h-5 text-slate-400"})}),p.jsxs("div",{children:[p.jsxs("h1",{className:"text-xl font-black italic tracking-tighter text-white",children:["Chess",p.jsx("span",{className:"text-indigo-500",children:"Pro"})]}),t==="online"&&fe?p.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["i th: ",p.jsx("span",{className:"font-bold text-white",children:fe.username})]}):p.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-[0.2em]",children:"c vua ca ngi vit"}),p.jsx("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest mt-1",children:t==="online"?p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:`flex items-center gap-1 ${X||!_t?"text-red-500":"text-emerald-500"}`,children:[X||!_t?p.jsx(o0,{className:"w-3 h-3"}):p.jsx(TC,{className:"w-3 h-3"}),X?"Mt mng":_t?" kt ni":"Mt kt ni"]}),p.jsx("span",{className:"text-slate-700 mx-1",children:""}),p.jsxs("span",{children:["Phng: ",e]}),p.jsx("button",{onClick:At,className:"hover:text-white transition-colors",children:p.jsx(n0,{className:"w-3 h-3 ml-1"})}),tr!==null&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-slate-700 mx-1",children:""}),p.jsxs("span",{className:"text-slate-500 hidden md:inline",children:[tr," chi",Ht&&Ht>0?` / ${Ht} xem`:""]})]})]}):p.jsx("span",{children:t==="ai"?"u vi Stockfish 15":"Chi trn cng my"})})]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[t==="ai"&&p.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[p.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 tracking-wider",children:"nh gi"}),p.jsx("span",{className:`text-sm font-mono font-bold ${or.includes("-")?"text-red-400":"text-emerald-400"}`,children:or})]}),p.jsxs("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg relative group cursor-help",children:[p.jsx(cd,{className:"w-5 h-5 text-white"}),p.jsx("div",{className:"absolute top-12 right-0 w-max bg-black/80 p-2 rounded text-xs hidden group-hover:block z-50 border border-white/10",children:"Vua c"})]})]})]}),p.jsxs("main",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-[1fr_350px] gap-6 items-start",children:[p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"glass-card p-6 md:p-10 rounded-[2.5rem] flex flex-col justify-center items-center relative min-h-[500px] border border-white/5 shadow-2xl",children:[j&&p.jsxs("div",{className:"absolute top-6 right-6 flex items-center gap-2 bg-black/60 px-4 py-2 rounded-2xl border border-yellow-500/30 z-10 animate-in slide-in-from-right-5 duration-300 shadow-xl backdrop-blur-md",children:[p.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-ping"}),p.jsx("span",{className:"text-[10px] font-black text-yellow-400 uppercase tracking-[0.2em]",children:"AI ang tnh..."})]}),!_t&&t==="online"&&p.jsx("div",{className:"absolute inset-0 z-50 bg-black/60 backdrop-blur-sm rounded-[2.5rem] flex items-center justify-center",children:p.jsxs("div",{className:"text-center p-8 glass-card border-red-500/30 rounded-3xl max-w-sm animate-pulse",children:[p.jsx(o0,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-black italic mb-2 tracking-tight text-red-500",children:"MT KT NI"}),p.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:"ang th kt ni li..."})]})}),Y&&t==="online"&&!Mt&&_t&&p.jsx("div",{className:"absolute inset-0 z-40 bg-black/40 backdrop-blur-sm rounded-[2.5rem] flex items-center justify-center",children:p.jsxs("div",{className:"text-center p-8 glass-card border-white/10 rounded-3xl max-w-sm",children:[p.jsx(ox,{className:"w-12 h-12 text-indigo-400 mx-auto mb-4 animate-pulse"}),p.jsx("h3",{className:"text-xl font-black italic mb-2 tracking-tight",children:"ANG CH I TH"}),p.jsxs("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:["Gi m phng: ",p.jsx("span",{className:"text-white select-all",children:e})]}),p.jsxs(ut,{variant:"outline",size:"sm",onClick:At,className:"mt-4 border-white/10 hover:bg-white/5 rounded-xl font-bold",children:[p.jsx(n0,{className:"w-4 h-4 mr-2"})," Sao chp m"]})]})}),p.jsxs("div",{className:"flex gap-8 items-center w-full justify-center",children:[(t==="ai"||Mt)&&p.jsx(p5,{evaluation:or,orientation:y}),p.jsxs("div",{className:"flex flex-col gap-6 w-full max-w-[600px]",children:[p.jsx(QI,{game:l,onMove:lt,orientation:y,isThinking:j,disabled:vr||!_t,lastMove:z,onReset:Ir}),p.jsx(g5,{fen:d})]})]})]}),p.jsxs("div",{className:"glass-card p-6 rounded-3xl flex flex-col md:flex-row justify-between items-center gap-6 border border-white/5 shadow-xl",children:[p.jsxs("div",{className:"flex items-center gap-5 w-full md:w-auto",children:[p.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center border transition-all duration-500 shrink-0 ${l.turn()==="w"?"bg-white border-white":"bg-slate-800 border-white/10"}`,children:p.jsx("div",{className:`w-8 h-8 rounded-full ${l.turn()==="w"?"bg-slate-900":"bg-white"}`})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] mb-1",children:"Lt i"}),p.jsxs("div",{className:"text-2xl font-black italic text-indigo-400 tracking-tight",children:[l.turn()==="w"?"Trng":"en"," ang i"]}),t==="online"&&p.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[11px] font-mono w-full max-w-[300px]",children:[p.jsxs("div",{className:`flex items-center justify-between gap-2 px-3 py-1.5 rounded-lg border transition-colors ${l.turn()==="w"?"border-emerald-500/70 bg-emerald-500/10 text-emerald-200":"border-white/5 text-slate-400 bg-white/5"}`,children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 rounded-full bg-white border border-slate-400"}),p.jsx("span",{className:"uppercase tracking-widest text-[9px] font-bold",children:S==="w"?"BN":"I TH"})]}),p.jsx("span",{className:"font-bold",children:qr(ge)})]}),p.jsxs("div",{className:`flex items-center justify-between gap-2 px-3 py-1.5 rounded-lg border transition-colors ${l.turn()==="b"?"border-emerald-500/70 bg-emerald-500/10 text-emerald-200":"border-white/5 text-slate-400 bg-white/5"}`,children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 rounded-full bg-black border border-slate-600"}),p.jsx("span",{className:"uppercase tracking-widest text-[9px] font-bold",children:S==="b"?"BN":"I TH"})]}),p.jsx("span",{className:"font-bold",children:qr(Qe)})]})]})]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(YI,{onFlip:()=>x(P=>P==="white"?"black":"white"),onResign:()=>{if(!Mt&&window.confirm("Bn chc chn mun xin thua?")){const P=S==="w"?"en thng (Xin thua)":"Trng thng (Xin thua)",ne=S==="w"?"b":"w";Pt({type:"game_over",roomId:e,result:P,winnerColor:ne}),V(!0),ee(P),mr(P,ne)}},onDraw:()=>{if(!(Mt||J||!_t)){if(ae){a({title:" gi li mi",description:"ang ch hi m..."});return}I(!0),Pt({type:"draw_request",roomId:e,sender:i?.username}),a({title:" gi li mi ha",description:"ang ch i th..."})}},onReset:Ir,gameMode:t,disabled:Mt||!_t}),p.jsx("div",{className:"h-10 w-[1px] bg-white/10 mx-2"}),p.jsx(ut,{variant:"outline",size:"icon",onClick:()=>{U(P=>{const ne=!P;return ne&&St("move",!0),ne})},className:`w-12 h-12 rounded-2xl transition-all duration-300 ${A?"bg-slate-800 border-white/10 text-slate-100":"bg-slate-900 border-slate-600 text-slate-500"}`,title:A?"Tt m thanh":"Bt m thanh",children:A?p.jsx(kC,{className:"w-5 h-5"}):p.jsx(EC,{className:"w-5 h-5"})}),p.jsx(ut,{variant:"outline",size:"icon",onClick:()=>{if(t!=="online"||Mt||!_t){a({title:"Khng th bt Mic",description:"Mic ch kh dng khi ang chi Online.",variant:"destructive"});return}O(P=>!P)},className:`w-12 h-12 rounded-2xl transition-all duration-300 ${T?"bg-indigo-500 text-white border-transparent shadow-[0_0_15px_rgba(79,70,229,0.5)]":"bg-slate-800 border-white/10 text-slate-400"}`,title:T?"Tt Mic":"Bt Mic",children:T?p.jsx(bC,{className:"w-5 h-5 animate-pulse"}):p.jsx(wC,{className:"w-5 h-5"})})]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-6 h-full content-start",children:[p.jsx(f5,{history:g}),p.jsx(h5,{messages:E,onSendMessage:Nt,disabled:t==="ai"})]})]})]})}var np="rovingFocusGroup.onEntryFocus",JL={bubbles:!1,cancelable:!0},Nd="RovingFocusGroup",[Xp,M1,XL]=Pb(Nd),[eM,$1]=Si(Nd,[XL]),[tM,rM]=eM(Nd),F1=b.forwardRef((t,e)=>p.jsx(Xp.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(Xp.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(nM,{...t,ref:e})})}));F1.displayName=Nd;var nM=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:g=!1,...v}=t,y=b.useRef(null),x=_r(e,y),S=zg(a),[_=null,E]=dg({prop:l,defaultProp:u,onChange:d}),[C,T]=b.useState(!1),O=hr(h),A=M1(r),U=b.useRef(!1),[z,$]=b.useState(0);return b.useEffect(()=>{const J=y.current;if(J)return J.addEventListener(np,O),()=>J.removeEventListener(np,O)},[O]),p.jsx(tM,{scope:r,orientation:n,dir:S,loop:i,currentTabStopId:_,onItemFocus:b.useCallback(J=>E(J),[E]),onItemShiftTab:b.useCallback(()=>T(!0),[]),onFocusableItemAdd:b.useCallback(()=>$(J=>J+1),[]),onFocusableItemRemove:b.useCallback(()=>$(J=>J-1),[]),children:p.jsx(Ct.div,{tabIndex:C||z===0?-1:0,"data-orientation":n,...v,ref:x,style:{outline:"none",...t.style},onMouseDown:ft(t.onMouseDown,()=>{U.current=!0}),onFocus:ft(t.onFocus,J=>{const V=!U.current;if(J.target===J.currentTarget&&V&&!C){const W=new CustomEvent(np,JL);if(J.currentTarget.dispatchEvent(W),!W.defaultPrevented){const ee=A().filter(fe=>fe.focusable),Y=ee.find(fe=>fe.active),te=ee.find(fe=>fe.id===_),ke=[Y,te,...ee].filter(Boolean).map(fe=>fe.ref.current);z1(ke,g)}}U.current=!1}),onBlur:ft(t.onBlur,()=>T(!1))})})}),U1="RovingFocusGroupItem",B1=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,...l}=t,u=vx(),d=a||u,h=rM(U1,r),g=h.currentTabStopId===d,v=M1(r),{onFocusableItemAdd:y,onFocusableItemRemove:x}=h;return b.useEffect(()=>{if(n)return y(),()=>x()},[n,y,x]),p.jsx(Xp.ItemSlot,{scope:r,id:d,focusable:n,active:i,children:p.jsx(Ct.span,{tabIndex:g?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:ft(t.onMouseDown,S=>{n?h.onItemFocus(d):S.preventDefault()}),onFocus:ft(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:ft(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){h.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const _=oM(S,h.orientation,h.dir);if(_!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let C=v().filter(T=>T.focusable).map(T=>T.ref.current);if(_==="last")C.reverse();else if(_==="prev"||_==="next"){_==="prev"&&C.reverse();const T=C.indexOf(S.currentTarget);C=h.loop?aM(C,T+1):C.slice(T+1)}setTimeout(()=>z1(C))}})})})});B1.displayName=U1;var sM={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iM(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function oM(t,e,r){const n=iM(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return sM[n]}function z1(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function aM(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var lM=F1,cM=B1,Xg="Tabs",[uM]=Si(Xg,[$1]),V1=$1(),[dM,em]=uM(Xg),q1=b.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:l="horizontal",dir:u,activationMode:d="automatic",...h}=t,g=zg(u),[v,y]=dg({prop:n,onChange:i,defaultProp:a});return p.jsx(dM,{scope:r,baseId:vx(),value:v,onValueChange:y,orientation:l,dir:g,activationMode:d,children:p.jsx(Ct.div,{dir:g,"data-orientation":l,...h,ref:e})})});q1.displayName=Xg;var W1="TabsList",H1=b.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...i}=t,a=em(W1,r),l=V1(r);return p.jsx(lM,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:n,children:p.jsx(Ct.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});H1.displayName=W1;var K1="TabsTrigger",G1=b.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...a}=t,l=em(K1,r),u=V1(r),d=Z1(l.baseId,n),h=J1(l.baseId,n),g=n===l.value;return p.jsx(cM,{asChild:!0,...u,focusable:!i,active:g,children:p.jsx(Ct.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":h,"data-state":g?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...a,ref:e,onMouseDown:ft(t.onMouseDown,v=>{!i&&v.button===0&&v.ctrlKey===!1?l.onValueChange(n):v.preventDefault()}),onKeyDown:ft(t.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&l.onValueChange(n)}),onFocus:ft(t.onFocus,()=>{const v=l.activationMode!=="manual";!g&&!i&&v&&l.onValueChange(n)})})})});G1.displayName=K1;var Q1="TabsContent",Y1=b.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:i,children:a,...l}=t,u=em(Q1,r),d=Z1(u.baseId,n),h=J1(u.baseId,n),g=n===u.value,v=b.useRef(g);return b.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),p.jsx(ki,{present:i||g,children:({present:y})=>p.jsx(Ct.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:h,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:v.current?"0s":void 0},children:y&&a})})});Y1.displayName=Q1;function Z1(t,e){return`${t}-trigger-${e}`}function J1(t,e){return`${t}-content-${e}`}var fM=q1,X1=H1,eS=G1,tS=Y1;const hM=fM,rS=b.forwardRef(({className:t,...e},r)=>p.jsx(X1,{ref:r,className:dt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));rS.displayName=X1.displayName;const eg=b.forwardRef(({className:t,...e},r)=>p.jsx(eS,{ref:r,className:dt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));eg.displayName=eS.displayName;const tg=b.forwardRef(({className:t,...e},r)=>p.jsx(tS,{ref:r,className:dt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));tg.displayName=tS.displayName;const nS=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{className:"relative w-full overflow-auto",children:p.jsx("table",{ref:r,className:dt("w-full caption-bottom text-sm",t),...e})}));nS.displayName="Table";const sS=b.forwardRef(({className:t,...e},r)=>p.jsx("thead",{ref:r,className:dt("[&_tr]:border-b",t),...e}));sS.displayName="TableHeader";const iS=b.forwardRef(({className:t,...e},r)=>p.jsx("tbody",{ref:r,className:dt("[&_tr:last-child]:border-0",t),...e}));iS.displayName="TableBody";const pM=b.forwardRef(({className:t,...e},r)=>p.jsx("tfoot",{ref:r,className:dt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));pM.displayName="TableFooter";const rg=b.forwardRef(({className:t,...e},r)=>p.jsx("tr",{ref:r,className:dt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));rg.displayName="TableRow";const ul=b.forwardRef(({className:t,...e},r)=>p.jsx("th",{ref:r,className:dt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));ul.displayName="TableHead";const dl=b.forwardRef(({className:t,...e},r)=>p.jsx("td",{ref:r,className:dt("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));dl.displayName="TableCell";const gM=b.forwardRef(({className:t,...e},r)=>p.jsx("caption",{ref:r,className:dt("mt-4 text-sm text-muted-foreground",t),...e}));gM.displayName="TableCaption";var tm="Avatar",[mM]=Si(tm),[vM,oS]=mM(tm),aS=b.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[i,a]=b.useState("idle");return p.jsx(vM,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:p.jsx(Ct.span,{...n,ref:e})})});aS.displayName=tm;var lS="AvatarImage",cS=b.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...a}=t,l=oS(lS,r),u=yM(n,a),d=hr(h=>{i(h),l.onImageLoadingStatusChange(h)});return jn(()=>{u!=="idle"&&d(u)},[u,d]),u==="loaded"?p.jsx(Ct.img,{...a,ref:e,src:n}):null});cS.displayName=lS;var uS="AvatarFallback",dS=b.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...i}=t,a=oS(uS,r),[l,u]=b.useState(n===void 0);return b.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>u(!0),n);return()=>window.clearTimeout(d)}},[n]),l&&a.imageLoadingStatus!=="loaded"?p.jsx(Ct.span,{...i,ref:e}):null});dS.displayName=uS;function Ww(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function yM(t,{referrerPolicy:e,crossOrigin:r}){const n=bM(),i=b.useRef(null),a=n?(i.current||(i.current=new window.Image),i.current):null,[l,u]=b.useState(()=>Ww(a,t));return jn(()=>{u(Ww(a,t))},[a,t]),jn(()=>{const d=v=>()=>{u(v)};if(!a)return;const h=d("loaded"),g=d("error");return a.addEventListener("load",h),a.addEventListener("error",g),e&&(a.referrerPolicy=e),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",h),a.removeEventListener("error",g)}},[a,r,e]),l}function wM(){return()=>{}}function bM(){return b.useSyncExternalStore(wM,()=>!0,()=>!1)}var fS=aS,hS=cS,pS=dS;const gS=b.forwardRef(({className:t,...e},r)=>p.jsx(fS,{ref:r,className:dt(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));gS.displayName=fS.displayName;const xM=b.forwardRef(({className:t,...e},r)=>p.jsx(hS,{ref:r,className:dt("aspect-square h-full w-full",t),...e}));xM.displayName=hS.displayName;const mS=b.forwardRef(({className:t,...e},r)=>p.jsx(pS,{ref:r,className:dt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));mS.displayName=pS.displayName;const _M="auth_token";function SM(){try{return localStorage.getItem(_M)}catch{return null}}function kM(){const{user:t}=lo(),{toast:e}=ao(),[r,n]=oo(),[i,a]=b.useState(""),[l,u]=b.useState(null),{data:d,isLoading:h}=Pu({queryKey:["/api/leaderboard"]}),{data:g}=Pu({queryKey:["/api/users/search",i],queryFn:async()=>i?(await fetch(`${Qr}/api/users/search?q=${encodeURIComponent(i)}`)).json():[],enabled:i.length>0});return p.jsxs("div",{className:"min-h-screen bg-[#020617] text-white relative p-6",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[p.jsx(ut,{variant:"ghost",size:"icon",onClick:()=>n("/"),children:p.jsx(hC,{className:"w-6 h-6"})}),p.jsxs("h1",{className:"text-3xl font-black italic tracking-tighter",children:["Cng ng",p.jsx("span",{className:"text-indigo-500",children:"Hub"})]})]}),l&&p.jsxs(as,{className:"bg-indigo-600/10 border-indigo-500/30 backdrop-blur-md mb-8",children:[p.jsxs(Rs,{className:"flex flex-row items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-500/20 flex items-center justify-center border border-indigo-500/30",children:p.jsx(i0,{className:"w-8 h-8 text-indigo-400"})}),p.jsxs("div",{children:[p.jsx(As,{className:"text-2xl text-white",children:l.username}),p.jsxs(v_,{className:"text-indigo-300",children:["Hng: ",l.rating," Elo"]})]})]}),p.jsx(ut,{variant:"outline",size:"sm",onClick:()=>u(null),children:"ng"})]}),p.jsxs(ls,{children:[p.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 text-center",children:[p.jsx("div",{className:"text-sm text-slate-400",children:"Thng"}),p.jsx("div",{className:"text-xl font-bold text-emerald-400",children:l.wins||0})]}),p.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 text-center",children:[p.jsx("div",{className:"text-sm text-slate-400",children:"Thua"}),p.jsx("div",{className:"text-xl font-bold text-red-400",children:l.losses||0})]}),p.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 text-center",children:[p.jsx("div",{className:"text-sm text-slate-400",children:"Ha"}),p.jsx("div",{className:"text-xl font-bold text-amber-400",children:l.draws||0})]})]}),p.jsxs(ut,{className:"w-full bg-indigo-500 hover:bg-indigo-600",onClick:async()=>{const v=$_(6).toUpperCase();try{const y=SM();(await fetch(`${Qr}/api/invite`,{method:"POST",headers:y?{"Content-Type":"application/json",Authorization:`Bearer ${y}`}:{"Content-Type":"application/json"},body:JSON.stringify({toUserId:l.id,roomId:v})})).ok&&(e({title:" gi li mi",description:`ang ch ${l.username} chp nhn...`}),n(`/game/online/${v}`))}catch(y){console.error("Send invite failed",y)}},children:[p.jsx(ix,{className:"w-4 h-4 mr-2"}),"Gi li mi thch u"]})]})]}),p.jsxs(hM,{defaultValue:"leaderboard",className:"w-full",children:[p.jsxs(rS,{className:"grid w-full grid-cols-2 bg-slate-900/50 p-1 rounded-xl mb-8",children:[p.jsxs(eg,{value:"leaderboard",className:"rounded-lg data-[state=active]:bg-indigo-600 data-[state=active]:text-white",children:[p.jsx(ud,{className:"w-4 h-4 mr-2"}),"Bng xp hng"]}),p.jsxs(eg,{value:"search",className:"rounded-lg data-[state=active]:bg-indigo-600 data-[state=active]:text-white",children:[p.jsx(s0,{className:"w-4 h-4 mr-2"}),"Tm ngi chi"]})]}),p.jsx(tg,{value:"leaderboard",children:p.jsxs(as,{className:"glass-card border-none text-slate-200",children:[p.jsx(Rs,{children:p.jsxs(As,{className:"flex items-center gap-2",children:[p.jsx(cd,{className:"w-6 h-6 text-yellow-500"}),"Cao th hng u"]})}),p.jsx(ls,{children:h?p.jsx("div",{className:"text-center py-8 text-slate-500",children:"ang ti..."}):p.jsxs(nS,{children:[p.jsx(sS,{children:p.jsxs(rg,{className:"hover:bg-transparent border-white/10",children:[p.jsx(ul,{className:"text-slate-400",children:"Hng"}),p.jsx(ul,{className:"text-slate-400",children:"Ngi chi"}),p.jsx(ul,{className:"text-right text-slate-400",children:"Elo"}),p.jsx(ul,{className:"text-right text-slate-400",children:"Vn"})]})}),p.jsx(iS,{children:d?.map((v,y)=>p.jsxs(rg,{className:"hover:bg-white/5 border-white/5 cursor-pointer",onClick:()=>u(v),children:[p.jsxs(dl,{className:"font-bold",children:[y===0&&p.jsx("span",{className:"text-yellow-500",children:""}),y===1&&p.jsx("span",{className:"text-slate-400",children:""}),y===2&&p.jsx("span",{className:"text-amber-700",children:""}),y>2&&p.jsxs("span",{className:"text-slate-500",children:["#",y+1]})]}),p.jsx(dl,{className:"font-medium text-indigo-300",children:p.jsxs("div",{className:"flex items-center gap-2",children:[v.username,v.id!==t?.id&&p.jsx(ut,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:x=>{x.stopPropagation(),u(v)},children:p.jsx(i0,{className:"w-3 h-3"})})]})}),p.jsx(dl,{className:"text-right font-mono font-bold",children:v.rating}),p.jsx(dl,{className:"text-right text-slate-500",children:v.gamesPlayed})]},v.id))})]})})]})}),p.jsx(tg,{value:"search",children:p.jsxs(as,{className:"glass-card border-none text-slate-200",children:[p.jsxs(Rs,{children:[p.jsx(As,{children:"Tm ngi chi"}),p.jsxs("div",{className:"relative",children:[p.jsx(s0,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500"}),p.jsx(os,{placeholder:"Tm theo tn ti khon...",className:"pl-10 bg-slate-900/50 border-white/10 text-white",value:i,onChange:v=>a(v.target.value)})]})]}),p.jsx(ls,{children:p.jsxs("div",{className:"space-y-4",children:[g?.map(v=>p.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-900/30 rounded-xl border border-white/5 cursor-pointer hover:border-indigo-500/50 transition-all",onClick:()=>u(v),children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(gS,{children:p.jsx(mS,{className:"bg-indigo-600 text-white",children:v.username.substring(0,2).toUpperCase()})}),p.jsxs("div",{children:[p.jsx("div",{className:"font-bold text-white",children:v.username}),p.jsxs("div",{className:"text-xs text-slate-500",children:["Elo: ",v.rating]})]})]}),p.jsx("div",{className:"flex gap-2",children:p.jsx(ut,{size:"sm",variant:"secondary",className:"bg-white/10 hover:bg-white/20",onClick:y=>{y.stopPropagation(),u(v)},children:"Xem Profile"})})]},v.id)),i&&g?.length===0&&p.jsx("div",{className:"text-center text-slate-500 py-8",children:"Khng tm thy ngi chi no"})]})})]})})]})]})]})}function ts(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function io(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const vS=6048e5,EM=864e5;let TM={};function jd(){return TM}function ql(t,e){const r=jd(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=ts(t),a=i.getDay(),l=(a<n?7:0)+a-n;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function td(t){return ql(t,{weekStartsOn:1})}function yS(t){const e=ts(t),r=e.getFullYear(),n=io(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=td(n),a=io(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const l=td(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=l.getTime()?r:r-1}function Hw(t){const e=ts(t);return e.setHours(0,0,0,0),e}function Kw(t){const e=ts(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function CM(t,e){const r=Hw(t),n=Hw(e),i=+r-Kw(r),a=+n-Kw(n);return Math.round((i-a)/EM)}function OM(t){const e=yS(t),r=io(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),td(r)}function PM(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function NM(t){if(!PM(t)&&typeof t!="number")return!1;const e=ts(t);return!isNaN(Number(e))}function jM(t){const e=ts(t),r=io(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const RM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},AM=(t,e,r)=>{let n;const i=RM[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function sp(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const IM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},DM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},LM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},MM={date:sp({formats:IM,defaultWidth:"full"}),time:sp({formats:DM,defaultWidth:"full"}),dateTime:sp({formats:LM,defaultWidth:"full"})},$M={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},FM=(t,e,r,n)=>$M[t];function nl(t){return(e,r)=>{const n=r?.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=r?.width?String(r.width):l;i=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=r?.width?String(r.width):t.defaultWidth;i=t.values[u]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const UM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},BM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},VM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},WM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},HM=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},KM={ordinalNumber:HM,era:nl({values:UM,defaultWidth:"wide"}),quarter:nl({values:BM,defaultWidth:"wide",argumentCallback:t=>t-1}),month:nl({values:zM,defaultWidth:"wide"}),day:nl({values:VM,defaultWidth:"wide"}),dayPeriod:nl({values:qM,defaultWidth:"wide",formattingValues:WM,defaultFormattingWidth:"wide"})};function sl(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const l=a[0],u=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?QM(u,v=>v.test(l)):GM(u,v=>v.test(l));let h;h=t.valueCallback?t.valueCallback(d):d,h=r.valueCallback?r.valueCallback(h):h;const g=e.slice(l.length);return{value:h,rest:g}}}function GM(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function QM(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function YM(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=r.valueCallback?r.valueCallback(l):l;const u=e.slice(i.length);return{value:l,rest:u}}}const ZM=/^(\d+)(th|st|nd|rd)?/i,JM=/\d+/i,XM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},e3={any:[/^b/i,/^(a|c)/i]},t3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},r3={any:[/1/i,/2/i,/3/i,/4/i]},n3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},s3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},i3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},o3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},a3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},l3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},c3={ordinalNumber:YM({matchPattern:ZM,parsePattern:JM,valueCallback:t=>parseInt(t,10)}),era:sl({matchPatterns:XM,defaultMatchWidth:"wide",parsePatterns:e3,defaultParseWidth:"any"}),quarter:sl({matchPatterns:t3,defaultMatchWidth:"wide",parsePatterns:r3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:sl({matchPatterns:n3,defaultMatchWidth:"wide",parsePatterns:s3,defaultParseWidth:"any"}),day:sl({matchPatterns:i3,defaultMatchWidth:"wide",parsePatterns:o3,defaultParseWidth:"any"}),dayPeriod:sl({matchPatterns:a3,defaultMatchWidth:"any",parsePatterns:l3,defaultParseWidth:"any"})},u3={code:"en-US",formatDistance:AM,formatLong:MM,formatRelative:FM,localize:KM,match:c3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function d3(t){const e=ts(t);return CM(e,jM(e))+1}function f3(t){const e=ts(t),r=+td(e)-+OM(e);return Math.round(r/vS)+1}function wS(t,e){const r=ts(t),n=r.getFullYear(),i=jd(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=io(t,0);l.setFullYear(n+1,0,a),l.setHours(0,0,0,0);const u=ql(l,e),d=io(t,0);d.setFullYear(n,0,a),d.setHours(0,0,0,0);const h=ql(d,e);return r.getTime()>=u.getTime()?n+1:r.getTime()>=h.getTime()?n:n-1}function h3(t,e){const r=jd(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=wS(t,e),a=io(t,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),ql(a,e)}function p3(t,e){const r=ts(t),n=+ql(r,e)-+h3(r,e);return Math.round(n/vS)+1}function Tt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const ui={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Tt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Tt(r+1,2)},d(t,e){return Tt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Tt(t.getHours()%12||12,e.length)},H(t,e){return Tt(t.getHours(),e.length)},m(t,e){return Tt(t.getMinutes(),e.length)},s(t,e){return Tt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Tt(i,e.length)}},zo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Gw={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return ui.y(t,e)},Y:function(t,e,r,n){const i=wS(t,n),a=i>0?i:1-i;if(e==="YY"){const l=a%100;return Tt(l,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Tt(a,e.length)},R:function(t,e){const r=yS(t);return Tt(r,e.length)},u:function(t,e){const r=t.getFullYear();return Tt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Tt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Tt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return ui.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Tt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=p3(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Tt(i,e.length)},I:function(t,e,r){const n=f3(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Tt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):ui.d(t,e)},D:function(t,e,r){const n=d3(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Tt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Tt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Tt(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Tt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=zo.noon:n===0?i=zo.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=zo.evening:n>=12?i=zo.afternoon:n>=4?i=zo.morning:i=zo.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ui.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):ui.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Tt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Tt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):ui.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):ui.s(t,e)},S:function(t,e){return ui.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Yw(n);case"XXXX":case"XX":return Vi(n);default:return Vi(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return Yw(n);case"xxxx":case"xx":return Vi(n);default:return Vi(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Qw(n,":");default:return"GMT"+Vi(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Qw(n,":");default:return"GMT"+Vi(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Tt(n,e.length)},T:function(t,e,r){const n=t.getTime();return Tt(n,e.length)}};function Qw(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+e+Tt(a,2)}function Yw(t,e){return t%60===0?(t>0?"-":"+")+Tt(Math.abs(t)/60,2):Vi(t,e)}function Vi(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Tt(Math.trunc(n/60),2),a=Tt(n%60,2);return r+i+e+a}const Zw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},bS=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},g3=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return Zw(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Zw(n,e)).replace("{{time}}",bS(i,e))},m3={p:bS,P:g3},v3=/^D+$/,y3=/^Y+$/,w3=["D","DD","YY","YYYY"];function b3(t){return v3.test(t)}function x3(t){return y3.test(t)}function _3(t,e,r){const n=S3(t,e,r);if(console.warn(n),w3.includes(t))throw new RangeError(n)}function S3(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const k3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,E3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,T3=/^'([^]*?)'?$/,C3=/''/g,O3=/[a-zA-Z]/;function P3(t,e,r){const n=jd(),i=n.locale??u3,a=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,l=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,u=ts(t);if(!NM(u))throw new RangeError("Invalid time value");let d=e.match(E3).map(g=>{const v=g[0];if(v==="p"||v==="P"){const y=m3[v];return y(g,i.formatLong)}return g}).join("").match(k3).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const v=g[0];if(v==="'")return{isToken:!1,value:N3(g)};if(Gw[v])return{isToken:!0,value:g};if(v.match(O3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:g}});i.localize.preprocessor&&(d=i.localize.preprocessor(u,d));const h={firstWeekContainsDate:a,weekStartsOn:l,locale:i};return d.map(g=>{if(!g.isToken)return g.value;const v=g.value;(x3(v)||b3(v))&&_3(v,e,String(t));const y=Gw[v[0]];return y(u,v,i.localize,h)}).join("")}function N3(t){const e=t.match(T3);return e?e[1].replace(C3,"'"):t}const j3="auth_token";function vu(){try{return localStorage.getItem(j3)}catch{return null}}function R3(){const{user:t}=lo(),e=sd(),[,r]=oo(),{toast:n}=ao(),[i,a]=b.useState(""),[l,u]=b.useState(!1),[d,h]=b.useState(!1),[g,v]=b.useState([]),{data:y,isLoading:x}=Pu({queryKey:[`/api/games/${t?.id}`],enabled:!!t?.id});if(b.useEffect(()=>{t?.email&&a(t.email)},[t?.email]),b.useEffect(()=>{(async()=>{if(t){h(!0);try{const E=vu(),C=await fetch(`${Qr}/api/inbox`,{headers:E?{Authorization:`Bearer ${E}`}:{}});if(C.ok){const T=await C.json();v(T||[])}}catch(E){console.error("Failed to load inbox",E)}finally{h(!1)}}})()},[t]),!t)return null;const S=async()=>{if(!i){n({title:"Li",description:"Vui lng nhp email",variant:"destructive"});return}u(!0);try{const _=vu(),E=await fetch(Qr+"/api/user/email",{method:"POST",headers:_?{"Content-Type":"application/json",Authorization:`Bearer ${_}`}:{"Content-Type":"application/json"},body:JSON.stringify({email:i})});if(!E.ok){const C=await E.json().catch(()=>null);throw new Error(C?.message||"Lu email tht bi")}e.setQueryData([zn.users.me.path],C=>C&&{...C,email:i}),n({title:" lu email",description:"Email s dng  t li mt khu khi qun."})}catch(_){const E=_ instanceof Error?_.message:"C li xy ra, vui lng th li";n({title:"Li",description:E,variant:"destructive"})}finally{u(!1)}};return p.jsxs("div",{className:"min-h-screen bg-[#020617] text-white p-4 md:p-8 relative overflow-hidden",children:[p.jsx("div",{className:"bg-glow-layer"}),p.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[p.jsx("header",{className:"flex items-center justify-between mb-8",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(ut,{variant:"ghost",size:"icon",onClick:()=>r("/"),className:"hover:bg-white/10 rounded-xl",children:p.jsx(nx,{className:"w-5 h-5 text-slate-400"})}),p.jsxs("h1",{className:"text-3xl font-black italic tracking-tighter",children:["H s ",p.jsx("span",{className:"text-indigo-500",children:"ngi chi"})]})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[p.jsxs(as,{className:"bg-slate-900/50 border-white/10 backdrop-blur-md",children:[p.jsxs(Rs,{className:"flex flex-row items-center justify-between pb-2",children:[p.jsx(As,{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"im Elo"}),p.jsx(ud,{className:"w-4 h-4 text-yellow-500"})]}),p.jsxs(ls,{children:[p.jsx("div",{className:"text-4xl font-black text-white",children:t.rating||0}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Elo hin ti"})]})]}),p.jsxs(as,{className:"bg-slate-900/50 border-white/10 backdrop-blur-md md:col-span-3",children:[p.jsx(Rs,{className:"flex flex-row items-center justify-between pb-2",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(gp,{className:"w-4 h-4 text-indigo-400"}),p.jsx(As,{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"Email ti khon"})]})}),p.jsxs(ls,{children:[p.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-stretch md:items-center",children:[p.jsx(os,{type:"email",placeholder:"ban@example.com",value:i,onChange:_=>a(_.target.value),className:"glass-input h-11 rounded-xl text-sm md:text-base"}),p.jsx(ut,{onClick:S,disabled:l,className:"md:w-auto w-full h-11 rounded-xl font-bold",children:l?"ang lu...":"Lu email"})]}),p.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Email dng  nhn m khi bn bm qun mt khu."})]})]}),p.jsxs(as,{className:"bg-slate-900/50 border-white/10 backdrop-blur-md",children:[p.jsxs(Rs,{className:"flex flex-row items-center justify-between pb-2",children:[p.jsx(As,{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"S vn  chi"}),p.jsx(ix,{className:"w-4 h-4 text-indigo-500"})]}),p.jsxs(ls,{children:[p.jsx("div",{className:"text-4xl font-black text-white",children:t.gamesPlayed||0}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Tng s vn"})]})]}),p.jsxs(as,{className:"bg-slate-900/50 border-white/10 backdrop-blur-md",children:[p.jsxs(Rs,{className:"flex flex-row items-center justify-between pb-2",children:[p.jsx(As,{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"Tham gia t"}),p.jsx(pC,{className:"w-4 h-4 text-emerald-500"})]}),p.jsxs(ls,{children:[p.jsx("div",{className:"text-xl font-bold text-white",children:"Hm nay"}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Va tham gia"})]})]}),p.jsxs(as,{className:"bg-slate-900/50 border-white/10 backdrop-blur-md md:col-span-3",children:[p.jsx(Rs,{className:"flex flex-row items-center justify-between pb-2",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(gp,{className:"w-4 h-4 text-indigo-400"}),p.jsx(As,{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"Hm th li mi u"})]})}),p.jsx(ls,{children:d?p.jsx("div",{className:"text-sm text-slate-500",children:"ang ti li mi..."}):g.length===0?p.jsx("div",{className:"text-sm text-slate-500",children:"Cha c li mi no."}):p.jsx("div",{className:"space-y-3",children:g.map(_=>p.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-slate-900/60 px-4 py-3",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"text-sm font-bold text-white",children:[_.fromUsername," mi bn u c"]}),p.jsxs("div",{className:"text-[11px] text-slate-500",children:["M phng: ",_.roomId]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(ut,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 rounded-lg",onClick:async()=>{try{const E=vu(),C=await fetch(`${Qr}/api/invite/${_.id}/respond`,{method:"POST",headers:E?{"Content-Type":"application/json",Authorization:`Bearer ${E}`}:{"Content-Type":"application/json"},body:JSON.stringify({action:"accept"})});if(C.ok){const T=await C.json();v(O=>O.filter(A=>A.id!==_.id)),T.roomId&&r(`/game/online/${T.roomId}`)}}catch(E){console.error("Accept invite failed",E)}},children:"Chp nhn"}),p.jsx(ut,{size:"sm",variant:"outline",className:"rounded-lg border-red-500/40 text-red-400",onClick:async()=>{try{const E=vu();(await fetch(`${Qr}/api/invite/${_.id}/respond`,{method:"POST",headers:E?{"Content-Type":"application/json",Authorization:`Bearer ${E}`}:{"Content-Type":"application/json"},body:JSON.stringify({action:"decline"})})).ok&&v(T=>T.filter(O=>O.id!==_.id))}catch(E){console.error("Decline invite failed",E)}},children:"T chi"})]})]},_.id))})})]})]}),p.jsxs("div",{className:"bg-slate-900/50 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:[p.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center gap-2",children:[p.jsx(vC,{className:"w-5 h-5 text-indigo-400"}),p.jsx("h2",{className:"text-xl font-bold text-white",children:"Lch s thi u"})]}),p.jsx("div",{className:"divide-y divide-white/5",children:x?p.jsx("div",{className:"p-8 text-center text-slate-500",children:"ang ti lch s..."}):y&&y.length>0?y.map(_=>{const E=_.whitePlayerId===t.id,C=_.result||"",T=C.includes("Trng thng")?"w":C.includes("en thng")?"b":C.includes("Ha")?"draw":null,U=T===(E?"w":"b")?"bg-emerald-500":T==="draw"?"bg-slate-500":"bg-red-500",z=E?"Cm qun Trng":"Cm qun en",$=C||"Kt qu cha xc nh",J=_.createdAt?P3(new Date(_.createdAt),"MMM d, HH:mm"):"-";return p.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-white/5 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:`w-2 h-12 rounded-full ${U}`}),p.jsxs("div",{children:[p.jsx("div",{className:"font-bold text-white",children:$}),p.jsx("div",{className:"text-sm text-slate-400",children:z})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"text-sm font-mono text-slate-500",children:J}),p.jsxs("div",{className:"text-xs text-indigo-400 mt-1",children:["ID: ",_.id]})]})]},_.id)}):p.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cha c vn no. Hy bt u mt vn u!"})})]})]})]})}const A3="auth_token";function I3(){try{return localStorage.getItem(A3)}catch{return null}}function D3(){const{user:t}=lo(),{toast:e}=ao(),[,r]=oo(),n=b.useRef(null);return b.useEffect(()=>{if(!t)return;let i=!1;n.current||(n.current=new Set);const a=async()=>{try{const u=I3(),d=await fetch(`${Qr}/api/inbox`,{headers:u?{Authorization:`Bearer ${u}`}:{}});if(!d.ok)return;const h=await d.json();if(i||!Array.isArray(h))return;const g=n.current;h.forEach(v=>{g.has(v.id)||(g.add(v.id),e({title:"Li mi thch u mi",description:`${v.fromUsername} mun thch u vi bn!`,action:p.jsx("div",{className:"flex gap-2",children:p.jsx(ut,{size:"sm",onClick:()=>r(`/game/online/${v.roomId}`),children:"Chp nhn"})}),duration:1e4}))})}catch{}};a();const l=window.setInterval(a,1e4);return()=>{i=!0,window.clearInterval(l)}},[t,e,r]),null}function yu({component:t,...e}){const{user:r,isLoading:n}=lo();return n?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#020617]",children:p.jsx(xu,{className:"w-10 h-10 animate-spin text-indigo-500"})}):r?p.jsx(t,{...e}):p.jsx(db,{to:"/auth"})}function L3(){return p.jsxs(p.Fragment,{children:[p.jsx(D3,{}),p.jsxs(jE,{children:[p.jsx(Ro,{path:"/auth",component:JR}),p.jsx(Ro,{path:"/",children:()=>p.jsx(yu,{component:XR})}),p.jsx(Ro,{path:"/game/:mode/:id",children:()=>p.jsx(yu,{component:ZL})}),p.jsx(Ro,{path:"/social",children:()=>p.jsx(yu,{component:kM})}),p.jsx(Ro,{path:"/profile",children:()=>p.jsx(yu,{component:R3})}),p.jsx(Ro,{component:xR})]})]})}function M3(){return p.jsx(ZE,{client:mT,children:p.jsxs($O,{children:[p.jsx(u2,{}),p.jsx(L3,{})]})})}window.addEventListener("unhandledrejection",t=>{t.preventDefault(),console.warn("Unhandled promise rejected:",t.reason)});uE.createRoot(document.getElementById("root")).render(p.jsx(M3,{}));
